(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var s=!1;try{s=this instanceof i}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:t,type:i,key:c,ref:s!==void 0?s:null,props:o}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),m=Symbol.iterator;function v(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function w(E,M,U){this.props=E,this.context=M,this.refs=y,this.updater=U||b}w.prototype.isReactComponent={},w.prototype.setState=function(E,M){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,M,"setState")},w.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function _(){}_.prototype=w.prototype;function R(E,M,U){this.props=E,this.context=M,this.refs=y,this.updater=U||b}var k=R.prototype=new _;k.constructor=R,g(k,w.prototype),k.isPureReactComponent=!0;var C=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function H(E,M,U,$,z,q){return U=q.ref,{$$typeof:t,type:E,key:M,ref:U!==void 0?U:null,props:q}}function I(E,M){return H(E.type,M,void 0,void 0,void 0,E.props)}function F(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function Z(E){var M={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(U){return M[U]})}var N=/\/+/g;function G(E,M){return typeof E=="object"&&E!==null&&E.key!=null?Z(""+E.key):M.toString(36)}function J(){}function ee(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(J,J):(E.status="pending",E.then(function(M){E.status==="pending"&&(E.status="fulfilled",E.value=M)},function(M){E.status==="pending"&&(E.status="rejected",E.reason=M)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function te(E,M,U,$,z){var q=typeof E;(q==="undefined"||q==="boolean")&&(E=null);var P=!1;if(E===null)P=!0;else switch(q){case"bigint":case"string":case"number":P=!0;break;case"object":switch(E.$$typeof){case t:case e:P=!0;break;case u:return P=E._init,te(P(E._payload),M,U,$,z)}}if(P)return z=z(E),P=$===""?"."+G(E,0):$,C(z)?(U="",P!=null&&(U=P.replace(N,"$&/")+"/"),te(z,M,U,"",function(Y){return Y})):z!=null&&(F(z)&&(z=I(z,U+(z.key==null||E&&E.key===z.key?"":(""+z.key).replace(N,"$&/")+"/")+P)),M.push(z)),1;P=0;var V=$===""?".":$+":";if(C(E))for(var L=0;L<E.length;L++)$=E[L],q=V+G($,L),P+=te($,M,U,q,z);else if(L=v(E),typeof L=="function")for(E=L.call(E),L=0;!($=E.next()).done;)$=$.value,q=V+G($,L++),P+=te($,M,U,q,z);else if(q==="object"){if(typeof E.then=="function")return te(ee(E),M,U,$,z);throw M=String(E),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return P}function W(E,M,U){if(E==null)return E;var $=[],z=0;return te(E,$,"","",function(q){return M.call(U,q,z++)}),$}function O(E){if(E._status===-1){var M=E._result;M=M(),M.then(function(U){(E._status===0||E._status===-1)&&(E._status=1,E._result=U)},function(U){(E._status===0||E._status===-1)&&(E._status=2,E._result=U)}),E._status===-1&&(E._status=0,E._result=M)}if(E._status===1)return E._result.default;throw E._result}var j=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function T(){}return react_production.Children={map:W,forEach:function(E,M,U){W(E,function(){M.apply(this,arguments)},U)},count:function(E){var M=0;return W(E,function(){M++}),M},toArray:function(E){return W(E,function(M){return M})||[]},only:function(E){if(!F(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},react_production.Component=w,react_production.Fragment=n,react_production.Profiler=s,react_production.PureComponent=R,react_production.StrictMode=i,react_production.Suspense=p,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(E){return A.H.useMemoCache(E)}},react_production.cache=function(E){return function(){return E.apply(null,arguments)}},react_production.cloneElement=function(E,M,U){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var $=g({},E.props),z=E.key,q=void 0;if(M!=null)for(P in M.ref!==void 0&&(q=void 0),M.key!==void 0&&(z=""+M.key),M)!D.call(M,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&M.ref===void 0||($[P]=M[P]);var P=arguments.length-2;if(P===1)$.children=U;else if(1<P){for(var V=Array(P),L=0;L<P;L++)V[L]=arguments[L+2];$.children=V}return H(E.type,z,void 0,void 0,q,$)},react_production.createContext=function(E){return E={$$typeof:c,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:o,_context:E},E},react_production.createElement=function(E,M,U){var $,z={},q=null;if(M!=null)for($ in M.key!==void 0&&(q=""+M.key),M)D.call(M,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(z[$]=M[$]);var P=arguments.length-2;if(P===1)z.children=U;else if(1<P){for(var V=Array(P),L=0;L<P;L++)V[L]=arguments[L+2];z.children=V}if(E&&E.defaultProps)for($ in P=E.defaultProps,P)z[$]===void 0&&(z[$]=P[$]);return H(E,q,void 0,void 0,null,z)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(E){return{$$typeof:f,render:E}},react_production.isValidElement=F,react_production.lazy=function(E){return{$$typeof:u,_payload:{_status:-1,_result:E},_init:O}},react_production.memo=function(E,M){return{$$typeof:d,type:E,compare:M===void 0?null:M}},react_production.startTransition=function(E){var M=A.T,U={};A.T=U;try{var $=E(),z=A.S;z!==null&&z(U,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(T,j)}catch(q){j(q)}finally{A.T=M}},react_production.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},react_production.use=function(E){return A.H.use(E)},react_production.useActionState=function(E,M,U){return A.H.useActionState(E,M,U)},react_production.useCallback=function(E,M){return A.H.useCallback(E,M)},react_production.useContext=function(E){return A.H.useContext(E)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(E,M){return A.H.useDeferredValue(E,M)},react_production.useEffect=function(E,M,U){var $=A.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(E,M)},react_production.useId=function(){return A.H.useId()},react_production.useImperativeHandle=function(E,M,U){return A.H.useImperativeHandle(E,M,U)},react_production.useInsertionEffect=function(E,M){return A.H.useInsertionEffect(E,M)},react_production.useLayoutEffect=function(E,M){return A.H.useLayoutEffect(E,M)},react_production.useMemo=function(E,M){return A.H.useMemo(E,M)},react_production.useOptimistic=function(E,M){return A.H.useOptimistic(E,M)},react_production.useReducer=function(E,M,U){return A.H.useReducer(E,M,U)},react_production.useRef=function(E){return A.H.useRef(E)},react_production.useState=function(E){return A.H.useState(E)},react_production.useSyncExternalStore=function(E,M,U){return A.H.useSyncExternalStore(E,M,U)},react_production.useTransition=function(){return A.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(W,O){var j=W.length;W.push(O);e:for(;0<j;){var T=j-1>>>1,E=W[T];if(0<s(E,O))W[T]=O,W[j]=E,j=T;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var O=W[0],j=W.pop();if(j!==O){W[0]=j;e:for(var T=0,E=W.length,M=E>>>1;T<M;){var U=2*(T+1)-1,$=W[U],z=U+1,q=W[z];if(0>s($,j))z<E&&0>s(q,$)?(W[T]=q,W[z]=j,T=z):(W[T]=$,W[U]=j,T=U);else if(z<E&&0>s(q,j))W[T]=q,W[z]=j,T=z;else break e}}return O}function s(W,O){var j=W.sortIndex-O.sortIndex;return j!==0?j:W.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var p=[],d=[],u=1,m=null,v=3,b=!1,g=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function C(W){for(var O=n(d);O!==null;){if(O.callback===null)i(d);else if(O.startTime<=W)i(d),O.sortIndex=O.expirationTime,e(p,O);else break;O=n(d)}}function A(W){if(y=!1,C(W),!g)if(n(p)!==null)g=!0,D||(D=!0,G());else{var O=n(d);O!==null&&te(A,O.startTime-W)}}var D=!1,H=-1,I=5,F=-1;function Z(){return w?!0:!(t.unstable_now()-F<I)}function N(){if(w=!1,D){var W=t.unstable_now();F=W;var O=!0;try{e:{g=!1,y&&(y=!1,R(H),H=-1),b=!0;var j=v;try{t:{for(C(W),m=n(p);m!==null&&!(m.expirationTime>W&&Z());){var T=m.callback;if(typeof T=="function"){m.callback=null,v=m.priorityLevel;var E=T(m.expirationTime<=W);if(W=t.unstable_now(),typeof E=="function"){m.callback=E,C(W),O=!0;break t}m===n(p)&&i(p),C(W)}else i(p);m=n(p)}if(m!==null)O=!0;else{var M=n(d);M!==null&&te(A,M.startTime-W),O=!1}}break e}finally{m=null,v=j,b=!1}O=void 0}}finally{O?G():D=!1}}}var G;if(typeof k=="function")G=function(){k(N)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=N,G=function(){ee.postMessage(null)}}else G=function(){_(N,0)};function te(W,O){H=_(function(){W(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var j=v;v=O;try{return W()}finally{v=j}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(W,O){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var j=v;v=W;try{return O()}finally{v=j}},t.unstable_scheduleCallback=function(W,O,j){var T=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?T+j:T):j=T,W){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=j+E,W={id:u++,callback:O,priorityLevel:W,startTime:j,expirationTime:E,sortIndex:-1},j>T?(W.sortIndex=j,e(d,W),n(p)===null&&W===n(d)&&(y?(R(H),H=-1):y=!0,te(A,j-T))):(W.sortIndex=E,e(p,W),g||b||(g=!0,D||(D=!0,G()))),W},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(W){var O=v;return function(){var j=v;v=O;try{return W.apply(this,arguments)}finally{v=j}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(p){var d="https://react.dev/errors/"+p;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+p+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(p,d,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:p,containerInfo:d,implementation:u}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,d){if(p==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,reactDom_production.createPortal=function(p,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(p,d,null,u)},reactDom_production.flushSync=function(p){var d=c.T,u=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=d,i.p=u,i.d.f()}},reactDom_production.preconnect=function(p,d){typeof p=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(p,d))},reactDom_production.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},reactDom_production.preinit=function(p,d){if(typeof p=="string"&&d&&typeof d.as=="string"){var u=d.as,m=f(u,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?i.d.S(p,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:b}):u==="script"&&i.d.X(p,{crossOrigin:m,integrity:v,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},reactDom_production.preinitModule=function(p,d){if(typeof p=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=f(d.as,d.crossOrigin);i.d.M(p,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(p)},reactDom_production.preload=function(p,d){if(typeof p=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,m=f(u,d.crossOrigin);i.d.L(p,u,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},reactDom_production.preloadModule=function(p,d){if(typeof p=="string")if(d){var u=f(d.as,d.crossOrigin);i.d.m(p,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(p)},reactDom_production.requestFormReset=function(p){i.d.r(p)},reactDom_production.unstable_batchedUpdates=function(p,d){return p(d)},reactDom_production.useFormState=function(p,d,u){return c.H.useFormState(p,d,u)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),n=requireReactDom();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function c(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function p(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,h=a;;){var x=l.return;if(x===null)break;var S=x.alternate;if(S===null){if(h=x.return,h!==null){l=h;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===l)return f(x),r;if(S===h)return f(x),a;S=S.sibling}throw Error(i(188))}if(l.return!==h.return)l=x,h=S;else{for(var K=!1,ie=x.child;ie;){if(ie===l){K=!0,l=x,h=S;break}if(ie===h){K=!0,h=x,l=S;break}ie=ie.sibling}if(!K){for(ie=S.child;ie;){if(ie===l){K=!0,l=S,h=x;break}if(ie===h){K=!0,h=S,l=x;break}ie=ie.sibling}if(!K)throw Error(i(189))}}if(l.alternate!==h)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function d(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=d(r),a!==null)return a;r=r.sibling}return null}var u=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var J=Symbol.for("react.client.reference");function ee(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===J?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case g:return"Fragment";case w:return"Profiler";case y:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList";case F:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case k:return(r.displayName||"Context")+".Provider";case R:return(r._context.displayName||"Context")+".Consumer";case C:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return a=r.displayName||null,a!==null?a:ee(r.type)||"Memo";case I:a=r._payload,r=r._init;try{return ee(r(a))}catch{}}return null}var te=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},T=[],E=-1;function M(r){return{current:r}}function U(r){0>E||(r.current=T[E],T[E]=null,E--)}function $(r,a){E++,T[E]=r.current,r.current=a}var z=M(null),q=M(null),P=M(null),V=M(null);function L(r,a){switch($(P,a),$(q,r),$(z,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Eh(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Eh(a),r=wh(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}U(z),$(z,r)}function Y(){U(z),U(q),U(P)}function ne(r){r.memoizedState!==null&&$(V,r);var a=z.current,l=wh(a,r.type);a!==l&&($(q,r),$(z,l))}function re(r){q.current===r&&(U(z),U(q)),V.current===r&&(U(V),qs._currentValue=j)}var le=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,we=t.unstable_shouldYield,Te=t.unstable_requestPaint,Re=t.unstable_now,fe=t.unstable_getCurrentPriorityLevel,be=t.unstable_ImmediatePriority,Ue=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Ke=t.unstable_IdlePriority,ke=t.log,He=t.unstable_setDisableYieldValue,nt=null,Xe=null;function vt(r){if(typeof ke=="function"&&He(r),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(nt,r)}catch{}}var pt=Math.clz32?Math.clz32:Pn,Mt=Math.log,jt=Math.LN2;function Pn(r){return r>>>=0,r===0?32:31-(Mt(r)/jt|0)|0}var $t=256,Ie=4194304;function xe(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ve(r,a,l){var h=r.pendingLanes;if(h===0)return 0;var x=0,S=r.suspendedLanes,K=r.pingedLanes;r=r.warmLanes;var ie=h&134217727;return ie!==0?(h=ie&~S,h!==0?x=xe(h):(K&=ie,K!==0?x=xe(K):l||(l=ie&~r,l!==0&&(x=xe(l))))):(ie=h&~S,ie!==0?x=xe(ie):K!==0?x=xe(K):l||(l=h&~r,l!==0&&(x=xe(l)))),x===0?0:a!==0&&a!==x&&(a&S)===0&&(S=x&-x,l=a&-a,S>=l||S===32&&(l&4194048)!==0)?a:x}function Ge(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function kt(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dt(){var r=$t;return $t<<=1,($t&4194048)===0&&($t=256),r}function Ct(){var r=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),r}function Bn(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function bn(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Wn(r,a,l,h,x,S){var K=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var ie=r.entanglements,ce=r.expirationTimes,Ae=r.hiddenUpdates;for(l=K&~l;0<l;){var Oe=31-pt(l),Ve=1<<Oe;ie[Oe]=0,ce[Oe]=-1;var Ce=Ae[Oe];if(Ce!==null)for(Ae[Oe]=null,Oe=0;Oe<Ce.length;Oe++){var Pe=Ce[Oe];Pe!==null&&(Pe.lane&=-536870913)}l&=~Ve}h!==0&&vn(r,h,0),S!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=S&~(K&~a))}function vn(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var h=31-pt(a);r.entangledLanes|=a,r.entanglements[h]=r.entanglements[h]|1073741824|l&4194090}function Kn(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var h=31-pt(l),x=1<<h;x&a|r[h]&a&&(r[h]|=a),l&=~x}}function Nn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Qn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function tn(){var r=O.p;return r!==0?r:(r=window.event,r===void 0?32:$h(r.type))}function yi(r,a){var l=O.p;try{return O.p=r,a()}finally{O.p=l}}var In=Math.random().toString(36).slice(2),fn="__reactFiber$"+In,_n="__reactProps$"+In,Yn="__reactContainer$"+In,Sn="__reactEvents$"+In,zi="__reactListeners$"+In,$r="__reactHandles$"+In,Ys="__reactResources$"+In,zr="__reactMarker$"+In;function Ya(r){delete r[fn],delete r[_n],delete r[Sn],delete r[zi],delete r[$r]}function or(r){var a=r[fn];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Yn]||l[fn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=Th(r);r!==null;){if(l=r[fn])return l;r=Th(r)}return a}r=l,l=r.parentNode}return null}function lr(r){if(r=r[fn]||r[Yn]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function qr(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function cr(r){var a=r[Ys];return a||(a=r[Ys]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function kn(r){r[zr]=!0}var Xs=new Set,Zs={};function qi(r,a){ur(r,a),ur(r+"Capture",a)}function ur(r,a){for(Zs[r]=a,r=0;r<a.length;r++)Xs.add(a[r])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Js={},Qs={};function da(r){return le.call(Qs,r)?!0:le.call(Js,r)?!1:cl.test(r)?Qs[r]=!0:(Js[r]=!0,!1)}function ha(r,a,l){if(da(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function fa(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function Ri(r,a,l,h){if(h===null)r.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+h)}}var Xa,eo;function dr(r){if(Xa===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Xa=a&&a[1]||"",eo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xa+r+eo}var hr=!1;function pa(r,a){if(!r||hr)return"";hr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Ve=function(){throw Error()};if(Object.defineProperty(Ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ve,[])}catch(Pe){var Ce=Pe}Reflect.construct(r,[],Ve)}else{try{Ve.call()}catch(Pe){Ce=Pe}r.call(Ve.prototype)}}else{try{throw Error()}catch(Pe){Ce=Pe}(Ve=r())&&typeof Ve.catch=="function"&&Ve.catch(function(){})}}catch(Pe){if(Pe&&Ce&&typeof Pe.stack=="string")return[Pe.stack,Ce.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=h.DetermineComponentFrameRoot(),K=S[0],ie=S[1];if(K&&ie){var ce=K.split(`
`),Ae=ie.split(`
`);for(x=h=0;h<ce.length&&!ce[h].includes("DetermineComponentFrameRoot");)h++;for(;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;if(h===ce.length||x===Ae.length)for(h=ce.length-1,x=Ae.length-1;1<=h&&0<=x&&ce[h]!==Ae[x];)x--;for(;1<=h&&0<=x;h--,x--)if(ce[h]!==Ae[x]){if(h!==1||x!==1)do if(h--,x--,0>x||ce[h]!==Ae[x]){var Oe=`
`+ce[h].replace(" at new "," at ");return r.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",r.displayName)),Oe}while(1<=h&&0<=x);break}}}finally{hr=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?dr(l):""}function to(r){switch(r.tag){case 26:case 27:case 5:return dr(r.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 15:return pa(r.type,!1);case 11:return pa(r.type.render,!1);case 1:return pa(r.type,!0);case 31:return dr("Activity");default:return""}}function no(r){try{var a="";do a+=to(r),r=r.return;while(r);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function io(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ul(r){var a=io(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),h=""+r[a];if(!r.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var x=l.get,S=l.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return x.call(this)},set:function(K){h=""+K,S.call(this,K)}}),Object.defineProperty(r,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(K){h=""+K},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function ma(r){r._valueTracker||(r._valueTracker=ul(r))}function ga(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return r&&(h=io(r)?r.checked?"true":"false":r.value),r=h,r!==l?(a.setValue(r),!0):!1}function va(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var dl=/[\n"\\]/g;function ei(r){return r.replace(dl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ya(r,a,l,h,x,S,K,ie){r.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?r.type=K:r.removeAttribute("type"),a!=null?K==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Un(a)):r.value!==""+Un(a)&&(r.value=""+Un(a)):K!=="submit"&&K!=="reset"||r.removeAttribute("value"),a!=null?Za(r,K,Un(a)):l!=null?Za(r,K,Un(l)):h!=null&&r.removeAttribute("value"),x==null&&S!=null&&(r.defaultChecked=!!S),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?r.name=""+Un(ie):r.removeAttribute("name")}function ro(r,a,l,h,x,S,K,ie){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.type=S),a!=null||l!=null){if(!(S!=="submit"&&S!=="reset"||a!=null))return;l=l!=null?""+Un(l):"",a=a!=null?""+Un(a):l,ie||a===r.value||(r.value=a),r.defaultValue=a}h=h??x,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=ie?r.checked:!!h,r.defaultChecked=!!h,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(r.name=K)}function Za(r,a,l){a==="number"&&va(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Di(r,a,l,h){if(r=r.options,a){a={};for(var x=0;x<l.length;x++)a["$"+l[x]]=!0;for(l=0;l<r.length;l++)x=a.hasOwnProperty("$"+r[l].value),r[l].selected!==x&&(r[l].selected=x),x&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Un(l),a=null,x=0;x<r.length;x++){if(r[x].value===l){r[x].selected=!0,h&&(r[x].defaultSelected=!0);return}a!==null||r[x].disabled||(a=r[x])}a!==null&&(a.selected=!0)}}function ao(r,a,l){if(a!=null&&(a=""+Un(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+Un(l):""}function Ja(r,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(i(92));if(te(h)){if(1<h.length)throw Error(i(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Un(a),r.defaultValue=l,h=r.textContent,h===l&&h!==""&&h!==null&&(r.value=h)}function Hi(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var hl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xa(r,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":h?r.setProperty(a,l):typeof l!="number"||l===0||hl.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function so(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var x in a)h=a[x],a.hasOwnProperty(x)&&l[x]!==h&&xa(r,x,h)}else for(var S in a)a.hasOwnProperty(S)&&xa(r,S,a[S])}function Qa(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(r){return fl.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ts=null;function pr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Oi=null,mr=null;function ns(r){var a=lr(r);if(a&&(r=a.stateNode)){var l=r[_n]||null;e:switch(r=a.stateNode,a.type){case"input":if(ya(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ei(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==r&&h.form===r.form){var x=h[_n]||null;if(!x)throw Error(i(90));ya(h,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===r.form&&ga(h)}break e;case"textarea":ao(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Di(r,!!l.multiple,a,!1)}}}var ba=!1;function _a(r,a,l){if(ba)return r(a,l);ba=!0;try{var h=r(a);return h}finally{if(ba=!1,(Oi!==null||mr!==null)&&($o(),Oi&&(a=Oi,r=mr,mr=Oi=null,ns(a),r)))for(a=0;a<r.length;a++)ns(r[a])}}function Gr(r,a){var l=r.stateNode;if(l===null)return null;var h=l[_n]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),is=!1;if(Ai)try{var B={};Object.defineProperty(B,"passive",{get:function(){is=!0}}),window.addEventListener("test",B,B),window.removeEventListener("test",B,B)}catch{is=!1}var Q=null,ae=null,oe=null;function ue(){if(oe)return oe;var r,a=ae,l=a.length,h,x="value"in Q?Q.value:Q.textContent,S=x.length;for(r=0;r<l&&a[r]===x[r];r++);var K=l-r;for(h=1;h<=K&&a[l-h]===x[S-h];h++);return oe=x.slice(r,1<h?1-h:void 0)}function de(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function ye(){return!0}function he(){return!1}function se(r){function a(l,h,x,S,K){this._reactName=l,this._targetInst=x,this.type=h,this.nativeEvent=S,this.target=K,this.currentTarget=null;for(var ie in r)r.hasOwnProperty(ie)&&(l=r[ie],this[ie]=l?l(S):S[ie]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ye:he,this.isPropagationStopped=he,this}return u(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ye)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ye)},persist:function(){},isPersistent:ye}),a}var pe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},me=se(pe),Me=u({},pe,{view:0,detail:0}),De=se(Me),je,We,qe,ze=u({},Me,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qe&&(qe&&r.type==="mousemove"?(je=r.screenX-qe.screenX,We=r.screenY-qe.screenY):We=je=0,qe=r),je)},movementY:function(r){return"movementY"in r?r.movementY:We}}),bt=se(ze),it=u({},ze,{dataTransfer:0}),at=se(it),ht=u({},Me,{relatedTarget:0}),Ze=se(ht),mt=u({},pe,{animationName:0,elapsedTime:0,pseudoElement:0}),lt=se(mt),It=u({},pe,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Dt=se(It),Lt=u({},pe,{data:0}),Ft=se(Lt),zt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Jt[r])?!!a[r]:!1}function nn(){return yn}var dn=u({},Me,{key:function(r){if(r.key){var a=zt[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=de(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?pn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nn,charCode:function(r){return r.type==="keypress"?de(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?de(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hn=se(dn),ln=u({},ze,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jn=se(ln),xi=u({},Me,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nn}),ci=se(xi),Rn=u({},pe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xn=se(Rn),Ti=u({},ze,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ct=se(Ti),st=u({},pe,{newState:0,oldState:0}),Qe=se(st),tt=[9,13,27,32],Je=Ai&&"CompositionEvent"in window,ut=null;Ai&&"documentMode"in document&&(ut=document.documentMode);var gt=Ai&&"TextEvent"in window&&!ut,et=Ai&&(!Je||ut&&8<ut&&11>=ut),Ye=" ",yt=!1;function At(r,a){switch(r){case"keyup":return tt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kt(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bt=!1;function Mn(r,a){switch(r){case"compositionend":return Kt(a);case"keypress":return a.which!==32?null:(yt=!0,Ye);case"textInput":return r=a.data,r===Ye&&yt?null:r;default:return null}}function ti(r,a){if(Bt)return r==="compositionend"||!Je&&At(r,a)?(r=ue(),oe=ae=Q=null,Bt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return et&&a.locale!=="ko"?null:a.data;default:return null}}var _t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!_t[r.type]:a==="textarea"}function Yt(r,a,l,h){Oi?mr?mr.push(h):mr=[h]:Oi=h,a=Ko(a,"onChange"),0<a.length&&(l=new me("onChange","change",null,l,h),r.push({event:l,listeners:a}))}var Ht=null,cn=null;function Gt(r){gh(r,0)}function ui(r){var a=qr(r);if(ga(a))return r}function Gi(r,a){if(r==="change")return a}var Wr=!1;if(Ai){var Ci;if(Ai){var Wi="oninput"in document;if(!Wi){var oo=document.createElement("div");oo.setAttribute("oninput","return;"),Wi=typeof oo.oninput=="function"}Ci=Wi}else Ci=!1;Wr=Ci&&(!document.documentMode||9<document.documentMode)}function Zn(){Ht&&(Ht.detachEvent("onpropertychange",rs),cn=Ht=null)}function rs(r){if(r.propertyName==="value"&&ui(cn)){var a=[];Yt(a,cn,r,pr(r)),_a(Gt,a)}}function pl(r,a,l){r==="focusin"?(Zn(),Ht=a,cn=l,Ht.attachEvent("onpropertychange",rs)):r==="focusout"&&Zn()}function Xt(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ui(cn)}function ml(r,a){if(r==="click")return ui(a)}function Ni(r,a){if(r==="input"||r==="change")return ui(a)}function gl(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var ni=typeof Object.is=="function"?Object.is:gl;function Kr(r,a){if(ni(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var x=l[h];if(!le.call(a,x)||!ni(r[x],a[x]))return!1}return!0}function Ea(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function as(r,a){var l=Ea(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=a&&h>=a)return{node:l,offset:a-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ea(l)}}function lo(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?lo(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function co(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=va(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=va(r.document)}return a}function ss(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var Ii=Ai&&"documentMode"in document&&11>=document.documentMode,gr=null,wa=null,vr=null,Yr=!1;function os(r,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Yr||gr==null||gr!==va(h)||(h=gr,"selectionStart"in h&&ss(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),vr&&Kr(vr,h)||(vr=h,h=Ko(wa,"onSelect"),0<h.length&&(a=new me("onSelect","select",null,a,l),r.push({event:a,listeners:h}),a.target=gr)))}function Li(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var ai={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},ls={},uo={};Ai&&(uo=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function Pi(r){if(ls[r])return ls[r];if(!ai[r])return r;var a=ai[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in uo)return ls[r]=a[l];return r}var Sa=Pi("animationend"),Ra=Pi("animationiteration"),cs=Pi("animationstart"),vl=Pi("transitionrun"),us=Pi("transitionstart"),yl=Pi("transitioncancel"),ho=Pi("transitionend"),ds=new Map,$e="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$e.push("scrollEnd");function ot(r,a){ds.set(r,a),qi(a,[r])}var Pt=new WeakMap;function Tt(r,a){if(typeof r=="object"&&r!==null){var l=Pt.get(r);return l!==void 0?l:(a={value:r,source:a,stack:no(a)},Pt.set(r,a),a)}return{value:r,source:a,stack:no(a)}}var St=[],Rt=0,mn=0;function di(){for(var r=Rt,a=mn=Rt=0;a<r;){var l=St[a];St[a++]=null;var h=St[a];St[a++]=null;var x=St[a];St[a++]=null;var S=St[a];if(St[a++]=null,h!==null&&x!==null){var K=h.pending;K===null?x.next=x:(x.next=K.next,K.next=x),h.pending=x}S!==0&&Xr(l,x,S)}}function yr(r,a,l,h){St[Rt++]=r,St[Rt++]=a,St[Rt++]=l,St[Rt++]=h,mn|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function xr(r,a,l,h){return yr(r,a,l,h),Zr(r)}function ii(r,a){return yr(r,null,null,a),Zr(r)}function Xr(r,a,l){r.lanes|=l;var h=r.alternate;h!==null&&(h.lanes|=l);for(var x=!1,S=r.return;S!==null;)S.childLanes|=l,h=S.alternate,h!==null&&(h.childLanes|=l),S.tag===22&&(r=S.stateNode,r===null||r._visibility&1||(x=!0)),r=S,S=S.return;return r.tag===3?(S=r.stateNode,x&&a!==null&&(x=31-pt(l),r=S.hiddenUpdates,h=r[x],h===null?r[x]=[a]:h.push(a),a.lane=l|536870912),S):null}function Zr(r){if(50<Is)throw Is=0,Sc=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var ki={};function br(r,a,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(r,a,l,h){return new br(r,a,l,h)}function xl(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ki(r,a){var l=r.alternate;return l===null?(l=hi(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function eu(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function fo(r,a,l,h,x,S){var K=0;if(h=r,typeof r=="function")xl(r)&&(K=1);else if(typeof r=="string")K=Xf(r,l,z.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case F:return r=hi(31,l,a,x),r.elementType=F,r.lanes=S,r;case g:return Jr(l.children,x,S,a);case y:K=8,x|=24;break;case w:return r=hi(12,l,a,x|2),r.elementType=w,r.lanes=S,r;case A:return r=hi(13,l,a,x),r.elementType=A,r.lanes=S,r;case D:return r=hi(19,l,a,x),r.elementType=D,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case _:case k:K=10;break e;case R:K=9;break e;case C:K=11;break e;case H:K=14;break e;case I:K=16,h=null;break e}K=29,l=Error(i(130,r===null?"null":typeof r,"")),h=null}return a=hi(K,l,a,x),a.elementType=r,a.type=h,a.lanes=S,a}function Jr(r,a,l,h){return r=hi(7,r,h,a),r.lanes=l,r}function bl(r,a,l){return r=hi(6,r,null,a),r.lanes=l,r}function _l(r,a,l){return a=hi(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Aa=[],Ta=0,po=null,mo=0,bi=[],_i=0,Qr=null,Yi=1,Xi="";function ea(r,a){Aa[Ta++]=mo,Aa[Ta++]=po,po=r,mo=a}function tu(r,a,l){bi[_i++]=Yi,bi[_i++]=Xi,bi[_i++]=Qr,Qr=r;var h=Yi;r=Xi;var x=32-pt(h)-1;h&=~(1<<x),l+=1;var S=32-pt(a)+x;if(30<S){var K=x-x%5;S=(h&(1<<K)-1).toString(32),h>>=K,x-=K,Yi=1<<32-pt(a)+x|l<<x|h,Xi=S+r}else Yi=1<<S|l<<x|h,Xi=r}function El(r){r.return!==null&&(ea(r,1),tu(r,1,0))}function wl(r){for(;r===po;)po=Aa[--Ta],Aa[Ta]=null,mo=Aa[--Ta],Aa[Ta]=null;for(;r===Qr;)Qr=bi[--_i],bi[_i]=null,Xi=bi[--_i],bi[_i]=null,Yi=bi[--_i],bi[_i]=null}var ri=null,En=null,Zt=!1,ta=null,Fi=!1,Sl=Error(i(519));function na(r){var a=Error(i(418,""));throw ps(Tt(a,r)),Sl}function nu(r){var a=r.stateNode,l=r.type,h=r.memoizedProps;switch(a[fn]=r,a[_n]=h,l){case"dialog":Vt("cancel",a),Vt("close",a);break;case"iframe":case"object":case"embed":Vt("load",a);break;case"video":case"audio":for(l=0;l<Fs.length;l++)Vt(Fs[l],a);break;case"source":Vt("error",a);break;case"img":case"image":case"link":Vt("error",a),Vt("load",a);break;case"details":Vt("toggle",a);break;case"input":Vt("invalid",a),ro(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),ma(a);break;case"select":Vt("invalid",a);break;case"textarea":Vt("invalid",a),Ja(a,h.value,h.defaultValue,h.children),ma(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||_h(a.textContent,l)?(h.popover!=null&&(Vt("beforetoggle",a),Vt("toggle",a)),h.onScroll!=null&&Vt("scroll",a),h.onScrollEnd!=null&&Vt("scrollend",a),h.onClick!=null&&(a.onclick=Yo),a=!0):a=!1,a||na(r)}function iu(r){for(ri=r.return;ri;)switch(ri.tag){case 5:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:ri=ri.return}}function hs(r){if(r!==ri)return!1;if(!Zt)return iu(r),Zt=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Uc(r.type,r.memoizedProps)),l=!l),l&&En&&na(r),iu(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(a===0){En=Mi(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;r=r.nextSibling}En=null}}else a===27?(a=En,Ir(r.type)?(r=qc,qc=null,En=r):En=a):En=ri?Mi(r.stateNode.nextSibling):null;return!0}function fs(){En=ri=null,Zt=!1}function ru(){var r=ta;return r!==null&&(li===null?li=r:li.push.apply(li,r),ta=null),r}function ps(r){ta===null?ta=[r]:ta.push(r)}var Rl=M(null),ia=null,Zi=null;function _r(r,a,l){$(Rl,a._currentValue),a._currentValue=l}function Ji(r){r._currentValue=Rl.current,U(Rl)}function Al(r,a,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===l)break;r=r.return}}function Tl(r,a,l,h){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var S=x.dependencies;if(S!==null){var K=x.child;S=S.firstContext;e:for(;S!==null;){var ie=S;S=x;for(var ce=0;ce<a.length;ce++)if(ie.context===a[ce]){S.lanes|=l,ie=S.alternate,ie!==null&&(ie.lanes|=l),Al(S.return,l,r),h||(K=null);break e}S=ie.next}}else if(x.tag===18){if(K=x.return,K===null)throw Error(i(341));K.lanes|=l,S=K.alternate,S!==null&&(S.lanes|=l),Al(K,l,r),K=null}else K=x.child;if(K!==null)K.return=x;else for(K=x;K!==null;){if(K===r){K=null;break}if(x=K.sibling,x!==null){x.return=K.return,K=x;break}K=K.return}x=K}}function ms(r,a,l,h){r=null;for(var x=a,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var K=x.alternate;if(K===null)throw Error(i(387));if(K=K.memoizedProps,K!==null){var ie=x.type;ni(x.pendingProps.value,K.value)||(r!==null?r.push(ie):r=[ie])}}else if(x===V.current){if(K=x.alternate,K===null)throw Error(i(387));K.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(qs):r=[qs])}x=x.return}r!==null&&Tl(a,r,l,h),a.flags|=262144}function go(r){for(r=r.firstContext;r!==null;){if(!ni(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ra(r){ia=r,Zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Jn(r){return au(ia,r)}function vo(r,a){return ia===null&&ra(r),au(r,a)}function au(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Zi===null){if(r===null)throw Error(i(308));Zi=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Zi=Zi.next=a;return l}var Kh=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,h){r.push(h)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},Yh=t.unstable_scheduleCallback,Xh=t.unstable_NormalPriority,Ln={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cl(){return{controller:new Kh,data:new Map,refCount:0}}function gs(r){r.refCount--,r.refCount===0&&Yh(Xh,function(){r.controller.abort()})}var vs=null,Pl=0,Ca=0,Pa=null;function Zh(r,a){if(vs===null){var l=vs=[];Pl=0,Ca=jc(),Pa={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Pl++,a.then(su,su),a}function su(){if(--Pl===0&&vs!==null){Pa!==null&&(Pa.status="fulfilled");var r=vs;vs=null,Ca=0,Pa=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Jh(r,a){var l=[],h={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return r.then(function(){h.status="fulfilled",h.value=a;for(var x=0;x<l.length;x++)(0,l[x])(a)},function(x){for(h.status="rejected",h.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),h}var ou=W.S;W.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Zh(r,a),ou!==null&&ou(r,a)};var aa=M(null);function kl(){var r=aa.current;return r!==null?r:un.pooledCache}function yo(r,a){a===null?$(aa,aa.current):$(aa,a.pool)}function lu(){var r=kl();return r===null?null:{parent:Ln._currentValue,pool:r}}var ys=Error(i(460)),cu=Error(i(474)),xo=Error(i(542)),jl={then:function(){}};function uu(r){return r=r.status,r==="fulfilled"||r==="rejected"}function bo(){}function du(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(bo,bo),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,fu(r),r;default:if(typeof a.status=="string")a.then(bo,bo);else{if(r=un,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(h){if(a.status==="pending"){var x=a;x.status="fulfilled",x.value=h}},function(h){if(a.status==="pending"){var x=a;x.status="rejected",x.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,fu(r),r}throw xs=a,ys}}var xs=null;function hu(){if(xs===null)throw Error(i(459));var r=xs;return xs=null,r}function fu(r){if(r===ys||r===xo)throw Error(i(483))}var Er=!1;function Ml(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dl(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function wr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Sr(r,a,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Qt&2)!==0){var x=h.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),h.pending=a,a=Zr(r),Xr(r,null,l),a}return yr(r,h,a,l),Zr(r)}function bs(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=r.pendingLanes,l|=h,a.lanes=l,Kn(r,l)}}function Ol(r,a){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var x=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var K={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};S===null?x=S=K:S=S.next=K,l=l.next}while(l!==null);S===null?x=S=a:S=S.next=a}else x=S=a;l={baseState:h.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:h.shared,callbacks:h.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var Nl=!1;function _s(){if(Nl){var r=Pa;if(r!==null)throw r}}function Es(r,a,l,h){Nl=!1;var x=r.updateQueue;Er=!1;var S=x.firstBaseUpdate,K=x.lastBaseUpdate,ie=x.shared.pending;if(ie!==null){x.shared.pending=null;var ce=ie,Ae=ce.next;ce.next=null,K===null?S=Ae:K.next=Ae,K=ce;var Oe=r.alternate;Oe!==null&&(Oe=Oe.updateQueue,ie=Oe.lastBaseUpdate,ie!==K&&(ie===null?Oe.firstBaseUpdate=Ae:ie.next=Ae,Oe.lastBaseUpdate=ce))}if(S!==null){var Ve=x.baseState;K=0,Oe=Ae=ce=null,ie=S;do{var Ce=ie.lane&-536870913,Pe=Ce!==ie.lane;if(Pe?(qt&Ce)===Ce:(h&Ce)===Ce){Ce!==0&&Ce===Ca&&(Nl=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var wt=r,xt=ie;Ce=a;var sn=l;switch(xt.tag){case 1:if(wt=xt.payload,typeof wt=="function"){Ve=wt.call(sn,Ve,Ce);break e}Ve=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=xt.payload,Ce=typeof wt=="function"?wt.call(sn,Ve,Ce):wt,Ce==null)break e;Ve=u({},Ve,Ce);break e;case 2:Er=!0}}Ce=ie.callback,Ce!==null&&(r.flags|=64,Pe&&(r.flags|=8192),Pe=x.callbacks,Pe===null?x.callbacks=[Ce]:Pe.push(Ce))}else Pe={lane:Ce,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Oe===null?(Ae=Oe=Pe,ce=Ve):Oe=Oe.next=Pe,K|=Ce;if(ie=ie.next,ie===null){if(ie=x.shared.pending,ie===null)break;Pe=ie,ie=Pe.next,Pe.next=null,x.lastBaseUpdate=Pe,x.shared.pending=null}}while(!0);Oe===null&&(ce=Ve),x.baseState=ce,x.firstBaseUpdate=Ae,x.lastBaseUpdate=Oe,S===null&&(x.shared.lanes=0),Mr|=K,r.lanes=K,r.memoizedState=Ve}}function pu(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function mu(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)pu(l[r],a)}var ka=M(null),_o=M(0);function gu(r,a){r=ar,$(_o,r),$(ka,a),ar=r|a.baseLanes}function Il(){$(_o,ar),$(ka,ka.current)}function Ll(){ar=_o.current,U(ka),U(_o)}var Rr=0,Ot=null,rn=null,Dn=null,Eo=!1,ja=!1,sa=!1,wo=0,ws=0,Ma=null,Qh=0;function Tn(){throw Error(i(321))}function Fl(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!ni(r[l],a[l]))return!1;return!0}function Bl(r,a,l,h,x,S){return Rr=S,Ot=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,W.H=r===null||r.memoizedState===null?Qu:ed,sa=!1,S=l(h,x),sa=!1,ja&&(S=yu(a,l,h,x)),vu(r),S}function vu(r){W.H=Po;var a=rn!==null&&rn.next!==null;if(Rr=0,Dn=rn=Ot=null,Eo=!1,ws=0,Ma=null,a)throw Error(i(300));r===null||Vn||(r=r.dependencies,r!==null&&go(r)&&(Vn=!0))}function yu(r,a,l,h){Ot=r;var x=0;do{if(ja&&(Ma=null),ws=0,ja=!1,25<=x)throw Error(i(301));if(x+=1,Dn=rn=null,r.updateQueue!=null){var S=r.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}W.H=of,S=a(l,h)}while(ja);return S}function ef(){var r=W.H,a=r.useState()[0];return a=typeof a.then=="function"?Ss(a):a,r=r.useState()[0],(rn!==null?rn.memoizedState:null)!==r&&(Ot.flags|=1024),a}function Ul(){var r=wo!==0;return wo=0,r}function Vl(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function $l(r){if(Eo){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Eo=!1}Rr=0,Dn=rn=Ot=null,ja=!1,ws=wo=0,Ma=null}function si(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Ot.memoizedState=Dn=r:Dn=Dn.next=r,Dn}function On(){if(rn===null){var r=Ot.alternate;r=r!==null?r.memoizedState:null}else r=rn.next;var a=Dn===null?Ot.memoizedState:Dn.next;if(a!==null)Dn=a,rn=r;else{if(r===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));rn=r,r={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},Dn===null?Ot.memoizedState=Dn=r:Dn=Dn.next=r}return Dn}function zl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ss(r){var a=ws;return ws+=1,Ma===null&&(Ma=[]),r=du(Ma,r,a),a=Ot,(Dn===null?a.memoizedState:Dn.next)===null&&(a=a.alternate,W.H=a===null||a.memoizedState===null?Qu:ed),r}function So(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ss(r);if(r.$$typeof===k)return Jn(r)}throw Error(i(438,String(r)))}function ql(r){var a=null,l=Ot.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(x){return x.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=zl(),Ot.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),h=0;h<r;h++)l[h]=Z;return a.index++,l}function Qi(r,a){return typeof a=="function"?a(r):a}function Ro(r){var a=On();return Hl(a,rn,r)}function Hl(r,a,l){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=l;var x=r.baseQueue,S=h.pending;if(S!==null){if(x!==null){var K=x.next;x.next=S.next,S.next=K}a.baseQueue=x=S,h.pending=null}if(S=r.baseState,x===null)r.memoizedState=S;else{a=x.next;var ie=K=null,ce=null,Ae=a,Oe=!1;do{var Ve=Ae.lane&-536870913;if(Ve!==Ae.lane?(qt&Ve)===Ve:(Rr&Ve)===Ve){var Ce=Ae.revertLane;if(Ce===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Ve===Ca&&(Oe=!0);else if((Rr&Ce)===Ce){Ae=Ae.next,Ce===Ca&&(Oe=!0);continue}else Ve={lane:0,revertLane:Ae.revertLane,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ce===null?(ie=ce=Ve,K=S):ce=ce.next=Ve,Ot.lanes|=Ce,Mr|=Ce;Ve=Ae.action,sa&&l(S,Ve),S=Ae.hasEagerState?Ae.eagerState:l(S,Ve)}else Ce={lane:Ve,revertLane:Ae.revertLane,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ce===null?(ie=ce=Ce,K=S):ce=ce.next=Ce,Ot.lanes|=Ve,Mr|=Ve;Ae=Ae.next}while(Ae!==null&&Ae!==a);if(ce===null?K=S:ce.next=ie,!ni(S,r.memoizedState)&&(Vn=!0,Oe&&(l=Pa,l!==null)))throw l;r.memoizedState=S,r.baseState=K,r.baseQueue=ce,h.lastRenderedState=S}return x===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Gl(r){var a=On(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var h=l.dispatch,x=l.pending,S=a.memoizedState;if(x!==null){l.pending=null;var K=x=x.next;do S=r(S,K.action),K=K.next;while(K!==x);ni(S,a.memoizedState)||(Vn=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),l.lastRenderedState=S}return[S,h]}function xu(r,a,l){var h=Ot,x=On(),S=Zt;if(S){if(l===void 0)throw Error(i(407));l=l()}else l=a();var K=!ni((rn||x).memoizedState,l);K&&(x.memoizedState=l,Vn=!0),x=x.queue;var ie=Eu.bind(null,h,x,r);if(Rs(2048,8,ie,[r]),x.getSnapshot!==a||K||Dn!==null&&Dn.memoizedState.tag&1){if(h.flags|=2048,Da(9,Ao(),_u.bind(null,h,x,l,a),null),un===null)throw Error(i(349));S||(Rr&124)!==0||bu(h,a,l)}return l}function bu(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Ot.updateQueue,a===null?(a=zl(),Ot.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function _u(r,a,l,h){a.value=l,a.getSnapshot=h,wu(a)&&Su(r)}function Eu(r,a,l){return l(function(){wu(a)&&Su(r)})}function wu(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!ni(r,l)}catch{return!0}}function Su(r){var a=ii(r,2);a!==null&&vi(a,r,2)}function Wl(r){var a=si();if(typeof r=="function"){var l=r;if(r=l(),sa){vt(!0);try{l()}finally{vt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:r},a}function Ru(r,a,l,h){return r.baseState=l,Hl(r,rn,typeof h=="function"?h:Qi)}function tf(r,a,l,h,x){if(Co(r))throw Error(i(485));if(r=a.action,r!==null){var S={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){S.listeners.push(K)}};W.T!==null?l(!0):S.isTransition=!1,h(S),l=a.pending,l===null?(S.next=a.pending=S,Au(a,S)):(S.next=l.next,a.pending=l.next=S)}}function Au(r,a){var l=a.action,h=a.payload,x=r.state;if(a.isTransition){var S=W.T,K={};W.T=K;try{var ie=l(x,h),ce=W.S;ce!==null&&ce(K,ie),Tu(r,a,ie)}catch(Ae){Kl(r,a,Ae)}finally{W.T=S}}else try{S=l(x,h),Tu(r,a,S)}catch(Ae){Kl(r,a,Ae)}}function Tu(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Cu(r,a,h)},function(h){return Kl(r,a,h)}):Cu(r,a,l)}function Cu(r,a,l){a.status="fulfilled",a.value=l,Pu(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,Au(r,l)))}function Kl(r,a,l){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,Pu(a),a=a.next;while(a!==h)}r.action=null}function Pu(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function ku(r,a){return a}function ju(r,a){if(Zt){var l=un.formState;if(l!==null){e:{var h=Ot;if(Zt){if(En){t:{for(var x=En,S=Fi;x.nodeType!==8;){if(!S){x=null;break t}if(x=Mi(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){En=Mi(x.nextSibling),h=x.data==="F!";break e}}na(h)}h=!1}h&&(a=l[0])}}return l=si(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:a},l.queue=h,l=Xu.bind(null,Ot,h),h.dispatch=l,h=Wl(!1),S=Ql.bind(null,Ot,!1,h.queue),h=si(),x={state:a,dispatch:null,action:r,pending:null},h.queue=x,l=tf.bind(null,Ot,x,S,l),x.dispatch=l,h.memoizedState=r,[a,l,!1]}function Mu(r){var a=On();return Du(a,rn,r)}function Du(r,a,l){if(a=Hl(r,a,ku)[0],r=Ro(Qi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Ss(a)}catch(K){throw K===ys?xo:K}else h=a;a=On();var x=a.queue,S=x.dispatch;return l!==a.memoizedState&&(Ot.flags|=2048,Da(9,Ao(),nf.bind(null,x,l),null)),[h,S,r]}function nf(r,a){r.action=a}function Ou(r){var a=On(),l=rn;if(l!==null)return Du(a,l,r);On(),a=a.memoizedState,l=On();var h=l.queue.dispatch;return l.memoizedState=r,[a,h,!1]}function Da(r,a,l,h){return r={tag:r,create:l,deps:h,inst:a,next:null},a=Ot.updateQueue,a===null&&(a=zl(),Ot.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,a.lastEffect=r),r}function Ao(){return{destroy:void 0,resource:void 0}}function Nu(){return On().memoizedState}function To(r,a,l,h){var x=si();h=h===void 0?null:h,Ot.flags|=r,x.memoizedState=Da(1|a,Ao(),l,h)}function Rs(r,a,l,h){var x=On();h=h===void 0?null:h;var S=x.memoizedState.inst;rn!==null&&h!==null&&Fl(h,rn.memoizedState.deps)?x.memoizedState=Da(a,S,l,h):(Ot.flags|=r,x.memoizedState=Da(1|a,S,l,h))}function Iu(r,a){To(8390656,8,r,a)}function Lu(r,a){Rs(2048,8,r,a)}function Fu(r,a){return Rs(4,2,r,a)}function Bu(r,a){return Rs(4,4,r,a)}function Uu(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Vu(r,a,l){l=l!=null?l.concat([r]):null,Rs(4,4,Uu.bind(null,a,r),l)}function Yl(){}function $u(r,a){var l=On();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Fl(a,h[1])?h[0]:(l.memoizedState=[r,a],r)}function zu(r,a){var l=On();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Fl(a,h[1]))return h[0];if(h=r(),sa){vt(!0);try{r()}finally{vt(!1)}}return l.memoizedState=[h,a],h}function Xl(r,a,l){return l===void 0||(Rr&1073741824)!==0?r.memoizedState=a:(r.memoizedState=l,r=Wd(),Ot.lanes|=r,Mr|=r,l)}function qu(r,a,l,h){return ni(l,a)?l:ka.current!==null?(r=Xl(r,l,h),ni(r,a)||(Vn=!0),r):(Rr&42)===0?(Vn=!0,r.memoizedState=l):(r=Wd(),Ot.lanes|=r,Mr|=r,a)}function Hu(r,a,l,h,x){var S=O.p;O.p=S!==0&&8>S?S:8;var K=W.T,ie={};W.T=ie,Ql(r,!1,a,l);try{var ce=x(),Ae=W.S;if(Ae!==null&&Ae(ie,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Oe=Jh(ce,h);As(r,a,Oe,gi(r))}else As(r,a,h,gi(r))}catch(Ve){As(r,a,{then:function(){},status:"rejected",reason:Ve},gi())}finally{O.p=S,W.T=K}}function rf(){}function Zl(r,a,l,h){if(r.tag!==5)throw Error(i(476));var x=Gu(r).queue;Hu(r,x,a,j,l===null?rf:function(){return Wu(r),l(h)})}function Gu(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:j},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Wu(r){var a=Gu(r).next.queue;As(r,a,{},gi())}function Jl(){return Jn(qs)}function Ku(){return On().memoizedState}function Yu(){return On().memoizedState}function af(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=gi();r=wr(l);var h=Sr(a,r,l);h!==null&&(vi(h,a,l),bs(h,a,l)),a={cache:Cl()},r.payload=a;return}a=a.return}}function sf(r,a,l){var h=gi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Co(r)?Zu(a,l):(l=xr(r,a,l,h),l!==null&&(vi(l,r,h),Ju(l,a,h)))}function Xu(r,a,l){var h=gi();As(r,a,l,h)}function As(r,a,l,h){var x={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Co(r))Zu(a,x);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var K=a.lastRenderedState,ie=S(K,l);if(x.hasEagerState=!0,x.eagerState=ie,ni(ie,K))return yr(r,a,x,0),un===null&&di(),!1}catch{}finally{}if(l=xr(r,a,x,h),l!==null)return vi(l,r,h),Ju(l,a,h),!0}return!1}function Ql(r,a,l,h){if(h={lane:2,revertLane:jc(),action:h,hasEagerState:!1,eagerState:null,next:null},Co(r)){if(a)throw Error(i(479))}else a=xr(r,l,h,2),a!==null&&vi(a,r,2)}function Co(r){var a=r.alternate;return r===Ot||a!==null&&a===Ot}function Zu(r,a){ja=Eo=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function Ju(r,a,l){if((l&4194048)!==0){var h=a.lanes;h&=r.pendingLanes,l|=h,a.lanes=l,Kn(r,l)}}var Po={readContext:Jn,use:So,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn,useHostTransitionStatus:Tn,useFormState:Tn,useActionState:Tn,useOptimistic:Tn,useMemoCache:Tn,useCacheRefresh:Tn},Qu={readContext:Jn,use:So,useCallback:function(r,a){return si().memoizedState=[r,a===void 0?null:a],r},useContext:Jn,useEffect:Iu,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,To(4194308,4,Uu.bind(null,a,r),l)},useLayoutEffect:function(r,a){return To(4194308,4,r,a)},useInsertionEffect:function(r,a){To(4,2,r,a)},useMemo:function(r,a){var l=si();a=a===void 0?null:a;var h=r();if(sa){vt(!0);try{r()}finally{vt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(r,a,l){var h=si();if(l!==void 0){var x=l(a);if(sa){vt(!0);try{l(a)}finally{vt(!1)}}}else x=a;return h.memoizedState=h.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},h.queue=r,r=r.dispatch=sf.bind(null,Ot,r),[h.memoizedState,r]},useRef:function(r){var a=si();return r={current:r},a.memoizedState=r},useState:function(r){r=Wl(r);var a=r.queue,l=Xu.bind(null,Ot,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Yl,useDeferredValue:function(r,a){var l=si();return Xl(l,r,a)},useTransition:function(){var r=Wl(!1);return r=Hu.bind(null,Ot,r.queue,!0,!1),si().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var h=Ot,x=si();if(Zt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),un===null)throw Error(i(349));(qt&124)!==0||bu(h,a,l)}x.memoizedState=l;var S={value:l,getSnapshot:a};return x.queue=S,Iu(Eu.bind(null,h,S,r),[r]),h.flags|=2048,Da(9,Ao(),_u.bind(null,h,S,l,a),null),l},useId:function(){var r=si(),a=un.identifierPrefix;if(Zt){var l=Xi,h=Yi;l=(h&~(1<<32-pt(h)-1)).toString(32)+l,a=""+a+"R"+l,l=wo++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=Qh++,a=""+a+"r"+l.toString(32)+"";return r.memoizedState=a},useHostTransitionStatus:Jl,useFormState:ju,useActionState:ju,useOptimistic:function(r){var a=si();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Ql.bind(null,Ot,!0,l),l.dispatch=a,[r,a]},useMemoCache:ql,useCacheRefresh:function(){return si().memoizedState=af.bind(null,Ot)}},ed={readContext:Jn,use:So,useCallback:$u,useContext:Jn,useEffect:Lu,useImperativeHandle:Vu,useInsertionEffect:Fu,useLayoutEffect:Bu,useMemo:zu,useReducer:Ro,useRef:Nu,useState:function(){return Ro(Qi)},useDebugValue:Yl,useDeferredValue:function(r,a){var l=On();return qu(l,rn.memoizedState,r,a)},useTransition:function(){var r=Ro(Qi)[0],a=On().memoizedState;return[typeof r=="boolean"?r:Ss(r),a]},useSyncExternalStore:xu,useId:Ku,useHostTransitionStatus:Jl,useFormState:Mu,useActionState:Mu,useOptimistic:function(r,a){var l=On();return Ru(l,rn,r,a)},useMemoCache:ql,useCacheRefresh:Yu},of={readContext:Jn,use:So,useCallback:$u,useContext:Jn,useEffect:Lu,useImperativeHandle:Vu,useInsertionEffect:Fu,useLayoutEffect:Bu,useMemo:zu,useReducer:Gl,useRef:Nu,useState:function(){return Gl(Qi)},useDebugValue:Yl,useDeferredValue:function(r,a){var l=On();return rn===null?Xl(l,r,a):qu(l,rn.memoizedState,r,a)},useTransition:function(){var r=Gl(Qi)[0],a=On().memoizedState;return[typeof r=="boolean"?r:Ss(r),a]},useSyncExternalStore:xu,useId:Ku,useHostTransitionStatus:Jl,useFormState:Ou,useActionState:Ou,useOptimistic:function(r,a){var l=On();return rn!==null?Ru(l,rn,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:ql,useCacheRefresh:Yu},Oa=null,Ts=0;function ko(r){var a=Ts;return Ts+=1,Oa===null&&(Oa=[]),du(Oa,r,a)}function Cs(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function jo(r,a){throw a.$$typeof===m?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function td(r){var a=r._init;return a(r._payload)}function nd(r){function a(Ee,ge){if(r){var Se=Ee.deletions;Se===null?(Ee.deletions=[ge],Ee.flags|=16):Se.push(ge)}}function l(Ee,ge){if(!r)return null;for(;ge!==null;)a(Ee,ge),ge=ge.sibling;return null}function h(Ee){for(var ge=new Map;Ee!==null;)Ee.key!==null?ge.set(Ee.key,Ee):ge.set(Ee.index,Ee),Ee=Ee.sibling;return ge}function x(Ee,ge){return Ee=Ki(Ee,ge),Ee.index=0,Ee.sibling=null,Ee}function S(Ee,ge,Se){return Ee.index=Se,r?(Se=Ee.alternate,Se!==null?(Se=Se.index,Se<ge?(Ee.flags|=67108866,ge):Se):(Ee.flags|=67108866,ge)):(Ee.flags|=1048576,ge)}function K(Ee){return r&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function ie(Ee,ge,Se,Le){return ge===null||ge.tag!==6?(ge=bl(Se,Ee.mode,Le),ge.return=Ee,ge):(ge=x(ge,Se),ge.return=Ee,ge)}function ce(Ee,ge,Se,Le){var rt=Se.type;return rt===g?Oe(Ee,ge,Se.props.children,Le,Se.key):ge!==null&&(ge.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===I&&td(rt)===ge.type)?(ge=x(ge,Se.props),Cs(ge,Se),ge.return=Ee,ge):(ge=fo(Se.type,Se.key,Se.props,null,Ee.mode,Le),Cs(ge,Se),ge.return=Ee,ge)}function Ae(Ee,ge,Se,Le){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Se.containerInfo||ge.stateNode.implementation!==Se.implementation?(ge=_l(Se,Ee.mode,Le),ge.return=Ee,ge):(ge=x(ge,Se.children||[]),ge.return=Ee,ge)}function Oe(Ee,ge,Se,Le,rt){return ge===null||ge.tag!==7?(ge=Jr(Se,Ee.mode,Le,rt),ge.return=Ee,ge):(ge=x(ge,Se),ge.return=Ee,ge)}function Ve(Ee,ge,Se){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=bl(""+ge,Ee.mode,Se),ge.return=Ee,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return Se=fo(ge.type,ge.key,ge.props,null,Ee.mode,Se),Cs(Se,ge),Se.return=Ee,Se;case b:return ge=_l(ge,Ee.mode,Se),ge.return=Ee,ge;case I:var Le=ge._init;return ge=Le(ge._payload),Ve(Ee,ge,Se)}if(te(ge)||G(ge))return ge=Jr(ge,Ee.mode,Se,null),ge.return=Ee,ge;if(typeof ge.then=="function")return Ve(Ee,ko(ge),Se);if(ge.$$typeof===k)return Ve(Ee,vo(Ee,ge),Se);jo(Ee,ge)}return null}function Ce(Ee,ge,Se,Le){var rt=ge!==null?ge.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return rt!==null?null:ie(Ee,ge,""+Se,Le);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case v:return Se.key===rt?ce(Ee,ge,Se,Le):null;case b:return Se.key===rt?Ae(Ee,ge,Se,Le):null;case I:return rt=Se._init,Se=rt(Se._payload),Ce(Ee,ge,Se,Le)}if(te(Se)||G(Se))return rt!==null?null:Oe(Ee,ge,Se,Le,null);if(typeof Se.then=="function")return Ce(Ee,ge,ko(Se),Le);if(Se.$$typeof===k)return Ce(Ee,ge,vo(Ee,Se),Le);jo(Ee,Se)}return null}function Pe(Ee,ge,Se,Le,rt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Ee=Ee.get(Se)||null,ie(ge,Ee,""+Le,rt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case v:return Ee=Ee.get(Le.key===null?Se:Le.key)||null,ce(ge,Ee,Le,rt);case b:return Ee=Ee.get(Le.key===null?Se:Le.key)||null,Ae(ge,Ee,Le,rt);case I:var Nt=Le._init;return Le=Nt(Le._payload),Pe(Ee,ge,Se,Le,rt)}if(te(Le)||G(Le))return Ee=Ee.get(Se)||null,Oe(ge,Ee,Le,rt,null);if(typeof Le.then=="function")return Pe(Ee,ge,Se,ko(Le),rt);if(Le.$$typeof===k)return Pe(Ee,ge,Se,vo(ge,Le),rt);jo(ge,Le)}return null}function wt(Ee,ge,Se,Le){for(var rt=null,Nt=null,ft=ge,Et=ge=0,zn=null;ft!==null&&Et<Se.length;Et++){ft.index>Et?(zn=ft,ft=null):zn=ft.sibling;var Wt=Ce(Ee,ft,Se[Et],Le);if(Wt===null){ft===null&&(ft=zn);break}r&&ft&&Wt.alternate===null&&a(Ee,ft),ge=S(Wt,ge,Et),Nt===null?rt=Wt:Nt.sibling=Wt,Nt=Wt,ft=zn}if(Et===Se.length)return l(Ee,ft),Zt&&ea(Ee,Et),rt;if(ft===null){for(;Et<Se.length;Et++)ft=Ve(Ee,Se[Et],Le),ft!==null&&(ge=S(ft,ge,Et),Nt===null?rt=ft:Nt.sibling=ft,Nt=ft);return Zt&&ea(Ee,Et),rt}for(ft=h(ft);Et<Se.length;Et++)zn=Pe(ft,Ee,Et,Se[Et],Le),zn!==null&&(r&&zn.alternate!==null&&ft.delete(zn.key===null?Et:zn.key),ge=S(zn,ge,Et),Nt===null?rt=zn:Nt.sibling=zn,Nt=zn);return r&&ft.forEach(function(Vr){return a(Ee,Vr)}),Zt&&ea(Ee,Et),rt}function xt(Ee,ge,Se,Le){if(Se==null)throw Error(i(151));for(var rt=null,Nt=null,ft=ge,Et=ge=0,zn=null,Wt=Se.next();ft!==null&&!Wt.done;Et++,Wt=Se.next()){ft.index>Et?(zn=ft,ft=null):zn=ft.sibling;var Vr=Ce(Ee,ft,Wt.value,Le);if(Vr===null){ft===null&&(ft=zn);break}r&&ft&&Vr.alternate===null&&a(Ee,ft),ge=S(Vr,ge,Et),Nt===null?rt=Vr:Nt.sibling=Vr,Nt=Vr,ft=zn}if(Wt.done)return l(Ee,ft),Zt&&ea(Ee,Et),rt;if(ft===null){for(;!Wt.done;Et++,Wt=Se.next())Wt=Ve(Ee,Wt.value,Le),Wt!==null&&(ge=S(Wt,ge,Et),Nt===null?rt=Wt:Nt.sibling=Wt,Nt=Wt);return Zt&&ea(Ee,Et),rt}for(ft=h(ft);!Wt.done;Et++,Wt=Se.next())Wt=Pe(ft,Ee,Et,Wt.value,Le),Wt!==null&&(r&&Wt.alternate!==null&&ft.delete(Wt.key===null?Et:Wt.key),ge=S(Wt,ge,Et),Nt===null?rt=Wt:Nt.sibling=Wt,Nt=Wt);return r&&ft.forEach(function(lp){return a(Ee,lp)}),Zt&&ea(Ee,Et),rt}function sn(Ee,ge,Se,Le){if(typeof Se=="object"&&Se!==null&&Se.type===g&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case v:e:{for(var rt=Se.key;ge!==null;){if(ge.key===rt){if(rt=Se.type,rt===g){if(ge.tag===7){l(Ee,ge.sibling),Le=x(ge,Se.props.children),Le.return=Ee,Ee=Le;break e}}else if(ge.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===I&&td(rt)===ge.type){l(Ee,ge.sibling),Le=x(ge,Se.props),Cs(Le,Se),Le.return=Ee,Ee=Le;break e}l(Ee,ge);break}else a(Ee,ge);ge=ge.sibling}Se.type===g?(Le=Jr(Se.props.children,Ee.mode,Le,Se.key),Le.return=Ee,Ee=Le):(Le=fo(Se.type,Se.key,Se.props,null,Ee.mode,Le),Cs(Le,Se),Le.return=Ee,Ee=Le)}return K(Ee);case b:e:{for(rt=Se.key;ge!==null;){if(ge.key===rt)if(ge.tag===4&&ge.stateNode.containerInfo===Se.containerInfo&&ge.stateNode.implementation===Se.implementation){l(Ee,ge.sibling),Le=x(ge,Se.children||[]),Le.return=Ee,Ee=Le;break e}else{l(Ee,ge);break}else a(Ee,ge);ge=ge.sibling}Le=_l(Se,Ee.mode,Le),Le.return=Ee,Ee=Le}return K(Ee);case I:return rt=Se._init,Se=rt(Se._payload),sn(Ee,ge,Se,Le)}if(te(Se))return wt(Ee,ge,Se,Le);if(G(Se)){if(rt=G(Se),typeof rt!="function")throw Error(i(150));return Se=rt.call(Se),xt(Ee,ge,Se,Le)}if(typeof Se.then=="function")return sn(Ee,ge,ko(Se),Le);if(Se.$$typeof===k)return sn(Ee,ge,vo(Ee,Se),Le);jo(Ee,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,ge!==null&&ge.tag===6?(l(Ee,ge.sibling),Le=x(ge,Se),Le.return=Ee,Ee=Le):(l(Ee,ge),Le=bl(Se,Ee.mode,Le),Le.return=Ee,Ee=Le),K(Ee)):l(Ee,ge)}return function(Ee,ge,Se,Le){try{Ts=0;var rt=sn(Ee,ge,Se,Le);return Oa=null,rt}catch(ft){if(ft===ys||ft===xo)throw ft;var Nt=hi(29,ft,null,Ee.mode);return Nt.lanes=Le,Nt.return=Ee,Nt}finally{}}}var Na=nd(!0),rd=nd(!1),Ei=M(null),Bi=null;function Ar(r){var a=r.alternate;$(Fn,Fn.current&1),$(Ei,r),Bi===null&&(a===null||ka.current!==null||a.memoizedState!==null)&&(Bi=r)}function ad(r){if(r.tag===22){if($(Fn,Fn.current),$(Ei,r),Bi===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(Bi=r)}}else Tr()}function Tr(){$(Fn,Fn.current),$(Ei,Ei.current)}function er(r){U(Ei),Bi===r&&(Bi=null),U(Fn)}var Fn=M(0);function Mo(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||zc(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function ec(r,a,l,h){a=r.memoizedState,l=l(h,a),l=l==null?a:u({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var tc={enqueueSetState:function(r,a,l){r=r._reactInternals;var h=gi(),x=wr(h);x.payload=a,l!=null&&(x.callback=l),a=Sr(r,x,h),a!==null&&(vi(a,r,h),bs(a,r,h))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var h=gi(),x=wr(h);x.tag=1,x.payload=a,l!=null&&(x.callback=l),a=Sr(r,x,h),a!==null&&(vi(a,r,h),bs(a,r,h))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=gi(),h=wr(l);h.tag=2,a!=null&&(h.callback=a),a=Sr(r,h,l),a!==null&&(vi(a,r,l),bs(a,r,l))}};function sd(r,a,l,h,x,S,K){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,S,K):a.prototype&&a.prototype.isPureReactComponent?!Kr(l,h)||!Kr(x,S):!0}function od(r,a,l,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==r&&tc.enqueueReplaceState(a,a.state,null)}function oa(r,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(r=r.defaultProps){l===a&&(l=u({},l));for(var x in r)l[x]===void 0&&(l[x]=r[x])}return l}var Do=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ld(r){Do(r)}function cd(r){console.error(r)}function ud(r){Do(r)}function Oo(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function dd(r,a,l){try{var h=r.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function nc(r,a,l){return l=wr(l),l.tag=3,l.payload={element:null},l.callback=function(){Oo(r,a)},l}function hd(r){return r=wr(r),r.tag=3,r}function fd(r,a,l,h){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var S=h.value;r.payload=function(){return x(S)},r.callback=function(){dd(a,l,h)}}var K=l.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(r.callback=function(){dd(a,l,h),typeof x!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var ie=h.stack;this.componentDidCatch(h.value,{componentStack:ie!==null?ie:""})})}function lf(r,a,l,h,x){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&ms(a,l,x,!0),l=Ei.current,l!==null){switch(l.tag){case 13:return Bi===null?Ac():l.alternate===null&&wn===0&&(wn=3),l.flags&=-257,l.flags|=65536,l.lanes=x,h===jl?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Cc(r,h,x)),!1;case 22:return l.flags|=65536,h===jl?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Cc(r,h,x)),!1}throw Error(i(435,l.tag))}return Cc(r,h,x),Ac(),!1}if(Zt)return a=Ei.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=x,h!==Sl&&(r=Error(i(422),{cause:h}),ps(Tt(r,l)))):(h!==Sl&&(a=Error(i(423),{cause:h}),ps(Tt(a,l))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,h=Tt(h,l),x=nc(r.stateNode,h,x),Ol(r,x),wn!==4&&(wn=2)),!1;var S=Error(i(520),{cause:h});if(S=Tt(S,l),Ns===null?Ns=[S]:Ns.push(S),wn!==4&&(wn=2),a===null)return!0;h=Tt(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=x&-x,l.lanes|=r,r=nc(l.stateNode,h,r),Ol(l,r),!1;case 1:if(a=l.type,S=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Dr===null||!Dr.has(S))))return l.flags|=65536,x&=-x,l.lanes|=x,x=hd(x),fd(x,r,l,h),Ol(l,x),!1}l=l.return}while(l!==null);return!1}var pd=Error(i(461)),Vn=!1;function qn(r,a,l,h){a.child=r===null?rd(a,null,l,h):Na(a,r.child,l,h)}function md(r,a,l,h,x){l=l.render;var S=a.ref;if("ref"in h){var K={};for(var ie in h)ie!=="ref"&&(K[ie]=h[ie])}else K=h;return ra(a),h=Bl(r,a,l,K,S,x),ie=Ul(),r!==null&&!Vn?(Vl(r,a,x),tr(r,a,x)):(Zt&&ie&&El(a),a.flags|=1,qn(r,a,h,x),a.child)}function gd(r,a,l,h,x){if(r===null){var S=l.type;return typeof S=="function"&&!xl(S)&&S.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=S,vd(r,a,S,h,x)):(r=fo(l.type,null,h,a,a.mode,x),r.ref=a.ref,r.return=a,a.child=r)}if(S=r.child,!uc(r,x)){var K=S.memoizedProps;if(l=l.compare,l=l!==null?l:Kr,l(K,h)&&r.ref===a.ref)return tr(r,a,x)}return a.flags|=1,r=Ki(S,h),r.ref=a.ref,r.return=a,a.child=r}function vd(r,a,l,h,x){if(r!==null){var S=r.memoizedProps;if(Kr(S,h)&&r.ref===a.ref)if(Vn=!1,a.pendingProps=h=S,uc(r,x))(r.flags&131072)!==0&&(Vn=!0);else return a.lanes=r.lanes,tr(r,a,x)}return ic(r,a,l,h,x)}function yd(r,a,l){var h=a.pendingProps,x=h.children,S=r!==null?r.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=S!==null?S.baseLanes|l:l,r!==null){for(x=a.child=r.child,S=0;x!==null;)S=S|x.lanes|x.childLanes,x=x.sibling;a.childLanes=S&~h}else a.childLanes=0,a.child=null;return xd(r,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&yo(a,S!==null?S.cachePool:null),S!==null?gu(a,S):Il(),ad(a);else return a.lanes=a.childLanes=536870912,xd(r,a,S!==null?S.baseLanes|l:l,l)}else S!==null?(yo(a,S.cachePool),gu(a,S),Tr(),a.memoizedState=null):(r!==null&&yo(a,null),Il(),Tr());return qn(r,a,x,l),a.child}function xd(r,a,l,h){var x=kl();return x=x===null?null:{parent:Ln._currentValue,pool:x},a.memoizedState={baseLanes:l,cachePool:x},r!==null&&yo(a,null),Il(),ad(a),r!==null&&ms(r,a,h,!0),null}function No(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function ic(r,a,l,h,x){return ra(a),l=Bl(r,a,l,h,void 0,x),h=Ul(),r!==null&&!Vn?(Vl(r,a,x),tr(r,a,x)):(Zt&&h&&El(a),a.flags|=1,qn(r,a,l,x),a.child)}function bd(r,a,l,h,x,S){return ra(a),a.updateQueue=null,l=yu(a,h,l,x),vu(r),h=Ul(),r!==null&&!Vn?(Vl(r,a,S),tr(r,a,S)):(Zt&&h&&El(a),a.flags|=1,qn(r,a,l,S),a.child)}function _d(r,a,l,h,x){if(ra(a),a.stateNode===null){var S=ki,K=l.contextType;typeof K=="object"&&K!==null&&(S=Jn(K)),S=new l(h,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=tc,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=h,S.state=a.memoizedState,S.refs={},Ml(a),K=l.contextType,S.context=typeof K=="object"&&K!==null?Jn(K):ki,S.state=a.memoizedState,K=l.getDerivedStateFromProps,typeof K=="function"&&(ec(a,l,K,h),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(K=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),K!==S.state&&tc.enqueueReplaceState(S,S.state,null),Es(a,h,S,x),_s(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(r===null){S=a.stateNode;var ie=a.memoizedProps,ce=oa(l,ie);S.props=ce;var Ae=S.context,Oe=l.contextType;K=ki,typeof Oe=="object"&&Oe!==null&&(K=Jn(Oe));var Ve=l.getDerivedStateFromProps;Oe=typeof Ve=="function"||typeof S.getSnapshotBeforeUpdate=="function",ie=a.pendingProps!==ie,Oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(ie||Ae!==K)&&od(a,S,h,K),Er=!1;var Ce=a.memoizedState;S.state=Ce,Es(a,h,S,x),_s(),Ae=a.memoizedState,ie||Ce!==Ae||Er?(typeof Ve=="function"&&(ec(a,l,Ve,h),Ae=a.memoizedState),(ce=Er||sd(a,l,ce,h,Ce,Ae,K))?(Oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Ae),S.props=h,S.state=Ae,S.context=K,h=ce):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{S=a.stateNode,Dl(r,a),K=a.memoizedProps,Oe=oa(l,K),S.props=Oe,Ve=a.pendingProps,Ce=S.context,Ae=l.contextType,ce=ki,typeof Ae=="object"&&Ae!==null&&(ce=Jn(Ae)),ie=l.getDerivedStateFromProps,(Ae=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(K!==Ve||Ce!==ce)&&od(a,S,h,ce),Er=!1,Ce=a.memoizedState,S.state=Ce,Es(a,h,S,x),_s();var Pe=a.memoizedState;K!==Ve||Ce!==Pe||Er||r!==null&&r.dependencies!==null&&go(r.dependencies)?(typeof ie=="function"&&(ec(a,l,ie,h),Pe=a.memoizedState),(Oe=Er||sd(a,l,Oe,h,Ce,Pe,ce)||r!==null&&r.dependencies!==null&&go(r.dependencies))?(Ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,Pe,ce),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,Pe,ce)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||K===r.memoizedProps&&Ce===r.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||K===r.memoizedProps&&Ce===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Pe),S.props=h,S.state=Pe,S.context=ce,h=Oe):(typeof S.componentDidUpdate!="function"||K===r.memoizedProps&&Ce===r.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||K===r.memoizedProps&&Ce===r.memoizedState||(a.flags|=1024),h=!1)}return S=h,No(r,a),h=(a.flags&128)!==0,S||h?(S=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,r!==null&&h?(a.child=Na(a,r.child,null,x),a.child=Na(a,null,l,x)):qn(r,a,l,x),a.memoizedState=S.state,r=a.child):r=tr(r,a,x),r}function Ed(r,a,l,h){return fs(),a.flags|=256,qn(r,a,l,h),a.child}var rc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ac(r){return{baseLanes:r,cachePool:lu()}}function sc(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=wi),r}function wd(r,a,l){var h=a.pendingProps,x=!1,S=(a.flags&128)!==0,K;if((K=S)||(K=r!==null&&r.memoizedState===null?!1:(Fn.current&2)!==0),K&&(x=!0,a.flags&=-129),K=(a.flags&32)!==0,a.flags&=-33,r===null){if(Zt){if(x?Ar(a):Tr(),Zt){var ie=En,ce;if(ce=ie){e:{for(ce=ie,ie=Fi;ce.nodeType!==8;){if(!ie){ie=null;break e}if(ce=Mi(ce.nextSibling),ce===null){ie=null;break e}}ie=ce}ie!==null?(a.memoizedState={dehydrated:ie,treeContext:Qr!==null?{id:Yi,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},ce=hi(18,null,null,0),ce.stateNode=ie,ce.return=a,a.child=ce,ri=a,En=null,ce=!0):ce=!1}ce||na(a)}if(ie=a.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return zc(ie)?a.lanes=32:a.lanes=536870912,null;er(a)}return ie=h.children,h=h.fallback,x?(Tr(),x=a.mode,ie=Io({mode:"hidden",children:ie},x),h=Jr(h,x,l,null),ie.return=a,h.return=a,ie.sibling=h,a.child=ie,x=a.child,x.memoizedState=ac(l),x.childLanes=sc(r,K,l),a.memoizedState=rc,h):(Ar(a),oc(a,ie))}if(ce=r.memoizedState,ce!==null&&(ie=ce.dehydrated,ie!==null)){if(S)a.flags&256?(Ar(a),a.flags&=-257,a=lc(r,a,l)):a.memoizedState!==null?(Tr(),a.child=r.child,a.flags|=128,a=null):(Tr(),x=h.fallback,ie=a.mode,h=Io({mode:"visible",children:h.children},ie),x=Jr(x,ie,l,null),x.flags|=2,h.return=a,x.return=a,h.sibling=x,a.child=h,Na(a,r.child,null,l),h=a.child,h.memoizedState=ac(l),h.childLanes=sc(r,K,l),a.memoizedState=rc,a=x);else if(Ar(a),zc(ie)){if(K=ie.nextSibling&&ie.nextSibling.dataset,K)var Ae=K.dgst;K=Ae,h=Error(i(419)),h.stack="",h.digest=K,ps({value:h,source:null,stack:null}),a=lc(r,a,l)}else if(Vn||ms(r,a,l,!1),K=(l&r.childLanes)!==0,Vn||K){if(K=un,K!==null&&(h=l&-l,h=(h&42)!==0?1:Nn(h),h=(h&(K.suspendedLanes|l))!==0?0:h,h!==0&&h!==ce.retryLane))throw ce.retryLane=h,ii(r,h),vi(K,r,h),pd;ie.data==="$?"||Ac(),a=lc(r,a,l)}else ie.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=ce.treeContext,En=Mi(ie.nextSibling),ri=a,Zt=!0,ta=null,Fi=!1,r!==null&&(bi[_i++]=Yi,bi[_i++]=Xi,bi[_i++]=Qr,Yi=r.id,Xi=r.overflow,Qr=a),a=oc(a,h.children),a.flags|=4096);return a}return x?(Tr(),x=h.fallback,ie=a.mode,ce=r.child,Ae=ce.sibling,h=Ki(ce,{mode:"hidden",children:h.children}),h.subtreeFlags=ce.subtreeFlags&65011712,Ae!==null?x=Ki(Ae,x):(x=Jr(x,ie,l,null),x.flags|=2),x.return=a,h.return=a,h.sibling=x,a.child=h,h=x,x=a.child,ie=r.child.memoizedState,ie===null?ie=ac(l):(ce=ie.cachePool,ce!==null?(Ae=Ln._currentValue,ce=ce.parent!==Ae?{parent:Ae,pool:Ae}:ce):ce=lu(),ie={baseLanes:ie.baseLanes|l,cachePool:ce}),x.memoizedState=ie,x.childLanes=sc(r,K,l),a.memoizedState=rc,h):(Ar(a),l=r.child,r=l.sibling,l=Ki(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,r!==null&&(K=a.deletions,K===null?(a.deletions=[r],a.flags|=16):K.push(r)),a.child=l,a.memoizedState=null,l)}function oc(r,a){return a=Io({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Io(r,a){return r=hi(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function lc(r,a,l){return Na(a,r.child,null,l),r=oc(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Sd(r,a,l){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),Al(r.return,a,l)}function cc(r,a,l,h,x){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:x}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=h,S.tail=l,S.tailMode=x)}function Rd(r,a,l){var h=a.pendingProps,x=h.revealOrder,S=h.tail;if(qn(r,a,h.children,l),h=Fn.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Sd(r,l,a);else if(r.tag===19)Sd(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}switch($(Fn,h),x){case"forwards":for(l=a.child,x=null;l!==null;)r=l.alternate,r!==null&&Mo(r)===null&&(x=l),l=l.sibling;l=x,l===null?(x=a.child,a.child=null):(x=l.sibling,l.sibling=null),cc(a,!1,x,l,S);break;case"backwards":for(l=null,x=a.child,a.child=null;x!==null;){if(r=x.alternate,r!==null&&Mo(r)===null){a.child=x;break}r=x.sibling,x.sibling=l,l=x,x=r}cc(a,!0,l,null,S);break;case"together":cc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function tr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),Mr|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(ms(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=Ki(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Ki(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function uc(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&go(r)))}function cf(r,a,l){switch(a.tag){case 3:L(a,a.stateNode.containerInfo),_r(a,Ln,r.memoizedState.cache),fs();break;case 27:case 5:ne(a);break;case 4:L(a,a.stateNode.containerInfo);break;case 10:_r(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Ar(a),a.flags|=128,null):(l&a.child.childLanes)!==0?wd(r,a,l):(Ar(a),r=tr(r,a,l),r!==null?r.sibling:null);Ar(a);break;case 19:var x=(r.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(ms(r,a,l,!1),h=(l&a.childLanes)!==0),x){if(h)return Rd(r,a,l);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),$(Fn,Fn.current),h)break;return null;case 22:case 23:return a.lanes=0,yd(r,a,l);case 24:_r(a,Ln,r.memoizedState.cache)}return tr(r,a,l)}function Ad(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Vn=!0;else{if(!uc(r,l)&&(a.flags&128)===0)return Vn=!1,cf(r,a,l);Vn=(r.flags&131072)!==0}else Vn=!1,Zt&&(a.flags&1048576)!==0&&tu(a,mo,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var h=a.elementType,x=h._init;if(h=x(h._payload),a.type=h,typeof h=="function")xl(h)?(r=oa(h,r),a.tag=1,a=_d(null,a,h,r,l)):(a.tag=0,a=ic(null,a,h,r,l));else{if(h!=null){if(x=h.$$typeof,x===C){a.tag=11,a=md(null,a,h,r,l);break e}else if(x===H){a.tag=14,a=gd(null,a,h,r,l);break e}}throw a=ee(h)||h,Error(i(306,a,""))}}return a;case 0:return ic(r,a,a.type,a.pendingProps,l);case 1:return h=a.type,x=oa(h,a.pendingProps),_d(r,a,h,x,l);case 3:e:{if(L(a,a.stateNode.containerInfo),r===null)throw Error(i(387));h=a.pendingProps;var S=a.memoizedState;x=S.element,Dl(r,a),Es(a,h,null,l);var K=a.memoizedState;if(h=K.cache,_r(a,Ln,h),h!==S.cache&&Tl(a,[Ln],l,!0),_s(),h=K.element,S.isDehydrated)if(S={element:h,isDehydrated:!1,cache:K.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=Ed(r,a,h,l);break e}else if(h!==x){x=Tt(Error(i(424)),a),ps(x),a=Ed(r,a,h,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(En=Mi(r.firstChild),ri=a,Zt=!0,ta=null,Fi=!0,l=rd(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(fs(),h===x){a=tr(r,a,l);break e}qn(r,a,h,l)}a=a.child}return a;case 26:return No(r,a),r===null?(l=jh(a.type,null,a.pendingProps,null))?a.memoizedState=l:Zt||(l=a.type,r=a.pendingProps,h=Xo(P.current).createElement(l),h[fn]=a,h[_n]=r,Gn(h,l,r),kn(h),a.stateNode=h):a.memoizedState=jh(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return ne(a),r===null&&Zt&&(h=a.stateNode=Ch(a.type,a.pendingProps,P.current),ri=a,Fi=!0,x=En,Ir(a.type)?(qc=x,En=Mi(h.firstChild)):En=x),qn(r,a,a.pendingProps.children,l),No(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Zt&&((x=h=En)&&(h=Lf(h,a.type,a.pendingProps,Fi),h!==null?(a.stateNode=h,ri=a,En=Mi(h.firstChild),Fi=!1,x=!0):x=!1),x||na(a)),ne(a),x=a.type,S=a.pendingProps,K=r!==null?r.memoizedProps:null,h=S.children,Uc(x,S)?h=null:K!==null&&Uc(x,K)&&(a.flags|=32),a.memoizedState!==null&&(x=Bl(r,a,ef,null,null,l),qs._currentValue=x),No(r,a),qn(r,a,h,l),a.child;case 6:return r===null&&Zt&&((r=l=En)&&(l=Ff(l,a.pendingProps,Fi),l!==null?(a.stateNode=l,ri=a,En=null,r=!0):r=!1),r||na(a)),null;case 13:return wd(r,a,l);case 4:return L(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=Na(a,null,h,l):qn(r,a,h,l),a.child;case 11:return md(r,a,a.type,a.pendingProps,l);case 7:return qn(r,a,a.pendingProps,l),a.child;case 8:return qn(r,a,a.pendingProps.children,l),a.child;case 12:return qn(r,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,_r(a,a.type,h.value),qn(r,a,h.children,l),a.child;case 9:return x=a.type._context,h=a.pendingProps.children,ra(a),x=Jn(x),h=h(x),a.flags|=1,qn(r,a,h,l),a.child;case 14:return gd(r,a,a.type,a.pendingProps,l);case 15:return vd(r,a,a.type,a.pendingProps,l);case 19:return Rd(r,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},r===null?(l=Io(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Ki(r.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return yd(r,a,l);case 24:return ra(a),h=Jn(Ln),r===null?(x=kl(),x===null&&(x=un,S=Cl(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=l),x=S),a.memoizedState={parent:h,cache:x},Ml(a),_r(a,Ln,x)):((r.lanes&l)!==0&&(Dl(r,a),Es(a,null,null,l),_s()),x=r.memoizedState,S=a.memoizedState,x.parent!==h?(x={parent:h,cache:h},a.memoizedState=x,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=x),_r(a,Ln,h)):(h=S.cache,_r(a,Ln,h),h!==x.cache&&Tl(a,[Ln],l,!0))),qn(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function nr(r){r.flags|=4}function Td(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ih(a)){if(a=Ei.current,a!==null&&((qt&4194048)===qt?Bi!==null:(qt&62914560)!==qt&&(qt&536870912)===0||a!==Bi))throw xs=jl,cu;r.flags|=8192}}function Lo(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ct():536870912,r.lanes|=a,Ba|=a)}function Ps(r,a){if(!Zt)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function xn(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(a)for(var x=r.child;x!==null;)l|=x.lanes|x.childLanes,h|=x.subtreeFlags&65011712,h|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)l|=x.lanes|x.childLanes,h|=x.subtreeFlags,h|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=h,r.childLanes=l,a}function uf(r,a,l){var h=a.pendingProps;switch(wl(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(a),null;case 1:return xn(a),null;case 3:return l=a.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ji(Ln),Y(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(hs(a)?nr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ru())),xn(a),null;case 26:return l=a.memoizedState,r===null?(nr(a),l!==null?(xn(a),Td(a,l)):(xn(a),a.flags&=-16777217)):l?l!==r.memoizedState?(nr(a),xn(a),Td(a,l)):(xn(a),a.flags&=-16777217):(r.memoizedProps!==h&&nr(a),xn(a),a.flags&=-16777217),null;case 27:re(a),l=P.current;var x=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==h&&nr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return xn(a),null}r=z.current,hs(a)?nu(a):(r=Ch(x,h,l),a.stateNode=r,nr(a))}return xn(a),null;case 5:if(re(a),l=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==h&&nr(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return xn(a),null}if(r=z.current,hs(a))nu(a);else{switch(x=Xo(P.current),r){case 1:r=x.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=x.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=x.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=x.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof h.is=="string"?x.createElement("select",{is:h.is}):x.createElement("select"),h.multiple?r.multiple=!0:h.size&&(r.size=h.size);break;default:r=typeof h.is=="string"?x.createElement(l,{is:h.is}):x.createElement(l)}}r[fn]=a,r[_n]=h;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)r.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=r;e:switch(Gn(r,l,h),l){case"button":case"input":case"select":case"textarea":r=!!h.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&nr(a)}}return xn(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==h&&nr(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(r=P.current,hs(a)){if(r=a.stateNode,l=a.memoizedProps,h=null,x=ri,x!==null)switch(x.tag){case 27:case 5:h=x.memoizedProps}r[fn]=a,r=!!(r.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||_h(r.nodeValue,l)),r||na(a)}else r=Xo(r).createTextNode(h),r[fn]=a,a.stateNode=r}return xn(a),null;case 13:if(h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=hs(a),h!==null&&h.dehydrated!==null){if(r===null){if(!x)throw Error(i(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[fn]=a}else fs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xn(a),x=!1}else x=ru(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return a.flags&256?(er(a),a):(er(a),null)}if(er(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,r=r!==null&&r.memoizedState!==null,l){h=a.child,x=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(x=h.alternate.memoizedState.cachePool.pool);var S=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==x&&(h.flags|=2048)}return l!==r&&l&&(a.child.flags|=8192),Lo(a,a.updateQueue),xn(a),null;case 4:return Y(),r===null&&Nc(a.stateNode.containerInfo),xn(a),null;case 10:return Ji(a.type),xn(a),null;case 19:if(U(Fn),x=a.memoizedState,x===null)return xn(a),null;if(h=(a.flags&128)!==0,S=x.rendering,S===null)if(h)Ps(x,!1);else{if(wn!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(S=Mo(r),S!==null){for(a.flags|=128,Ps(x,!1),r=S.updateQueue,a.updateQueue=r,Lo(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)eu(l,r),l=l.sibling;return $(Fn,Fn.current&1|2),a.child}r=r.sibling}x.tail!==null&&Re()>Uo&&(a.flags|=128,h=!0,Ps(x,!1),a.lanes=4194304)}else{if(!h)if(r=Mo(S),r!==null){if(a.flags|=128,h=!0,r=r.updateQueue,a.updateQueue=r,Lo(a,r),Ps(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!Zt)return xn(a),null}else 2*Re()-x.renderingStartTime>Uo&&l!==536870912&&(a.flags|=128,h=!0,Ps(x,!1),a.lanes=4194304);x.isBackwards?(S.sibling=a.child,a.child=S):(r=x.last,r!==null?r.sibling=S:a.child=S,x.last=S)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=Re(),a.sibling=null,r=Fn.current,$(Fn,h?r&1|2:r&1),a):(xn(a),null);case 22:case 23:return er(a),Ll(),h=a.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(xn(a),a.subtreeFlags&6&&(a.flags|=8192)):xn(a),l=a.updateQueue,l!==null&&Lo(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),r!==null&&U(aa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ji(Ln),xn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function df(r,a){switch(wl(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ji(Ln),Y(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return re(a),null;case 13:if(er(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));fs()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return U(Fn),null;case 4:return Y(),null;case 10:return Ji(a.type),null;case 22:case 23:return er(a),Ll(),r!==null&&U(aa),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Ji(Ln),null;case 25:return null;default:return null}}function Cd(r,a){switch(wl(a),a.tag){case 3:Ji(Ln),Y();break;case 26:case 27:case 5:re(a);break;case 4:Y();break;case 13:er(a);break;case 19:U(Fn);break;case 10:Ji(a.type);break;case 22:case 23:er(a),Ll(),r!==null&&U(aa);break;case 24:Ji(Ln)}}function ks(r,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var x=h.next;l=x;do{if((l.tag&r)===r){h=void 0;var S=l.create,K=l.inst;h=S(),K.destroy=h}l=l.next}while(l!==x)}}catch(ie){on(a,a.return,ie)}}function Cr(r,a,l){try{var h=a.updateQueue,x=h!==null?h.lastEffect:null;if(x!==null){var S=x.next;h=S;do{if((h.tag&r)===r){var K=h.inst,ie=K.destroy;if(ie!==void 0){K.destroy=void 0,x=a;var ce=l,Ae=ie;try{Ae()}catch(Oe){on(x,ce,Oe)}}}h=h.next}while(h!==S)}}catch(Oe){on(a,a.return,Oe)}}function Pd(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{mu(a,l)}catch(h){on(r,r.return,h)}}}function kd(r,a,l){l.props=oa(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(h){on(r,a,h)}}function js(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof l=="function"?r.refCleanup=l(h):l.current=h}}catch(x){on(r,a,x)}}function Ui(r,a){var l=r.ref,h=r.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(x){on(r,a,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){on(r,a,x)}else l.current=null}function jd(r){var a=r.type,l=r.memoizedProps,h=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(x){on(r,r.return,x)}}function dc(r,a,l){try{var h=r.stateNode;Mf(h,r.type,l,a),h[_n]=a}catch(x){on(r,r.return,x)}}function Md(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ir(r.type)||r.tag===4}function hc(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Md(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ir(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function fc(r,a,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Yo));else if(h!==4&&(h===27&&Ir(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for(fc(r,a,l),r=r.sibling;r!==null;)fc(r,a,l),r=r.sibling}function Fo(r,a,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(h!==4&&(h===27&&Ir(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Fo(r,a,l),r=r.sibling;r!==null;)Fo(r,a,l),r=r.sibling}function Dd(r){var a=r.stateNode,l=r.memoizedProps;try{for(var h=r.type,x=a.attributes;x.length;)a.removeAttributeNode(x[0]);Gn(a,h,l),a[fn]=r,a[_n]=l}catch(S){on(r,r.return,S)}}var ir=!1,Cn=!1,pc=!1,Od=typeof WeakSet=="function"?WeakSet:Set,$n=null;function hf(r,a){if(r=r.containerInfo,Fc=nl,r=co(r),ss(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var x=h.anchorOffset,S=h.focusNode;h=h.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var K=0,ie=-1,ce=-1,Ae=0,Oe=0,Ve=r,Ce=null;t:for(;;){for(var Pe;Ve!==l||x!==0&&Ve.nodeType!==3||(ie=K+x),Ve!==S||h!==0&&Ve.nodeType!==3||(ce=K+h),Ve.nodeType===3&&(K+=Ve.nodeValue.length),(Pe=Ve.firstChild)!==null;)Ce=Ve,Ve=Pe;for(;;){if(Ve===r)break t;if(Ce===l&&++Ae===x&&(ie=K),Ce===S&&++Oe===h&&(ce=K),(Pe=Ve.nextSibling)!==null)break;Ve=Ce,Ce=Ve.parentNode}Ve=Pe}l=ie===-1||ce===-1?null:{start:ie,end:ce}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bc={focusedElem:r,selectionRange:l},nl=!1,$n=a;$n!==null;)if(a=$n,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,$n=r;else for(;$n!==null;){switch(a=$n,S=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&S!==null){r=void 0,l=a,x=S.memoizedProps,S=S.memoizedState,h=l.stateNode;try{var wt=oa(l.type,x,l.elementType===l.type);r=h.getSnapshotBeforeUpdate(wt,S),h.__reactInternalSnapshotBeforeUpdate=r}catch(xt){on(l,l.return,xt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)$c(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":$c(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,$n=r;break}$n=a.return}}function Nd(r,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Pr(r,l),h&4&&ks(5,l);break;case 1:if(Pr(r,l),h&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(K){on(l,l.return,K)}else{var x=oa(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(x,a,r.__reactInternalSnapshotBeforeUpdate)}catch(K){on(l,l.return,K)}}h&64&&Pd(l),h&512&&js(l,l.return);break;case 3:if(Pr(r,l),h&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{mu(r,a)}catch(K){on(l,l.return,K)}}break;case 27:a===null&&h&4&&Dd(l);case 26:case 5:Pr(r,l),a===null&&h&4&&jd(l),h&512&&js(l,l.return);break;case 12:Pr(r,l);break;case 13:Pr(r,l),h&4&&Fd(r,l),h&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=_f.bind(null,l),Bf(r,l))));break;case 22:if(h=l.memoizedState!==null||ir,!h){a=a!==null&&a.memoizedState!==null||Cn,x=ir;var S=Cn;ir=h,(Cn=a)&&!S?kr(r,l,(l.subtreeFlags&8772)!==0):Pr(r,l),ir=x,Cn=S}break;case 30:break;default:Pr(r,l)}}function Id(r){var a=r.alternate;a!==null&&(r.alternate=null,Id(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Ya(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var gn=null,oi=!1;function rr(r,a,l){for(l=l.child;l!==null;)Ld(r,a,l),l=l.sibling}function Ld(r,a,l){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(nt,l)}catch{}switch(l.tag){case 26:Cn||Ui(l,a),rr(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Cn||Ui(l,a);var h=gn,x=oi;Ir(l.type)&&(gn=l.stateNode,oi=!1),rr(r,a,l),Us(l.stateNode),gn=h,oi=x;break;case 5:Cn||Ui(l,a);case 6:if(h=gn,x=oi,gn=null,rr(r,a,l),gn=h,oi=x,gn!==null)if(oi)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(l.stateNode)}catch(S){on(l,a,S)}else try{gn.removeChild(l.stateNode)}catch(S){on(l,a,S)}break;case 18:gn!==null&&(oi?(r=gn,Ah(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Ks(r)):Ah(gn,l.stateNode));break;case 4:h=gn,x=oi,gn=l.stateNode.containerInfo,oi=!0,rr(r,a,l),gn=h,oi=x;break;case 0:case 11:case 14:case 15:Cn||Cr(2,l,a),Cn||Cr(4,l,a),rr(r,a,l);break;case 1:Cn||(Ui(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&kd(l,a,h)),rr(r,a,l);break;case 21:rr(r,a,l);break;case 22:Cn=(h=Cn)||l.memoizedState!==null,rr(r,a,l),Cn=h;break;default:rr(r,a,l)}}function Fd(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ks(r)}catch(l){on(a,a.return,l)}}function ff(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Od),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Od),a;default:throw Error(i(435,r.tag))}}function mc(r,a){var l=ff(r);a.forEach(function(h){var x=Ef.bind(null,r,h);l.has(h)||(l.add(h),h.then(x,x))})}function fi(r,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var x=l[h],S=r,K=a,ie=K;e:for(;ie!==null;){switch(ie.tag){case 27:if(Ir(ie.type)){gn=ie.stateNode,oi=!1;break e}break;case 5:gn=ie.stateNode,oi=!1;break e;case 3:case 4:gn=ie.stateNode.containerInfo,oi=!0;break e}ie=ie.return}if(gn===null)throw Error(i(160));Ld(S,K,x),gn=null,oi=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Bd(a,r),a=a.sibling}var ji=null;function Bd(r,a){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:fi(a,r),pi(r),h&4&&(Cr(3,r,r.return),ks(3,r),Cr(5,r,r.return));break;case 1:fi(a,r),pi(r),h&512&&(Cn||l===null||Ui(l,l.return)),h&64&&ir&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var x=ji;if(fi(a,r),pi(r),h&512&&(Cn||l===null||Ui(l,l.return)),h&4){var S=l!==null?l.memoizedState:null;if(h=r.memoizedState,l===null)if(h===null)if(r.stateNode===null){e:{h=r.type,l=r.memoizedProps,x=x.ownerDocument||x;t:switch(h){case"title":S=x.getElementsByTagName("title")[0],(!S||S[zr]||S[fn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(h),x.head.insertBefore(S,x.querySelector("head > title"))),Gn(S,h,l),S[fn]=r,kn(S),h=S;break e;case"link":var K=Oh("link","href",x).get(h+(l.href||""));if(K){for(var ie=0;ie<K.length;ie++)if(S=K[ie],S.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&S.getAttribute("rel")===(l.rel==null?null:l.rel)&&S.getAttribute("title")===(l.title==null?null:l.title)&&S.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){K.splice(ie,1);break t}}S=x.createElement(h),Gn(S,h,l),x.head.appendChild(S);break;case"meta":if(K=Oh("meta","content",x).get(h+(l.content||""))){for(ie=0;ie<K.length;ie++)if(S=K[ie],S.getAttribute("content")===(l.content==null?null:""+l.content)&&S.getAttribute("name")===(l.name==null?null:l.name)&&S.getAttribute("property")===(l.property==null?null:l.property)&&S.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&S.getAttribute("charset")===(l.charSet==null?null:l.charSet)){K.splice(ie,1);break t}}S=x.createElement(h),Gn(S,h,l),x.head.appendChild(S);break;default:throw Error(i(468,h))}S[fn]=r,kn(S),h=S}r.stateNode=h}else Nh(x,r.type,r.stateNode);else r.stateNode=Dh(x,h,r.memoizedProps);else S!==h?(S===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):S.count--,h===null?Nh(x,r.type,r.stateNode):Dh(x,h,r.memoizedProps)):h===null&&r.stateNode!==null&&dc(r,r.memoizedProps,l.memoizedProps)}break;case 27:fi(a,r),pi(r),h&512&&(Cn||l===null||Ui(l,l.return)),l!==null&&h&4&&dc(r,r.memoizedProps,l.memoizedProps);break;case 5:if(fi(a,r),pi(r),h&512&&(Cn||l===null||Ui(l,l.return)),r.flags&32){x=r.stateNode;try{Hi(x,"")}catch(Pe){on(r,r.return,Pe)}}h&4&&r.stateNode!=null&&(x=r.memoizedProps,dc(r,x,l!==null?l.memoizedProps:x)),h&1024&&(pc=!0);break;case 6:if(fi(a,r),pi(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,l=r.stateNode;try{l.nodeValue=h}catch(Pe){on(r,r.return,Pe)}}break;case 3:if(Qo=null,x=ji,ji=Zo(a.containerInfo),fi(a,r),ji=x,pi(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ks(a.containerInfo)}catch(Pe){on(r,r.return,Pe)}pc&&(pc=!1,Ud(r));break;case 4:h=ji,ji=Zo(r.stateNode.containerInfo),fi(a,r),pi(r),ji=h;break;case 12:fi(a,r),pi(r);break;case 13:fi(a,r),pi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_c=Re()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,mc(r,h)));break;case 22:x=r.memoizedState!==null;var ce=l!==null&&l.memoizedState!==null,Ae=ir,Oe=Cn;if(ir=Ae||x,Cn=Oe||ce,fi(a,r),Cn=Oe,ir=Ae,pi(r),h&8192)e:for(a=r.stateNode,a._visibility=x?a._visibility&-2:a._visibility|1,x&&(l===null||ce||ir||Cn||la(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){ce=l=a;try{if(S=ce.stateNode,x)K=S.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ie=ce.stateNode;var Ve=ce.memoizedProps.style,Ce=Ve!=null&&Ve.hasOwnProperty("display")?Ve.display:null;ie.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(Pe){on(ce,ce.return,Pe)}}}else if(a.tag===6){if(l===null){ce=a;try{ce.stateNode.nodeValue=x?"":ce.memoizedProps}catch(Pe){on(ce,ce.return,Pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=r.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,mc(r,l))));break;case 19:fi(a,r),pi(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,mc(r,h)));break;case 30:break;case 21:break;default:fi(a,r),pi(r)}}function pi(r){var a=r.flags;if(a&2){try{for(var l,h=r.return;h!==null;){if(Md(h)){l=h;break}h=h.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var x=l.stateNode,S=hc(r);Fo(r,S,x);break;case 5:var K=l.stateNode;l.flags&32&&(Hi(K,""),l.flags&=-33);var ie=hc(r);Fo(r,ie,K);break;case 3:case 4:var ce=l.stateNode.containerInfo,Ae=hc(r);fc(r,Ae,ce);break;default:throw Error(i(161))}}catch(Oe){on(r,r.return,Oe)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Ud(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Ud(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Pr(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Nd(r,a.alternate,a),a=a.sibling}function la(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Cr(4,a,a.return),la(a);break;case 1:Ui(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&kd(a,a.return,l),la(a);break;case 27:Us(a.stateNode);case 26:case 5:Ui(a,a.return),la(a);break;case 22:a.memoizedState===null&&la(a);break;case 30:la(a);break;default:la(a)}r=r.sibling}}function kr(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,x=r,S=a,K=S.flags;switch(S.tag){case 0:case 11:case 15:kr(x,S,l),ks(4,S);break;case 1:if(kr(x,S,l),h=S,x=h.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ae){on(h,h.return,Ae)}if(h=S,x=h.updateQueue,x!==null){var ie=h.stateNode;try{var ce=x.shared.hiddenCallbacks;if(ce!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ce.length;x++)pu(ce[x],ie)}catch(Ae){on(h,h.return,Ae)}}l&&K&64&&Pd(S),js(S,S.return);break;case 27:Dd(S);case 26:case 5:kr(x,S,l),l&&h===null&&K&4&&jd(S),js(S,S.return);break;case 12:kr(x,S,l);break;case 13:kr(x,S,l),l&&K&4&&Fd(x,S);break;case 22:S.memoizedState===null&&kr(x,S,l),js(S,S.return);break;case 30:break;default:kr(x,S,l)}a=a.sibling}}function gc(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&gs(l))}function vc(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&gs(r))}function Vi(r,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Vd(r,a,l,h),a=a.sibling}function Vd(r,a,l,h){var x=a.flags;switch(a.tag){case 0:case 11:case 15:Vi(r,a,l,h),x&2048&&ks(9,a);break;case 1:Vi(r,a,l,h);break;case 3:Vi(r,a,l,h),x&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&gs(r)));break;case 12:if(x&2048){Vi(r,a,l,h),r=a.stateNode;try{var S=a.memoizedProps,K=S.id,ie=S.onPostCommit;typeof ie=="function"&&ie(K,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ce){on(a,a.return,ce)}}else Vi(r,a,l,h);break;case 13:Vi(r,a,l,h);break;case 23:break;case 22:S=a.stateNode,K=a.alternate,a.memoizedState!==null?S._visibility&2?Vi(r,a,l,h):Ms(r,a):S._visibility&2?Vi(r,a,l,h):(S._visibility|=2,Ia(r,a,l,h,(a.subtreeFlags&10256)!==0)),x&2048&&gc(K,a);break;case 24:Vi(r,a,l,h),x&2048&&vc(a.alternate,a);break;default:Vi(r,a,l,h)}}function Ia(r,a,l,h,x){for(x=x&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var S=r,K=a,ie=l,ce=h,Ae=K.flags;switch(K.tag){case 0:case 11:case 15:Ia(S,K,ie,ce,x),ks(8,K);break;case 23:break;case 22:var Oe=K.stateNode;K.memoizedState!==null?Oe._visibility&2?Ia(S,K,ie,ce,x):Ms(S,K):(Oe._visibility|=2,Ia(S,K,ie,ce,x)),x&&Ae&2048&&gc(K.alternate,K);break;case 24:Ia(S,K,ie,ce,x),x&&Ae&2048&&vc(K.alternate,K);break;default:Ia(S,K,ie,ce,x)}a=a.sibling}}function Ms(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,h=a,x=h.flags;switch(h.tag){case 22:Ms(l,h),x&2048&&gc(h.alternate,h);break;case 24:Ms(l,h),x&2048&&vc(h.alternate,h);break;default:Ms(l,h)}a=a.sibling}}var Ds=8192;function La(r){if(r.subtreeFlags&Ds)for(r=r.child;r!==null;)$d(r),r=r.sibling}function $d(r){switch(r.tag){case 26:La(r),r.flags&Ds&&r.memoizedState!==null&&Jf(ji,r.memoizedState,r.memoizedProps);break;case 5:La(r);break;case 3:case 4:var a=ji;ji=Zo(r.stateNode.containerInfo),La(r),ji=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=Ds,Ds=16777216,La(r),Ds=a):La(r));break;default:La(r)}}function zd(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Os(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];$n=h,Hd(h,r)}zd(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qd(r),r=r.sibling}function qd(r){switch(r.tag){case 0:case 11:case 15:Os(r),r.flags&2048&&Cr(9,r,r.return);break;case 3:Os(r);break;case 12:Os(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Bo(r)):Os(r);break;default:Os(r)}}function Bo(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];$n=h,Hd(h,r)}zd(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Cr(8,a,a.return),Bo(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Bo(a));break;default:Bo(a)}r=r.sibling}}function Hd(r,a){for(;$n!==null;){var l=$n;switch(l.tag){case 0:case 11:case 15:Cr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:gs(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,$n=h;else e:for(l=r;$n!==null;){h=$n;var x=h.sibling,S=h.return;if(Id(h),h===l){$n=null;break e}if(x!==null){x.return=S,$n=x;break e}$n=S}}}var pf={getCacheForType:function(r){var a=Jn(Ln),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l}},mf=typeof WeakMap=="function"?WeakMap:Map,Qt=0,un=null,Ut=null,qt=0,en=0,mi=null,jr=!1,Fa=!1,yc=!1,ar=0,wn=0,Mr=0,ca=0,xc=0,wi=0,Ba=0,Ns=null,li=null,bc=!1,_c=0,Uo=1/0,Vo=null,Dr=null,Hn=0,Or=null,Ua=null,Va=0,Ec=0,wc=null,Gd=null,Is=0,Sc=null;function gi(){if((Qt&2)!==0&&qt!==0)return qt&-qt;if(W.T!==null){var r=Ca;return r!==0?r:jc()}return tn()}function Wd(){wi===0&&(wi=(qt&536870912)===0||Zt?dt():536870912);var r=Ei.current;return r!==null&&(r.flags|=32),wi}function vi(r,a,l){(r===un&&(en===2||en===9)||r.cancelPendingCommit!==null)&&($a(r,0),Nr(r,qt,wi,!1)),bn(r,l),((Qt&2)===0||r!==un)&&(r===un&&((Qt&2)===0&&(ca|=l),wn===4&&Nr(r,qt,wi,!1)),$i(r))}function Kd(r,a,l){if((Qt&6)!==0)throw Error(i(327));var h=!l&&(a&124)===0&&(a&r.expiredLanes)===0||Ge(r,a),x=h?yf(r,a):Tc(r,a,!0),S=h;do{if(x===0){Fa&&!h&&Nr(r,a,0,!1);break}else{if(l=r.current.alternate,S&&!gf(l)){x=Tc(r,a,!1),S=!1;continue}if(x===2){if(S=a,r.errorRecoveryDisabledLanes&S)var K=0;else K=r.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){a=K;e:{var ie=r;x=Ns;var ce=ie.current.memoizedState.isDehydrated;if(ce&&($a(ie,K).flags|=256),K=Tc(ie,K,!1),K!==2){if(yc&&!ce){ie.errorRecoveryDisabledLanes|=S,ca|=S,x=4;break e}S=li,li=x,S!==null&&(li===null?li=S:li.push.apply(li,S))}x=K}if(S=!1,x!==2)continue}}if(x===1){$a(r,0),Nr(r,a,0,!0);break}e:{switch(h=r,S=x,S){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Nr(h,a,wi,!jr);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(x=_c+300-Re(),10<x)){if(Nr(h,a,wi,!jr),ve(h,0,!0)!==0)break e;h.timeoutHandle=Sh(Yd.bind(null,h,l,li,Vo,bc,a,wi,ca,Ba,jr,S,2,-0,0),x);break e}Yd(h,l,li,Vo,bc,a,wi,ca,Ba,jr,S,0,-0,0)}}break}while(!0);$i(r)}function Yd(r,a,l,h,x,S,K,ie,ce,Ae,Oe,Ve,Ce,Pe){if(r.timeoutHandle=-1,Ve=a.subtreeFlags,(Ve&8192||(Ve&16785408)===16785408)&&(zs={stylesheets:null,count:0,unsuspend:Zf},$d(a),Ve=Qf(),Ve!==null)){r.cancelPendingCommit=Ve(nh.bind(null,r,a,S,l,h,x,K,ie,ce,Oe,1,Ce,Pe)),Nr(r,S,K,!Ae);return}nh(r,a,S,l,h,x,K,ie,ce)}function gf(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var x=l[h],S=x.getSnapshot;x=x.value;try{if(!ni(S(),x))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Nr(r,a,l,h){a&=~xc,a&=~ca,r.suspendedLanes|=a,r.pingedLanes&=~a,h&&(r.warmLanes|=a),h=r.expirationTimes;for(var x=a;0<x;){var S=31-pt(x),K=1<<S;h[S]=-1,x&=~K}l!==0&&vn(r,l,a)}function $o(){return(Qt&6)===0?(Ls(0),!1):!0}function Rc(){if(Ut!==null){if(en===0)var r=Ut.return;else r=Ut,Zi=ia=null,$l(r),Oa=null,Ts=0,r=Ut;for(;r!==null;)Cd(r.alternate,r),r=r.return;Ut=null}}function $a(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,Of(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Rc(),un=r,Ut=l=Ki(r.current,null),qt=a,en=0,mi=null,jr=!1,Fa=Ge(r,a),yc=!1,Ba=wi=xc=ca=Mr=wn=0,li=Ns=null,bc=!1,(a&8)!==0&&(a|=a&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=a;0<h;){var x=31-pt(h),S=1<<x;a|=r[x],h&=~S}return ar=a,di(),l}function Xd(r,a){Ot=null,W.H=Po,a===ys||a===xo?(a=hu(),en=3):a===cu?(a=hu(),en=4):en=a===pd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,mi=a,Ut===null&&(wn=1,Oo(r,Tt(a,r.current)))}function Zd(){var r=W.H;return W.H=Po,r===null?Po:r}function Jd(){var r=W.A;return W.A=pf,r}function Ac(){wn=4,jr||(qt&4194048)!==qt&&Ei.current!==null||(Fa=!0),(Mr&134217727)===0&&(ca&134217727)===0||un===null||Nr(un,qt,wi,!1)}function Tc(r,a,l){var h=Qt;Qt|=2;var x=Zd(),S=Jd();(un!==r||qt!==a)&&(Vo=null,$a(r,a)),a=!1;var K=wn;e:do try{if(en!==0&&Ut!==null){var ie=Ut,ce=mi;switch(en){case 8:Rc(),K=6;break e;case 3:case 2:case 9:case 6:Ei.current===null&&(a=!0);var Ae=en;if(en=0,mi=null,za(r,ie,ce,Ae),l&&Fa){K=0;break e}break;default:Ae=en,en=0,mi=null,za(r,ie,ce,Ae)}}vf(),K=wn;break}catch(Oe){Xd(r,Oe)}while(!0);return a&&r.shellSuspendCounter++,Zi=ia=null,Qt=h,W.H=x,W.A=S,Ut===null&&(un=null,qt=0,di()),K}function vf(){for(;Ut!==null;)Qd(Ut)}function yf(r,a){var l=Qt;Qt|=2;var h=Zd(),x=Jd();un!==r||qt!==a?(Vo=null,Uo=Re()+500,$a(r,a)):Fa=Ge(r,a);e:do try{if(en!==0&&Ut!==null){a=Ut;var S=mi;t:switch(en){case 1:en=0,mi=null,za(r,a,S,1);break;case 2:case 9:if(uu(S)){en=0,mi=null,eh(a);break}a=function(){en!==2&&en!==9||un!==r||(en=7),$i(r)},S.then(a,a);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:uu(S)?(en=0,mi=null,eh(a)):(en=0,mi=null,za(r,a,S,7));break;case 5:var K=null;switch(Ut.tag){case 26:K=Ut.memoizedState;case 5:case 27:var ie=Ut;if(!K||Ih(K)){en=0,mi=null;var ce=ie.sibling;if(ce!==null)Ut=ce;else{var Ae=ie.return;Ae!==null?(Ut=Ae,zo(Ae)):Ut=null}break t}}en=0,mi=null,za(r,a,S,5);break;case 6:en=0,mi=null,za(r,a,S,6);break;case 8:Rc(),wn=6;break e;default:throw Error(i(462))}}xf();break}catch(Oe){Xd(r,Oe)}while(!0);return Zi=ia=null,W.H=h,W.A=x,Qt=l,Ut!==null?0:(un=null,qt=0,di(),wn)}function xf(){for(;Ut!==null&&!we();)Qd(Ut)}function Qd(r){var a=Ad(r.alternate,r,ar);r.memoizedProps=r.pendingProps,a===null?zo(r):Ut=a}function eh(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=bd(l,a,a.pendingProps,a.type,void 0,qt);break;case 11:a=bd(l,a,a.pendingProps,a.type.render,a.ref,qt);break;case 5:$l(a);default:Cd(l,a),a=Ut=eu(a,ar),a=Ad(l,a,ar)}r.memoizedProps=r.pendingProps,a===null?zo(r):Ut=a}function za(r,a,l,h){Zi=ia=null,$l(a),Oa=null,Ts=0;var x=a.return;try{if(lf(r,x,a,l,qt)){wn=1,Oo(r,Tt(l,r.current)),Ut=null;return}}catch(S){if(x!==null)throw Ut=x,S;wn=1,Oo(r,Tt(l,r.current)),Ut=null;return}a.flags&32768?(Zt||h===1?r=!0:Fa||(qt&536870912)!==0?r=!1:(jr=r=!0,(h===2||h===9||h===3||h===6)&&(h=Ei.current,h!==null&&h.tag===13&&(h.flags|=16384))),th(a,r)):zo(a)}function zo(r){var a=r;do{if((a.flags&32768)!==0){th(a,jr);return}r=a.return;var l=uf(a.alternate,a,ar);if(l!==null){Ut=l;return}if(a=a.sibling,a!==null){Ut=a;return}Ut=a=r}while(a!==null);wn===0&&(wn=5)}function th(r,a){do{var l=df(r.alternate,r);if(l!==null){l.flags&=32767,Ut=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Ut=r;return}Ut=r=l}while(r!==null);wn=6,Ut=null}function nh(r,a,l,h,x,S,K,ie,ce){r.cancelPendingCommit=null;do qo();while(Hn!==0);if((Qt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(S=a.lanes|a.childLanes,S|=mn,Wn(r,l,S,K,ie,ce),r===un&&(Ut=un=null,qt=0),Ua=a,Or=r,Va=l,Ec=S,wc=x,Gd=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,wf(Ne,function(){return oh(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=W.T,W.T=null,x=O.p,O.p=2,K=Qt,Qt|=4;try{hf(r,a,l)}finally{Qt=K,O.p=x,W.T=h}}Hn=1,ih(),rh(),ah()}}function ih(){if(Hn===1){Hn=0;var r=Or,a=Ua,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var h=O.p;O.p=2;var x=Qt;Qt|=4;try{Bd(a,r);var S=Bc,K=co(r.containerInfo),ie=S.focusedElem,ce=S.selectionRange;if(K!==ie&&ie&&ie.ownerDocument&&lo(ie.ownerDocument.documentElement,ie)){if(ce!==null&&ss(ie)){var Ae=ce.start,Oe=ce.end;if(Oe===void 0&&(Oe=Ae),"selectionStart"in ie)ie.selectionStart=Ae,ie.selectionEnd=Math.min(Oe,ie.value.length);else{var Ve=ie.ownerDocument||document,Ce=Ve&&Ve.defaultView||window;if(Ce.getSelection){var Pe=Ce.getSelection(),wt=ie.textContent.length,xt=Math.min(ce.start,wt),sn=ce.end===void 0?xt:Math.min(ce.end,wt);!Pe.extend&&xt>sn&&(K=sn,sn=xt,xt=K);var Ee=as(ie,xt),ge=as(ie,sn);if(Ee&&ge&&(Pe.rangeCount!==1||Pe.anchorNode!==Ee.node||Pe.anchorOffset!==Ee.offset||Pe.focusNode!==ge.node||Pe.focusOffset!==ge.offset)){var Se=Ve.createRange();Se.setStart(Ee.node,Ee.offset),Pe.removeAllRanges(),xt>sn?(Pe.addRange(Se),Pe.extend(ge.node,ge.offset)):(Se.setEnd(ge.node,ge.offset),Pe.addRange(Se))}}}}for(Ve=[],Pe=ie;Pe=Pe.parentNode;)Pe.nodeType===1&&Ve.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<Ve.length;ie++){var Le=Ve[ie];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}nl=!!Fc,Bc=Fc=null}finally{Qt=x,O.p=h,W.T=l}}r.current=a,Hn=2}}function rh(){if(Hn===2){Hn=0;var r=Or,a=Ua,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var h=O.p;O.p=2;var x=Qt;Qt|=4;try{Nd(r,a.alternate,a)}finally{Qt=x,O.p=h,W.T=l}}Hn=3}}function ah(){if(Hn===4||Hn===3){Hn=0,Te();var r=Or,a=Ua,l=Va,h=Gd;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Hn=5:(Hn=0,Ua=Or=null,sh(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(Dr=null),Qn(l),a=a.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(nt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=W.T,x=O.p,O.p=2,W.T=null;try{for(var S=r.onRecoverableError,K=0;K<h.length;K++){var ie=h[K];S(ie.value,{componentStack:ie.stack})}}finally{W.T=a,O.p=x}}(Va&3)!==0&&qo(),$i(r),x=r.pendingLanes,(l&4194090)!==0&&(x&42)!==0?r===Sc?Is++:(Is=0,Sc=r):Is=0,Ls(0)}}function sh(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,gs(a)))}function qo(r){return ih(),rh(),ah(),oh()}function oh(){if(Hn!==5)return!1;var r=Or,a=Ec;Ec=0;var l=Qn(Va),h=W.T,x=O.p;try{O.p=32>l?32:l,W.T=null,l=wc,wc=null;var S=Or,K=Va;if(Hn=0,Ua=Or=null,Va=0,(Qt&6)!==0)throw Error(i(331));var ie=Qt;if(Qt|=4,qd(S.current),Vd(S,S.current,K,l),Qt=ie,Ls(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(nt,S)}catch{}return!0}finally{O.p=x,W.T=h,sh(r,a)}}function lh(r,a,l){a=Tt(l,a),a=nc(r.stateNode,a,2),r=Sr(r,a,2),r!==null&&(bn(r,2),$i(r))}function on(r,a,l){if(r.tag===3)lh(r,r,l);else for(;a!==null;){if(a.tag===3){lh(a,r,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Dr===null||!Dr.has(h))){r=Tt(l,r),l=hd(2),h=Sr(a,l,2),h!==null&&(fd(l,h,a,r),bn(h,2),$i(h));break}}a=a.return}}function Cc(r,a,l){var h=r.pingCache;if(h===null){h=r.pingCache=new mf;var x=new Set;h.set(a,x)}else x=h.get(a),x===void 0&&(x=new Set,h.set(a,x));x.has(l)||(yc=!0,x.add(l),r=bf.bind(null,r,a,l),a.then(r,r))}function bf(r,a,l){var h=r.pingCache;h!==null&&h.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,un===r&&(qt&l)===l&&(wn===4||wn===3&&(qt&62914560)===qt&&300>Re()-_c?(Qt&2)===0&&$a(r,0):xc|=l,Ba===qt&&(Ba=0)),$i(r)}function ch(r,a){a===0&&(a=Ct()),r=ii(r,a),r!==null&&(bn(r,a),$i(r))}function _f(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),ch(r,l)}function Ef(r,a){var l=0;switch(r.tag){case 13:var h=r.stateNode,x=r.memoizedState;x!==null&&(l=x.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),ch(r,l)}function wf(r,a){return _e(r,a)}var Ho=null,qa=null,Pc=!1,Go=!1,kc=!1,ua=0;function $i(r){r!==qa&&r.next===null&&(qa===null?Ho=qa=r:qa=qa.next=r),Go=!0,Pc||(Pc=!0,Rf())}function Ls(r,a){if(!kc&&Go){kc=!0;do for(var l=!1,h=Ho;h!==null;){if(r!==0){var x=h.pendingLanes;if(x===0)var S=0;else{var K=h.suspendedLanes,ie=h.pingedLanes;S=(1<<31-pt(42|r)+1)-1,S&=x&~(K&~ie),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(l=!0,fh(h,S))}else S=qt,S=ve(h,h===un?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(S&3)===0||Ge(h,S)||(l=!0,fh(h,S));h=h.next}while(l);kc=!1}}function Sf(){uh()}function uh(){Go=Pc=!1;var r=0;ua!==0&&(Df()&&(r=ua),ua=0);for(var a=Re(),l=null,h=Ho;h!==null;){var x=h.next,S=dh(h,a);S===0?(h.next=null,l===null?Ho=x:l.next=x,x===null&&(qa=l)):(l=h,(r!==0||(S&3)!==0)&&(Go=!0)),h=x}Ls(r)}function dh(r,a){for(var l=r.suspendedLanes,h=r.pingedLanes,x=r.expirationTimes,S=r.pendingLanes&-62914561;0<S;){var K=31-pt(S),ie=1<<K,ce=x[K];ce===-1?((ie&l)===0||(ie&h)!==0)&&(x[K]=kt(ie,a)):ce<=a&&(r.expiredLanes|=ie),S&=~ie}if(a=un,l=qt,l=ve(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,l===0||r===a&&(en===2||en===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&Fe(h),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ge(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(h!==null&&Fe(h),Qn(l)){case 2:case 8:l=Ue;break;case 32:l=Ne;break;case 268435456:l=Ke;break;default:l=Ne}return h=hh.bind(null,r),l=_e(l,h),r.callbackPriority=a,r.callbackNode=l,a}return h!==null&&h!==null&&Fe(h),r.callbackPriority=2,r.callbackNode=null,2}function hh(r,a){if(Hn!==0&&Hn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(qo()&&r.callbackNode!==l)return null;var h=qt;return h=ve(r,r===un?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Kd(r,h,a),dh(r,Re()),r.callbackNode!=null&&r.callbackNode===l?hh.bind(null,r):null)}function fh(r,a){if(qo())return null;Kd(r,a,!0)}function Rf(){Nf(function(){(Qt&6)!==0?_e(be,Sf):uh()})}function jc(){return ua===0&&(ua=dt()),ua}function ph(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Hr(""+r)}function mh(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function Af(r,a,l,h,x){if(a==="submit"&&l&&l.stateNode===x){var S=ph((x[_n]||null).action),K=h.submitter;K&&(a=(a=K[_n]||null)?ph(a.formAction):K.getAttribute("formAction"),a!==null&&(S=a,K=null));var ie=new me("action","action",null,h,x);r.push({event:ie,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ua!==0){var ce=K?mh(x,K):new FormData(x);Zl(l,{pending:!0,data:ce,method:x.method,action:S},null,ce)}}else typeof S=="function"&&(ie.preventDefault(),ce=K?mh(x,K):new FormData(x),Zl(l,{pending:!0,data:ce,method:x.method,action:S},S,ce))},currentTarget:x}]})}}for(var Mc=0;Mc<$e.length;Mc++){var Dc=$e[Mc],Tf=Dc.toLowerCase(),Cf=Dc[0].toUpperCase()+Dc.slice(1);ot(Tf,"on"+Cf)}ot(Sa,"onAnimationEnd"),ot(Ra,"onAnimationIteration"),ot(cs,"onAnimationStart"),ot("dblclick","onDoubleClick"),ot("focusin","onFocus"),ot("focusout","onBlur"),ot(vl,"onTransitionRun"),ot(us,"onTransitionStart"),ot(yl,"onTransitionCancel"),ot(ho,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fs));function gh(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],x=h.event;h=h.listeners;e:{var S=void 0;if(a)for(var K=h.length-1;0<=K;K--){var ie=h[K],ce=ie.instance,Ae=ie.currentTarget;if(ie=ie.listener,ce!==S&&x.isPropagationStopped())break e;S=ie,x.currentTarget=Ae;try{S(x)}catch(Oe){Do(Oe)}x.currentTarget=null,S=ce}else for(K=0;K<h.length;K++){if(ie=h[K],ce=ie.instance,Ae=ie.currentTarget,ie=ie.listener,ce!==S&&x.isPropagationStopped())break e;S=ie,x.currentTarget=Ae;try{S(x)}catch(Oe){Do(Oe)}x.currentTarget=null,S=ce}}}}function Vt(r,a){var l=a[Sn];l===void 0&&(l=a[Sn]=new Set);var h=r+"__bubble";l.has(h)||(yh(a,r,2,!1),l.add(h))}function Oc(r,a,l){var h=0;a&&(h|=4),yh(l,r,h,a)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function Nc(r){if(!r[Wo]){r[Wo]=!0,Xs.forEach(function(l){l!=="selectionchange"&&(Pf.has(l)||Oc(l,!1,r),Oc(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Wo]||(a[Wo]=!0,Oc("selectionchange",!1,a))}}function yh(r,a,l,h){switch($h(a)){case 2:var x=np;break;case 8:x=ip;break;default:x=Yc}l=x.bind(null,a,l,r),x=void 0,!is||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),h?x!==void 0?r.addEventListener(a,l,{capture:!0,passive:x}):r.addEventListener(a,l,!0):x!==void 0?r.addEventListener(a,l,{passive:x}):r.addEventListener(a,l,!1)}function Ic(r,a,l,h,x){var S=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var K=h.tag;if(K===3||K===4){var ie=h.stateNode.containerInfo;if(ie===x)break;if(K===4)for(K=h.return;K!==null;){var ce=K.tag;if((ce===3||ce===4)&&K.stateNode.containerInfo===x)return;K=K.return}for(;ie!==null;){if(K=or(ie),K===null)return;if(ce=K.tag,ce===5||ce===6||ce===26||ce===27){h=S=K;continue e}ie=ie.parentNode}}h=h.return}_a(function(){var Ae=S,Oe=pr(l),Ve=[];e:{var Ce=ds.get(r);if(Ce!==void 0){var Pe=me,wt=r;switch(r){case"keypress":if(de(l)===0)break e;case"keydown":case"keyup":Pe=hn;break;case"focusin":wt="focus",Pe=Ze;break;case"focusout":wt="blur",Pe=Ze;break;case"beforeblur":case"afterblur":Pe=Ze;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=at;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=ci;break;case Sa:case Ra:case cs:Pe=lt;break;case ho:Pe=Xn;break;case"scroll":case"scrollend":Pe=De;break;case"wheel":Pe=ct;break;case"copy":case"cut":case"paste":Pe=Dt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=jn;break;case"toggle":case"beforetoggle":Pe=Qe}var xt=(a&4)!==0,sn=!xt&&(r==="scroll"||r==="scrollend"),Ee=xt?Ce!==null?Ce+"Capture":null:Ce;xt=[];for(var ge=Ae,Se;ge!==null;){var Le=ge;if(Se=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||Se===null||Ee===null||(Le=Gr(ge,Ee),Le!=null&&xt.push(Bs(ge,Le,Se))),sn)break;ge=ge.return}0<xt.length&&(Ce=new Pe(Ce,wt,null,l,Oe),Ve.push({event:Ce,listeners:xt}))}}if((a&7)===0){e:{if(Ce=r==="mouseover"||r==="pointerover",Pe=r==="mouseout"||r==="pointerout",Ce&&l!==ts&&(wt=l.relatedTarget||l.fromElement)&&(or(wt)||wt[Yn]))break e;if((Pe||Ce)&&(Ce=Oe.window===Oe?Oe:(Ce=Oe.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Pe?(wt=l.relatedTarget||l.toElement,Pe=Ae,wt=wt?or(wt):null,wt!==null&&(sn=o(wt),xt=wt.tag,wt!==sn||xt!==5&&xt!==27&&xt!==6)&&(wt=null)):(Pe=null,wt=Ae),Pe!==wt)){if(xt=bt,Le="onMouseLeave",Ee="onMouseEnter",ge="mouse",(r==="pointerout"||r==="pointerover")&&(xt=jn,Le="onPointerLeave",Ee="onPointerEnter",ge="pointer"),sn=Pe==null?Ce:qr(Pe),Se=wt==null?Ce:qr(wt),Ce=new xt(Le,ge+"leave",Pe,l,Oe),Ce.target=sn,Ce.relatedTarget=Se,Le=null,or(Oe)===Ae&&(xt=new xt(Ee,ge+"enter",wt,l,Oe),xt.target=Se,xt.relatedTarget=sn,Le=xt),sn=Le,Pe&&wt)t:{for(xt=Pe,Ee=wt,ge=0,Se=xt;Se;Se=Ha(Se))ge++;for(Se=0,Le=Ee;Le;Le=Ha(Le))Se++;for(;0<ge-Se;)xt=Ha(xt),ge--;for(;0<Se-ge;)Ee=Ha(Ee),Se--;for(;ge--;){if(xt===Ee||Ee!==null&&xt===Ee.alternate)break t;xt=Ha(xt),Ee=Ha(Ee)}xt=null}else xt=null;Pe!==null&&xh(Ve,Ce,Pe,xt,!1),wt!==null&&sn!==null&&xh(Ve,sn,wt,xt,!0)}}e:{if(Ce=Ae?qr(Ae):window,Pe=Ce.nodeName&&Ce.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Ce.type==="file")var rt=Gi;else if(An(Ce))if(Wr)rt=Ni;else{rt=Xt;var Nt=pl}else Pe=Ce.nodeName,!Pe||Pe.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?Ae&&Qa(Ae.elementType)&&(rt=Gi):rt=ml;if(rt&&(rt=rt(r,Ae))){Yt(Ve,rt,l,Oe);break e}Nt&&Nt(r,Ce,Ae),r==="focusout"&&Ae&&Ce.type==="number"&&Ae.memoizedProps.value!=null&&Za(Ce,"number",Ce.value)}switch(Nt=Ae?qr(Ae):window,r){case"focusin":(An(Nt)||Nt.contentEditable==="true")&&(gr=Nt,wa=Ae,vr=null);break;case"focusout":vr=wa=gr=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":Yr=!1,os(Ve,l,Oe);break;case"selectionchange":if(Ii)break;case"keydown":case"keyup":os(Ve,l,Oe)}var ft;if(Je)e:{switch(r){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Bt?At(r,l)&&(Et="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Et="onCompositionStart");Et&&(et&&l.locale!=="ko"&&(Bt||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Bt&&(ft=ue()):(Q=Oe,ae="value"in Q?Q.value:Q.textContent,Bt=!0)),Nt=Ko(Ae,Et),0<Nt.length&&(Et=new Ft(Et,r,null,l,Oe),Ve.push({event:Et,listeners:Nt}),ft?Et.data=ft:(ft=Kt(l),ft!==null&&(Et.data=ft)))),(ft=gt?Mn(r,l):ti(r,l))&&(Et=Ko(Ae,"onBeforeInput"),0<Et.length&&(Nt=new Ft("onBeforeInput","beforeinput",null,l,Oe),Ve.push({event:Nt,listeners:Et}),Nt.data=ft)),Af(Ve,r,Ae,l,Oe)}gh(Ve,a)})}function Bs(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Ko(r,a){for(var l=a+"Capture",h=[];r!==null;){var x=r,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Gr(r,l),x!=null&&h.unshift(Bs(r,x,S)),x=Gr(r,a),x!=null&&h.push(Bs(r,x,S))),r.tag===3)return h;r=r.return}return[]}function Ha(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function xh(r,a,l,h,x){for(var S=a._reactName,K=[];l!==null&&l!==h;){var ie=l,ce=ie.alternate,Ae=ie.stateNode;if(ie=ie.tag,ce!==null&&ce===h)break;ie!==5&&ie!==26&&ie!==27||Ae===null||(ce=Ae,x?(Ae=Gr(l,S),Ae!=null&&K.unshift(Bs(l,Ae,ce))):x||(Ae=Gr(l,S),Ae!=null&&K.push(Bs(l,Ae,ce)))),l=l.return}K.length!==0&&r.push({event:a,listeners:K})}var kf=/\r\n?/g,jf=/\u0000|\uFFFD/g;function bh(r){return(typeof r=="string"?r:""+r).replace(kf,`
`).replace(jf,"")}function _h(r,a){return a=bh(a),bh(r)===a}function Yo(){}function an(r,a,l,h,x,S){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Hi(r,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Hi(r,""+h);break;case"className":fa(r,"class",h);break;case"tabIndex":fa(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":fa(r,l,h);break;case"style":so(r,h,S);break;case"data":if(a!=="object"){fa(r,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(l);break}h=Hr(""+h),r.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(l==="formAction"?(a!=="input"&&an(r,a,"name",x.name,x,null),an(r,a,"formEncType",x.formEncType,x,null),an(r,a,"formMethod",x.formMethod,x,null),an(r,a,"formTarget",x.formTarget,x,null)):(an(r,a,"encType",x.encType,x,null),an(r,a,"method",x.method,x,null),an(r,a,"target",x.target,x,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(l);break}h=Hr(""+h),r.setAttribute(l,h);break;case"onClick":h!=null&&(r.onclick=Yo);break;case"onScroll":h!=null&&Vt("scroll",r);break;case"onScrollEnd":h!=null&&Vt("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}l=Hr(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,""+h):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":h===!0?r.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,h):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(l,h):r.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(l):r.setAttribute(l,h);break;case"popover":Vt("beforetoggle",r),Vt("toggle",r),ha(r,"popover",h);break;case"xlinkActuate":Ri(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ri(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ri(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ri(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ri(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ri(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ri(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ri(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ri(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ha(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=fr.get(l)||l,ha(r,l,h))}}function Lc(r,a,l,h,x,S){switch(l){case"style":so(r,h,S);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof h=="string"?Hi(r,h):(typeof h=="number"||typeof h=="bigint")&&Hi(r,""+h);break;case"onScroll":h!=null&&Vt("scroll",r);break;case"onScrollEnd":h!=null&&Vt("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Yo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),a=l.slice(2,x?l.length-7:void 0),S=r[_n]||null,S=S!=null?S[l]:null,typeof S=="function"&&r.removeEventListener(a,S,x),typeof h=="function")){typeof S!="function"&&S!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,h,x);break e}l in r?r[l]=h:h===!0?r.setAttribute(l,""):ha(r,l,h)}}}function Gn(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",r),Vt("load",r);var h=!1,x=!1,S;for(S in l)if(l.hasOwnProperty(S)){var K=l[S];if(K!=null)switch(S){case"src":h=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:an(r,a,S,K,l,null)}}x&&an(r,a,"srcSet",l.srcSet,l,null),h&&an(r,a,"src",l.src,l,null);return;case"input":Vt("invalid",r);var ie=S=K=x=null,ce=null,Ae=null;for(h in l)if(l.hasOwnProperty(h)){var Oe=l[h];if(Oe!=null)switch(h){case"name":x=Oe;break;case"type":K=Oe;break;case"checked":ce=Oe;break;case"defaultChecked":Ae=Oe;break;case"value":S=Oe;break;case"defaultValue":ie=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,a));break;default:an(r,a,h,Oe,l,null)}}ro(r,S,ie,ce,Ae,K,x,!1),ma(r);return;case"select":Vt("invalid",r),h=K=S=null;for(x in l)if(l.hasOwnProperty(x)&&(ie=l[x],ie!=null))switch(x){case"value":S=ie;break;case"defaultValue":K=ie;break;case"multiple":h=ie;default:an(r,a,x,ie,l,null)}a=S,l=K,r.multiple=!!h,a!=null?Di(r,!!h,a,!1):l!=null&&Di(r,!!h,l,!0);return;case"textarea":Vt("invalid",r),S=x=h=null;for(K in l)if(l.hasOwnProperty(K)&&(ie=l[K],ie!=null))switch(K){case"value":h=ie;break;case"defaultValue":x=ie;break;case"children":S=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(91));break;default:an(r,a,K,ie,l,null)}Ja(r,h,x,S),ma(r);return;case"option":for(ce in l)if(l.hasOwnProperty(ce)&&(h=l[ce],h!=null))switch(ce){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:an(r,a,ce,h,l,null)}return;case"dialog":Vt("beforetoggle",r),Vt("toggle",r),Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":Vt("load",r);break;case"video":case"audio":for(h=0;h<Fs.length;h++)Vt(Fs[h],r);break;case"image":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"embed":case"source":case"link":Vt("error",r),Vt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in l)if(l.hasOwnProperty(Ae)&&(h=l[Ae],h!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:an(r,a,Ae,h,l,null)}return;default:if(Qa(a)){for(Oe in l)l.hasOwnProperty(Oe)&&(h=l[Oe],h!==void 0&&Lc(r,a,Oe,h,l,void 0));return}}for(ie in l)l.hasOwnProperty(ie)&&(h=l[ie],h!=null&&an(r,a,ie,h,l,null))}function Mf(r,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,K=null,ie=null,ce=null,Ae=null,Oe=null;for(Pe in l){var Ve=l[Pe];if(l.hasOwnProperty(Pe)&&Ve!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":ce=Ve;default:h.hasOwnProperty(Pe)||an(r,a,Pe,null,h,Ve)}}for(var Ce in h){var Pe=h[Ce];if(Ve=l[Ce],h.hasOwnProperty(Ce)&&(Pe!=null||Ve!=null))switch(Ce){case"type":S=Pe;break;case"name":x=Pe;break;case"checked":Ae=Pe;break;case"defaultChecked":Oe=Pe;break;case"value":K=Pe;break;case"defaultValue":ie=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,a));break;default:Pe!==Ve&&an(r,a,Ce,Pe,h,Ve)}}ya(r,K,ie,ce,Ae,Oe,S,x);return;case"select":Pe=K=ie=Ce=null;for(S in l)if(ce=l[S],l.hasOwnProperty(S)&&ce!=null)switch(S){case"value":break;case"multiple":Pe=ce;default:h.hasOwnProperty(S)||an(r,a,S,null,h,ce)}for(x in h)if(S=h[x],ce=l[x],h.hasOwnProperty(x)&&(S!=null||ce!=null))switch(x){case"value":Ce=S;break;case"defaultValue":ie=S;break;case"multiple":K=S;default:S!==ce&&an(r,a,x,S,h,ce)}a=ie,l=K,h=Pe,Ce!=null?Di(r,!!l,Ce,!1):!!h!=!!l&&(a!=null?Di(r,!!l,a,!0):Di(r,!!l,l?[]:"",!1));return;case"textarea":Pe=Ce=null;for(ie in l)if(x=l[ie],l.hasOwnProperty(ie)&&x!=null&&!h.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:an(r,a,ie,null,h,x)}for(K in h)if(x=h[K],S=l[K],h.hasOwnProperty(K)&&(x!=null||S!=null))switch(K){case"value":Ce=x;break;case"defaultValue":Pe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&an(r,a,K,x,h,S)}ao(r,Ce,Pe);return;case"option":for(var wt in l)if(Ce=l[wt],l.hasOwnProperty(wt)&&Ce!=null&&!h.hasOwnProperty(wt))switch(wt){case"selected":r.selected=!1;break;default:an(r,a,wt,null,h,Ce)}for(ce in h)if(Ce=h[ce],Pe=l[ce],h.hasOwnProperty(ce)&&Ce!==Pe&&(Ce!=null||Pe!=null))switch(ce){case"selected":r.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:an(r,a,ce,Ce,h,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in l)Ce=l[xt],l.hasOwnProperty(xt)&&Ce!=null&&!h.hasOwnProperty(xt)&&an(r,a,xt,null,h,Ce);for(Ae in h)if(Ce=h[Ae],Pe=l[Ae],h.hasOwnProperty(Ae)&&Ce!==Pe&&(Ce!=null||Pe!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,a));break;default:an(r,a,Ae,Ce,h,Pe)}return;default:if(Qa(a)){for(var sn in l)Ce=l[sn],l.hasOwnProperty(sn)&&Ce!==void 0&&!h.hasOwnProperty(sn)&&Lc(r,a,sn,void 0,h,Ce);for(Oe in h)Ce=h[Oe],Pe=l[Oe],!h.hasOwnProperty(Oe)||Ce===Pe||Ce===void 0&&Pe===void 0||Lc(r,a,Oe,Ce,h,Pe);return}}for(var Ee in l)Ce=l[Ee],l.hasOwnProperty(Ee)&&Ce!=null&&!h.hasOwnProperty(Ee)&&an(r,a,Ee,null,h,Ce);for(Ve in h)Ce=h[Ve],Pe=l[Ve],!h.hasOwnProperty(Ve)||Ce===Pe||Ce==null&&Pe==null||an(r,a,Ve,Ce,h,Pe)}var Fc=null,Bc=null;function Xo(r){return r.nodeType===9?r:r.ownerDocument}function Eh(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wh(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Uc(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vc=null;function Df(){var r=window.event;return r&&r.type==="popstate"?r===Vc?!1:(Vc=r,!0):(Vc=null,!1)}var Sh=typeof setTimeout=="function"?setTimeout:void 0,Of=typeof clearTimeout=="function"?clearTimeout:void 0,Rh=typeof Promise=="function"?Promise:void 0,Nf=typeof queueMicrotask=="function"?queueMicrotask:typeof Rh<"u"?function(r){return Rh.resolve(null).then(r).catch(If)}:Sh;function If(r){setTimeout(function(){throw r})}function Ir(r){return r==="head"}function Ah(r,a){var l=a,h=0,x=0;do{var S=l.nextSibling;if(r.removeChild(l),S&&S.nodeType===8)if(l=S.data,l==="/$"){if(0<h&&8>h){l=h;var K=r.ownerDocument;if(l&1&&Us(K.documentElement),l&2&&Us(K.body),l&4)for(l=K.head,Us(l),K=l.firstChild;K;){var ie=K.nextSibling,ce=K.nodeName;K[zr]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&K.rel.toLowerCase()==="stylesheet"||l.removeChild(K),K=ie}}if(x===0){r.removeChild(S),Ks(a);return}x--}else l==="$"||l==="$?"||l==="$!"?x++:h=l.charCodeAt(0)-48;else h=0;l=S}while(l);Ks(a)}function $c(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":$c(l),Ya(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function Lf(r,a,l,h){for(;r.nodeType===1;){var x=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[zr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(S=r.getAttribute("rel"),S==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(S!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(S=r.getAttribute("src"),(S!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===S)return r}else return r;if(r=Mi(r.nextSibling),r===null)break}return null}function Ff(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Mi(r.nextSibling),r===null))return null;return r}function zc(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Bf(r,a){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Mi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var qc=null;function Th(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}function Ch(r,a,l){switch(a=Xo(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Us(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Ya(r)}var Si=new Map,Ph=new Set;function Zo(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var sr=O.d;O.d={f:Uf,r:Vf,D:$f,C:zf,L:qf,m:Hf,X:Wf,S:Gf,M:Kf};function Uf(){var r=sr.f(),a=$o();return r||a}function Vf(r){var a=lr(r);a!==null&&a.tag===5&&a.type==="form"?Wu(a):sr.r(r)}var Ga=typeof document>"u"?null:document;function kh(r,a,l){var h=Ga;if(h&&typeof a=="string"&&a){var x=ei(a);x='link[rel="'+r+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),Ph.has(x)||(Ph.add(x),r={rel:r,crossOrigin:l,href:a},h.querySelector(x)===null&&(a=h.createElement("link"),Gn(a,"link",r),kn(a),h.head.appendChild(a)))}}function $f(r){sr.D(r),kh("dns-prefetch",r,null)}function zf(r,a){sr.C(r,a),kh("preconnect",r,a)}function qf(r,a,l){sr.L(r,a,l);var h=Ga;if(h&&r&&a){var x='link[rel="preload"][as="'+ei(a)+'"]';a==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+ei(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+ei(l.imageSizes)+'"]')):x+='[href="'+ei(r)+'"]';var S=x;switch(a){case"style":S=Wa(r);break;case"script":S=Ka(r)}Si.has(S)||(r=u({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),Si.set(S,r),h.querySelector(x)!==null||a==="style"&&h.querySelector(Vs(S))||a==="script"&&h.querySelector($s(S))||(a=h.createElement("link"),Gn(a,"link",r),kn(a),h.head.appendChild(a)))}}function Hf(r,a){sr.m(r,a);var l=Ga;if(l&&r){var h=a&&typeof a.as=="string"?a.as:"script",x='link[rel="modulepreload"][as="'+ei(h)+'"][href="'+ei(r)+'"]',S=x;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ka(r)}if(!Si.has(S)&&(r=u({rel:"modulepreload",href:r},a),Si.set(S,r),l.querySelector(x)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($s(S)))return}h=l.createElement("link"),Gn(h,"link",r),kn(h),l.head.appendChild(h)}}}function Gf(r,a,l){sr.S(r,a,l);var h=Ga;if(h&&r){var x=cr(h).hoistableStyles,S=Wa(r);a=a||"default";var K=x.get(S);if(!K){var ie={loading:0,preload:null};if(K=h.querySelector(Vs(S)))ie.loading=5;else{r=u({rel:"stylesheet",href:r,"data-precedence":a},l),(l=Si.get(S))&&Hc(r,l);var ce=K=h.createElement("link");kn(ce),Gn(ce,"link",r),ce._p=new Promise(function(Ae,Oe){ce.onload=Ae,ce.onerror=Oe}),ce.addEventListener("load",function(){ie.loading|=1}),ce.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Jo(K,a,h)}K={type:"stylesheet",instance:K,count:1,state:ie},x.set(S,K)}}}function Wf(r,a){sr.X(r,a);var l=Ga;if(l&&r){var h=cr(l).hoistableScripts,x=Ka(r),S=h.get(x);S||(S=l.querySelector($s(x)),S||(r=u({src:r,async:!0},a),(a=Si.get(x))&&Gc(r,a),S=l.createElement("script"),kn(S),Gn(S,"link",r),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(x,S))}}function Kf(r,a){sr.M(r,a);var l=Ga;if(l&&r){var h=cr(l).hoistableScripts,x=Ka(r),S=h.get(x);S||(S=l.querySelector($s(x)),S||(r=u({src:r,async:!0,type:"module"},a),(a=Si.get(x))&&Gc(r,a),S=l.createElement("script"),kn(S),Gn(S,"link",r),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(x,S))}}function jh(r,a,l,h){var x=(x=P.current)?Zo(x):null;if(!x)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Wa(l.href),l=cr(x).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Wa(l.href);var S=cr(x).hoistableStyles,K=S.get(r);if(K||(x=x.ownerDocument||x,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(r,K),(S=x.querySelector(Vs(r)))&&!S._p&&(K.instance=S,K.state.loading=5),Si.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Si.set(r,l),S||Yf(x,r,l,K.state))),a&&h===null)throw Error(i(528,""));return K}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ka(l),l=cr(x).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Wa(r){return'href="'+ei(r)+'"'}function Vs(r){return'link[rel="stylesheet"]['+r+"]"}function Mh(r){return u({},r,{"data-precedence":r.precedence,precedence:null})}function Yf(r,a,l,h){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=r.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Gn(a,"link",l),kn(a),r.head.appendChild(a))}function Ka(r){return'[src="'+ei(r)+'"]'}function $s(r){return"script[async]"+r}function Dh(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=r.querySelector('style[data-href~="'+ei(l.href)+'"]');if(h)return a.instance=h,kn(h),h;var x=u({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),kn(h),Gn(h,"style",x),Jo(h,l.precedence,r),a.instance=h;case"stylesheet":x=Wa(l.href);var S=r.querySelector(Vs(x));if(S)return a.state.loading|=4,a.instance=S,kn(S),S;h=Mh(l),(x=Si.get(x))&&Hc(h,x),S=(r.ownerDocument||r).createElement("link"),kn(S);var K=S;return K._p=new Promise(function(ie,ce){K.onload=ie,K.onerror=ce}),Gn(S,"link",h),a.state.loading|=4,Jo(S,l.precedence,r),a.instance=S;case"script":return S=Ka(l.src),(x=r.querySelector($s(S)))?(a.instance=x,kn(x),x):(h=l,(x=Si.get(S))&&(h=u({},l),Gc(h,x)),r=r.ownerDocument||r,x=r.createElement("script"),kn(x),Gn(x,"link",h),r.head.appendChild(x),a.instance=x);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Jo(h,l.precedence,r));return a.instance}function Jo(r,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=h.length?h[h.length-1]:null,S=x,K=0;K<h.length;K++){var ie=h[K];if(ie.dataset.precedence===a)S=ie;else if(S!==x)break}S?S.parentNode.insertBefore(r,S.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function Hc(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Gc(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Qo=null;function Oh(r,a,l){if(Qo===null){var h=new Map,x=Qo=new Map;x.set(l,h)}else x=Qo,h=x.get(l),h||(h=new Map,x.set(l,h));if(h.has(r))return h;for(h.set(r,null),l=l.getElementsByTagName(r),x=0;x<l.length;x++){var S=l[x];if(!(S[zr]||S[fn]||r==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var K=S.getAttribute(a)||"";K=r+K;var ie=h.get(K);ie?ie.push(S):h.set(K,[S])}}return h}function Nh(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function Xf(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ih(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var zs=null;function Zf(){}function Jf(r,a,l){if(zs===null)throw Error(i(475));var h=zs;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var x=Wa(l.href),S=r.querySelector(Vs(x));if(S){r=S._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(h.count++,h=el.bind(h),r.then(h,h)),a.state.loading|=4,a.instance=S,kn(S);return}S=r.ownerDocument||r,l=Mh(l),(x=Si.get(x))&&Hc(l,x),S=S.createElement("link"),kn(S);var K=S;K._p=new Promise(function(ie,ce){K.onload=ie,K.onerror=ce}),Gn(S,"link",l),a.instance=S}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=el.bind(h),r.addEventListener("load",a),r.addEventListener("error",a))}}function Qf(){if(zs===null)throw Error(i(475));var r=zs;return r.stylesheets&&r.count===0&&Wc(r,r.stylesheets),0<r.count?function(a){var l=setTimeout(function(){if(r.stylesheets&&Wc(r,r.stylesheets),r.unsuspend){var h=r.unsuspend;r.unsuspend=null,h()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(l)}}:null}function el(){if(this.count--,this.count===0){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var tl=null;function Wc(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,tl=new Map,a.forEach(ep,r),tl=null,el.call(r))}function ep(r,a){if(!(a.state.loading&4)){var l=tl.get(r);if(l)var h=l.get(null);else{l=new Map,tl.set(r,l);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var K=x[S];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(l.set(K.dataset.precedence,K),h=K)}h&&l.set(null,h)}x=a.instance,K=x.getAttribute("data-precedence"),S=l.get(K)||h,S===h&&l.set(null,x),l.set(K,x),this.count++,h=el.bind(this),x.addEventListener("load",h),x.addEventListener("error",h),S?S.parentNode.insertBefore(x,S.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),a.state.loading|=4}}var qs={$$typeof:k,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function tp(r,a,l,h,x,S,K,ie){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=h,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function Lh(r,a,l,h,x,S,K,ie,ce,Ae,Oe,Ve){return r=new tp(r,a,l,K,ie,ce,Ae,Ve),a=1,S===!0&&(a|=24),S=hi(3,null,null,a),r.current=S,S.stateNode=r,a=Cl(),a.refCount++,r.pooledCache=a,a.refCount++,S.memoizedState={element:h,isDehydrated:l,cache:a},Ml(S),r}function Fh(r){return r?(r=ki,r):ki}function Bh(r,a,l,h,x,S){x=Fh(x),h.context===null?h.context=x:h.pendingContext=x,h=wr(a),h.payload={element:l},S=S===void 0?null:S,S!==null&&(h.callback=S),l=Sr(r,h,a),l!==null&&(vi(l,r,a),bs(l,r,a))}function Uh(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Kc(r,a){Uh(r,a),(r=r.alternate)&&Uh(r,a)}function Vh(r){if(r.tag===13){var a=ii(r,67108864);a!==null&&vi(a,r,67108864),Kc(r,67108864)}}var nl=!0;function np(r,a,l,h){var x=W.T;W.T=null;var S=O.p;try{O.p=2,Yc(r,a,l,h)}finally{O.p=S,W.T=x}}function ip(r,a,l,h){var x=W.T;W.T=null;var S=O.p;try{O.p=8,Yc(r,a,l,h)}finally{O.p=S,W.T=x}}function Yc(r,a,l,h){if(nl){var x=Xc(h);if(x===null)Ic(r,a,h,il,l),zh(r,h);else if(ap(x,r,a,l,h))h.stopPropagation();else if(zh(r,h),a&4&&-1<rp.indexOf(r)){for(;x!==null;){var S=lr(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var K=xe(S.pendingLanes);if(K!==0){var ie=S;for(ie.pendingLanes|=2,ie.entangledLanes|=2;K;){var ce=1<<31-pt(K);ie.entanglements[1]|=ce,K&=~ce}$i(S),(Qt&6)===0&&(Uo=Re()+500,Ls(0))}}break;case 13:ie=ii(S,2),ie!==null&&vi(ie,S,2),$o(),Kc(S,2)}if(S=Xc(h),S===null&&Ic(r,a,h,il,l),S===x)break;x=S}x!==null&&h.stopPropagation()}else Ic(r,a,h,null,l)}}function Xc(r){return r=pr(r),Zc(r)}var il=null;function Zc(r){if(il=null,r=or(r),r!==null){var a=o(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=c(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return il=r,null}function $h(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case be:return 2;case Ue:return 8;case Ne:case Be:return 32;case Ke:return 268435456;default:return 32}default:return 32}}var Jc=!1,Lr=null,Fr=null,Br=null,Hs=new Map,Gs=new Map,Ur=[],rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zh(r,a){switch(r){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Hs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(a.pointerId)}}function Ws(r,a,l,h,x,S){return r===null||r.nativeEvent!==S?(r={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:S,targetContainers:[x]},a!==null&&(a=lr(a),a!==null&&Vh(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),r)}function ap(r,a,l,h,x){switch(a){case"focusin":return Lr=Ws(Lr,r,a,l,h,x),!0;case"dragenter":return Fr=Ws(Fr,r,a,l,h,x),!0;case"mouseover":return Br=Ws(Br,r,a,l,h,x),!0;case"pointerover":var S=x.pointerId;return Hs.set(S,Ws(Hs.get(S)||null,r,a,l,h,x)),!0;case"gotpointercapture":return S=x.pointerId,Gs.set(S,Ws(Gs.get(S)||null,r,a,l,h,x)),!0}return!1}function qh(r){var a=or(r.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){r.blockedOn=a,yi(r.priority,function(){if(l.tag===13){var h=gi();h=Nn(h);var x=ii(l,h);x!==null&&vi(x,l,h),Kc(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function rl(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Xc(r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);ts=h,l.target.dispatchEvent(h),ts=null}else return a=lr(l),a!==null&&Vh(a),r.blockedOn=l,!1;a.shift()}return!0}function Hh(r,a,l){rl(r)&&l.delete(a)}function sp(){Jc=!1,Lr!==null&&rl(Lr)&&(Lr=null),Fr!==null&&rl(Fr)&&(Fr=null),Br!==null&&rl(Br)&&(Br=null),Hs.forEach(Hh),Gs.forEach(Hh)}function al(r,a){r.blockedOn===a&&(r.blockedOn=null,Jc||(Jc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sp)))}var sl=null;function Gh(r){sl!==r&&(sl=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sl===r&&(sl=null);for(var a=0;a<r.length;a+=3){var l=r[a],h=r[a+1],x=r[a+2];if(typeof h!="function"){if(Zc(h||l)===null)continue;break}var S=lr(l);S!==null&&(r.splice(a,3),a-=3,Zl(S,{pending:!0,data:x,method:l.method,action:h},h,x))}}))}function Ks(r){function a(ce){return al(ce,r)}Lr!==null&&al(Lr,r),Fr!==null&&al(Fr,r),Br!==null&&al(Br,r),Hs.forEach(a),Gs.forEach(a);for(var l=0;l<Ur.length;l++){var h=Ur[l];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Ur.length&&(l=Ur[0],l.blockedOn===null);)qh(l),l.blockedOn===null&&Ur.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var x=l[h],S=l[h+1],K=x[_n]||null;if(typeof S=="function")K||Gh(l);else if(K){var ie=null;if(S&&S.hasAttribute("formAction")){if(x=S,K=S[_n]||null)ie=K.formAction;else if(Zc(x)!==null)continue}else ie=K.action;typeof ie=="function"?l[h+1]=ie:(l.splice(h,3),h-=3),Gh(l)}}}function Qc(r){this._internalRoot=r}ol.prototype.render=Qc.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,h=gi();Bh(l,h,r,a,null,null)},ol.prototype.unmount=Qc.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Bh(r.current,2,null,r,null,null),$o(),a[Yn]=null}};function ol(r){this._internalRoot=r}ol.prototype.unstable_scheduleHydration=function(r){if(r){var a=tn();r={blockedOn:null,target:r,priority:a};for(var l=0;l<Ur.length&&a!==0&&a<Ur[l].priority;l++);Ur.splice(l,0,r),l===0&&qh(r)}};var Wh=e.version;if(Wh!=="19.1.0")throw Error(i(527,Wh,"19.1.0"));O.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(a),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var op={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{nt=ll.inject(op),Xe=ll}catch{}}return reactDomClient_production.createRoot=function(r,a){if(!s(r))throw Error(i(299));var l=!1,h="",x=ld,S=cd,K=ud,ie=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(K=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(ie=a.unstable_transitionCallbacks)),a=Lh(r,1,!1,null,null,l,h,x,S,K,ie,null),r[Yn]=a.current,Nc(r),new Qc(a)},reactDomClient_production.hydrateRoot=function(r,a,l){if(!s(r))throw Error(i(299));var h=!1,x="",S=ld,K=cd,ie=ud,ce=null,Ae=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(K=l.onCaughtError),l.onRecoverableError!==void 0&&(ie=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ce=l.unstable_transitionCallbacks),l.formState!==void 0&&(Ae=l.formState)),a=Lh(r,1,!0,a,l??null,h,x,S,K,ie,ce,Ae),a.context=Fh(null),l=a.current,h=gi(),h=Nn(h),x=wr(h),x.callback=null,Sr(l,x,h),l=h,a.current.lanes=l,bn(a,l),$i(a),r[Yn]=a.current,Nc(r),new ol(a)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(t={}){function e(i,s){let{pathname:o,search:c,hash:f}=i.location;return createLocation("",{pathname:o,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:createPath(s)}return getUrlBasedHistory(e,n,null,t)}function invariant$1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:n,key:e&&e.key||i||createKey()}}function createPath({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function parsePath(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,n,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,c=s.history,f="POP",p=null,d=u();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function u(){return(c.state||{idx:null}).idx}function m(){f="POP";let w=u(),_=w==null?null:w-d;d=w,p&&p({action:f,location:y.location,delta:_})}function v(w,_){f="PUSH";let R=createLocation(y.location,w,_);d=u()+1;let k=getHistoryState(R,d),C=y.createHref(R);try{c.pushState(k,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(C)}o&&p&&p({action:f,location:y.location,delta:1})}function b(w,_){f="REPLACE";let R=createLocation(y.location,w,_);d=u();let k=getHistoryState(R,d),C=y.createHref(R);c.replaceState(k,"",C),o&&p&&p({action:f,location:y.location,delta:0})}function g(w){return createBrowserURLImpl(w)}let y={get action(){return f},get location(){return t(s,c)},listen(w){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,m),p=w,()=>{s.removeEventListener(PopStateEventType,m),p=null}},createHref(w){return e(s,w)},createURL:g,encodeLocation(w){let _=g(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:b,go(w){return c.go(w)}};return y}function createBrowserURLImpl(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:createPath(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function matchRoutes(t,e,n="/"){return matchRoutesImpl(t,e,n,!1)}function matchRoutesImpl(t,e,n,i){let s=typeof e=="string"?parsePath(e):e,o=stripBasename(s.pathname||"/",n);if(o==null)return null;let c=flattenRoutes(t);rankRouteBranches(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let d=decodePath(o);f=matchRouteBranch(c[p],d,i)}return f}function flattenRoutes(t,e=[],n=[],i=""){let s=(o,c,f)=>{let p={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};p.relativePath.startsWith("/")&&(invariant$1(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let d=joinPaths([i,p.relativePath]),u=n.concat(p);o.children&&o.children.length>0&&(invariant$1(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),flattenRoutes(o.children,e,u,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:computeScore(d,o.index),routesMeta:u})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))s(o,c);else for(let f of explodeOptionalSegments(o.path))s(o,c,f)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let c=explodeOptionalSegments(i.join("/")),f=[];return f.push(...c.map(p=>p===""?o:[o,p].join("/"))),s&&f.push(...c),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function rankRouteBranches(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let n=t.split("/"),i=n.length;return n.some(isSplat)&&(i+=splatPenalty),e&&(i+=indexRouteValue),n.filter(s=>!isSplat(s)).reduce((s,o)=>s+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),i)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,n=!1){let{routesMeta:i}=t,s={},o="/",c=[];for(let f=0;f<i.length;++f){let p=i[f],d=f===i.length-1,u=o==="/"?e:e.slice(o.length)||"/",m=matchPath({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},u),v=p.route;if(!m&&d&&n&&!i[i.length-1].route.index&&(m=matchPath({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},u)),!m)return null;Object.assign(s,m.params),c.push({params:s,pathname:joinPaths([o,m.pathname]),pathnameBase:normalizePathname(joinPaths([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=joinPaths([o,m.pathnameBase]))}return c}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=compilePath(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:i.reduce((d,{paramName:u,isOptional:m},v)=>{if(u==="*"){let g=f[v]||"";c=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const b=f[v];return m&&!b?d[u]=void 0:d[u]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:c,pattern:t}}function compilePath(t,e=!1,n=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function resolvePath(t,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?parsePath(t):t;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,e):e,search:normalizeSearch(i),hash:normalizeHash(s)}}function resolvePathname(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function resolveTo(t,e,n,i=!1){let s;typeof t=="string"?s=parsePath(t):(s={...t},invariant$1(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant$1(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant$1(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,f;if(c==null)f=n;else{let m=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}f=m>=0?e[m]:"/"}let p=resolvePath(s,f),d=c&&c!=="/"&&c.endsWith("/"),u=(o||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(d||u)&&(p.pathname+="/"),p}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=reactExports.useContext(NavigationContext),{hash:s,pathname:o,search:c}=useResolvedPath(t,{relative:e}),f=o;return n!=="/"&&(f=o==="/"?n:joinPaths([n,o])),i.createHref({pathname:f,search:c,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:n}=reactExports.useContext(NavigationContext),{matches:i}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),o=JSON.stringify(getResolveToMatches(i)),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{c.current=!0}),reactExports.useCallback((p,d={})=>{if(warning(c.current,navigateEffectWarning),!c.current)return;if(typeof p=="number"){n.go(p);return}let u=resolveTo(p,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:joinPaths([e,u.pathname])),(d.replace?n.replace:n.push)(u,d.state,d)},[e,n,o,s,t])}var OutletContext=reactExports.createContext(null);function useOutlet(t){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:t},e)}function useResolvedPath(t,{relative:e}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),s=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,n,i){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),c=o[o.length-1],f=c?c.params:{},p=c?c.pathname:"/",d=c?c.pathnameBase:"/",u=c&&c.route;{let _=u&&u.path||"";warningOnce(p,!u||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=useLocation(),v;if(e){let _=typeof e=="string"?parsePath(e):e;invariant$1(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),v=_}else v=m;let b=v.pathname||"/",g=b;if(d!=="/"){let _=d.replace(/^\//,"").split("/");g="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=matchRoutes(t,{pathname:g});warning(u||y!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),warning(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=_renderMatches(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},f,_.params),pathname:joinPaths([d,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:joinPaths([d,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,i);return e&&w?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},w):w}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:s},n):null,c)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:n}){let i=reactExports.useContext(DataRouterContext);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},n)}function _renderMatches(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n?.errors;if(o!=null){let p=s.findIndex(d=>d.route.id&&o?.[d.route.id]!==void 0);invariant$1(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,f=-1;if(n)for(let p=0;p<s.length;p++){let d=s[p];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(f=p),d.route.id){let{loaderData:u,errors:m}=n,v=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,d,u)=>{let m,v=!1,b=null,g=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,b=d.route.errorElement||defaultErrorElement,c&&(f<0&&u===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,g=null):f===u&&(v=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,u+1)),w=()=>{let _;return m?_=b:v?_=g:d.route.Component?_=reactExports.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=p,reactExports.createElement(RenderedRoute,{match:d,routeContext:{outlet:p,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),n=e.matches[e.matches.length-1];return invariant$1(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[n]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{n.current=!0}),reactExports.useCallback(async(s,o={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,n){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:n}){return useRoutesImpl(t,void 0,n,e)}function Navigate({to:t,replace:e,state:n,relative:i}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=reactExports.useContext(NavigationContext);warning(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),f=useNavigate(),p=resolveTo(t,getResolveToMatches(o),c,i==="path"),d=JSON.stringify(p);return reactExports.useEffect(()=>{f(JSON.parse(d),{replace:e,state:n,relative:i})},[f,d,i,e,n]),null}function Outlet(t){return useOutlet(t.context)}function Route$1(t){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:o=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=reactExports.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof n=="string"&&(n=parsePath(n));let{pathname:p="/",search:d="",hash:u="",state:m=null,key:v="default"}=n,b=reactExports.useMemo(()=>{let g=stripBasename(p,c);return g==null?null:{location:{pathname:g,search:d,hash:u,state:m,key:v},navigationType:i}},[c,p,d,u,m,v,i]);return warning(b!=null,`<Router basename="${c}"> is not able to match the URL "${p}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:reactExports.createElement(NavigationContext.Provider,{value:f},reactExports.createElement(LocationContext.Provider,{children:e,value:b}))}function Routes({children:t,location:e}){return useRoutes(createRoutesFromChildren(t),e)}function createRoutesFromChildren(t,e=[]){let n=[];return reactExports.Children.forEach(t,(i,s)=>{if(!reactExports.isValidElement(i))return;let o=[...e,s];if(i.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(i.props.children,o));return}invariant$1(i.type===Route$1,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=createRoutesFromChildren(i.props.children,o)),n.push(c)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let n,i,s,o,c;if(isFormElement(t)){let f=t.getAttribute("action");i=f?stripBasename(f,e):null,n=t.getAttribute("method")||defaultMethod,s=getFormEncType(t.getAttribute("enctype"))||defaultEncType,o=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(i=p?stripBasename(p,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||defaultMethod,s=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(f.getAttribute("enctype"))||defaultEncType,o=new FormData(f,t),!isFormDataSubmitterSupported()){let{name:d,type:u,value:m}=t;if(u==="image"){let v=d?`${d}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else d&&o.append(d,m)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,i=null,s=defaultEncType,c=t}return o&&s==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&stripBasename(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,n){let i=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await loadRouteModule(o,n);return c.links?c.links():[]}return[]}));return dedupeLinkDescriptors(i.flat(1).filter(isHtmlLinkDescriptor).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,n,i,s,o){let c=(p,d)=>n[d]?p.route.id!==n[d].route.id:!0,f=(p,d)=>n[d].pathname!==p.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==p.params["*"];return o==="assets"?e.filter((p,d)=>c(p,d)||f(p,d)):o==="data"?e.filter((p,d)=>{let u=i.routes[p.route.id];if(!u||!u.hasLoader)return!1;if(c(p,d)||f(p,d))return!0;if(p.route.shouldRevalidate){let m=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:n}={}){return dedupeHrefs(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function dedupeLinkDescriptors(t,e){let n=new Set;return new Set(e),t.reduce((i,s)=>{let o=JSON.stringify(sortKeys(s));return n.has(o)||(n.add(o),i.push({key:o,link:s})),i},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let n=reactExports.useContext(FrameworkContext),[i,s]=reactExports.useState(!1),[o,c]=reactExports.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=e,v=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let y=_=>{_.forEach(R=>{c(R.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[t]),reactExports.useEffect(()=>{if(i){let y=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(y)}}},[i]);let b=()=>{s(!0)},g=()=>{s(!1),c(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:composeEventHandlers$1(f,b),onBlur:composeEventHandlers$1(p,g),onMouseEnter:composeEventHandlers$1(d,b),onMouseLeave:composeEventHandlers$1(u,g),onTouchStart:composeEventHandlers$1(m,b)}]:[!1,v,{}]}function composeEventHandlers$1(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PrefetchPageLinks({page:t,...e}){let{router:n}=useDataRouterContext2(),i=reactExports.useMemo(()=>matchRoutes(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:i,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:n}=useFrameworkContext(),[i,s]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(t,e,n).then(c=>{o||s(c)}),()=>{o=!0}},[t,e,n]),i}function PrefetchPageLinksImpl({page:t,matches:e,...n}){let i=useLocation(),{manifest:s,routeModules:o}=useFrameworkContext(),{basename:c}=useDataRouterContext2(),{loaderData:f,matches:p}=useDataRouterStateContext(),d=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,p,s,i,"data"),[t,e,p,s,i]),u=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,p,s,i,"assets"),[t,e,p,s,i]),m=reactExports.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,y=!1;if(e.forEach(_=>{let R=s.routes[_.route.id];!R||!R.hasLoader||(!d.some(k=>k.route.id===_.route.id)&&_.route.id in f&&o[_.route.id]?.shouldRevalidate||R.hasClientLoader?y=!0:g.add(_.route.id))}),g.size===0)return[];let w=singleFetchUrl(t,c,"data");return y&&g.size>0&&w.searchParams.set("_routes",e.filter(_=>g.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[c,f,i,s,d,e,t,o]),v=reactExports.useMemo(()=>getModuleLinkHrefs(u,s),[u,s]),b=useKeyedPrefetchLinks(u);return reactExports.createElement(reactExports.Fragment,null,m.map(g=>reactExports.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),v.map(g=>reactExports.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),b.map(({key:g,link:y})=>reactExports.createElement("link",{key:g,...y})))}function mergeRefs(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$2&&(window.__reactRouterVersion="7.7.0")}catch{}function BrowserRouter({basename:t,children:e,window:n}){let i=reactExports.useRef();i.current==null&&(i.current=createBrowserHistory({window:n,v5Compat:!0}));let s=i.current,[o,c]=reactExports.useState({action:s.action,location:s.location}),f=reactExports.useCallback(p=>{reactExports.startTransition(()=>c(p))},[c]);return reactExports.useLayoutEffect(()=>s.listen(f),[s,f]),reactExports.createElement(Router,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:o,replace:c,state:f,target:p,to:d,preventScrollReset:u,viewTransition:m,...v},b){let{basename:g}=reactExports.useContext(NavigationContext),y=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),w,_=!1;if(typeof d=="string"&&y&&(w=d,isBrowser$2))try{let F=new URL(window.location.href),Z=d.startsWith("//")?new URL(F.protocol+d):new URL(d),N=stripBasename(Z.pathname,g);Z.origin===F.origin&&N!=null?d=N+Z.search+Z.hash:_=!0}catch{warning(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=useHref(d,{relative:s}),[k,C,A]=usePrefetchBehavior(i,v),D=useLinkClickHandler(d,{replace:c,state:f,target:p,preventScrollReset:u,relative:s,viewTransition:m});function H(F){e&&e(F),F.defaultPrevented||D(F)}let I=reactExports.createElement("a",{...v,...A,href:w||R,onClick:_||o?e:H,ref:mergeRefs(b,C),target:p,"data-discover":!y&&n==="render"?"true":void 0});return k&&!y?reactExports.createElement(reactExports.Fragment,null,I,reactExports.createElement(PrefetchPageLinks,{page:R})):I});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:o,to:c,viewTransition:f,children:p,...d},u){let m=useResolvedPath(c,{relative:d.relative}),v=useLocation(),b=reactExports.useContext(DataRouterStateContext),{navigator:g,basename:y}=reactExports.useContext(NavigationContext),w=b!=null&&useViewTransitionState(m)&&f===!0,_=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,R=v.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(R=R.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&y&&(k=stripBasename(k,y)||k);const C=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=R===_||!s&&R.startsWith(_)&&R.charAt(C)==="/",D=k!=null&&(k===_||!s&&k.startsWith(_)&&k.charAt(_.length)==="/"),H={isActive:A,isPending:D,isTransitioning:w},I=A?e:void 0,F;typeof i=="function"?F=i(H):F=[i,A?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let Z=typeof o=="function"?o(H):o;return reactExports.createElement(Link,{...d,"aria-current":I,className:F,ref:u,style:Z,to:c,viewTransition:f},typeof p=="function"?p(H):p)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:o,method:c=defaultMethod,action:f,onSubmit:p,relative:d,preventScrollReset:u,viewTransition:m,...v},b)=>{let g=useSubmit(),y=useFormAction(f,{relative:d}),w=c.toLowerCase()==="get"?"get":"post",_=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),R=k=>{if(p&&p(k),k.defaultPrevented)return;k.preventDefault();let C=k.nativeEvent.submitter,A=C?.getAttribute("formmethod")||c;g(C||k.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:s,state:o,relative:d,preventScrollReset:u,viewTransition:m})};return reactExports.createElement("form",{ref:b,method:w,action:y,onSubmit:i?p:R,...v,"data-discover":!_&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:c}={}){let f=useNavigate(),p=useLocation(),d=useResolvedPath(t,{relative:o});return reactExports.useCallback(u=>{if(shouldProcessLinkClick(u,e)){u.preventDefault();let m=n!==void 0?n:createPath(p)===createPath(d);f(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[p,f,d,n,i,e,t,s,o,c])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(i,s={})=>{let{action:o,method:c,encType:f,formData:p,body:d}=getFormSubmissionInfo(i,e);if(s.navigate===!1){let u=s.fetcherKey||getUniqueFetcherId();await t.fetch(u,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:p,body:d,formMethod:s.method||c,formEncType:s.encType||f,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:p,body:d,formMethod:s.method||c,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function useFormAction(t,{relative:e}={}){let{basename:n}=reactExports.useContext(NavigationContext),i=reactExports.useContext(RouteContext);invariant$1(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...useResolvedPath(t||".",{relative:e})},c=useLocation();if(t==null){o.search=c.search;let f=new URLSearchParams(o.search),p=f.getAll("index");if(p.some(u=>u==="")){f.delete("index"),p.filter(m=>m).forEach(m=>f.append("index",m));let u=f.toString();o.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:joinPaths([n,o.pathname])),createPath(o)}function useViewTransitionState(t,e={}){let n=reactExports.useContext(ViewTransitionContext);invariant$1(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=useDataRouterContext3("useViewTransitionState"),s=useResolvedPath(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=stripBasename(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=stripBasename(n.nextLocation.pathname,i)||n.nextLocation.pathname;return matchPath(s.pathname,c)!=null||matchPath(s.pathname,o)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},byteArrayToString=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],c=t[n++],f=t[n++],p=((s&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const o=t[n++],c=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],c=s+1<t.length,f=c?t[s+1]:0,p=s+2<t.length,d=p?t[s+2]:0,u=o>>2,m=(o&3)<<4|f>>4;let v=(f&15)<<2|d>>6,b=d&63;p||(b=64,c||(v=64)),i.push(n[u],n[m],n[v],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],f=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||f==null||d==null||m==null)throw new DecodeBase64StringError;const v=o<<2|f>>4;if(i.push(v),d!==64){const b=f<<4&240|d>>2;if(i.push(b),m!==64){const g=d<<6&192|m;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal$1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal$1().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>getDefaults()?.emulatorHosts?.[t],getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=t=>getDefaults()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Deferred$1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=getEmulatorSummary().prod.length>0;function c(){const v=document.getElementById(i);v&&v.remove()}function f(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function p(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{previouslyDismissed=!0,c()},v}function u(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=getOrCreateEl(i),b=n("text"),g=document.getElementById(b)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),_=n("preprendIcon"),R=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;f(k),u(w,y);const C=d();p(R,_),k.append(R,g,w,C),document.body.appendChild(k)}o?(g.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?replaceTemplate(o,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new FirebaseError(s,f,i)}}function replaceTemplate(t,e){return t.replace(PATTERN,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function deepEqual(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],c=e[s];if(isObject$2(o)&&isObject$2(c)){if(!deepEqual(o,c))return!1}else if(o!==c)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function isObject$2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function createSubscribe(t,e){const n=new ObserverProxy(t,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=noop$4),s.error===void 0&&(s.error=noop$4),s.complete===void 0&&(s.complete=noop$4);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function noop$4(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=14400*1e3,RANDOM_FACTOR=.5;function calculateBackoffMillis(t,e=DEFAULT_INTERVAL_MILLIS,n=DEFAULT_BACKOFF_FACTOR){const i=e*Math.pow(n,t),s=Math.round(RANDOM_FACTOR*i*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Deferred$1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);i===f&&c.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=ConsoleMethod[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(n=>t instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(wrap(t.result)),s()},c=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),s()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(i,e.sort?e.sort():[e]),wrap(i)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const c=indexedDB.open(t,e),f=wrap(c);return i&&c.addEventListener("upgradeneeded",p=>{i(wrap(c.result),p.oldVersion,p.newVersion,wrap(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),f.then(p=>{o&&p.addEventListener("close",()=>o()),s&&p.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),f}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=writeMethods.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||readMethods.includes(n)))return;const o=async function(c,...f){const p=this.transaction(c,s?"readwrite":"readonly");let d=p.store;return i&&(d=d.index(f.shift())),(await Promise.all([d[n](...f),s&&p.done]))[0]};return cachedMethods.set(e,o),o}replaceTraps(t=>({...t,get:(e,n,i)=>getMethod(e,n)||t.get(e,n,i),has:(e,n)=>!!getMethod(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(t){return t.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$9="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(n){logger$1.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger$1.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const n of _apps.values())_addComponent(n,t);for(const n of _serverApps.values())_addComponent(n,t);return!0}function _getProvider(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS$1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$9;function initializeApp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(s)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY$2.create("no-options");const o=_apps.get(s);if(o){if(deepEqual(n,o.options)&&deepEqual(i,o.config))return o;throw ERROR_FACTORY$2.create("duplicate-app",{appName:s})}const c=new ComponentContainer(s);for(const p of _components.values())c.addComponent(p);const f=new FirebaseAppImpl(n,i,c);return _apps.set(s,f),f}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$2.create("no-app",{appName:t});return e}function registerVersion(t,e,n){let i=PLATFORM_LOG_STRING[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$1.warn(c.join(" "));return}_registerComponent(new Component(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}}).catch(t=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:t.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(t){try{const n=(await getDbPromise$1()).transaction(STORE_NAME),i=await n.objectStore(STORE_NAME).get(computeKey(t));return await n.done,i}catch(e){if(e instanceof FirebaseError)logger$1.warn(e.message);else{const n=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:e?.message});logger$1.warn(n.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const i=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite");await i.objectStore(STORE_NAME).put(e,computeKey(t)),await i.done}catch(n){if(n instanceof FirebaseError)logger$1.warn(n.message);else{const i=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:n?.message});logger$1.warn(i.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const s=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger$1.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:n,unsentEntries:i}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),s=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return logger$1.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const n=[];let i=t.slice();for(const s of t){const o=n.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),countBytes(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),countBytes(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await readHeartbeatsFromIndexedDB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,t),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(t,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${t}`,...e)}function _logError(t,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,n){const i={...prodErrorMap(),[e]:n};return new ErrorFactory("auth","Firebase",i).create(e,{appName:t.name})}function _serverAppCurrentUserOperationNotSupportedError(t){return _errorWithCustomMessage(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&_fail(t,"argument-error"),_errorWithCustomMessage(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...n){if(!t)throw createErrorInternal(e,...n)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _performApiRequest(t,e,n,i,s={}){return _performFetchWithErrorHandling(t,s,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const f=querystring({key:t.config.apiKey,...c}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:p,...o};return isCloudflareWorker()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(d.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(t,t.config.apiHost,n,f),d)})}async function _performFetchWithErrorHandling(t,e,n){t._canInitEmulator=!1;const i={...SERVER_ERROR_MAP,...e};try{const s=new NetworkTimeout(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw _makeTaggedError(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[p,d]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",c);if(p==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",c);const u=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _errorWithCustomMessage(t,u,d);_fail(t,u)}}catch(s){if(s instanceof FirebaseError)throw s;_fail(t,"network-request-failed",{message:String(s)})}}async function _performSignInRequest(t,e,n,i,s={}){const o=await _performApiRequest(t,e,n,i,s);return"mfaPendingCredential"in o&&_fail(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function _getFinalTarget(t,e,n,i){const s=`${e}${n}?${i}`,o=t,c=o.config.emulator?_emulatorUrl(t.config,s):`${t.config.apiScheme}://${s}`;return CookieAuthProxiedEndpoints.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=_createError(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const n=getModularInstance(t),i=await n.getIdToken(e),s=_parseToken(i);_assert(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:i,authTime:utcTimestampToDateString(secondsStringToMilliseconds(s.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(s.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const s=base64Decode(n);return s?JSON.parse(s):(_logError("Failed to decode base64 JWT payload"),null)}catch(s){return _logError("Caught error parsing JWT payload as JSON",s?.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof FirebaseError&&isUserInvalidated(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){const e=t.auth,n=await t.getIdToken(),i=await _logoutIfInvalidated(t,getAccountInfo(e,{idToken:n}));_assert(i?.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=s.providerUserInfo?.length?extractProviderData(s.providerUserInfo):[],c=mergeProviderData(t.providerData,o),f=t.isAnonymous,p=!(t.email&&s.passwordHash)&&!c?.length,d=f?p:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new UserMetadata(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,u)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function extractProviderData(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const n=await _performFetchWithErrorHandling(t,{},async()=>{const i=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,c=await _getFinalTarget(t,s,"/v1/token",`key=${o}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return t.emulatorConfig&&isCloudWorkstation(t.emulatorConfig.host)&&(p.credentials="include"),FetchProvider.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(t,e){return _performApiRequest(t,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const n=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await requestStsToken(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,c=new StsTokenManager;return i&&(_assert(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(_assert(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(_assert(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new UserMetadata(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new UserImpl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,f=n.tenantId??void 0,p=n._redirectEventId??void 0,d=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:b,providerData:g,stsTokenManager:y}=n;_assert(m&&y,e,"internal-error");const w=StsTokenManager.fromJSON(this.name,y);_assert(typeof m=="string",e,"internal-error"),assertStringOrUndefined(i,e.name),assertStringOrUndefined(s,e.name),_assert(typeof v=="boolean",e,"internal-error"),_assert(typeof b=="boolean",e,"internal-error"),assertStringOrUndefined(o,e.name),assertStringOrUndefined(c,e.name),assertStringOrUndefined(f,e.name),assertStringOrUndefined(p,e.name),assertStringOrUndefined(d,e.name),assertStringOrUndefined(u,e.name);const _=new UserImpl({uid:m,auth:e,email:s,emailVerified:v,displayName:i,isAnonymous:b,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:w,createdAt:d,lastLoginAt:u});return g&&Array.isArray(g)&&(_.providerData=g.map(R=>({...R}))),p&&(_._redirectEventId=p),_}static async _fromIdTokenResponse(e,n,i=!1){const s=new StsTokenManager;s.updateFromServerResponse(n);const o=new UserImpl({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await _reloadWithoutSaving(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];_assert(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?extractProviderData(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,f=new StsTokenManager;f.updateFromIdToken(i);const p=new UserImpl({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new UserMetadata(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(p,d),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,n){return`firebase:${t}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,s.apiKey,o),this.fullPersistenceKey=_persistenceKeyName("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return n?UserImpl._fromGetAccountInfoResponse(this.auth,n,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,i);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=s[0]||_getInstance(inMemoryPersistence);const c=_persistenceKeyName(i,e.config.apiKey,e.name);let f=null;for(const d of n)try{const u=await d._get(c);if(u){let m;if(typeof u=="string"){const v=await getAccountInfo(e,{idToken:u}).catch(()=>{});if(!v)break;m=await UserImpl._fromGetAccountInfoResponse(e,v,u)}else m=UserImpl._fromJSON(e,u);d!==o&&(f=m),o=d;break}}catch{}const p=s.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new PersistenceUserManager(o,e,i):(o=p[0],f&&await o._set(c,f.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(c)}catch{}})),new PersistenceUserManager(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){return _isIOS(t)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let n;switch(t){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((c,f)=>{try{const p=e(o);c(p)}catch(p){f(p)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(t,e={}){return _performApiRequest(t,"GET","/v2/passwordPolicy",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await getAccountInfo(this,{idToken:e}),i=await UserImpl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_isFirebaseServerApp(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!o||o===c)&&f?.user&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const n=e?getModularInstance(e):null;return n&&_assert(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),n=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await revokeToken(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,s);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_logWarn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(t){externalJSProvider=t}function _loadJS(t){return externalJSProvider.loadJS(t)}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const n=_getProvider(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(deepEqual(o,e??{}))return s;_fail(s,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(_getInstance);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function connectAuthEmulator(t,e,n){const i=_castAuth(t);_assert(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=extractProtocol(e),{host:c,port:f}=extractHostAndPort(e),p=f===null?"":`:${f}`,d={url:`${o}//${c}${p}/`},u=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){_assert(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_assert(deepEqual(d,i.config.emulator)&&deepEqual(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(c)?(pingServer(`${o}//${c}${p}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:parsePort(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:parsePort(c)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const c=new OAuthCredential(i,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,signInWithIdp(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return GoogleAuthProvider.credential(n,i)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return TwitterAuthProvider.credential(n,i)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await UserImpl._fromIdTokenResponse(e,i,s),c=providerIdForResponse(i);return new UserCredentialImpl({user:o,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=providerIdForResponse(i);return new UserCredentialImpl({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new MultiFactorError(e,n,i,s)}}function _processCredentialSavingMfaContextIfNecessary(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,o,e,i):o})}async function _link$1(t,e,n=!1){const i=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return UserCredentialImpl._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,n=!1){const{auth:i}=t;if(_isFirebaseServerApp(i.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(i));const s="reauthenticate";try{const o=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(i,s,e,t),n);_assert(o.idToken,i,"internal-error");const c=_parseToken(o.idToken);_assert(c,i,"internal-error");const{sub:f}=c;return _assert(t.uid===f,i,"user-mismatch"),UserCredentialImpl._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&_fail(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const i="signIn",s=await _processCredentialSavingMfaContextIfNecessary(t,i,e),o=await UserCredentialImpl._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}function onIdTokenChanged(t,e,n,i){return getModularInstance(t).onIdTokenChanged(e,n,i)}function beforeAuthStateChanged(t,e,n){return getModularInstance(t).beforeAuthStateChanged(e,n)}function onAuthStateChanged(t,e,n,i){return getModularInstance(t).onAuthStateChanged(e,n,i)}function signOut(t){return getModularInstance(t).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);_isIE10()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,IE10_LOCAL_STORAGE_SYNC_DELAY):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Receiver(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async d=>d(n.origin,o)),p=await _allSettled(f);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((f,p)=>{const d=_generateEventId("",20);s.port1.start();const u=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(m){const v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(v.data.response);break;default:clearTimeout(u),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(i):(i.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,n){const i=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(i).toPromise()}async function getObject(t,e){const n=getObjectStore(t,!1).get(e),i=await new DBPromise(n).toPromise();return i===void 0?null:i.value}function _deleteObject(t,e){const n=getObjectStore(t,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_TRANSACTION_RETRY_COUNT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_putObject(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>getObject(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=getObjectStore(s,!1).getAll();return new DBPromise(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_link$1(n,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(t,e,n){if(_isFirebaseServerApp(t.app))return Promise.reject(_createError(t,"operation-not-supported-in-this-environment"));const i=_castAuth(t);_assertInstanceOf(t,e,FederatedAuthProvider);const s=_withDefaultResolver(i,n);return new PopupOperation(i,"signInViaPopup",e,s).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const i=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const n=pendingRedirectKey(e),i=resolverPersistence(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,n=!1){if(_isFirebaseServerApp(t.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(t));const i=_castAuth(t),s=_withDefaultResolver(i,e),c=await new RedirectAction(i,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!isNullRedirectEvent(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_createError(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function loadGapi(t){return new Promise((e,n)=>{function i(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_window().gapi?.load)i();else{const s=_generateCallbackName("iframefcb");return _window()[s]=()=>{gapi.load?i():n(_createError(t,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,i={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION},s=EID_FROM_APIHOST.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${querystring(i).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),n=_window().gapi;return _assert(n,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const c=_createError(t,"network-request-failed"),f=_window().setTimeout(()=>{o(c)},PING_TIMEOUT.get());function p(){_window().clearTimeout(f),s(i)}i.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,n,i=DEFAULT_WIDTH,s=DEFAULT_HEIGHT){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...BASE_POPUP_OPTIONS,width:i.toString(),height:s.toString(),top:o,left:c},d=getUA().toLowerCase();n&&(f=_isChromeIOS(d)?TARGET_BLANK:n),_isFirefox(d)&&(e=e||FIREFOX_EMPTY_URL,p.scrollbars="yes");const u=Object.entries(p).reduce((v,[b,g])=>`${v}${b}=${g},`,"");if(_isIOSStandalone(d)&&f!=="_self")return openAsNewWindowIOS(e||"",f),new AuthPopup(null);const m=window.open(e||"",f,u);_assert(m,t,"popup-blocked");try{m.focus()}catch{}return new AuthPopup(m)}function openAsNewWindowIOS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(t,e,n,i,s,o){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:SDK_VERSION,eventId:s};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",isEmpty(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,m]of Object.entries({}))c[u]=m}if(e instanceof BaseOAuthProvider){const u=e.getScopes().filter(m=>m!=="");u.length>0&&(c.scopes=u.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const u of Object.keys(f))f[u]===void 0&&delete f[u];const p=await t._getAppCheckToken(),d=p?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(p)}`:"";return`${getHandlerBase(t)}?${querystring(f).slice(1)}${d}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,i,s){debugAssert(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await _getRedirectUrl(e,n,i,_getCurrentUrl(),s);return _open(e,o,_generateEventId())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await _getRedirectUrl(e,n,i,_getCurrentUrl(),s);return _setWindowLocation(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(debugAssert(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await _openIframe(e),i=new AuthEventManager(e);return n.register("authEvent",s=>(_assert(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},s=>{const o=s?.[0]?.[WEB_STORAGE_SUPPORT_KEY];o!==void 0&&n(!!o),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$8="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(t){_registerComponent(new Component("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;_assert(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},d=new AuthImpl(i,s,o,p);return _initializeAuthInstance(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(i=>new AuthInterop(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$8,getVersionForPlatform(t)),registerVersion(name$3,version$8,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>authIdTokenMaxAge)return;const s=n?.token;lastPostedIdToken!==s&&(lastPostedIdToken=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),i=getExperimentalSetting("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=mintCookieFactory(o.toString());beforeAuthStateChanged(n,c,()=>c(n.currentUser)),onIdTokenChanged(n,f=>c(f))}}const s=getDefaultEmulatorHost("auth");return s&&connectAuthEmulator(n,`http://${s}`),n}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=_createError("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",getScriptParentElement().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$2="firebase",version$7="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$2,version$7,"app");const name$1="@firebase/installations",version$6="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$6}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=3600*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(t){return t instanceof FirebaseError&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:t}){return`${INSTALLATIONS_API_URL}/projects/${t}/installations`}function extractAuthTokenInfoFromResponse(t){return{token:t.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(t.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(t,e){const i=(await e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function getHeaders$1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function getHeadersWithAuth(t,{refreshToken:e}){const n=getHeaders$1(t);return n.append("Authorization",getAuthorizationHeader(e)),n}async function retryIfServerError(t){const e=await t();return e.status>=500&&e.status<600?t():e}function getExpiresInFromResponseExpiresIn(t){return Number(t.replace("s","000"))}function getAuthorizationHeader(t){return`${INTERNAL_AUTH_VERSION} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=getInstallationsEndpoint(t),s=getHeaders$1(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const c={fid:n,authVersion:INTERNAL_AUTH_VERSION,appId:t.appId,sdkVersion:PACKAGE_VERSION},f={method:"POST",headers:s,body:JSON.stringify(c)},p=await retryIfServerError(()=>fetch(i,f));if(p.ok){const d=await p.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:extractAuthTokenInfoFromResponse(d.authToken)}}else throw await getErrorFromResponse("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep$1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=encode(t);return VALID_FID_PATTERN.test(n)?n:INVALID_FID}catch{return INVALID_FID}}function encode(t){return bufferToBase64UrlSafe(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(t,e){const n=getKey(t);callFidChangeCallbacks(n,e),broadcastFidChange(n,e)}function callFidChangeCallbacks(t,e){const n=fidChangeCallbacks.get(t);if(n)for(const i of n)i(e)}function broadcastFidChange(t,e){const n=getBroadcastChannel();n&&n.postMessage({key:t,fid:e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=t=>{callFidChangeCallbacks(t.data.key,t.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function set(t,e){const n=getKey(t),s=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),o=s.objectStore(OBJECT_STORE_NAME),c=await o.get(n);return await o.put(e,n),await s.done,(!c||c.fid!==e.fid)&&fidChanged(t,e.fid),e}async function remove$1(t){const e=getKey(t),i=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await i.objectStore(OBJECT_STORE_NAME).delete(e),await i.done}async function update(t,e){const n=getKey(t),s=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),o=s.objectStore(OBJECT_STORE_NAME),c=await o.get(n),f=e(c);return f===void 0?await o.delete(n):await o.put(f,n),await s.done,f&&(!c||c.fid!==f.fid)&&fidChanged(t,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(t){let e;const n=await update(t.appConfig,i=>{const s=updateOrCreateInstallationEntry(i),o=triggerRegistrationIfNecessary(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===INVALID_FID?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function updateOrCreateInstallationEntry(t){const e=t||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(e)}function triggerRegistrationIfNecessary(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=registerInstallation(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:waitUntilFidRegistration(t)}:{installationEntry:e}}async function registerInstallation(t,e){try{const n=await createInstallationRequest(t,e);return set(t.appConfig,n)}catch(n){throw isServerError(n)&&n.customData.serverCode===409?await remove$1(t.appConfig):await set(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function waitUntilFidRegistration(t){let e=await updateInstallationRequest(t.appConfig);for(;e.registrationStatus===1;)await sleep$1(100),e=await updateInstallationRequest(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await getInstallationEntry(t);return i||n}return e}function updateInstallationRequest(t){return update(t,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(t){return hasInstallationRequestTimedOut(t)?{fid:t.fid,registrationStatus:0}:t}function hasInstallationRequestTimedOut(t){return t.registrationStatus===1&&t.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:t,heartbeatServiceProvider:e},n){const i=getGenerateAuthTokenEndpoint(t,n),s=getHeadersWithAuth(t,n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const c={installation:{sdkVersion:PACKAGE_VERSION,appId:t.appId}},f={method:"POST",headers:s,body:JSON.stringify(c)},p=await retryIfServerError(()=>fetch(i,f));if(p.ok){const d=await p.json();return extractAuthTokenInfoFromResponse(d)}else throw await getErrorFromResponse("Generate Auth Token",p)}function getGenerateAuthTokenEndpoint(t,{fid:e}){return`${getInstallationsEndpoint(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(t,e=!1){let n;const i=await update(t.appConfig,o=>{if(!isEntryRegistered(o))throw ERROR_FACTORY$1.create("not-registered");const c=o.authToken;if(!e&&isAuthTokenValid(c))return o;if(c.requestStatus===1)return n=waitUntilAuthTokenRequest(t,e),o;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const f=makeAuthTokenRequestInProgressEntry(o);return n=fetchAuthTokenFromServer(t,f),f}});return n?await n:i.authToken}async function waitUntilAuthTokenRequest(t,e){let n=await updateAuthTokenRequest(t.appConfig);for(;n.authToken.requestStatus===1;)await sleep$1(100),n=await updateAuthTokenRequest(t.appConfig);const i=n.authToken;return i.requestStatus===0?refreshAuthToken(t,e):i}function updateAuthTokenRequest(t){return update(t,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");const n=e.authToken;return hasAuthTokenRequestTimedOut(n)?{...e,authToken:{requestStatus:0}}:e})}async function fetchAuthTokenFromServer(t,e){try{const n=await generateAuthTokenRequest(t,e),i={...e,authToken:n};return await set(t.appConfig,i),n}catch(n){if(isServerError(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await remove$1(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await set(t.appConfig,i)}throw n}}function isEntryRegistered(t){return t!==void 0&&t.registrationStatus===2}function isAuthTokenValid(t){return t.requestStatus===2&&!isAuthTokenExpired(t)}function isAuthTokenExpired(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function hasAuthTokenRequestTimedOut(t){return t.requestStatus===1&&t.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(t){const e=t,{installationEntry:n,registrationPromise:i}=await getInstallationEntry(e);return i?i.catch(console.error):refreshAuthToken(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken(t,e=!1){const n=t;return await completeInstallationRegistration(n),(await refreshAuthToken(n,e)).token}async function completeInstallationRegistration(t){const{registrationPromise:e}=await getInstallationEntry(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(t){if(!t||!t.options)throw getMissingValueError("App Configuration");if(!t.name)throw getMissingValueError("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw getMissingValueError(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function getMissingValueError(t){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=t=>{const e=t.getProvider("app").getImmediate(),n=extractAppConfig(e),i=_getProvider(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},internalFactory=t=>{const e=t.getProvider("app").getImmediate(),n=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(n),getToken:s=>getToken(n,s)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$1,version$6);registerVersion(name$1,version$6,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=60*1e3,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createGtagTrustedTypesScriptURL(t){if(!t.startsWith(GTAG_URL)){const e=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:t});return logger.warn(e.message),""}return t}function promiseAllSettled(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function createTrustedTypesPolicy(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function insertScriptTag(t,e){const n=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),i=document.createElement("script"),s=`${GTAG_URL}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function getOrCreateDataLayer(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function gtagOnConfig(t,e,n,i,s,o){const c=i[s];try{if(c)await e[c];else{const p=(await promiseAllSettled(n)).find(d=>d.measurementId===s);p&&await e[p.appId]}}catch(f){logger.error(f)}t("config",s,o)}async function gtagOnEvent(t,e,n,i,s){try{let o=[];if(s&&s.send_to){let c=s.send_to;Array.isArray(c)||(c=[c]);const f=await promiseAllSettled(n);for(const p of c){const d=f.find(m=>m.measurementId===p),u=d&&e[d.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,s||{})}catch(o){logger.error(o)}}function wrapGtag(t,e,n,i){async function s(o,...c){try{if(o==="event"){const[f,p]=c;await gtagOnEvent(t,e,n,f,p)}else if(o==="config"){const[f,p]=c;await gtagOnConfig(t,e,n,i,f,p)}else if(o==="consent"){const[f,p]=c;t("consent",f,p)}else if(o==="get"){const[f,p,d]=c;t("get",f,p,d)}else if(o==="set"){const[f]=c;t("set",f)}else t(o,...c)}catch(f){logger.error(f)}}return s}function wrapOrCreateGtag(t,e,n,i,s){let o=function(...c){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=wrapGtag(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function findGtagScriptOnPage(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(GTAG_URL)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(e={},n=BASE_INTERVAL_MILLIS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const defaultRetryData=new RetryData;function getHeaders(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function fetchDynamicConfig(t){const{appId:e,apiKey:n}=t,i={method:"GET",headers:getHeaders(n)},s=DYNAMIC_CONFIG_URL.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let c="";try{const f=await o.json();f.error?.message&&(c=f.error.message)}catch{}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function fetchDynamicConfigWithRetry(t,e=defaultRetryData,n){const{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw ERROR_FACTORY.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw ERROR_FACTORY.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new AnalyticsAbortSignal;return setTimeout(async()=>{f.abort()},FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:i,apiKey:s,measurementId:o},c,f,e)}async function attemptFetchDynamicConfigWithRetry(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=defaultRetryData){const{appId:o,measurementId:c}=t;try{await setAbortableTimeout(i,e)}catch(f){if(c)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:o,measurementId:c};throw f}try{const f=await fetchDynamicConfig(t);return s.deleteThrottleMetadata(o),f}catch(f){const p=f;if(!isRetriableError(p)){if(s.deleteThrottleMetadata(o),c)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:o,measurementId:c};throw f}const d=Number(p?.customData?.httpStatus)===503?calculateBackoffMillis(n,s.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,u),logger.debug(`Calling attemptFetch again in ${d} millis`),attemptFetchDynamicConfigWithRetry(t,u,i,s)}}function setAbortableTimeout(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),i(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function isRetriableError(t){if(!(t instanceof FirebaseError)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function logEvent$1(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const o=await e,c={...i,send_to:o};t("event",n,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function validateIndexedDB(){if(isIndexedDBAvailable())try{await validateIndexedDBOpenable()}catch(t){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _initializeAnalytics(t,e,n,i,s,o,c){const f=fetchDynamicConfigWithRetry(t);f.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>logger.error(v)),e.push(f);const p=validateIndexedDB().then(v=>{if(v)return i.getId()}),[d,u]=await Promise.all([f,p]);findGtagScriptOnPage(o)||insertScriptTag(o,d.measurementId),s("js",new Date);const m=c?.config??{};return m[ORIGIN_KEY]="firebase",m.update=!0,u!=null&&(m[GA_FID_KEY]=u),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AnalyticsService{constructor(e){this.app=e}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const t=[];if(isBrowserExtension()&&t.push("This is a browser extension environment."),areCookiesEnabled()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:e});logger.warn(n.message)}}function factory(t,e,n){warnOnBrowserContextMismatch();const i=t.options.appId;if(!i)throw ERROR_FACTORY.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ERROR_FACTORY.create("no-api-key");if(initializationPromisesMap[i]!=null)throw ERROR_FACTORY.create("already-exists",{id:i});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:o,gtagCore:c}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=o,gtagCoreFunction=c,globalInitDone=!0}return initializationPromisesMap[i]=_initializeAnalytics(t,dynamicConfigPromisesList,measurementIdToAppId,e,gtagCoreFunction,dataLayerName,n),new AnalyticsService(t)}function getAnalytics(t=getApp()){t=getModularInstance(t);const e=_getProvider(t,ANALYTICS_TYPE);return e.isInitialized()?e.getImmediate():initializeAnalytics(t)}function initializeAnalytics(t,e={}){const n=_getProvider(t,ANALYTICS_TYPE);if(n.isInitialized()){const s=n.getImmediate();if(deepEqual(e,n.getOptions()))return s;throw ERROR_FACTORY.create("already-initialized")}return n.initialize({options:e})}function logEvent(t,e,n,i){t=getModularInstance(t),logEvent$1(wrappedGtagFunction,initializationPromisesMap[t.app.options.appId],e,n,i).catch(s=>logger.error(s))}const name="@firebase/analytics",version$5="0.10.18";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return factory(i,s,n)},"PUBLIC")),_registerComponent(new Component("analytics-internal",t,"PRIVATE")),registerVersion(name,version$5),registerVersion(name,version$5,"esm2020");function t(e){try{const n=e.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(i,s,o)=>logEvent(n,i,s,o)}}catch(n){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:n})}}}registerAnalytics();const firebaseConfig={apiKey:"AIzaSyAU3nm_QYBqK4eYKVnizeWzGAI5lGoC9a0",authDomain:"ir-dashboard-28f80.firebaseapp.com",projectId:"ir-dashboard-28f80",storageBucket:"ir-dashboard-28f80.firebasestorage.app",messagingSenderId:"493710065181",appId:"1:493710065181:web:5d9948de20fd60d73b50f4",measurementId:"G-KZXL1EV82R"},app=initializeApp(firebaseConfig),auth=getAuth(app),googleProvider=new GoogleAuthProvider;getAnalytics(app);const allowedUsers=["surajpatelsuraj55@gmail.com","ghanshyamkamde2014@gmail.com","amankumarji421@gmail.com","dspckgoverna@gmail.com","mayankgurjar108@gmail.com","kumarravindrasopiya@gmail.com","mayankransingh@gmail.com","brijkishor425@gmail.com","navinekka21@gmail.com","Tpyadav600@gmail.com","vinitsahu3600@gmail.com","roshanahuja88@gmail.com","chandrhass1994@gmail.com","amankumarisjha@gmail.com","vipingautamooooo16@gmail.com","amankumarisjha@gmail.com","kumarravindrasopiya@gmail.com","sudsrkrace@gmail.com","Jitendrairs@gmail.com","Sumitkumardhotre@gmail.com"],isUserAllowed=t=>allowedUsers.includes(t.toLowerCase()),AuthContext=reactExports.createContext(void 0),useAuth=()=>{const t=reactExports.useContext(AuthContext);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},AuthProvider=({children:t})=>{const[e,n]=reactExports.useState(null),[i,s]=reactExports.useState(!0);reactExports.useEffect(()=>{const p=onAuthStateChanged(auth,d=>{d&&d.email&&isUserAllowed(d.email)?n(d):d?(signOut(auth),n(null),alert("Access denied. Your email is not authorized for this dashboard.")):n(null),s(!1)});return()=>p()},[]);const f={user:e,loading:i,signInWithGoogle:async()=>{try{const p=await signInWithPopup(auth,googleProvider);p.user.email&&!isUserAllowed(p.user.email)&&(await signOut(auth),alert("Access denied. Your email is not authorized for this dashboard."))}catch(p){console.error("Google sign-in error:",p),alert("Failed to sign in with Google. Please try again.")}},logout:async()=>{try{await signOut(auth)}catch(p){console.error("Logout error:",p)}}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:f,children:t})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),hasA11yProp=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:c,...f},p)=>reactExports.createElement("svg",{ref:p,...defaultAttributes,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:mergeClasses("lucide",s),...!o&&!hasA11yProp(f)&&{"aria-hidden":"true"},...f},[...c.map(([d,u])=>reactExports.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(t,e)=>{const n=reactExports.forwardRef(({className:i,...s},o)=>reactExports.createElement(Icon,{ref:o,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,i),...s}));return n.displayName=toPascalCase(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$B);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$A);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Building2=createLucideIcon("building-2",__iconNode$z);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Camera=createLucideIcon("camera",__iconNode$x);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$w);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$v);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleQuestionMark=createLucideIcon("circle-question-mark",__iconNode$u);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$t);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$s);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$r);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$q);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$p);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$o);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Funnel=createLucideIcon("funnel",__iconNode$n);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Hash=createLucideIcon("hash",__iconNode$m);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],Images=createLucideIcon("images",__iconNode$l);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$k);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],MapPin=createLucideIcon("map-pin",__iconNode$i);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Navigation=createLucideIcon("navigation",__iconNode$h);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$g);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],PenLine=createLucideIcon("pen-line",__iconNode$f);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pen=createLucideIcon("pen",__iconNode$e);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$d);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$c);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Route=createLucideIcon("route",__iconNode$b);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Save=createLucideIcon("save",__iconNode$a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$9);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$7);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),Login=()=>{const{signInWithGoogle:t,loading:e}=useAuth();return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-blue-200 rounded-full blur-xl"}),jsxRuntimeExports.jsx("div",{className:"absolute top-40 right-20 w-32 h-32 bg-indigo-200 rounded-full blur-xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-20 left-1/3 w-24 h-24 bg-purple-200 rounded-full blur-xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-40 right-10 w-16 h-16 bg-blue-300 rounded-full blur-xl"})]}),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 relative",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full space-y-8",children:[jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-600 rounded-xl shadow-lg",children:jsxRuntimeExports.jsx(FileText,{className:"h-8 w-8 text-white"})}),jsxRuntimeExports.jsx("div",{className:"ml-4",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IR Dashboard"})})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 backdrop-blur-sm",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Sign in to access your secure dashboard"})]}),jsxRuntimeExports.jsx("button",{onClick:t,disabled:e,className:"group relative w-full flex items-center justify-center py-4 px-6 border border-transparent text-base font-medium rounded-xl text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:e?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),jsxRuntimeExports.jsx("span",{children:"Authenticating..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"By signing in, you agree to our security protocols and data handling policies."})})]})]})})]})},ProtectedRoute=({children:t})=>{const{user:e,loading:n}=useAuth();return n?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t}):jsxRuntimeExports.jsx(Login,{})},LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const clamp=(t,e,n)=>n>e?e:n<t?t:n;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject$1(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop$3=t=>t,combineFunctions=(t,e)=>n=>e(t(n)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let o=0;o<s;o++){const c=this.subscriptions[o];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,n,i,s){let o,c,f=0;do c=e+(n-e)/2,o=calcBezier(c,i,s)-t,o>0?n=c:e=c;while(Math.abs(o)>subdivisionPrecision&&++f<subdivisionMaxIterations);return c}function cubicBezier(t,e,n,i){if(t===e&&n===i)return noop$3;const s=o=>binarySubdivide(o,0,1,t,n);return o=>o===0||o===1?o:calcBezier(s(o),e,i)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$3,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,n,i,s]=t;return cubicBezier(e,n,i,s)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,e){let n=new Set,i=new Set,s=!1,o=!1;const c=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function p(u){c.has(u)&&(d.schedule(u),t()),u(f)}const d={schedule:(u,m=!1,v=!1)=>{const g=v&&s?n:i;return m&&c.add(u),g.has(u)||g.add(u),u},cancel:u=>{i.delete(u),c.delete(u)},process:u=>{if(f=u,s){o=!0;return}s=!0,[n,i]=[i,n],n.forEach(p),n.clear(),s=!1,o&&(o=!1,d.process(u))}};return d}const maxElapsed=40;function createRenderBatcher(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=stepsOrder.reduce((k,C)=>(k[C]=createRenderStep(o),k),{}),{setup:f,read:p,resolveKeyframes:d,preUpdate:u,update:m,preRender:v,render:b,postRender:g}=c,y=()=>{const k=MotionGlobalConfig.useManualTiming?s.timestamp:performance.now();n=!1,MotionGlobalConfig.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(k-s.timestamp,maxElapsed),1)),s.timestamp=k,s.isProcessing=!0,f.process(s),p.process(s),d.process(s),u.process(s),m.process(s),v.process(s),b.process(s),g.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(y))},w=()=>{n=!0,i=!0,s.isProcessing||t(y)};return{schedule:stepsOrder.reduce((k,C)=>{const A=c[C];return k[C]=(D,H=!1,I=!1)=>(n||w(),A.schedule(D,H,I)),k},{}),cancel:k=>{for(let C=0;C<stepsOrder.length;C++)c[stepsOrder[C]].cancel(k)},state:s,steps:c}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$3,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(t)||e&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,e)),splitColor=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,o,c,f]=i.match(floatRegex);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},clampRgbUnit=t=>clamp(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(n)+", "+sanitize(alpha.transform(i))+")"};function parseHex(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha.transform(i))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t),getAnimatableNone:t=>{const e=color.parse(t);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){return isNaN(t)&&typeof t=="string"&&(t.match(floatRegex)?.length||0)+(t.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let o=0;const f=e.replace(complexRegex,p=>(color.test(p)?(i.color.push(o),s.push(COLOR_TOKEN),n.push(color.parse(p))):p.startsWith(VAR_FUNCTION_TOKEN)?(i.var.push(o),s.push(VAR_TOKEN),n.push(p)):(i.number.push(o),s.push(NUMBER_TOKEN),n.push(parseFloat(p))),++o,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:f,indexes:i,types:s}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:n}=analyseComplexValue(t),i=e.length;return s=>{let o="";for(let c=0;c<i;c++)if(o+=e[c],s[c]!==void 0){const f=n[c];f===NUMBER_TOKEN?o+=sanitize(s[c]):f===COLOR_TOKEN?o+=color.transform(s[c]):o+=s[c]}return o}}const convertNumbersToZero=t=>typeof t=="number"?0:color.test(t)?color.getAnimatableNone(t):t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,o=0,c=0;if(!e)s=o=c=n;else{const f=n<.5?n*(1+e):n+e-n*e,p=2*n-f;s=hueToRgb(p,f,t+1/3),o=hueToRgb(p,f,t),c=hueToRgb(p,f,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:i}}function mixImmediate(t,e){return n=>n>0?e:t}const mixNumber$1=(t,e,n)=>t+(e-t)*n,mixLinearColor=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let n=e.parse(t);return e===hsla&&(n=hslaToRgba(n)),n}const mixColor=(t,e)=>{const n=asRGBA(t),i=asRGBA(e);if(!n||!i)return mixImmediate(t,e);const s={...n};return o=>(s.red=mixLinearColor(n.red,i.red,o),s.green=mixLinearColor(n.green,i.green,o),s.blue=mixLinearColor(n.blue,i.blue,o),s.alpha=mixNumber$1(n.alpha,i.alpha,o),rgba.transform(s))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mixNumber(t,e){return n=>mixNumber$1(t,e,n)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const n=[...t],i=n.length,s=t.map((o,c)=>getMixer(o)(o,e[c]));return o=>{for(let c=0;c<i;c++)n[c]=s[c](o);return n}}function mixObject(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=getMixer(t[s])(t[s],e[s]));return s=>{for(const o in i)n[o]=i[o](s);return n}}function matchOrder(t,e){const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],c=t.indexes[o][i[o]],f=t.values[c]??0;n[s]=f,i[o]++}return n}const mixComplex=(t,e)=>{const n=complex.createTransformer(e),i=analyseComplexValue(t),s=analyseComplexValue(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?invisibleValues.has(t)&&!s.values.length||invisibleValues.has(e)&&!i.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(i,s),s.values),n):mixImmediate(t,e)};function mix(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mixNumber$1(t,e,n):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>frame.update(e,n),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)i+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<maxGeneratorDuration;)e+=n,i=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,n){const i=n({...t,keyframes:[0,e]}),s=Math.min(calcGeneratorDuration(i),maxGeneratorDuration);return{type:"keyframes",ease:o=>i.next(s*o).value/e,duration:millisecondsToSeconds(s)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,n){const i=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(n-t(i),e-i)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:i=springDefaults.mass}){let s,o,c=1-e;c=clamp(springDefaults.minDamping,springDefaults.maxDamping,c),t=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),c<1?(s=d=>{const u=d*c,m=u*t,v=u-n,b=calcAngularFreq(d,c),g=Math.exp(-m);return safeMin-v/b*g},o=d=>{const m=d*c*t,v=m*n+n,b=Math.pow(c,2)*Math.pow(d,2)*t,g=Math.exp(-m),y=calcAngularFreq(Math.pow(d,2),c);return(-s(d)+safeMin>0?-1:1)*((v-b)*g)/y}):(s=d=>{const u=Math.exp(-d*t),m=(d-n)*t+1;return-safeMin+u*m},o=d=>{const u=Math.exp(-d*t),m=(n-d)*(t*t);return u*m});const f=5/t,p=approximateRoot(s,o,f);if(t=secondsToMilliseconds(t),isNaN(p))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const d=Math.pow(p,2)*i;return{stiffness:d,damping:c*2*Math.sqrt(i*d),duration:t}}}const rootIterations=12;function approximateRoot(t,e,n){let i=n;for(let s=1;s<rootIterations;s++)i=i-t(i)/e(i);return i}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(n=>t[n]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,o=2*clamp(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:springDefaults.mass,stiffness:s,damping:o}}else{const n=findSpring(t);e={...e,...n,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],f={done:!1,value:o},{stiffness:p,damping:d,mass:u,duration:m,velocity:v,isResolvedFromDuration:b}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),g=v||0,y=d/(2*Math.sqrt(p*u)),w=c-o,_=millisecondsToSeconds(Math.sqrt(p/u)),R=Math.abs(w)<5;i||(i=R?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),s||(s=R?springDefaults.restDelta.granular:springDefaults.restDelta.default);let k;if(y<1){const A=calcAngularFreq(_,y);k=D=>{const H=Math.exp(-y*_*D);return c-H*((g+y*_*w)/A*Math.sin(A*D)+w*Math.cos(A*D))}}else if(y===1)k=A=>c-Math.exp(-_*A)*(w+(g+_*w)*A);else{const A=_*Math.sqrt(y*y-1);k=D=>{const H=Math.exp(-y*_*D),I=Math.min(A*D,300);return c-H*((g+y*_*w)*Math.sinh(I)+A*w*Math.cosh(I))/A}}const C={calculatedDuration:b&&m||null,next:A=>{const D=k(A);if(b)f.done=A>=m;else{let H=A===0?g:0;y<1&&(H=A===0?secondsToMilliseconds(g):calcGeneratorVelocity(k,A,D));const I=Math.abs(H)<=i,F=Math.abs(c-D)<=s;f.done=I&&F}return f.value=f.done?c:D,f},toString:()=>{const A=Math.min(calcGeneratorDuration(C),maxGeneratorDuration),D=generateLinearEasing(H=>C.next(A*H).value,A,30);return A+"ms "+D},toTransition:()=>{}};return C}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:c,min:f,max:p,restDelta:d=.5,restSpeed:u}){const m=t[0],v={done:!1,value:m},b=I=>f!==void 0&&I<f||p!==void 0&&I>p,g=I=>f===void 0?p:p===void 0||Math.abs(f-I)<Math.abs(p-I)?f:p;let y=n*e;const w=m+y,_=c===void 0?w:c(w);_!==w&&(y=_-m);const R=I=>-y*Math.exp(-I/i),k=I=>_+R(I),C=I=>{const F=R(I),Z=k(I);v.done=Math.abs(F)<=d,v.value=v.done?_:Z};let A,D;const H=I=>{b(v.value)&&(A=I,D=spring({keyframes:[v.value,g(v.value)],velocity:calcGeneratorVelocity(k,I,v.value),damping:s,stiffness:o,restDelta:d,restSpeed:u}))};return H(0),{calculatedDuration:null,next:I=>{let F=!1;return!D&&A===void 0&&(F=!0,C(I),H(I)),A!==void 0&&I>=A?D.next(I-A):(!F&&C(I),v)}}}function createMixers(t,e,n){const i=[],s=n||MotionGlobalConfig.mix||mix,o=t.length-1;for(let c=0;c<o;c++){let f=s(t[c],t[c+1]);if(e){const p=Array.isArray(e)?e[c]||noop$3:e;f=pipe(p,f)}i.push(f)}return i}function interpolate(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const o=t.length;if(invariant(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=createMixers(e,i,s),p=f.length,d=u=>{if(c&&u<t[0])return e[0];let m=0;if(p>1)for(;m<t.length-2&&!(u<t[m+1]);m++);const v=progress(t[m],t[m+1],u);return f[m](v)};return n?u=>d(clamp(t[0],t[o-1],u)):d}function fillOffset(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=progress(0,e,i);t.push(mixNumber$1(n,1,s))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(n=>n*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=isEasingArray(i)?i.map(easingDefinitionToFunction):easingDefinitionToFunction(i),o={done:!1,value:e[0]},c=convertOffsetToTimes(n&&n.length===e.length?n:defaultOffset(e),t),f=interpolate(c,e,{ease:Array.isArray(s)?s:defaultEasing(e,s)});return{calculatedDuration:t,next:p=>(o.value=f(p),o.done=p>=t,o)}}const isNotNull$1=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:n="loop"},i,s=1){const o=t.filter(isNotNull$1),f=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!f||i===void 0?o[f]:i}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:n=keyframes,repeat:i=0,repeatDelay:s=0,repeatType:o,velocity:c=0}=e;let{keyframes:f}=e;const p=n||keyframes;p!==keyframes&&typeof f[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(f[0],f[1])),f=[0,100]);const d=p({...e,keyframes:f});o==="mirror"&&(this.mirroredGenerator=p({...e,keyframes:[...f].reverse(),velocity:-c})),d.calculatedDuration===null&&(d.calculatedDuration=calcGeneratorDuration(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:s,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:f,calculatedDuration:p}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:u,repeat:m,repeatType:v,repeatDelay:b,type:g,onUpdate:y,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-d*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?_<0:_>s;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let k=this.currentTime,C=i;if(m){const I=Math.min(this.currentTime,s)/f;let F=Math.floor(I),Z=I%1;!Z&&I>=1&&(Z=1),Z===1&&F--,F=Math.min(F,m+1),!!(F%2)&&(v==="reverse"?(Z=1-Z,b&&(Z-=b/f)):v==="mirror"&&(C=c)),k=clamp(0,1,Z)*f}const A=R?{done:!1,value:u[0]}:C.next(k);o&&(A.value=o(A.value));let{done:D}=A;!R&&p!==null&&(D=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return H&&g!==inertia&&(A.value=getFinalKeyframe$1(u,this.options,w,this.speed)),y&&y(A.value),H&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=matrix3dParsers,s=n;else{const f=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=matrix2dParsers,s=f}if(!s)return defaultTransformValue(e);const o=i[e],c=s[1].split(",").map(convertTransformToNumber);return typeof o=="function"?o(c):c[o]}const readTransformValue=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return parseValueFromTransform(n,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=removeNonTranslationalTransform(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([o,c])=>{i.getValue(o)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,n,i,s,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;if(e[0]===null){const o=s?.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const f=i.readValue(n,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,e,n){isCSSVar(e)?t.style.setProperty(e,n):t.style[e]=n}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const n=memo(t);return()=>supportsFlags[e]??n()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(n=>mapEasingToNativeEasing(n,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,n,{delay:i=0,duration:s=300,repeat:o=0,repeatType:c="loop",ease:f="easeOut",times:p}={},d=void 0){const u={[e]:n};p&&(u.offset=p);const m=mapEasingToNativeEasing(f,s);Array.isArray(m)&&(u.easing=m);const v={delay:i,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return d&&(v.pseudoElement=d),t.animate(u,v)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:s,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:f,onComplete:p}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,invariant(typeof e.type!="string");const d=applyGeneratorOptions(e);this.animation=startWaapiAnimation(n,i,s,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const u=getFinalKeyframe$1(s,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(u):setStyle(n,i,u),this.animation.cancel()}p?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$3):n(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:s,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const f=new JSAnimation({...c,autoplay:!1}),p=secondsToMilliseconds(this.finishedTime??this.time);n.setWithVelocity(f.sample(p-sampleDelta).value,f.sample(p).value,sampleDelta),f.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function canAnimate(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=isAnimatable(s,e),f=isAnimatable(o,e);return!c||!f?!1:hasKeyframesChanged(t)||(n==="spring"||isGenerator(n))&&i}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:o,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:d}=e.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!d)&&!p&&!i&&s!=="mirror"&&o!==0&&c!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:c="loop",keyframes:f,name:p,motionValue:d,element:u,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const v={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:o,repeatType:c,name:p,motionValue:d,element:u,...m},b=u?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new b(f,(g,y,w)=>this.onKeyframesResolved(g,y,v,!w),p,d,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,s){this.keyframeResolver=void 0;const{name:o,type:c,velocity:f,delay:p,isHandoff:d,onUpdate:u}=i;this.resolvedAt=time.now(),canAnimate(e,o,c,f)||((MotionGlobalConfig.instantAnimations||!p)&&u?.(getFinalKeyframe$1(e,i,n)),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},b=!d&&supportsBrowserAnimation(v)?new NativeAnimationExtended({...v,element:v.motionValue.owner.current}):new JSAnimation(v);b.finished.then(()=>this.notifyFinished()).catch(noop$3),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function getVariableValue(t,e,n=1){const[i,s]=parseCSSVariable(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const c=o.trim();return isNumericalString(c)?parseFloat(c):c}return isCSSVariableToken(s)?getVariableValue(s,e,n+1):s}function getValueTransition(t,e){return t?.[e]??t?.default??t}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(floatRegex)||[];if(!i)return t;const s=n.replace(i,"");let o=maxDefaults.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+s+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let n=getDefaultValueType(t);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,n){let i=0,s;for(;i<t.length&&!s;){const o=t[i];typeof o=="string"&&!invalidTemplates.has(o)&&analyseComplexValue(o).values.length&&(s=t[i]),i++}if(s&&n)for(const o of e)t[o]=getAnimatableNone(n,s)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,n,i,s,o){super(e,n,i,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let d=e[p];if(typeof d=="string"&&(d=d.trim(),isCSSVariableToken(d))){const u=getVariableValue(d,n.current);u!==void 0&&(e[p]=u),p===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(i)||e.length!==2)return;const[s,o]=e,c=findDimensionValueType(s),f=findDimensionValueType(o);if(c!==f)if(isNumOrPxType(c)&&isNumOrPxType(f))for(let p=0;p<e.length;p++){const d=e[p];typeof d=="string"&&(e[p]=parseFloat(d))}else positionalValues[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||isNone(e[s]))&&i.push(s);i.length&&makeNoneKeyframesAnimatable(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=positionalValues[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([f,p])=>{e.getValue(f).set(p)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const s=n?.[t]??i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function isHTMLElement(t){return isObject$1(t)&&"offsetHeight"in t}const MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{const o=time.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SubscriptionManager);const i=this.events[e].add(n);return e==="change"?()=>{i(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const n=resolveElements(t),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[n,s,()=>i.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,n={}){const[i,s,o]=setupGesture(t,n),c=f=>{if(!isValidHover(f))return;const{target:p}=f,d=e(p,f);if(typeof d!="function"||!p)return;const u=m=>{isValidHover(m)&&(d(m),p.removeEventListener("pointerleave",u))};p.addEventListener("pointerleave",u,s)};return i.forEach(f=>{f.addEventListener("pointerenter",c,s)}),o}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return focusableElements.has(t.tagName)||t.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const s=filterEvents(()=>{firePointerEvent(n,"up")}),o=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,n={}){const[i,s,o]=setupGesture(t,n),c=f=>{const p=f.currentTarget;if(!isValidPressEvent(f))return;isPressing.add(p);const d=e(p,f),u=(b,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),isPressing.has(p)&&isPressing.delete(p),isValidPressEvent(b)&&typeof d=="function"&&d(b,{success:g})},m=b=>{u(b,p===window||p===document||n.useGlobalTarget||isNodeOrChild(p,b.target))},v=b=>{u(b,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",v,s)};return i.forEach(f=>{(n.useGlobalTarget?window:f).addEventListener("pointerdown",c,s),isHTMLElement(f)&&(f.addEventListener("focus",d=>enableKeyboardPress(d,s)),!isElementKeyboardAccessible(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),o}function isSVGElement(t){return isObject$1(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement(t)&&t.tagName==="svg"}const isMotionValue=t=>!!(t&&t.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=isHTMLElement(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:e,anchorX:n,root:i}){const s=reactExports.useId(),o=reactExports.useRef(null),c=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:p,height:d,top:u,left:m,right:v}=c.current;if(e||!o.current||!p||!d)return;const b=n==="left"?`left: ${m}`:`right: ${v}`;o.current.dataset.motionPopId=s;const g=document.createElement("style");f&&(g.nonce=f);const y=i??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${d}px !important;
            ${b}px !important;
            top: ${u}px !important;
          }
        `),()=>{y.removeChild(g),y.contains(g)&&y.removeChild(g)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:o,sizeRef:c,children:reactExports.cloneElement(t,{ref:o})})}const PresenceChild=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:c,anchorX:f,root:p})=>{const d=useConstant(newChildrenMap),u=reactExports.useId();let m=!0,v=reactExports.useMemo(()=>(m=!1,{id:u,initial:e,isPresent:n,custom:s,onExitComplete:b=>{d.set(b,!0);for(const g of d.values())if(!g)return;i&&i()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,i]);return o&&m&&(v={...v}),reactExports.useMemo(()=>{d.forEach((b,g)=>d.set(g,!1))},[n]),reactExports.useEffect(()=>{!n&&!d.size&&i&&i()},[n]),c==="popLayout"&&(t=jsxRuntimeExports.jsx(PopChild,{isPresent:n,anchorX:f,root:p,children:t})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:v,children:t})};function newChildrenMap(){return new Map}function usePresence(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,o=reactExports.useId();reactExports.useEffect(()=>{if(t)return s(o)},[t]);const c=reactExports.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,c]:[!0]}const getChildKey=t=>t.key||"";function onlyElements(t){const e=[];return reactExports.Children.forEach(t,n=>{reactExports.isValidElement(n)&&e.push(n)}),e}const AnimatePresence=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync",propagate:c=!1,anchorX:f="left",root:p})=>{const[d,u]=usePresence(c),m=reactExports.useMemo(()=>onlyElements(t),[t]),v=c&&!d?[]:m.map(getChildKey),b=reactExports.useRef(!0),g=reactExports.useRef(m),y=useConstant(()=>new Map),[w,_]=reactExports.useState(m),[R,k]=reactExports.useState(m);useIsomorphicLayoutEffect(()=>{b.current=!1,g.current=m;for(let D=0;D<R.length;D++){const H=getChildKey(R[D]);v.includes(H)?y.delete(H):y.get(H)!==!0&&y.set(H,!1)}},[R,v.length,v.join("-")]);const C=[];if(m!==w){let D=[...m];for(let H=0;H<R.length;H++){const I=R[H],F=getChildKey(I);v.includes(F)||(D.splice(H,0,I),C.push(I))}return o==="wait"&&C.length&&(D=C),k(onlyElements(D)),_(m),null}const{forceRender:A}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:R.map(D=>{const H=getChildKey(D),I=c&&!d?!1:m===R||v.includes(H),F=()=>{if(y.has(H))y.set(H,!0);else return;let Z=!0;y.forEach(N=>{N||(Z=!1)}),Z&&(A?.(),k(g.current),c&&u?.(),i&&i())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:I,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:p,onExitComplete:I?void 0:F,anchorX:f,children:D},H)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const t in featureProps)featureDefinitions[t]={isEnabled:e=>featureProps[t].some(n=>!!e[n])};function loadFeatures(t){for(const e in t)featureDefinitions[e]={...featureDefinitions[e],...t[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){typeof t=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(shouldForward(s)||n===!0&&isValidMotionProp(s)||!e&&!isValidMotionProp(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}const MotionContext=reactExports.createContext({});function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:n,animate:i}=t;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(i)?i:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:n}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:n}),[variantLabelsAsDependency(e),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const scaleCorrectors={};function addScaleCorrector(t){for(const e in t)scaleCorrectors[e]=t[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(t,{layout:e,layoutId:n}){return transformProps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,n){let i="",s=!0;for(let o=0;o<numTransforms;o++){const c=transformPropOrder[o],f=t[c];if(f===void 0)continue;let p=!0;if(typeof f=="number"?p=f===(c.startsWith("scale")?1:0):p=parseFloat(f)===0,!p||n){const d=getValueAsType(f,numberValueTypes[c]);if(!p){s=!1;const u=translateAlias[c]||c;i+=`${u}(${d}) `}n&&(e[c]=d)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function buildHTMLStyles(t,e,n){const{style:i,vars:s,transformOrigin:o}=t;let c=!1,f=!1;for(const p in e){const d=e[p];if(transformProps.has(p)){c=!0;continue}else if(isCSSVariableName(p)){s[p]=d;continue}else{const u=getValueAsType(d,numberValueTypes[p]);p.startsWith("origin")?(f=!0,o[p]=u):i[p]=u}}if(e.transform||(c||n?i.transform=buildTransform(e,t.transform,n):i.transform&&(i.transform="none")),f){const{originX:p="50%",originY:d="50%",originZ:u=0}=o;i.transformOrigin=`${p} ${d} ${u}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,n){for(const i in e)!isMotionValue(e[i])&&!isForcedMotionValue(i,n)&&(t[i]=e[i])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,e,t),Object.assign({},n.vars,n.style)},[e])}function useStyle(t,e){const n=t.style||{},i={};return copyRawValuesOnly(i,n,t),Object.assign(i,useInitialMotionValues(t,e)),i}function useHTMLProps(t,e){const n={},i=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,n=1,i=0,s=!0){t.pathLength=1;const o=s?dashKeys:camelKeys;t[o.offset]=px.transform(-i);const c=px.transform(e),f=px.transform(n);t[o.array]=`${c} ${f}`}function buildSVGAttrs(t,{attrX:e,attrY:n,attrScale:i,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...f},p,d,u){if(buildHTMLStyles(t,f,d),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:v}=t;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=u?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),s!==void 0&&buildSVGPath(m,s,o,c,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function useSVGProps(t,e,n,i){const s=reactExports.useMemo(()=>{const o=createSvgRenderState();return buildSVGAttrs(o,e,isSVGTag(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};copyRawValuesOnly(o,t.style,t),s.style={...o,...s.style}}return s}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function useRender(t,e,n,{latestValues:i},s,o=!1){const f=(isSVGComponent(t)?useSVGProps:useHTMLProps)(e,i,s,t),p=filterProps(e,typeof t=="string",o),d=t!==reactExports.Fragment?{...p,...f,ref:n}:{},{children:u}=e,m=reactExports.useMemo(()=>isMotionValue(u)?u.get():u,[u]);return reactExports.createElement(t,{...d,children:m})}function getValueState(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function resolveVariantFromProps(t,e,n,i){if(typeof e=="function"){const[s,o]=getValueState(i);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=getValueState(i);e=e(n!==void 0?n:t.custom,s,o)}return e}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,s){return{latestValues:makeLatestValues(n,i,s,t),renderState:e()}}function makeLatestValues(t,e,n,i){const s={},o=i(t,{});for(const v in o)s[v]=resolveMotionValue(o[v]);let{initial:c,animate:f}=t;const p=isControllingVariants(t),d=isVariantNode(t);e&&d&&!p&&t.inherit!==!1&&(c===void 0&&(c=e.initial),f===void 0&&(f=e.animate));let u=n?n.initial===!1:!1;u=u||c===!1;const m=u?f:c;if(m&&typeof m!="boolean"&&!isAnimationControls(m)){const v=Array.isArray(m)?m:[m];for(let b=0;b<v.length;b++){const g=resolveVariantFromProps(t,v[b]);if(g){const{transitionEnd:y,transition:w,..._}=g;for(const R in _){let k=_[R];if(Array.isArray(k)){const C=u?k.length-1:0;k=k[C]}k!==null&&(s[R]=k)}for(const R in y)s[R]=y[R]}}}return s}const makeUseVisualState=t=>(e,n)=>{const i=reactExports.useContext(MotionContext),s=reactExports.useContext(PresenceContext),o=()=>makeState(t,e,i,s);return n?o():useConstant(o)};function scrapeMotionValuesFromProps$1(t,e,n){const{style:i}=t,s={};for(const o in i)(isMotionValue(i[o])||e.style&&isMotionValue(e.style[o])||isForcedMotionValue(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=i[o]);return s}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(t,e,n){const i=scrapeMotionValuesFromProps$1(t,e,n);for(const s in t)if(isMotionValue(t[s])||isMotionValue(e[s])){const o=transformPropOrder.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[o]=t[s]}return i}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useMotionRef(t,e,n){return reactExports.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):isRefObject(n)&&(n.current=i))},[e])}const camelToDash=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(t,e,n,i,s){const{visualElement:o}=reactExports.useContext(MotionContext),c=reactExports.useContext(LazyContext),f=reactExports.useContext(PresenceContext),p=reactExports.useContext(MotionConfigContext).reducedMotion,d=reactExports.useRef(null);i=i||c.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const u=d.current,m=reactExports.useContext(SwitchLayoutGroupContext);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&createProjectionNode$1(d.current,n,s,m);const v=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{u&&v.current&&u.update(n,f)});const b=n[optimizedAppearDataAttribute],g=reactExports.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return useIsomorphicLayoutEffect(()=>{u&&(v.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),g.current&&u.animationState&&u.animationState.animateChanges())}),reactExports.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),g.current=!1))}),u}function createProjectionNode$1(t,e,n,i){const{layoutId:s,layout:o,drag:c,dragConstraints:f,layoutScroll:p,layoutRoot:d,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!c||f&&isRefObject(f),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:p,layoutRoot:d})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createMotionComponent(t,{forwardMotionProps:e=!1}={},n,i){n&&loadFeatures(n);const s=isSVGComponent(t)?useSVGVisualState:useHTMLVisualState;function o(f,p){let d;const u={...reactExports.useContext(MotionConfigContext),...f,layoutId:useLayoutId(f)},{isStatic:m}=u,v=useCreateMotionContext(f),b=s(f,m);if(!m&&isBrowser$1){useStrictMode();const g=getProjectionFunctionality(u);d=g.MeasureLayout,v.visualElement=useVisualElement(t,b,u,i,g.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:v,children:[d&&v.visualElement?jsxRuntimeExports.jsx(d,{visualElement:v.visualElement,...u}):null,useRender(t,f,useMotionRef(b,v.visualElement,p),b,m,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=reactExports.forwardRef(o);return c[motionComponentSymbol]=t,c}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const{drag:e,layout:n}=featureDefinitions;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function createMotionProxy(t,e){if(typeof Proxy>"u")return createMotionComponent;const n=new Map,i=(o,c)=>createMotionComponent(o,c,t,e),s=(o,c)=>i(o,c);return new Proxy(s,{get:(o,c)=>c==="create"?i:(n.has(c)||n.set(c,createMotionComponent(c,void 0,t,e)),n.get(c))})}function convertBoundingBoxToBox({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:n}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(n)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,n){const i=t-n,s=e*i;return n+s}function applyPointDelta(t,e,n,i,s){return s!==void 0&&(t=scalePoint(t,s,i)),scalePoint(t,n,i)+e}function applyAxisDelta(t,e=0,n=1,i,s){t.min=applyPointDelta(t.min,e,n,i,s),t.max=applyPointDelta(t.max,e,n,i,s)}function applyBoxDelta(t,{x:e,y:n}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,c;for(let f=0;f<s;f++){o=n[f],c=o.projectionDelta;const{visualElement:p}=o.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&transformBox(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,applyBoxDelta(t,c)),i&&hasTransform(o.latestValues)&&transformBox(t,o.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,n,i,s=.5){const o=mixNumber$1(t.min,t.max,s);applyAxisDelta(t,e,n,o,i)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,n){const i=measureViewportBox(t,n),{scroll:s}=e;return s&&(translateAxis(i.x,s.offset.x),translateAxis(i.y,s.offset.y)),i}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(t,e,n){for(const i in e){const s=e[i],o=n[i];if(isMotionValue(s))t.addValue(i,s);else if(isMotionValue(o))t.addValue(i,motionValue(s,{owner:t}));else if(o!==s)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(i);t.addValue(i,motionValue(c!==void 0?c:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:o,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=time.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,frame.render(this.render,!1,!0))};const{latestValues:p,renderState:d}=c;this.latestValues=p,this.baseTarget={...p},this.initialValues=n.initial?{...p}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!o,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in m){const b=m[v];p[v]!==void 0&&isMotionValue(b)&&b.set(p[v],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=transformProps.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&frame.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const n=featureDefinitions[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<propEventHandlers.length;i++){const s=propEventHandlers[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,c=e[o];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=motionValue(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(isNumericalString(i)||isZeroValueString(i))?i=parseFloat(i):!findValueType(i)&&complex.test(n)&&(i=getAnimatableNone(e,n)),this.setBaseTarget(e,isMotionValue(i)?i.get():i)),isMotionValue(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=resolveVariantFromProps(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!isMotionValue(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function renderHTML(t,{style:e,vars:n},i,s){const o=t.style;let c;for(c in e)o[c]=e[c];s?.applyProjectionStyles(o,i);for(c in n)o.setProperty(c,n[c])}function getComputedStyle$1(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,n){if(transformProps.has(n))return this.projection?.isProjecting?defaultTransformValue(n):readTransformValue(e,n);{const i=getComputedStyle$1(e),s=(isCSSVariableName(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return measureViewportBox(e,n)}build(e,n,i){buildHTMLStyles(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return scrapeMotionValuesFromProps$1(e,n,i)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(t,e,n,i){renderHTML(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(camelCaseAttributes.has(s)?s:camelToDash(s),e.attrs[s])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(transformProps.has(n)){const i=getDefaultValueType(n);return i&&i.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return scrapeMotionValuesFromProps(e,n,i)}build(e,n,i){buildSVGAttrs(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,s){renderSVG(e,n,i,s)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(t,e)=>isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment});function resolveVariant(t,e,n){const i=t.getProps();return resolveVariantFromProps(i,e,n!==void 0?n:i.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,motionValue(n))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const n=resolveVariant(t,e);let{transitionEnd:i={},transition:s={},...o}=n||{};o={...o,...i};for(const c in o){const f=resolveFinalValueInKeyframes(o[c]);setMotionValue(t,c,f)}}function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const n=t.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(e);if(!n&&MotionGlobalConfig.WillChange){const i=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}const isNotNull=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(isNotNull),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:c,repeatDelay:f,from:p,elapsed:d,...u}){return!!Object.keys(u).length}const animateMotionValue=(t,e,n,i={},s,o)=>c=>{const f=getValueTransition(i,t)||{},p=f.delay||i.delay||0;let{elapsed:d=0}=i;d=d-secondsToMilliseconds(p);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-d,onUpdate:v=>{e.set(v),f.onUpdate&&f.onUpdate(v)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:o?void 0:s};isTransitionDefined(f)||Object.assign(u,getDefaultTransition(t,u)),u.duration&&(u.duration=secondsToMilliseconds(u.duration)),u.repeatDelay&&(u.repeatDelay=secondsToMilliseconds(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(m=!0,u.duration=0,u.delay=0),u.allowFlatten=!f.type&&!f.ease,m&&!o&&e.get()!==void 0){const v=getFinalKeyframe(u.keyframes,f);if(v!==void 0){frame.update(()=>{u.onUpdate(v),u.onComplete()});return}}return f.isSync?new JSAnimation(u):new AsyncMotionValueAnimation(u)};function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function animateTarget(t,e,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...f}=e;i&&(o=i);const p=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const u in f){const m=t.getValue(u,t.latestValues[u]??null),v=f[u];if(v===void 0||d&&shouldBlockAnimation(d,u))continue;const b={delay:n,...getValueTransition(o||{},u)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===g&&!b.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const _=getOptimisedAppearId(t);if(_){const R=window.MotionHandoffAnimation(_,u,frame);R!==null&&(b.startTime=R,y=!0)}}addValueToWillChange(t,u),m.start(animateMotionValue(u,m,v,t.shouldReduceMotion&&positionalKeys.has(u)?{type:!1}:b,t,y));const w=m.animation;w&&p.push(w)}return c&&Promise.all(p).then(()=>{frame.update(()=>{c&&setTarget(t,c)})}),p}function animateVariant(t,e,n={}){const i=resolveVariant(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(animateTarget(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:m}=s;return animateChildren(t,e,p,d,u,m,n)}:()=>Promise.resolve(),{when:f}=s;if(f){const[p,d]=f==="beforeChildren"?[o,c]:[c,o];return p().then(()=>d())}else return Promise.all([o(),c(n.delay)])}function animateChildren(t,e,n=0,i=0,s=0,o=1,c){const f=[],p=t.variantChildren.size,d=(p-1)*s,u=typeof i=="function",m=u?v=>i(v,p):o===1?(v=0)=>v*s:(v=0)=>d-v*s;return Array.from(t.variantChildren).sort(sortByTreeOrder).forEach((v,b)=>{v.notify("AnimationStart",e),f.push(animateVariant(v,e,{...c,delay:n+(u?0:i)+m(b)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(f)}function sortByTreeOrder(t,e){return t.sortNodePosition(e)}function animateVisualElement(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(o=>animateVariant(t,o,n));i=Promise.all(s)}else if(typeof e=="string")i=animateVariant(t,e,n);else{const s=typeof e=="function"?resolveVariant(t,e,n.custom):e;i=Promise.all(animateTarget(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<numVariantProps;n++){const i=variantProps[n],s=t.props[i];(isVariantLabel(s)||s===!1)&&(e[i]=s)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(t){return e=>Promise.all(e.map(({animation:n,options:i})=>animateVisualElement(t,n,i)))}function createAnimationState(t){let e=animateList(t),n=createState(),i=!0;const s=p=>(d,u)=>{const m=resolveVariant(t,u,p==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:v,transitionEnd:b,...g}=m;d={...d,...g,...b}}return d};function o(p){e=p(t)}function c(p){const{props:d}=t,u=getVariantContext(t.parent)||{},m=[],v=new Set;let b={},g=1/0;for(let w=0;w<numAnimationTypes;w++){const _=reversePriorityOrder[w],R=n[_],k=d[_]!==void 0?d[_]:u[_],C=isVariantLabel(k),A=_===p?R.isActive:null;A===!1&&(g=w);let D=k===u[_]&&k!==d[_]&&C;if(D&&i&&t.manuallyAnimateOnMount&&(D=!1),R.protectedKeys={...b},!R.isActive&&A===null||!k&&!R.prevProp||isAnimationControls(k)||typeof k=="boolean")continue;const H=checkVariantsDidChange(R.prevProp,k);let I=H||_===p&&R.isActive&&!D&&C||w>g&&C,F=!1;const Z=Array.isArray(k)?k:[k];let N=Z.reduce(s(_),{});A===!1&&(N={});const{prevResolvedValues:G={}}=R,J={...G,...N},ee=O=>{I=!0,v.has(O)&&(F=!0,v.delete(O)),R.needsAnimating[O]=!0;const j=t.getValue(O);j&&(j.liveStyle=!1)};for(const O in J){const j=N[O],T=G[O];if(b.hasOwnProperty(O))continue;let E=!1;isKeyframesTarget(j)&&isKeyframesTarget(T)?E=!shallowCompare(j,T):E=j!==T,E?j!=null?ee(O):v.add(O):j!==void 0&&v.has(O)?ee(O):R.protectedKeys[O]=!0}R.prevProp=k,R.prevResolvedValues=N,R.isActive&&(b={...b,...N}),i&&t.blockInitialAnimation&&(I=!1),I&&(!(D&&H)||F)&&m.push(...Z.map(O=>({animation:O,options:{type:_}})))}if(v.size){const w={};if(typeof d.initial!="boolean"){const _=resolveVariant(t,Array.isArray(d.initial)?d.initial[0]:d.initial);_&&_.transition&&(w.transition=_.transition)}v.forEach(_=>{const R=t.getBaseTarget(_),k=t.getValue(_);k&&(k.liveStyle=!0),w[_]=R??null}),m.push({animation:w})}let y=!!m.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(y=!1),i=!1,y?e(m):Promise.resolve()}function f(p,d){if(n[p].isActive===d)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(p,d)),n[p].isActive=d;const u=c(p);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:c,setActive:f,setAnimateFunction:o,getState:()=>n,reset:()=>{n=createState(),i=!0}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,n,i){return addDomEvent(t,e,addPointerInfo(n),i)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,n){return Math.abs(t-e)<=n}function calcAxisDelta(t,e,n,i=.5){t.origin=i,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(n)/calcLength(e),t.translate=mixNumber$1(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,n,i){calcAxisDelta(t.x,e.x,n.x,i?i.originX:void 0),calcAxisDelta(t.y,e.y,n.y,i?i.originY:void 0)}function calcRelativeAxis(t,e,n){t.min=n.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,n){calcRelativeAxis(t.x,e.x,n.x),calcRelativeAxis(t.y,e.y,n.y)}function calcRelativeAxisPosition(t,e,n){t.min=e.min-n.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,n){calcRelativeAxisPosition(t.x,e.x,n.x),calcRelativeAxisPosition(t.y,e.y,n.y)}function eachAxis(t){return[t("x"),t("y")]}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const n=distance(t.x,e.x),i=distance(t.y,e.y);return Math.sqrt(n**2+i**2)}class PanSession{constructor(e,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=getPanInfo(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,g=distance2D(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!g)return;const{point:y}=v,{timestamp:w}=frameData;this.history.push({...y,timestamp:w});const{onStart:_,onMove:R}=this.handlers;b||(_&&_(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=transformPoint(b,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=getPanInfo(v.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(b,this.transformPagePoint),this.history);this.startEvent&&g&&g(v,_),y&&y(v,_)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=s||window;const f=extractEventInfo(e),p=transformPoint(f,this.transformPagePoint),{point:d}=p,{timestamp:u}=frameData;this.history=[{...d,timestamp:u}];const{onSessionStart:m}=n;m&&m(e,getPanInfo(p,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=lastDevicePoint(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>secondsToMilliseconds(e)));)n--;if(!i)return{x:0,y:0};const o=millisecondsToSeconds(s.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const c={x:(s.x-i.x)/o,y:(s.y-i.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function applyConstraints(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?mixNumber$1(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?mixNumber$1(n,t,i.max):Math.min(t,n)),t}function calcRelativeAxisConstraints(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:n,bottom:i,right:s}){return{x:calcRelativeAxisConstraints(t.x,n,s),y:calcRelativeAxisConstraints(t.y,e,i)}}function calcViewportAxisConstraints(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let n=.5;const i=calcLength(t),s=calcLength(e);return s>i?n=progress(e.min,e.max-i,t.min):i>s&&(n=progress(t.min,t.max-s,e.min)),clamp(0,1,n)}function rebaseAxisConstraints(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,n){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,n)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(m).point)},c=(m,v)=>{const{drag:b,dragPropagation:g,onDragStart:y}=this.getProps();if(b&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(b),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(_=>{let R=this.getAxisMotionValue(_).get()||0;if(percent.test(R)){const{projection:k}=this.visualElement;if(k&&k.layout){const C=k.layout.layoutBox[_];C&&(R=calcLength(C)*(parseFloat(R)/100))}}this.originPoint[_]=R}),y&&frame.postRender(()=>y(m,v)),addValueToWillChange(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},f=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:g,onDirectionLock:y,onDrag:w}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:_}=v;if(g&&this.currentDirection===null){this.currentDirection=getCurrentDirection(_),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",v.point,_),this.updateAxis("y",v.point,_),this.visualElement.render(),w&&w(m,v)},p=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>eachAxis(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:o,onStart:c,onMove:f,onSessionEnd:p,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:getContextWindow(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!i)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&frame.postRender(()=>f(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!shouldDrag(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=applyConstraints(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=calcRelativeConstraints(i.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rebaseAxisConstraints(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!isRefObject(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=measurePageBox(i,s.root,this.visualElement.getTransformPagePoint());let c=calcViewportConstraints(s.layout.layoutBox,o);if(n){const f=n(convertBoxToBoundingBox(c));this.hasMutatedConstraints=!!f,f&&(c=convertBoundingBoxToBox(f))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),p=this.constraints||{},d=eachAxis(u=>{if(!shouldDrag(u,n,this.currentDirection))return;let m=p&&p[u]||{};c&&(m={min:0,max:0});const v=s?200:1e6,b=s?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(f)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),i.start(animateMotionValue(e,i,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(n=>{const{drag:i}=this.getProps();if(!shouldDrag(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:f}=s.layout.layoutBox[n];o.set(e[n]-mixNumber$1(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!isRefObject(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};eachAxis(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const p=f.get();s[c]=calcOrigin({min:p,max:p},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),eachAxis(c=>{if(!shouldDrag(c,e,null))return;const f=this.getAxisMotionValue(c),{min:p,max:d}=this.constraints[c];f.set(mixNumber$1(p,d,s[c]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,n=addPointerEvent(e,"pointerdown",p=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();isRefObject(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),frame.read(i);const c=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",({delta:p,hasLayoutChanged:d})=>{this.isDragging&&d&&(eachAxis(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=p[u].translate,m.set(m.get()+p[u].translate))}),this.visualElement.render())});return()=>{c(),n(),o(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:c=defaultElastic,dragMomentum:f=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:o,dragElastic:c,dragMomentum:f}}}function shouldDrag(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function getCurrentDirection(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$3,this.removeListeners=noop$3,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$3}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(e,n)=>{t&&frame.postRender(()=>t(e,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$3}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(n),onMove:i,onEnd:(o,c)=>{delete this.session,s&&frame.postRender(()=>s(o,c))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const n=pixelsToPercent(t,e.target.x),i=pixelsToPercent(t,e.target.y);return`${n}% ${i}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=complex.parse(t);if(s.length>5)return i;const o=complex.createTransformer(t),c=typeof s[0]!="number"?1:0,f=n.x.scale*e.x,p=n.y.scale*e.y;s[0+c]/=f,s[1+c]/=p;const d=mixNumber$1(f,p,.5);return typeof s[2+c]=="number"&&(s[2+c]/=d),typeof s[3+c]=="number"&&(s[3+c]/=d),o(s)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:o}=e;addScaleCorrector(defaultScaleCorrectors),o&&(n.group&&n.group.add(o),i&&i.register&&s&&i.register(o),hasTakenAnySnapshot&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:o}=this.props,{projection:c}=i;return c&&(c.isPresent=o,hasTakenAnySnapshot=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||frame.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,n]=usePresence(),i=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:i,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(t,e,n){const i=isMotionValue(t)?t:motionValue(t);return i.start(animateMotionValue("",i,e,n)),i.animation}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const n=time.now(),i=({timestamp:s})=>{const o=s-n;o>=e&&(cancelFrame(i),t(o-e))};return frame.setup(i,!0),()=>cancelFrame(i)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,n,i,s,o){s?(t.opacity=mixNumber$1(0,n.opacity??1,easeCrossfadeIn(i)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(i))):o&&(t.opacity=mixNumber$1(e.opacity??1,n.opacity??1,i));for(let c=0;c<numBorders;c++){const f=`border${borders[c]}Radius`;let p=getRadius(e,f),d=getRadius(n,f);if(p===void 0&&d===void 0)continue;p||(p=0),d||(d=0),p===0||d===0||isPx(p)===isPx(d)?(t[f]=Math.max(mixNumber$1(asNumber(p),asNumber(d),i),0),(percent.test(d)||percent.test(p))&&(t[f]+="%")):t[f]=d}(e.rotate||n.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,n.rotate||0,i))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$3);function compress(t,e,n){return i=>i<t?0:i>e?1:n(progress(t,e,i))}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function removePointDelta(t,e,n,i,s){return t-=e,t=scalePoint(t,1/n,i),s!==void 0&&(t=scalePoint(t,1/s,i)),t}function removeAxisDelta(t,e=0,n=1,i=.5,s,o=t,c=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(c.min,c.max,e/100)-c.min),typeof e!="number")return;let f=mixNumber$1(o.min,o.max,i);t===o&&(f-=e),t.min=removePointDelta(t.min,e,n,f,s),t.max=removePointDelta(t.max,e,n,f,s)}function removeAxisTransforms(t,e,[n,i,s],o,c){removeAxisDelta(t,e[n],e[i],e[s],e.scale,o,c)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,n,i){removeAxisTransforms(t.x,e,xKeys,n?n.x:void 0,i?i.x:void 0),removeAxisTransforms(t.y,e,yKeys,n?n.y:void 0,i?i.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(t,e,n){let i="";const s=t.x.translate/e.x,o=t.y.translate/e.y,c=n?.z||0;if((s||o||c)&&(i=`translate3d(${s}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:v,skewX:b,skewY:g}=n;d&&(i=`perspective(${d}px) ${i}`),u&&(i+=`rotate(${u}deg) `),m&&(i+=`rotateX(${m}deg) `),v&&(i+=`rotateY(${v}deg) `),b&&(i+=`skewX(${b}deg) `),g&&(i+=`skewY(${g}deg) `)}const f=t.x.scale*e.x,p=t.y.scale*e.y;return(f!==1||p!==1)&&(i+=`scale(${f}, ${p})`),i||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(s||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(i)}function createProjectionNode({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(c={},f=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new SubscriptionManager),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const p=this.eventHandlers.get(c);p&&p.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=isSVGElement(c)&&!isSVGSVGElement(c),this.instance=c;const{layoutId:f,layout:p,visualElement:d}=this.options;if(d&&!d.current&&d.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||f)&&(this.isLayoutDirty=!0),t){let u,m=0;const v=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{m=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==m&&(m=b,this.root.updateBlockedByResize=!0,u&&u(),u=delay(v,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&d&&(f||p)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:y,onLayoutAnimationComplete:w}=d.getProps(),_=!this.targetLayout||!boxEqualsRounded(this.targetLayout,b),R=!m&&v;if(this.options.layoutRoot||this.resumeFrom||R||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...getValueTransition(g,"layout"),onPlay:y,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(u,R)}else m||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:f,layout:p}=this.options;if(f===void 0&&!p)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const f=time.now();frameData.delta=clamp(0,1e3/60,f-frameData.timestamp),frameData.timestamp=f,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&this.instance){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:p,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!isDeltaZero(this.projectionDelta),p=this.getTransformTemplate(),d=p?p(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;c&&this.instance&&(f||hasTransform(this.latestValues)||u)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let p=this.removeElementScroll(f);return c&&(p=this.removeTransform(p)),roundBox(p),{animationId:this.root.animationId,measuredBox:f,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return createBox();const f=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:d}=this.root;d&&(translateAxis(f.x,d.offset.x),translateAxis(f.y,d.offset.y))}return f}removeElementScroll(c){const f=createBox();if(copyBoxInto(f,c),this.scroll?.wasRoot)return f;for(let p=0;p<this.path.length;p++){const d=this.path[p],{scroll:u,options:m}=d;d!==this.root&&u&&m.layoutScroll&&(u.wasRoot&&copyBoxInto(f,c),translateAxis(f.x,u.offset.x),translateAxis(f.y,u.offset.y))}return f}applyTransform(c,f=!1){const p=createBox();copyBoxInto(p,c);for(let d=0;d<this.path.length;d++){const u=this.path[d];!f&&u.options.layoutScroll&&u.scroll&&u!==u.root&&transformBox(p,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),hasTransform(u.latestValues)&&transformBox(p,u.latestValues)}return hasTransform(this.latestValues)&&transformBox(p,this.latestValues),p}removeTransform(c){const f=createBox();copyBoxInto(f,c);for(let p=0;p<this.path.length;p++){const d=this.path[p];if(!d.instance||!hasTransform(d.latestValues))continue;hasScale(d.latestValues)&&d.updateSnapshot();const u=createBox(),m=d.measurePageBox();copyBoxInto(u,m),removeBoxTransforms(f,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return hasTransform(this.latestValues)&&removeBoxTransforms(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:m}=this.options;if(!(!this.layout||!(u||m))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,v.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),f=!!this.resumingFrom||this!==c;let p=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(p=!1),p)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=createBox());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(c,f=!1){const p=this.snapshot,d=p?p.latestValues:{},u={...this.latestValues},m=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const v=createBox(),b=p?p.source:void 0,g=this.layout?this.layout.source:void 0,y=b!==g,w=this.getStack(),_=!w||w.members.length<=1,R=!!(y&&!_&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let k;this.mixTargetDelta=C=>{const A=C/1e3;mixAxisDelta(m.x,c.x,A),mixAxisDelta(m.y,c.y,A),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,v,A),k&&boxEquals(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=createBox()),copyBoxInto(k,this.relativeTarget)),y&&(this.animationValues=u,mixValues(u,d,this.latestValues,A,R,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:p,layout:d,latestValues:u}=c;if(!(!f||!p||!d)){if(this!==c&&this.layout&&d&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,d.layoutBox)){p=this.target||createBox();const m=calcLength(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+m;const v=calcLength(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+v}copyBoxInto(f,p),transformBox(f,u),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,f,u)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new NodeStack),this.sharedNodes.get(c).add(f);const d=f.options.initialPromotionConfig;f.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:p}={}){const d=this.getStack();d&&d.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:p}=c;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(f=!0),!f)return;const d={};p.z&&resetDistortingTransform("z",c,d,this.animationValues);for(let u=0;u<transformAxes.length;u++)resetDistortingTransform(`rotate${transformAxes[u]}`,c,d,this.animationValues),resetDistortingTransform(`skew${transformAxes[u]}`,c,d,this.animationValues);c.render();for(const u in d)c.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);c.scheduleRender()}applyProjectionStyles(c,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=resolveMotionValue(f?.pointerEvents)||"",c.transform=p?p(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=resolveMotionValue(f?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(c.transform=p?p({},""):"none",this.hasProjected=!1);return}c.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,u);p&&(m=p(u,m)),c.transform=m;const{x:v,y:b}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:c.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in scaleCorrectors){if(u[g]===void 0)continue;const{correct:y,applyTo:w,isCSSVariable:_}=scaleCorrectors[g],R=m==="none"?u[g]:y(u[g],d);if(w){const k=w.length;for(let C=0;C<k;C++)c[w[C]]=R}else _?this.options.visualElement.renderState.vars[g]=R:c[g]=R}this.options.layoutId&&(c.pointerEvents=d===this?resolveMotionValue(f?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?eachAxis(u=>{const m=o?e.measuredBox[u]:e.layoutBox[u],v=calcLength(m);m.min=n[u].min,m.max=m.min+v}):shouldAnimatePositionOnly(s,e.layoutBox,n)&&eachAxis(u=>{const m=o?e.measuredBox[u]:e.layoutBox[u],v=calcLength(n[u]);m.max=m.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+v)});const c=createDelta();calcBoxDelta(c,n,e.layoutBox);const f=createDelta();o?calcBoxDelta(f,t.applyTransform(i,!0),e.measuredBox):calcBoxDelta(f,n,e.layoutBox);const p=!isDeltaZero(c);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:m,layout:v}=u;if(m&&v){const b=createBox();calcRelativePosition(b,e.layoutBox,m.layoutBox);const g=createBox();calcRelativePosition(g,n,v.layoutBox),boxEqualsRounded(b,g)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=b,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:f,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,n){t.translate=mixNumber$1(e.translate,0,n),t.scale=mixNumber$1(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,n,i){t.min=mixNumber$1(e.min,n.min,i),t.max=mixNumber$1(e.max,n.max,i)}function mixBox(t,e,n,i){mixAxis(t.x,e.x,n.x,i),mixAxis(t.y,e.y,n.y,i)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$3;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,n){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(n),.2)}function checkNodeWasScrollRoot(t){return t!==t.root&&t.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=i[s];o&&frame.postRender(()=>o(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(n,i)=>(handleHoverEvent(this.node,i,"Start"),s=>handleHoverEvent(this.node,s,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=i[s];o&&frame.postRender(()=>o(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(n,i)=>(handlePressEvent(this.node,i,"Start"),(s,{success:o})=>handlePressEvent(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const n=t||document;observers.has(n)||observers.set(n,{});const i=observers.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),i[s]}function observeIntersection(t,e,n){const i=initIntersectionObserver(e);return observerCallbacks.set(t,n),i.observe(t),()=>{observerCallbacks.delete(t),i.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:thresholdNames[s]},f=p=>{const{isIntersecting:d}=p;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),v=d?u:m;v&&v(p)};return observeIntersection(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=t,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var t=requireReactPropTypesSecret();function e(){}function n(){}return n.resetWarningCache=e,factoryWithThrowingShims=function(){function i(c,f,p,d,u,m){if(m!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function s(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);function __awaiter$8(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(t,e,n){const i=withMimeType(t),{webkitRelativePath:s}=t,o=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof i.path!="string"&&setObjProp(i,"path",o),setObjProp(i,"relativePath",o),i}function withMimeType(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const i=e.split(".").pop().toLowerCase(),s=COMMON_MIME_TYPES.get(i);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function setObjProp(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(t){return __awaiter$8(this,void 0,void 0,function*(){return isObject(t)&&isDataTransfer(t.dataTransfer)?getDataTransferFiles(t.dataTransfer,t.type):isChangeEvt(t)?getInputFiles(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?getFsHandleFiles(t):[]})}function isDataTransfer(t){return isObject(t)}function isChangeEvt(t){return isObject(t)&&isObject(t.target)}function isObject(t){return typeof t=="object"&&t!==null}function getInputFiles(t){return fromList(t.target.files).map(e=>toFileWithPath(e))}function getFsHandleFiles(t){return __awaiter$8(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>toFileWithPath(n))})}function getDataTransferFiles(t,e){return __awaiter$8(this,void 0,void 0,function*(){if(t.items){const n=fromList(t.items).filter(s=>s.kind==="file");if(e!=="drop")return n;const i=yield Promise.all(n.map(toFilePromises));return noIgnoredFiles(flatten(i))}return noIgnoredFiles(fromList(t.files).map(n=>toFileWithPath(n)))})}function noIgnoredFiles(t){return t.filter(e=>FILES_TO_IGNORE.indexOf(e.name)===-1)}function fromList(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const i=t[n];e.push(i)}return e}function toFilePromises(t){if(typeof t.webkitGetAsEntry!="function")return fromDataTransferItem(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?fromDirEntry(e):fromDataTransferItem(t,e)}function flatten(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?flatten(n):[n]],[])}function fromDataTransferItem(t,e){return __awaiter$8(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const o=yield t.getAsFileSystemHandle();if(o===null)throw new Error(`${t} is not a File`);if(o!==void 0){const c=yield o.getFile();return c.handle=o,toFileWithPath(c)}}const i=t.getAsFile();if(!i)throw new Error(`${t} is not a File`);return toFileWithPath(i,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function fromEntry(t){return __awaiter$8(this,void 0,void 0,function*(){return t.isDirectory?fromDirEntry(t):fromFileEntry(t)})}function fromDirEntry(t){const e=t.createReader();return new Promise((n,i)=>{const s=[];function o(){e.readEntries(c=>__awaiter$8(this,void 0,void 0,function*(){if(c.length){const f=Promise.all(c.map(fromEntry));s.push(f),o()}else try{const f=yield Promise.all(s);n(f)}catch(f){i(f)}}),c=>{i(c)})}o()})}function fromFileEntry(t){return __awaiter$8(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(i=>{const s=toFileWithPath(i,t.fullPath);e(s)},i=>{n(i)})})})}var es={},hasRequiredEs;function requireEs(){return hasRequiredEs||(hasRequiredEs=1,es.__esModule=!0,es.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var i=t.name||"",s=(t.type||"").toLowerCase(),o=s.replace(/\/.*$/,"");return n.some(function(c){var f=c.trim().toLowerCase();return f.charAt(0)==="."?i.toLowerCase().endsWith(f):f.endsWith("/*")?o===f.replace(/\/.*$/,""):s===f})}return!0}),es}var esExports=requireEs();const _accepts=getDefaultExportFromCjs(esExports);function _toConsumableArray$1(t){return _arrayWithoutHoles$1(t)||_iterableToArray$1(t)||_unsupportedIterableToArray$1(t)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$1(t){if(Array.isArray(t))return _arrayLikeToArray$1(t)}function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_unsupportedIterableToArray$1(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(t,e)}}function _arrayLikeToArray$1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$1(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],s=!0,o=!1,c,f;try{for(n=n.call(t);!(s=(c=n.next()).done)&&(i.push(c.value),!(e&&i.length===e));s=!0);}catch(p){o=!0,f=p}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw f}}return i}}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}var accepts=typeof _accepts=="function"?_accepts:_accepts.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),i=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(i)}},getTooLargeRejectionErr=function(e){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},getTooSmallRejectionErr=function(e){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(t,e){var n=t.type==="application/x-moz-file"||accepts(t,e);return[n,n?null:getInvalidTypeRejectionErr(e)]}function fileMatchSize(t,e,n){if(isDefined(t.size))if(isDefined(e)&&isDefined(n)){if(t.size>n)return[!1,getTooLargeRejectionErr(n)];if(t.size<e)return[!1,getTooSmallRejectionErr(e)]}else{if(isDefined(e)&&t.size<e)return[!1,getTooSmallRejectionErr(e)];if(isDefined(n)&&t.size>n)return[!1,getTooLargeRejectionErr(n)]}return[!0,null]}function isDefined(t){return t!=null}function allFilesAccepted(t){var e=t.files,n=t.accept,i=t.minSize,s=t.maxSize,o=t.multiple,c=t.maxFiles,f=t.validator;return!o&&e.length>1||o&&c>=1&&e.length>c?!1:e.every(function(p){var d=fileAccepted(p,n),u=_slicedToArray$1(d,1),m=u[0],v=fileMatchSize(p,i,s),b=_slicedToArray$1(v,1),g=b[0],y=f?f(p):null;return m&&g&&!y})}function isPropagationStopped(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function isEvtWithFiles(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function onDocumentDragOver(t){t.preventDefault()}function isIe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function isEdge(t){return t.indexOf("Edge/")!==-1}function isIeOrEdge(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(t)||isEdge(t)}function composeEventHandlers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){for(var s=arguments.length,o=new Array(s>1?s-1:0),c=1;c<s;c++)o[c-1]=arguments[c];return e.some(function(f){return!isPropagationStopped(i)&&f&&f.apply(void 0,[i].concat(o)),isPropagationStopped(i)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(t){if(isDefined(t)){var e=Object.entries(t).filter(function(n){var i=_slicedToArray$1(n,2),s=i[0],o=i[1],c=!0;return isMIMEType(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(o)||!o.every(isExt))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,i){var s=_slicedToArray$1(i,2),o=s[0],c=s[1];return _objectSpread$1(_objectSpread$1({},n),{},_defineProperty$1({},o,c))},{});return[{description:"Files",accept:e}]}return t}function acceptPropAsAcceptAttr(t){if(isDefined(t))return Object.entries(t).reduce(function(e,n){var i=_slicedToArray$1(n,2),s=i[0],o=i[1];return[].concat(_toConsumableArray$1(e),[s],_toConsumableArray$1(o))},[]).filter(function(e){return isMIMEType(e)||isExt(e)}).join(",")}function isAbort(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function isSecurityError(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function isMIMEType(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function isExt(t){return/^.*\.[\w]+$/.test(t)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(t,e)}}function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],s=!0,o=!1,c,f;try{for(n=n.call(t);!(s=(c=n.next()).done)&&(i.push(c.value),!(e&&i.length===e));s=!0);}catch(p){o=!0,f=p}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw f}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(i){_defineProperty(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _objectWithoutProperties(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose(t,e),i,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var Dropzone=reactExports.forwardRef(function(t,e){var n=t.children,i=_objectWithoutProperties(t,_excluded),s=useDropzone(i),o=s.open,c=_objectWithoutProperties(s,_excluded2);return reactExports.useImperativeHandle(e,function(){return{open:o}},[o]),React.createElement(reactExports.Fragment,null,n(_objectSpread(_objectSpread({},c),{},{open:o})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=_objectSpread(_objectSpread({},defaultProps),t),n=e.accept,i=e.disabled,s=e.getFilesFromEvent,o=e.maxSize,c=e.minSize,f=e.multiple,p=e.maxFiles,d=e.onDragEnter,u=e.onDragLeave,m=e.onDragOver,v=e.onDrop,b=e.onDropAccepted,g=e.onDropRejected,y=e.onFileDialogCancel,w=e.onFileDialogOpen,_=e.useFsAccessApi,R=e.autoFocus,k=e.preventDropOnDocument,C=e.noClick,A=e.noKeyboard,D=e.noDrag,H=e.noDragEventsBubbling,I=e.onError,F=e.validator,Z=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(n)},[n]),N=reactExports.useMemo(function(){return pickerOptionsFromAccept(n)},[n]),G=reactExports.useMemo(function(){return typeof w=="function"?w:noop$2},[w]),J=reactExports.useMemo(function(){return typeof y=="function"?y:noop$2},[y]),ee=reactExports.useRef(null),te=reactExports.useRef(null),W=reactExports.useReducer(reducer,initialState),O=_slicedToArray(W,2),j=O[0],T=O[1],E=j.isFocused,M=j.isFileDialogActive,U=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&_&&canUseFileSystemAccessAPI()),$=function(){!U.current&&M&&setTimeout(function(){if(te.current){var He=te.current.files;He.length||(T({type:"closeDialog"}),J())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",$,!1),function(){window.removeEventListener("focus",$,!1)}},[te,M,J,U]);var z=reactExports.useRef([]),q=function(He){ee.current&&ee.current.contains(He.target)||(He.preventDefault(),z.current=[])};reactExports.useEffect(function(){return k&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",q,!1)),function(){k&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",q))}},[ee,k]),reactExports.useEffect(function(){return!i&&R&&ee.current&&ee.current.focus(),function(){}},[ee,R,i]);var P=reactExports.useCallback(function(ke){I?I(ke):console.error(ke)},[I]),V=reactExports.useCallback(function(ke){ke.preventDefault(),ke.persist(),Ue(ke),z.current=[].concat(_toConsumableArray(z.current),[ke.target]),isEvtWithFiles(ke)&&Promise.resolve(s(ke)).then(function(He){if(!(isPropagationStopped(ke)&&!H)){var nt=He.length,Xe=nt>0&&allFilesAccepted({files:He,accept:Z,minSize:c,maxSize:o,multiple:f,maxFiles:p,validator:F}),vt=nt>0&&!Xe;T({isDragAccept:Xe,isDragReject:vt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(ke)}}).catch(function(He){return P(He)})},[s,d,P,H,Z,c,o,f,p,F]),L=reactExports.useCallback(function(ke){ke.preventDefault(),ke.persist(),Ue(ke);var He=isEvtWithFiles(ke);if(He&&ke.dataTransfer)try{ke.dataTransfer.dropEffect="copy"}catch{}return He&&m&&m(ke),!1},[m,H]),Y=reactExports.useCallback(function(ke){ke.preventDefault(),ke.persist(),Ue(ke);var He=z.current.filter(function(Xe){return ee.current&&ee.current.contains(Xe)}),nt=He.indexOf(ke.target);nt!==-1&&He.splice(nt,1),z.current=He,!(He.length>0)&&(T({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(ke)&&u&&u(ke))},[ee,u,H]),ne=reactExports.useCallback(function(ke,He){var nt=[],Xe=[];ke.forEach(function(vt){var pt=fileAccepted(vt,Z),Mt=_slicedToArray(pt,2),jt=Mt[0],Pn=Mt[1],$t=fileMatchSize(vt,c,o),Ie=_slicedToArray($t,2),xe=Ie[0],ve=Ie[1],Ge=F?F(vt):null;if(jt&&xe&&!Ge)nt.push(vt);else{var kt=[Pn,ve];Ge&&(kt=kt.concat(Ge)),Xe.push({file:vt,errors:kt.filter(function(dt){return dt})})}}),(!f&&nt.length>1||f&&p>=1&&nt.length>p)&&(nt.forEach(function(vt){Xe.push({file:vt,errors:[TOO_MANY_FILES_REJECTION]})}),nt.splice(0)),T({acceptedFiles:nt,fileRejections:Xe,isDragReject:Xe.length>0,type:"setFiles"}),v&&v(nt,Xe,He),Xe.length>0&&g&&g(Xe,He),nt.length>0&&b&&b(nt,He)},[T,f,Z,c,o,p,v,b,g,F]),re=reactExports.useCallback(function(ke){ke.preventDefault(),ke.persist(),Ue(ke),z.current=[],isEvtWithFiles(ke)&&Promise.resolve(s(ke)).then(function(He){isPropagationStopped(ke)&&!H||ne(He,ke)}).catch(function(He){return P(He)}),T({type:"reset"})},[s,ne,P,H]),le=reactExports.useCallback(function(){if(U.current){T({type:"openDialog"}),G();var ke={multiple:f,types:N};window.showOpenFilePicker(ke).then(function(He){return s(He)}).then(function(He){ne(He,null),T({type:"closeDialog"})}).catch(function(He){isAbort(He)?(J(He),T({type:"closeDialog"})):isSecurityError(He)?(U.current=!1,te.current?(te.current.value=null,te.current.click()):P(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):P(He)});return}te.current&&(T({type:"openDialog"}),G(),te.current.value=null,te.current.click())},[T,G,J,_,ne,P,N,f]),_e=reactExports.useCallback(function(ke){!ee.current||!ee.current.isEqualNode(ke.target)||(ke.key===" "||ke.key==="Enter"||ke.keyCode===32||ke.keyCode===13)&&(ke.preventDefault(),le())},[ee,le]),Fe=reactExports.useCallback(function(){T({type:"focus"})},[]),we=reactExports.useCallback(function(){T({type:"blur"})},[]),Te=reactExports.useCallback(function(){C||(isIeOrEdge()?setTimeout(le,0):le())},[C,le]),Re=function(He){return i?null:He},fe=function(He){return A?null:Re(He)},be=function(He){return D?null:Re(He)},Ue=function(He){H&&He.stopPropagation()},Ne=reactExports.useMemo(function(){return function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=ke.refKey,nt=He===void 0?"ref":He,Xe=ke.role,vt=ke.onKeyDown,pt=ke.onFocus,Mt=ke.onBlur,jt=ke.onClick,Pn=ke.onDragEnter,$t=ke.onDragOver,Ie=ke.onDragLeave,xe=ke.onDrop,ve=_objectWithoutProperties(ke,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:fe(composeEventHandlers(vt,_e)),onFocus:fe(composeEventHandlers(pt,Fe)),onBlur:fe(composeEventHandlers(Mt,we)),onClick:Re(composeEventHandlers(jt,Te)),onDragEnter:be(composeEventHandlers(Pn,V)),onDragOver:be(composeEventHandlers($t,L)),onDragLeave:be(composeEventHandlers(Ie,Y)),onDrop:be(composeEventHandlers(xe,re)),role:typeof Xe=="string"&&Xe!==""?Xe:"presentation"},nt,ee),!i&&!A?{tabIndex:0}:{}),ve)}},[ee,_e,Fe,we,Te,V,L,Y,re,A,D,i]),Be=reactExports.useCallback(function(ke){ke.stopPropagation()},[]),Ke=reactExports.useMemo(function(){return function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=ke.refKey,nt=He===void 0?"ref":He,Xe=ke.onChange,vt=ke.onClick,pt=_objectWithoutProperties(ke,_excluded4),Mt=_defineProperty({accept:Z,multiple:f,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Re(composeEventHandlers(Xe,re)),onClick:Re(composeEventHandlers(vt,Be)),tabIndex:-1},nt,te);return _objectSpread(_objectSpread({},Mt),pt)}},[te,n,f,re,i]);return _objectSpread(_objectSpread({},j),{},{isFocused:E&&!i,getRootProps:Ne,getInputProps:Ke,rootRef:ee,inputRef:te,open:Re(le)})}function reducer(t,e){switch(e.type){case"focus":return _objectSpread(_objectSpread({},t),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},t),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return _objectSpread({},initialState);default:return t}}function noop$2(){}function FileUpload({onUpload:t,uploading:e,uploadProgress:n}){const i=reactExports.useCallback(f=>{t(f)},[t]),{getRootProps:s,getInputProps:o,isDragActive:c}=useDropzone({onDrop:i,accept:{"application/pdf":[".pdf"]},multiple:!0,disabled:e});return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs(motion.div,{className:`
          relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
          transition-all duration-200 ease-in-out
          ${c?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400"}
          ${e?"opacity-50 cursor-not-allowed":""}
        `,whileHover:e?void 0:{scale:1.01},whileTap:e?void 0:{scale:.99},...s(),children:[jsxRuntimeExports.jsx("input",{...o()}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[jsxRuntimeExports.jsx(motion.div,{animate:c?{scale:1.1}:{scale:1},transition:{duration:.2},children:jsxRuntimeExports.jsx(Upload,{className:"h-12 w-12 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-semibold text-gray-700 mb-2",children:c?"Drop IR Reports here":"Upload IR Reports"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Drag & drop PDF files or click to browse"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Supports multiple PDF files"})]})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:n.length>0&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-6 space-y-3",children:n.map((f,p)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:p*.1},className:"bg-white rounded-lg border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-gray-400"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-700",children:f.file.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[(f.file.size/1024/1024).toFixed(2)," MB"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[f.status==="uploading"&&jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin text-primary-500"}),f.status==="processing"&&jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin text-orange-500"}),f.status==="error"&&jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4 text-red-500"}),f.status==="completed"&&jsxRuntimeExports.jsx("div",{className:"h-4 w-4 rounded-full bg-green-500 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx(motion.div,{className:`h-2 rounded-full transition-colors duration-200 ${f.status==="error"?"bg-red-500":f.status==="completed"?"bg-green-500":f.status==="processing"?"bg-orange-500":"bg-primary-500"}`,initial:{width:0},animate:{width:`${f.progress}%`},transition:{duration:.3}})}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("span",{className:`text-sm font-medium ${f.status==="error"?"text-red-600":f.status==="completed"?"text-green-600":f.status==="processing"?"text-orange-600":"text-primary-600"}`,children:[f.status==="uploading"&&"Uploading...",f.status==="processing"&&"Processing with AI...",f.status==="completed"&&"Completed",f.status==="error"&&"Error"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[f.progress,"%"]})]}),f.error&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.error})]},`${f.file.name}-${p}`))})})]})}function SearchBar({filters:t,onFiltersChange:e,onSearch:n,reports:i}){const[s,o]=reactExports.useState(!1),[c,f]=reactExports.useState(!1),[p,d]=reactExports.useState(t.query||""),[u,m]=reactExports.useState([]),[v,b]=reactExports.useState(-1),g=reactExports.useRef(null),[y,w]=reactExports.useState(t.police_station||""),[_,R]=reactExports.useState(t.division||""),[k,C]=reactExports.useState(t.area_committee||""),[A,D]=reactExports.useState([]),[H,I]=reactExports.useState([]),[F,Z]=reactExports.useState([]),[N,G]=reactExports.useState(null),J=z=>{if(!z||z.length<1)return[];const q=[],P=z.toLowerCase();i.forEach(L=>{L.original_filename.toLowerCase().includes(P)&&q.push({type:"filename",value:L.original_filename,label:L.original_filename,count:1}),L.summary&&L.summary.toLowerCase().includes(P)&&q.push({type:"filename",value:L.summary,label:L.summary,count:1}),L.metadata&&(L.metadata.name&&L.metadata.name.toLowerCase().includes(P)&&q.push({type:"name",value:L.metadata.name,label:L.metadata.name,count:1}),L.metadata.area_region&&L.metadata.area_region.toLowerCase().includes(P)&&q.push({type:"area",value:L.metadata.area_region,label:L.metadata.area_region,count:1}),L.metadata.group_battalion&&L.metadata.group_battalion.toLowerCase().includes(P)&&q.push({type:"group",value:L.metadata.group_battalion,label:L.metadata.group_battalion,count:1}),L.metadata.supply_team_supply&&L.metadata.supply_team_supply.toLowerCase().includes(P)&&q.push({type:"supply",value:L.metadata.supply_team_supply,label:L.metadata.supply_team_supply,count:1}),L.metadata.ied_bomb&&L.metadata.ied_bomb.toLowerCase().includes(P)&&q.push({type:"ied",value:L.metadata.ied_bomb,label:L.metadata.ied_bomb,count:1}),L.metadata.meeting&&L.metadata.meeting.toLowerCase().includes(P)&&q.push({type:"meeting",value:L.metadata.meeting,label:L.metadata.meeting,count:1}),L.metadata.platoon&&L.metadata.platoon.toLowerCase().includes(P)&&q.push({type:"platoon",value:L.metadata.platoon,label:L.metadata.platoon,count:1}),L.metadata.involvement&&L.metadata.involvement.toLowerCase().includes(P)&&q.push({type:"involvement",value:L.metadata.involvement,label:L.metadata.involvement,count:1}),L.metadata.history&&L.metadata.history.toLowerCase().includes(P)&&q.push({type:"history",value:L.metadata.history,label:L.metadata.history,count:1}),L.metadata.bounty&&L.metadata.bounty.toLowerCase().includes(P)&&q.push({type:"bounty",value:L.metadata.bounty,label:L.metadata.bounty,count:1}),L.metadata.organizational_period&&L.metadata.organizational_period.toLowerCase().includes(P)&&q.push({type:"period",value:L.metadata.organizational_period,label:L.metadata.organizational_period,count:1}),L.metadata.aliases&&Array.isArray(L.metadata.aliases)&&L.metadata.aliases.forEach(Y=>{typeof Y=="string"&&Y.toLowerCase().includes(P)&&q.push({type:"alias",value:Y,label:Y,count:1})}),L.metadata.villages_covered&&Array.isArray(L.metadata.villages_covered)&&L.metadata.villages_covered.forEach(Y=>{typeof Y=="string"&&Y.toLowerCase().includes(P)&&q.push({type:"village",value:Y,label:Y,count:1})}),L.metadata.weapons_assets&&Array.isArray(L.metadata.weapons_assets)&&L.metadata.weapons_assets.forEach(Y=>{typeof Y=="string"&&Y.toLowerCase().includes(P)&&q.push({type:"weapon",value:Y,label:Y,count:1})}),L.metadata.important_points&&Array.isArray(L.metadata.important_points)&&L.metadata.important_points.forEach(Y=>{typeof Y=="string"&&Y.toLowerCase().includes(P)&&q.push({type:"point",value:Y,label:Y,count:1})}),L.metadata.criminal_activities&&Array.isArray(L.metadata.criminal_activities)&&L.metadata.criminal_activities.forEach(Y=>{Y.incident&&Y.incident.toLowerCase().includes(P)&&q.push({type:"activity",value:Y.incident,label:Y.incident,count:1}),Y.location&&Y.location.toLowerCase().includes(P)&&q.push({type:"area",value:Y.location,label:Y.location,count:1})}),L.metadata.police_encounters&&Array.isArray(L.metadata.police_encounters)&&L.metadata.police_encounters.forEach(Y=>{typeof Y=="object"&&Y!==null&&Object.values(Y).forEach(ne=>{typeof ne=="string"&&ne.toLowerCase().includes(P)&&q.push({type:"encounter",value:ne,label:ne,count:1})})}),L.metadata.hierarchical_role_changes&&Array.isArray(L.metadata.hierarchical_role_changes)&&L.metadata.hierarchical_role_changes.forEach(Y=>{typeof Y=="object"&&Y!==null&&Object.values(Y).forEach(ne=>{typeof ne=="string"&&ne.toLowerCase().includes(P)&&q.push({type:"role",value:ne,label:ne,count:1})})}),L.metadata.movement_routes&&Array.isArray(L.metadata.movement_routes)&&L.metadata.movement_routes.forEach(Y=>{Y.route_name&&Y.route_name.toLowerCase().includes(P)&&q.push({type:"route",value:Y.route_name,label:Y.route_name,count:1}),Y.description&&Y.description.toLowerCase().includes(P)&&q.push({type:"route",value:Y.description,label:Y.description,count:1}),Y.purpose&&Y.purpose.toLowerCase().includes(P)&&q.push({type:"route",value:Y.purpose,label:Y.purpose,count:1}),Y.frequency&&Y.frequency.toLowerCase().includes(P)&&q.push({type:"route",value:Y.frequency,label:Y.frequency,count:1}),Y.segments&&Array.isArray(Y.segments)&&Y.segments.forEach(ne=>{ne.from&&ne.from.toLowerCase().includes(P)&&q.push({type:"route",value:ne.from,label:ne.from,count:1}),ne.to&&ne.to.toLowerCase().includes(P)&&q.push({type:"route",value:ne.to,label:ne.to,count:1}),ne.description&&ne.description.toLowerCase().includes(P)&&q.push({type:"route",value:ne.description,label:ne.description,count:1})})})),L.questions_analysis&&L.questions_analysis.results&&L.questions_analysis.results.forEach(Y=>{Y.standard_question&&Y.standard_question.toLowerCase().includes(P)&&q.push({type:"question",value:Y.standard_question,label:Y.standard_question,count:1}),Y.found_question&&Y.found_question.toLowerCase().includes(P)&&q.push({type:"question",value:Y.found_question,label:Y.found_question,count:1}),Y.answer&&Y.answer.toLowerCase().includes(P)&&q.push({type:"answer",value:Y.answer,label:Y.answer,count:1})})});const V=new Map;return q.forEach(L=>{const Y=`${L.type}:${L.value}`;V.has(Y)?V.get(Y).count++:V.set(Y,{...L})}),Array.from(V.values()).sort((L,Y)=>{const ne=L.value.toLowerCase()===P,re=Y.value.toLowerCase()===P;return ne&&!re?-1:!ne&&re?1:Y.count!==L.count?Y.count-L.count:L.value.localeCompare(Y.value)}).slice(0,10)},ee=(z,q)=>{if(!q||q.length<1)return[];const P=q.toLowerCase();return Array.from(new Set(i.map(L=>L[z]).filter(L=>L&&L.toLowerCase().includes(P)))).sort((L,Y)=>{const ne=L.toLowerCase()===P,re=Y.toLowerCase()===P;if(ne&&!re)return-1;if(!ne&&re)return 1;const le=L.toLowerCase().startsWith(P),_e=Y.toLowerCase().startsWith(P);return le&&!_e?-1:!le&&_e?1:L.localeCompare(Y)}).slice(0,8)},te=(z,q)=>{switch(z){case"police_station":w(q),D(ee("police_station",q)),G(q?"police_station":null),e({...t,police_station:q||void 0});break;case"division":R(q),I(ee("division",q)),G(q?"division":null),e({...t,division:q||void 0});break;case"area_committee":C(q),Z(ee("area_committee",q)),G(q?"area_committee":null),e({...t,area_committee:q||void 0});break}},W=(z,q)=>{te(z,q),G(null)};reactExports.useEffect(()=>{const z=J(p);m(z),b(-1)},[p,i]),reactExports.useEffect(()=>{w(t.police_station||""),R(t.division||""),C(t.area_committee||"")},[t.police_station,t.division,t.area_committee]);const O=z=>{d(z),n(z),e({...t,query:z}),f(z.length>0)},j=z=>{d(z.value),n(z.value),e({...t,query:z.value}),f(!1),b(-1)},T=z=>{if(!(!c||u.length===0))switch(z.key){case"ArrowDown":z.preventDefault(),b(q=>(q+1)%u.length);break;case"ArrowUp":z.preventDefault(),b(q=>q<=0?u.length-1:q-1);break;case"Enter":z.preventDefault(),v>=0&&v<u.length&&j(u[v]);break;case"Escape":f(!1),b(-1),g.current?.blur();break}},E=()=>{d(""),w(""),R(""),C(""),G(null),e({}),n(""),f(!1)},M=z=>{switch(z){case"name":return jsxRuntimeExports.jsx(User,{className:"h-4 w-4 text-blue-500"});case"area":return jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-green-500"});case"group":return jsxRuntimeExports.jsx(Shield,{className:"h-4 w-4 text-purple-500"});case"alias":return jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-orange-500"});case"village":return jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-teal-500"});case"activity":return jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 text-red-500"});case"filename":return jsxRuntimeExports.jsx(X,{className:"h-4 w-4 text-gray-500"});case"supply":return jsxRuntimeExports.jsx(Package,{className:"h-4 w-4 text-blue-500"});case"ied":return jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 text-red-500"});case"meeting":return jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-green-500"});case"platoon":return jsxRuntimeExports.jsx(Shield,{className:"h-4 w-4 text-purple-500"});case"involvement":return jsxRuntimeExports.jsx(User,{className:"h-4 w-4 text-indigo-500"});case"history":return jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4 text-amber-500"});case"bounty":return jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 text-yellow-500"});case"period":return jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 text-gray-600"});case"weapon":return jsxRuntimeExports.jsx(Zap,{className:"h-4 w-4 text-red-600"});case"point":return jsxRuntimeExports.jsx(Target,{className:"h-4 w-4 text-blue-600"});case"encounter":return jsxRuntimeExports.jsx(Shield,{className:"h-4 w-4 text-red-600"});case"role":return jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-purple-600"});case"route":return jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-green-600"});case"question":return jsxRuntimeExports.jsx(Search,{className:"h-4 w-4 text-blue-600"});case"answer":return jsxRuntimeExports.jsx(X,{className:"h-4 w-4 text-green-600"});default:return jsxRuntimeExports.jsx(Search,{className:"h-4 w-4 text-gray-400"})}},U=z=>{switch(z){case"name":return"Name";case"area":return"Area";case"group":return"Group";case"alias":return"Alias";case"village":return"Village";case"activity":return"Activity";case"filename":return"File";case"supply":return"Supply";case"ied":return"IED/Bomb";case"meeting":return"Meeting";case"platoon":return"Platoon";case"involvement":return"Involvement";case"history":return"History";case"bounty":return"Bounty";case"period":return"Period";case"weapon":return"Weapon";case"point":return"Important Point";case"encounter":return"Encounter";case"role":return"Role";case"route":return"Route";case"question":return"Question";case"answer":return"Answer";default:return"Result"}},$=[t.suspectName,t.location,t.dateRange,t.keywords&&t.keywords.length>0,y,_,k,t.rank].filter(Boolean).length;return jsxRuntimeExports.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),jsxRuntimeExports.jsx("input",{ref:g,type:"text",value:p,onChange:z=>O(z.target.value),onFocus:()=>f(p.length>0&&u.length>0),onBlur:()=>setTimeout(()=>f(!1),200),onKeyDown:T,placeholder:"Search across all fields: names, locations, routes, Q&A, activities, weapons, encounters, and more...",className:"w-full pl-10 pr-20 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"}),jsxRuntimeExports.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>o(!s),className:`p-1.5 rounded-md transition-colors relative ${s||$>0?"text-primary-600 bg-primary-50":"text-gray-400 hover:text-gray-600"}`,children:[jsxRuntimeExports.jsx(Funnel,{className:"h-4 w-4"}),$>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-primary-500 text-white text-xs rounded-full flex items-center justify-center",children:$})]}),(p||$>0)&&jsxRuntimeExports.jsx("button",{onClick:E,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-10,height:0},className:"",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg mt-2 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{htmlFor:"police-station",className:"block text-xs font-medium text-gray-700 mb-1",children:"Police Station"}),jsxRuntimeExports.jsx("input",{id:"police-station",type:"text",value:y,onChange:z=>te("police_station",z.target.value),onFocus:()=>{const z=ee("police_station",y||"");D(z.length>0?z:Array.from(new Set(i.filter(q=>q.police_station).map(q=>q.police_station))).sort().slice(0,8)),G("police_station")},onBlur:()=>setTimeout(()=>{N==="police_station"&&G(null)},500),placeholder:"Type to search...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),N==="police_station"&&A.length>0&&jsxRuntimeExports.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] mt-1 max-h-40 overflow-y-auto",onMouseDown:z=>z.preventDefault(),onMouseEnter:()=>{},children:A.map((z,q)=>jsxRuntimeExports.jsx("button",{onClick:()=>W("police_station",z),className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 transition-colors border-l-2 border-transparent hover:border-blue-500",children:z},z))})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{htmlFor:"division",className:"block text-xs font-medium text-gray-700 mb-1",children:"Division"}),jsxRuntimeExports.jsx("input",{id:"division",type:"text",value:_,onChange:z=>te("division",z.target.value),onFocus:()=>{const z=ee("division",_||"");I(z.length>0?z:Array.from(new Set(i.filter(q=>q.division).map(q=>q.division))).sort().slice(0,8)),G("division")},onBlur:()=>setTimeout(()=>{N==="division"&&G(null)},500),placeholder:"Type to search...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),N==="division"&&H.length>0&&jsxRuntimeExports.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] mt-1 max-h-40 overflow-y-auto",onMouseDown:z=>z.preventDefault(),onMouseEnter:()=>{},children:H.map((z,q)=>jsxRuntimeExports.jsx("button",{onClick:()=>W("division",z),className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 transition-colors border-l-2 border-transparent hover:border-blue-500",children:z},z))})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{htmlFor:"area-committee",className:"block text-xs font-medium text-gray-700 mb-1",children:"Area Committee"}),jsxRuntimeExports.jsx("input",{id:"area-committee",type:"text",value:k,onChange:z=>te("area_committee",z.target.value),onFocus:()=>{const z=ee("area_committee",k||"");Z(z.length>0?z:Array.from(new Set(i.filter(q=>q.area_committee).map(q=>q.area_committee))).sort().slice(0,8)),G("area_committee")},onBlur:()=>setTimeout(()=>{N==="area_committee"&&G(null)},500),placeholder:"Type to search...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),N==="area_committee"&&F.length>0&&jsxRuntimeExports.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-[9999] mt-1 max-h-40 overflow-y-auto",onMouseDown:z=>z.preventDefault(),onMouseEnter:()=>{},children:F.map((z,q)=>jsxRuntimeExports.jsx("button",{onClick:()=>W("area_committee",z),className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 transition-colors border-l-2 border-transparent hover:border-blue-500",children:z},z))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"rank",className:"block text-xs font-medium text-gray-700 mb-1",children:"Rank"}),jsxRuntimeExports.jsxs("select",{id:"rank",value:t.rank||"",onChange:z=>e({...t,rank:z.target.value||void 0}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Ranks"}),Array.from(new Set(i.filter(z=>z.rank).map(z=>z.rank))).sort().map(z=>jsxRuntimeExports.jsx("option",{value:z,children:z},z))]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:()=>{w(""),R(""),C(""),G(null),e({...t,police_station:void 0,division:void 0,area_committee:void 0,rank:void 0})},className:"px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-gray-800 transition-colors",children:"Clear Filters"})})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:c&&u.length>0&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999] mt-1 max-h-80 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"py-2",children:u.map((z,q)=>jsxRuntimeExports.jsxs("button",{onClick:()=>j(z),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors flex items-center space-x-3 ${q===v?"bg-primary-50 border-r-2 border-primary-500":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:M(z.type)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:U(z.type)}),z.count>1&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:z.count})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-900 truncate mt-1",children:z.label})]})]},`${z.type}:${z.value}`))})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:c&&p.length>0&&u.length===0&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999] mt-1",children:jsxRuntimeExports.jsxs("div",{className:"py-4 px-4 text-center text-gray-500",children:[jsxRuntimeExports.jsx(Search,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:['No results found for "',p,'"']}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try searching with different keywords"})]})})})]})})}const millisecondsInWeek=6048e5,millisecondsInDay=864e5,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&constructFromSymbol in t?t[constructFromSymbol](e):t instanceof Date?new t.constructor(e):new Date(e)}function toDate(t,e){return constructFrom(e||t,t)}let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(t,e){const n=getDefaultOptions(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=toDate(t,e?.in),o=s.getDay(),c=(o<i?7:0)+o-i;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function startOfISOWeek(t,e){return startOfWeek(t,{...e,weekStartsOn:1})}function getISOWeekYear(t,e){const n=toDate(t,e?.in),i=n.getFullYear(),s=constructFrom(n,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const o=startOfISOWeek(s),c=constructFrom(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const f=startOfISOWeek(c);return n.getTime()>=o.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function getTimezoneOffsetInMilliseconds(t){const e=toDate(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function normalizeDates(t,...e){const n=constructFrom.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function startOfDay(t,e){const n=toDate(t,e?.in);return n.setHours(0,0,0,0),n}function differenceInCalendarDays(t,e,n){const[i,s]=normalizeDates(n?.in,t,e),o=startOfDay(i),c=startOfDay(s),f=+o-getTimezoneOffsetInMilliseconds(o),p=+c-getTimezoneOffsetInMilliseconds(c);return Math.round((f-p)/millisecondsInDay)}function startOfISOWeekYear(t,e){const n=getISOWeekYear(t,e),i=constructFrom(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),startOfISOWeek(i)}function isDate(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function isValid(t){return!(!isDate(t)&&typeof t!="number"||isNaN(+toDate(t)))}function startOfYear(t,e){const n=toDate(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(t,e,n)=>{let i;const s=formatDistanceLocale[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function buildFormatLongFn(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(t,e,n,i)=>formatRelativeLocale[t];function buildLocalizeFn(t){return(e,n)=>{const i=n?.context?String(n.context):"standalone";let s;if(i==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,f=n?.width?String(n.width):c;s=t.formattingValues[f]||t.formattingValues[c]}else{const c=t.defaultWidth,f=n?.width?String(n.width):t.defaultWidth;s=t.values[f]||t.values[c]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:t=>t-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(t){return(e,n={})=>{const i=n.width,s=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],f=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(f)?findIndex(f,m=>m.test(c)):findKey(f,m=>m.test(c));let d;d=t.valueCallback?t.valueCallback(p):p,d=n.valueCallback?n.valueCallback(d):d;const u=e.slice(c.length);return{value:d,rest:u}}}function findKey(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function findIndex(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function buildMatchPatternFn(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const s=i[0],o=e.match(t.parsePattern);if(!o)return null;let c=t.valueCallback?t.valueCallback(o[0]):o[0];c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(s.length);return{value:c,rest:f}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:t=>parseInt(t,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:t=>t+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(t,e){const n=toDate(t,e?.in);return differenceInCalendarDays(n,startOfYear(n))+1}function getISOWeek(t,e){const n=toDate(t,e?.in),i=+startOfISOWeek(n)-+startOfISOWeekYear(n);return Math.round(i/millisecondsInWeek)+1}function getWeekYear(t,e){const n=toDate(t,e?.in),i=n.getFullYear(),s=getDefaultOptions(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=constructFrom(e?.in||t,0);c.setFullYear(i+1,0,o),c.setHours(0,0,0,0);const f=startOfWeek(c,e),p=constructFrom(e?.in||t,0);p.setFullYear(i,0,o),p.setHours(0,0,0,0);const d=startOfWeek(p,e);return+n>=+f?i+1:+n>=+d?i:i-1}function startOfWeekYear(t,e){const n=getDefaultOptions(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=getWeekYear(t,e),o=constructFrom(e?.in||t,0);return o.setFullYear(s,0,i),o.setHours(0,0,0,0),startOfWeek(o,e)}function getWeek(t,e){const n=toDate(t,e?.in),i=+startOfWeek(n,e)-+startOfWeekYear(n,e);return Math.round(i/millisecondsInWeek)+1}function addLeadingZeros(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const lightFormatters={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return addLeadingZeros(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):addLeadingZeros(n+1,2)},d(t,e){return addLeadingZeros(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return addLeadingZeros(t.getHours()%12||12,e.length)},H(t,e){return addLeadingZeros(t.getHours(),e.length)},m(t,e){return addLeadingZeros(t.getMinutes(),e.length)},s(t,e){return addLeadingZeros(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),s=Math.trunc(i*Math.pow(10,n-3));return addLeadingZeros(s,e.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),s=i>0?i:1-i;return n.ordinalNumber(s,{unit:"year"})}return lightFormatters.y(t,e)},Y:function(t,e,n,i){const s=getWeekYear(t,i),o=s>0?s:1-s;if(e==="YY"){const c=o%100;return addLeadingZeros(c,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):addLeadingZeros(o,e.length)},R:function(t,e){const n=getISOWeekYear(t);return addLeadingZeros(n,e.length)},u:function(t,e){const n=t.getFullYear();return addLeadingZeros(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return addLeadingZeros(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return addLeadingZeros(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return lightFormatters.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return addLeadingZeros(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const s=getWeek(t,i);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):addLeadingZeros(s,e.length)},I:function(t,e,n){const i=getISOWeek(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):addLeadingZeros(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):lightFormatters.d(t,e)},D:function(t,e,n){const i=getDayOfYear(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):addLeadingZeros(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const s=t.getDay(),o=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return addLeadingZeros(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const s=t.getDay(),o=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return addLeadingZeros(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return addLeadingZeros(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let s;switch(i===12?s=dayPeriodEnum.noon:i===0?s=dayPeriodEnum.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let s;switch(i>=17?s=dayPeriodEnum.evening:i>=12?s=dayPeriodEnum.afternoon:i>=4?s=dayPeriodEnum.morning:s=dayPeriodEnum.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return lightFormatters.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):lightFormatters.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):addLeadingZeros(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):addLeadingZeros(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):lightFormatters.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):lightFormatters.s(t,e)},S:function(t,e){return lightFormatters.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return formatTimezoneWithOptionalMinutes(i);case"XXXX":case"XX":return formatTimezone(i);case"XXXXX":case"XXX":default:return formatTimezone(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return formatTimezoneWithOptionalMinutes(i);case"xxxx":case"xx":return formatTimezone(i);case"xxxxx":case"xxx":default:return formatTimezone(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(i,":");case"OOOO":default:return"GMT"+formatTimezone(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(i,":");case"zzzz":default:return"GMT"+formatTimezone(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return addLeadingZeros(i,e.length)},T:function(t,e,n){return addLeadingZeros(+t,e.length)}};function formatTimezoneShort(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),o=i%60;return o===0?n+String(s):n+String(s)+e+addLeadingZeros(o,2)}function formatTimezoneWithOptionalMinutes(t,e){return t%60===0?(t>0?"-":"+")+addLeadingZeros(Math.abs(t)/60,2):formatTimezone(t,e)}function formatTimezone(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),s=addLeadingZeros(Math.trunc(i/60),2),o=addLeadingZeros(i%60,2);return n+s+e+o}const dateLongFormatter=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},timeLongFormatter=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dateTimeLongFormatter=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],s=n[2];if(!s)return dateLongFormatter(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",dateLongFormatter(i,e)).replace("{{time}}",timeLongFormatter(s,e))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(t){return dayOfYearTokenRE.test(t)}function isProtectedWeekYearToken(t){return weekYearTokenRE.test(t)}function warnOrThrowProtectedError(t,e,n){const i=message(t,e,n);if(console.warn(i),throwTokens.includes(t))throw new RangeError(i)}function message(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(t,e,n){const i=getDefaultOptions(),s=i.locale??enUS,o=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,f=toDate(t,n?.in);if(!isValid(f))throw new RangeError("Invalid time value");let p=e.match(longFormattingTokensRegExp).map(u=>{const m=u[0];if(m==="p"||m==="P"){const v=longFormatters[m];return v(u,s.formatLong)}return u}).join("").match(formattingTokensRegExp).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const m=u[0];if(m==="'")return{isToken:!1,value:cleanEscapedString(u)};if(formatters[m])return{isToken:!0,value:u};if(m.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(p=s.localize.preprocessor(f,p));const d={firstWeekContainsDate:o,weekStartsOn:c,locale:s};return p.map(u=>{if(!u.isToken)return u.value;const m=u.value;(isProtectedWeekYearToken(m)||isProtectedDayOfYearToken(m))&&warnOrThrowProtectedError(m,e,String(t));const v=formatters[m[0]];return v(f,m,s.localize,d)}).join("")}function cleanEscapedString(t){const e=t.match(escapedStringRegExp);return e?e[1].replace(doubleQuoteRegExp,"'"):t}const scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){let d=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=d;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");s=d(n.map(u=>{if(u=assetsURL(u),u in seen)return;seen[u]=!0;const m=u.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":scriptRel,m||(b.as="script"),b.crossOrigin="",b.href=u,p&&b.setAttribute("nonce",p),document.head.appendChild(b),m)return new Promise((g,y)=>{b.addEventListener("load",g),b.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return s.then(f=>{for(const p of f||[])p.status==="rejected"&&o(p.reason);return e().catch(o)})},resolveFetch$3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>__vitePreload(async()=>{const{default:i}=await Promise.resolve().then(()=>browser$1);return{default:i}},[]).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class FunctionsError extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};class FunctionsClient{constructor(e,{headers:n={},customFetch:i,region:s=FunctionRegion.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=resolveFetch$3(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:c}=n;let f={},{region:p}=n;p||(p=this.region);const d=new URL(`${this.url}/${e}`);p&&p!=="any"&&(f["x-region"]=p,d.searchParams.set("forceFunctionRegion",p));let u;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",u=c):typeof c=="string"?(f["Content-Type"]="text/plain",u=c):typeof FormData<"u"&&c instanceof FormData?u=c:(f["Content-Type"]="application/json",u=JSON.stringify(c)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:u}).catch(y=>{throw new FunctionsFetchError(y)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new FunctionsRelayError(m);if(!m.ok)throw new FunctionsHttpError(m);let b=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),g;return b==="application/json"?g=yield m.json():b==="application/octet-stream"?g=yield m.blob():b==="text/event-stream"?g=m:b==="multipart/form-data"?g=yield m.formData():g=yield m.text(),{data:g,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof FunctionsHttpError||s instanceof FunctionsRelayError?s.context:void 0}}})}}var cjs={},PostgrestClient$1={},PostgrestQueryBuilder$1={},PostgrestFilterBuilder$1={},PostgrestTransformBuilder$1={},PostgrestBuilder$1={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser$1=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser$1);var PostgrestError$1={},hasRequiredPostgrestError;function requirePostgrestError(){if(hasRequiredPostgrestError)return PostgrestError$1;hasRequiredPostgrestError=1,Object.defineProperty(PostgrestError$1,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return PostgrestError$1.default=t,PostgrestError$1}var hasRequiredPostgrestBuilder;function requirePostgrestBuilder(){if(hasRequiredPostgrestBuilder)return PostgrestBuilder$1;hasRequiredPostgrestBuilder=1;var t=PostgrestBuilder$1&&PostgrestBuilder$1.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(PostgrestBuilder$1,"__esModule",{value:!0});const e=t(require$$0),n=t(requirePostgrestError());class i{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=Object.assign({},this.headers),this.headers[o]=c,this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,m,v;let b=null,g=null,y=null,w=d.status,_=d.statusText;if(d.ok){if(this.method!=="HEAD"){const A=await d.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=A:g=JSON.parse(A))}const k=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(m=d.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");k&&C&&C.length>1&&(y=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(b={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,w=406,_="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const k=await d.text();try{b=JSON.parse(k),Array.isArray(b)&&d.status===404&&(g=[],b=null,w=200,_="OK")}catch{d.status===404&&k===""?(w=204,_="No Content"):b={message:k}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,w=200,_="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:g,count:y,status:w,statusText:_}});return this.shouldThrowOnError||(p=p.catch(d=>{var u,m,v;return{error:{message:`${(u=d?.name)!==null&&u!==void 0?u:"FetchError"}: ${d?.message}`,details:`${(m=d?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=d?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),p.then(o,c)}returns(){return this}overrideTypes(){return this}}return PostgrestBuilder$1.default=i,PostgrestBuilder$1}var hasRequiredPostgrestTransformBuilder;function requirePostgrestTransformBuilder(){if(hasRequiredPostgrestTransformBuilder)return PostgrestTransformBuilder$1;hasRequiredPostgrestTransformBuilder=1;var t=PostgrestTransformBuilder$1&&PostgrestTransformBuilder$1.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(PostgrestTransformBuilder$1,"__esModule",{value:!0});const e=t(requirePostgrestBuilder());class n extends e.default{select(s){let o=!1;const c=(s??"*").split("").map(f=>/\s/.test(f)&&!o?"":(f==='"'&&(o=!o),f)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:c,foreignTable:f,referencedTable:p=f}={}){const d=p?`${p}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${s}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:c=o}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${s}`),this}range(s,o,{foreignTable:c,referencedTable:f=c}={}){const p=typeof f>"u"?"offset":`${f}.offset`,d=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${s}`),this.url.searchParams.set(d,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:c=!1,buffers:f=!1,wal:p=!1,format:d="text"}={}){var u;const m=[s?"analyze":null,o?"verbose":null,c?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),v=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${v}"; options=${m};`,d==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return PostgrestTransformBuilder$1.default=n,PostgrestTransformBuilder$1}var hasRequiredPostgrestFilterBuilder;function requirePostgrestFilterBuilder(){if(hasRequiredPostgrestFilterBuilder)return PostgrestFilterBuilder$1;hasRequiredPostgrestFilterBuilder=1;var t=PostgrestFilterBuilder$1&&PostgrestFilterBuilder$1.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(PostgrestFilterBuilder$1,"__esModule",{value:!0});const e=t(requirePostgrestTransformBuilder());class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const c=Array.from(new Set(o)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(s,`in.(${c})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:c,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const d=c===void 0?"":`(${c})`;return this.url.searchParams.append(s,`${p}fts${d}.${o}`),this}match(s){return Object.entries(s).forEach(([o,c])=>{this.url.searchParams.append(o,`eq.${c}`)}),this}not(s,o,c){return this.url.searchParams.append(s,`not.${o}.${c}`),this}or(s,{foreignTable:o,referencedTable:c=o}={}){const f=c?`${c}.or`:"or";return this.url.searchParams.append(f,`(${s})`),this}filter(s,o,c){return this.url.searchParams.append(s,`${o}.${c}`),this}}return PostgrestFilterBuilder$1.default=n,PostgrestFilterBuilder$1}var hasRequiredPostgrestQueryBuilder;function requirePostgrestQueryBuilder(){if(hasRequiredPostgrestQueryBuilder)return PostgrestQueryBuilder$1;hasRequiredPostgrestQueryBuilder=1;var t=PostgrestQueryBuilder$1&&PostgrestQueryBuilder$1.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(PostgrestQueryBuilder$1,"__esModule",{value:!0});const e=t(requirePostgrestFilterBuilder());class n{constructor(s,{headers:o={},schema:c,fetch:f}){this.url=s,this.headers=o,this.schema=c,this.fetch=f}select(s,{head:o=!1,count:c}={}){const f=o?"HEAD":"GET";let p=!1;const d=(s??"*").split("").map(u=>/\s/.test(u)&&!p?"":(u==='"'&&(p=!p),u)).join("");return this.url.searchParams.set("select",d),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:c=!0}={}){const f="POST",p=[];if(this.headers.Prefer&&p.push(this.headers.Prefer),o&&p.push(`count=${o}`),c||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(s)){const d=s.reduce((u,m)=>u.concat(Object.keys(m)),[]);if(d.length>0){const u=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:c=!1,count:f,defaultToNull:p=!0}={}){const d="POST",u=[`resolution=${c?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),f&&u.push(`count=${f}`),p||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const m=s.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(m.length>0){const v=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const c="PATCH",f=[];return this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),this.headers.Prefer=f.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",c=[];return s&&c.push(`count=${s}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return PostgrestQueryBuilder$1.default=n,PostgrestQueryBuilder$1}var constants={},version$4={},hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,Object.defineProperty(version$4,"__esModule",{value:!0}),version$4.version=void 0,version$4.version="0.0.0-automated"),version$4}var hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.DEFAULT_HEADERS=void 0;const t=requireVersion();return constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},constants}var hasRequiredPostgrestClient;function requirePostgrestClient(){if(hasRequiredPostgrestClient)return PostgrestClient$1;hasRequiredPostgrestClient=1;var t=PostgrestClient$1&&PostgrestClient$1.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestClient$1,"__esModule",{value:!0});const e=t(requirePostgrestQueryBuilder()),n=t(requirePostgrestFilterBuilder()),i=requireConstants();class s{constructor(c,{headers:f={},schema:p,fetch:d}={}){this.url=c,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),f),this.schemaName=p,this.fetch=d}from(c){const f=new URL(`${this.url}/${c}`);return new e.default(f,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new s(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,f={},{head:p=!1,get:d=!1,count:u}={}){let m;const v=new URL(`${this.url}/rpc/${c}`);let b;p||d?(m=p?"HEAD":"GET",Object.entries(f).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{v.searchParams.append(y,w)})):(m="POST",b=f);const g=Object.assign({},this.headers);return u&&(g.Prefer=`count=${u}`),new n.default({method:m,url:v,headers:g,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return PostgrestClient$1.default=s,PostgrestClient$1}var hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var t=cjs&&cjs.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(cjs,"__esModule",{value:!0}),cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const e=t(requirePostgrestClient());cjs.PostgrestClient=e.default;const n=t(requirePostgrestQueryBuilder());cjs.PostgrestQueryBuilder=n.default;const i=t(requirePostgrestFilterBuilder());cjs.PostgrestFilterBuilder=i.default;const s=t(requirePostgrestTransformBuilder());cjs.PostgrestTransformBuilder=s.default;const o=t(requirePostgrestBuilder());cjs.PostgrestBuilder=o.default;const c=t(requirePostgrestError());return cjs.PostgrestError=c.default,cjs.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:c.default},cjs}var cjsExports=requireCjs();const index=getDefaultExportFromCjs(cjsExports),{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=index;function getNativeWebSocket(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const WebSocket$1=getNativeWebSocket(),version$3="2.11.15",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(t){t.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const s=n.getUint8(1),o=n.getUint8(2);let c=this.HEADER_LENGTH+2;const f=i.decode(e.slice(c,c+s));c=c+s;const p=i.decode(e.slice(c,c+o));c=c+o;const d=JSON.parse(i.decode(e.slice(c,e.byteLength)));return{ref:null,topic:f,event:p,payload:d}}}class Timer{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(t,e,n={})=>{var i;const s=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,c)=>(o[c]=convertColumn(c,t,e,s),o),{})},convertColumn=(t,e,n,i)=>{const s=e.find(f=>f.name===t),o=s?.type,c=n[t];return o&&!i.includes(o)?convertCell(o,c):noop$1(c)},convertCell=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return toArray(e,n)}switch(t){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=t=>t,toBoolean=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},toNumber=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},toJson=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},toArray=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const c=t.slice(1,n);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(f=>convertCell(e,f))}return t},toTimestampString=t=>typeof t=="string"?t.replace(" ","T"):t,httpEndpointURL=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Push{constructor(e,n,i={},s=DEFAULT_TIMEOUT){this.channel=e,this.event=n,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:o,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,s,o,c),this.pendingDiffs.forEach(p=>{this.state=RealtimePresence.syncDiff(this.state,p,o,c)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},s=>{const{onJoin:o,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=RealtimePresence.syncDiff(this.state,s,o,c),f())}),this.onJoin((s,o,c)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:c})}),this.onLeave((s,o,c)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,s){const o=this.cloneDeep(e),c=this.transformState(n),f={},p={};return this.map(o,(d,u)=>{c[d]||(p[d]=u)}),this.map(c,(d,u)=>{const m=o[d];if(m){const v=u.map(w=>w.presence_ref),b=m.map(w=>w.presence_ref),g=u.filter(w=>b.indexOf(w.presence_ref)<0),y=m.filter(w=>v.indexOf(w.presence_ref)<0);g.length>0&&(f[d]=g),y.length>0&&(p[d]=y)}else f[d]=u}),this.syncDiff(o,{joins:f,leaves:p},i,s)}static syncDiff(e,n,i,s){const{joins:o,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(o,(f,p)=>{var d;const u=(d=e[f])!==null&&d!==void 0?d:[];if(e[f]=this.cloneDeep(p),u.length>0){const m=e[f].map(b=>b.presence_ref),v=u.filter(b=>m.indexOf(b.presence_ref)<0);e[f].unshift(...v)}i(f,u,p)}),this.map(c,(f,p)=>{let d=e[f];if(!d)return;const u=p.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),e[f]=d,s(f,d,p),d.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const s=e[i];return"metas"in s?n[i]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:o,presence:c,private:f}}=this.params;this._onError(u=>e?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,u)),this._onClose(()=>e?.(REALTIME_SUBSCRIBE_STATES.CLOSED));const p={},d={broadcast:o,presence:c,postgres_changes:(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&s!==void 0?s:[],private:f};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var m;if(this.socket.setAuth(),u===void 0){e?.(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v?.length)!==null&&m!==void 0?m:0,g=[];for(let y=0;y<b;y++){const w=v[y],{filter:{event:_,schema:R,table:k,filter:C}}=w,A=u&&u[y];if(A&&A.event===_&&A.schema===R&&A.table===k&&A.filter===C)g.push(Object.assign(Object.assign({},w),{id:A.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,e?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",u=>{this.state=CHANNEL_STATES.errored,e?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this._on(e,n,i)}async send(e,n={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:c}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,f,p;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new Push(this,CHANNEL_EVENTS.leave,{},e),i.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,i){const s=new AbortController,o=setTimeout(()=>s.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),c}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Push(this,e,n,i);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var s,o;const c=e.toLocaleLowerCase(),{close:f,error:p,leave:d,join:u}=CHANNEL_EVENTS;if(i&&[f,p,d,u].indexOf(c)>=0&&i!==this._joinRef())return;let v=this._onMessage(c,n,i);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var g,y,w;return((g=b.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(y=b.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===c}).map(b=>b.callback(v,i)):(o=this.bindings[c])===null||o===void 0||o.filter(b=>{var g,y,w,_,R,k;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const C=b.id,A=(g=b.filter)===null||g===void 0?void 0:g.event;return C&&((y=n.ids)===null||y===void 0?void 0:y.includes(C))&&(A==="*"||A?.toLocaleLowerCase()===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const C=(R=(_=b?.filter)===null||_===void 0?void 0:_.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return C==="*"||C===((k=n?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof v=="object"&&"ids"in v){const g=v.data,{schema:y,table:w,commit_timestamp:_,type:R,errors:k}=g;v=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:_,eventType:R,new:{},old:{},errors:k}),this._getPayloadRecords(g))}b.callback(v,i)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:i};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&RealtimeChannel.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=convertChangeData(e.columns,e.old_record)),n}}const noop=()=>{},WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let c;return o?c=o:typeof fetch>"u"?c=(...f)=>__vitePreload(async()=>{const{default:p}=await Promise.resolve().then(()=>browser$1);return{default:p}},void 0).then(({default:p})=>p(...f)):c=fetch,(...f)=>c(...f)},this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(i=n?.params)===null||i===void 0?void 0:i.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n?.encode?n.encode:(o,c)=>c(JSON.stringify(o)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=WebSocket$1),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(e,n={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===i);if(s)return s;{const o=new RealtimeChannel(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:s,ref:o}=e,c=()=>{this.encode(e,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${n} ${i} (${o})`,s),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:DEFAULT_VERSION};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(CHANNEL_EVENTS.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:i,event:s,payload:o,ref:c}=n;i==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${i} ${s} ${c&&"("+c+")"||""}`,o),Array.from(this.channels).filter(f=>f._isMember(i)).forEach(f=>f._trigger(s,o,c)),this.stateChangeCallbacks.message.forEach(f=>f(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${i}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([WORKER_SCRIPT],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class StorageError extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class StorageApiError extends StorageError{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var __awaiter$6=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};const resolveFetch$2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>__vitePreload(async()=>{const{default:i}=await Promise.resolve().then(()=>browser$1);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser$1),void 0)).Response:Response}),recursiveToCamel=t=>{if(Array.isArray(t))return t.map(n=>recursiveToCamel(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=recursiveToCamel(i)}),e};var __awaiter$5=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};const _getErrorMessage$1=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),handleError$1=(t,e,n)=>__awaiter$5(void 0,void 0,void 0,function*(){const i=yield resolveResponse();t instanceof i&&!n?.noResolveJson?t.json().then(s=>{e(new StorageApiError(_getErrorMessage$1(s),t.status||500))}).catch(s=>{e(new StorageUnknownError(_getErrorMessage$1(s),s))}):e(new StorageUnknownError(_getErrorMessage$1(t),t))}),_getRequestParams$1=(t,e,n,i)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i&&(s.body=JSON.stringify(i)),Object.assign(Object.assign({},s),n))};function _handleRequest$1(t,e,n,i,s,o){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((c,f)=>{t(n,_getRequestParams$1(e,i,s,o)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>handleError$1(p,f,i))})})}function get(t,e,n,i){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"GET",e,n,i)})}function post(t,e,n,i,s){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"POST",e,i,s,n)})}function put(t,e,n,i,s){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"PUT",e,i,s,n)})}function head(t,e,n,i){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function remove(t,e,n,i,s){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"DELETE",e,i,s,n)})}var __awaiter$4=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,n={},i,s){this.url=e,this.headers=n,this.bucketId=i,this.fetch=resolveFetch$2(s)}uploadOrUpdate(e,n,i,s){return __awaiter$4(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),s);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),p&&o.append("metadata",this.encodeMetadata(p)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",c.cacheControl),p&&o.append("metadata",this.encodeMetadata(p))):(o=i,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),s?.headers&&(f=Object.assign(Object.assign({},f),s.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:f},c?.duplex?{duplex:c.duplex}:{})),v=yield m.json();return m.ok?{data:{path:d,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}upload(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,s){return __awaiter$4(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",n);try{let p;const d=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",d.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",d.cacheControl)):(p=i,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield this.fetch(f.toString(),{method:"PUT",body:p,headers:u}),v=yield m.json();return m.ok?{data:{path:o,fullPath:v.Key},error:null}:{data:null,error:v}}catch(p){if(isStorageError(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,n){return __awaiter$4(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);n?.upsert&&(s["x-upsert"]="true");const o=yield post(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),c=new URL(this.url+o.url),f=c.searchParams.get("token");if(!f)throw new StorageError("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}update(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}copy(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield post(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){try{const s=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}download(e,n){return __awaiter$4(this,void 0,void 0,function*(){const s=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"";try{const f=this._getFinalPath(e);return{data:yield(yield get(this.fetch,`${this.url}/${s}/${f}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(f){if(isStorageError(f))return{data:null,error:f};throw f}})}info(e){return __awaiter$4(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield get(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:recursiveToCamel(i),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}exists(e){return __awaiter$4(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield head(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(isStorageError(i)&&i instanceof StorageUnknownError){const s=i.originalError;if([400,404].includes(s?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const f=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&s.push(p);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${d}`)}}}remove(e){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}list(e,n,i){return __awaiter$4(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),n),{prefix:e||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(isStorageError(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const version$2="2.7.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};class StorageBucketApi{constructor(e,n={},i){this.url=e,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),n),this.fetch=resolveFetch$2(i)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(isStorageError(e))return{data:null,error:e};throw e}})}getBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}emptyBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}deleteBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}}class StorageClient extends StorageBucketApi{constructor(e,n={},i){super(e,n,i)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}}const version$1="2.52.0";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};const resolveFetch$1=t=>{let e;return t?e=t:typeof fetch>"u"?e=nodeFetch:e=fetch,(...n)=>e(...n)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(t,e,n)=>{const i=resolveFetch$1(n),s=resolveHeadersConstructor();return(o,c)=>__awaiter$2(void 0,void 0,void 0,function*(){var f;const p=(f=yield e())!==null&&f!==void 0?f:t;let d=new s(c?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${p}`),i(o,Object.assign(Object.assign({},c),{headers:d}))})};var __awaiter$1=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};function ensureTrailingSlash(t){return t.endsWith("/")?t:t+"/"}function applySettingDefaults(t,e){var n,i;const{db:s,auth:o,realtime:c,global:f}=t,{db:p,auth:d,realtime:u,global:m}=e,v={db:Object.assign(Object.assign({},p),s),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),c),global:Object.assign(Object.assign(Object.assign({},m),f),{headers:Object.assign(Object.assign({},(n=m?.headers)!==null&&n!==void 0?n:{}),(i=f?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}const version="2.71.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=600*1e3;class AuthError extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function isAuthError(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class AuthApiError extends AuthError{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function isAuthApiError(t){return isAuthError(t)&&t.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class CustomAuthError extends AuthError{constructor(e,n,i,s){super(e,i,s),this.name=n,this.status=i}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(t){return isAuthError(t)&&t.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(t){return isAuthError(t)&&t.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function isAuthRetryableFetchError(t){return isAuthError(t)&&t.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)t[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)t[TO_BASE64URL[e].charCodeAt(0)]=e;return t})();function byteToBase64URL(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(TO_BASE64URL[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(TO_BASE64URL[i]),e.queuedBits-=6}}function byteFromBase64URL(t,e,n){const i=FROM_BASE64URL[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function stringFromBase64URL(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=c=>{stringFromUTF8(c,i,n)};for(let c=0;c<t.length;c+=1)byteFromBase64URL(t.charCodeAt(c),s,o);return e.join("")}function codepointToUTF8(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function stringToUTF8(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}codepointToUTF8(i,e)}}function stringFromUTF8(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function base64UrlToUint8Array(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)byteFromBase64URL(t.charCodeAt(s),n,i);return new Uint8Array(e)}function stringToUint8Array(t){const e=[];return stringToUTF8(t,n=>e.push(n)),new Uint8Array(e)}function bytesToBase64URL(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};return t.forEach(s=>byteToBase64URL(s,n,i)),byteToBase64URL(null,n,i),e.join("")}function expiresAt(t){return Math.round(Date.now()/1e3)+t}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((i,s)=>{e[s]=i}),e}const resolveFetch=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>__vitePreload(async()=>{const{default:i}=await Promise.resolve().then(()=>browser$1);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},looksLikeFetchResponse=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",setItemAsync=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},getItemAsync=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},removeItemAsync=async(t,e)=>{await t.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Deferred.promiseConstructor=Promise;function decodeJWT(t){const e=t.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!BASE64URL_REGEX.test(e[i]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function retryable(t,e){return new Promise((i,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){i(c);return}}catch(c){if(!e(o,c)){s(c);return}}})()})}function dec2hex(t){return("0"+t.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(i);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function generatePKCEChallenge(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sha256(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(t,e,n=!1){const i=generatePKCEVerifier();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await setItemAsync(t,`${e}-code-verifier`,s);const o=await generatePKCEChallenge(i);return[o,i===o?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(t){const e=t.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function getAlgorithm(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(t){if(!UUID_REGEX.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function deepClone(t){return JSON.parse(JSON.stringify(t))}var __rest$1=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const _getErrorMessage=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NETWORK_ERROR_CODES=[502,503,504];async function handleError(t){var e;if(!looksLikeFetchResponse(t))throw new AuthRetryableFetchError(_getErrorMessage(t),0);if(NETWORK_ERROR_CODES.includes(t.status))throw new AuthRetryableFetchError(_getErrorMessage(t),t.status);let n;try{n=await t.json()}catch(o){throw new AuthUnknownError(_getErrorMessage(o),o)}let i;const s=parseResponseAPIVersion(t);if(s&&s.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new AuthSessionMissingError}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(n),t.status,n.weak_password.reasons);throw new AuthApiError(_getErrorMessage(n),t.status||500,i)}const _getRequestParams=(t,e,n,i)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))};async function _request(t,e,n,i){var s;const o=Object.assign({},i?.headers);o[API_VERSION_HEADER_NAME]||(o[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const c=(s=i?.query)!==null&&s!==void 0?s:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await _handleRequest(t,e,n+f,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}}async function _handleRequest(t,e,n,i,s,o){const c=_getRequestParams(e,i,s,o);let f;try{f=await t(n,Object.assign({},c))}catch(p){throw console.error(p),new AuthRetryableFetchError(_getErrorMessage(p),0)}if(f.ok||await handleError(f),i?.noResolveJson)return f;try{return await f.json()}catch(p){await handleError(p)}}function _sessionResponse(t){var e;let n=null;hasSession(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=expiresAt(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function _sessionResponsePassword(t){const e=_sessionResponse(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _userResponse(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _ssoResponse(t){return{data:t,error:null}}function _generateLinkResponse(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:o}=t,c=__rest$1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:o},p=Object.assign({},c);return{data:{properties:f,user:p},error:null}}function _noResolveJsonResponse(t){return t}function hasSession(t){return t.access_token&&t.refresh_token&&t.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];var __rest=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class GoTrueAdminApi{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=resolveFetch(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=__rest(e,["options"]),s=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(s.new_email=i?.newEmail,delete s.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_generateLinkResponse,redirectTo:n?.redirectTo})}catch(n){if(isAuthError(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,s,o,c,f,p;try{const d={nextPage:null,lastPage:0,total:0},u=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:_noResolveJsonResponse});if(u.error)throw u.error;const m=await u.json(),v=(c=u.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(p=(f=u.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return b.length>0&&(b.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);d[`${w}Page`]=y}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(isAuthError(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){validateUUID(e);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){validateUUID(e);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){validateUUID(e);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){validateUUID(e.userId);try{const{data:n,error:i}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:i}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _deleteFactor(e){validateUUID(e.userId),validateUUID(e.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}}function memoryLocalStorageAdapter(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(t,e,n){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(internals.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(t,e,n){return await n()}const GLOBAL_JWKS={};class GoTrueClient{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new GoTrueAdminApi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=resolveFetch(s.fetch),this.lock=s.lock||lockNoOp,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:isBrowser()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=parseParametersFromURL(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),isBrowser()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),isAuthImplicitGrantRedirectError(o)){const p=(e=o.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:f}=s;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return isAuthError(n)?{error:n}:{error:new AuthUnknownError("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,s;try{const o=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:_sessionResponse}),{data:c,error:f}=o;if(f||!c)return{data:{user:null,session:null},error:f};const p=c.session,d=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:d,session:p},error:null}}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,i,s;try{let o;if("email"in e){const{email:u,password:m,options:v}=e;let b=null,g=null;this.flowType==="pkce"&&([b,g]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),o=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:u,password:m,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:g},xform:_sessionResponse})}else if("phone"in e){const{phone:u,password:m,options:v}=e;o=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(i=v?.data)!==null&&i!==void 0?i:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:c,error:f}=o;if(f||!c)return{data:{user:null,session:null},error:f};const p=c.session,d=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:d,session:p},error:null}}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:c,options:f}=e;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:o,password:c,options:f}=e;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:i,error:s}=n;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,s,o,c,f,p,d,u,m,v,b;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:w,wallet:_,statement:R,options:k}=e;let C;if(isBrowser())if(typeof _=="object")C=_;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))C=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=_}const A=new URL((n=k?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const D=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),R?{statement:R}:null));let H;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")H=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)H=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)g=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),y=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${A.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(i=k?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=k?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((c=k?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((p=k?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((d=k?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((m=(u=k?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...k.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const D=await C.signMessage(new TextEncoder().encode(g),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=D}}try{const{data:w,error:_}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:bytesToBase64URL(y)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:_sessionResponse});if(_)throw _;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:_})}catch(w){if(isAuthError(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{const{data:o,error:c}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:c})}catch(o){if(isAuthError(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:s,access_token:o,nonce:c}=e,f=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:_sessionResponse}),{data:p,error:d}=f;return d?{data:{user:null,session:null},error:d}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:d})}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,s,o,c;try{if("email"in e){const{email:f,options:p}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:m}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=p?.data)!==null&&n!==void 0?n:{},create_user:(i=p?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:f,options:p}=e,{data:d,error:u}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(s=p?.data)!==null&&s!==void 0?s:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(c=p?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(f){if(isAuthError(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var n,i;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:f}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:_sessionResponse});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,d=c.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:d,session:p},error:null}}catch(s){if(isAuthError(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,i,s;try{let o=null,c=null;return this.flowType==="pkce"&&([o,c]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:_ssoResponse})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new AuthSessionMissingError;const{error:s}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(isAuthError(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:o}=e,{error:c}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:i,type:s,options:o}=e,{data:c,error:f}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:f}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await getItemAsync(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=userNotAvailableProxy()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(p,d,u)=>(!c&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,d,u))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async n=>{var i,s,o;const{data:c,error:f}=n;if(f)throw f;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:_userResponse})})}catch(n){if(isAuthError(n))return isAuthSessionMissingError(n)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:s,error:o}=i;if(o)throw o;if(!s.session)throw new AuthSessionMissingError;const c=s.session;let f=null,p=null;this.flowType==="pkce"&&e.email!=null&&([f,p]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:d,error:u}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:p}),jwt:c.access_token,xform:_userResponse});if(u)throw u;return c.user=d.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const n=Date.now()/1e3;let i=n,s=!0,o=null;const{payload:c}=decodeJWT(e.access_token);if(c.exp&&(i=c.exp,s=i<=n),s){const{session:f,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!f)return{data:{user:null,session:null},error:null};o=f}else{const{data:f,error:p}=await this._getUser(e.access_token);if(p)throw p;o={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(isAuthError(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:c,error:f}=n;if(f)throw f;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new AuthSessionMissingError;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:R,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:c,expires_in:f,expires_at:p,token_type:d}=e;if(!o||!f||!c||!d)throw new AuthImplicitGrantRedirectError("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(f);let v=u+m;p&&(v=parseInt(p));const b=v-u;b*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const g=v-m;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,v,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,v,u);const{data:y,error:w}=await this._getUser(o);if(w)throw w;const _={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:m,expires_at:v,refresh_token:c,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(i){if(isAuthError(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:s,error:o}=n;if(o)return{error:o};const c=(i=s.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(isAuthApiError(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=uuid(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,s;try{const{data:{session:o},error:c}=n;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:s}=await this._useSession(async o=>{var c,f,p,d,u;const{data:m,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",b,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return isBrowser()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(isAuthError(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,s;const{data:o,error:c}=n;if(c)throw c;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await retryable(async s=>(s>0&&await sleep(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(s,o)=>{const c=200*Math.pow(2,s);return o&&isAuthRetryableFetchError(o)&&Date.now()+c-i<AUTO_REFRESH_TICK_DURATION_MS})}catch(i){if(this._debug(n,"error",i),isAuthError(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),isBrowser()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await getItemAsync(this.storage,this.storageKey);if(s&&this.userStorage){let c=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:s.user},await setItemAsync(this.userStorage,this.storageKey+"-user",c)),s.user=(e=c?.user)!==null&&e!==void 0?e:userNotAvailableProxy()}else if(s&&!s.user&&!s.user){const c=await getItemAsync(this.storage,this.storageKey+"-user");c&&c?.user?(s.user=c.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,s)):s.user=userNotAvailableProxy()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:c}=await this._callRefreshToken(s.refresh_token);c&&(console.error(c),isAuthRetryableFetchError(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(s.access_token);!f&&c?.user?(s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Deferred;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new AuthSessionMissingError;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const f={session:o.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(o){if(this._debug(s,"error",o),isAuthError(o)){const c={session:null,error:o};return isAuthRetryableFetchError(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(p){o.push(p)}});if(await Promise.all(c),o.length>0){for(let f=0;f<o.length;f+=1)console.error(o[f]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=deepClone(s);await setItemAsync(this.storage,this.storageKey,o)}else{const s=deepClone(n);await setItemAsync(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),s<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const s=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,c]=await getCodeChallengeAndMethod(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(f.toString())}if(i?.queryParams){const o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:s,error:o}=n;return o?{data:null,error:o}:await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,s;const{data:o,error:c}=n;if(c)return{data:null,error:c};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:p,error:d}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=p?.totp)===null||s===void 0)&&s.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:c,error:f}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:f})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:o}=n;return o?{data:null,error:o}:await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=e?.factors||[],s=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),o=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=decodeJWT(s.access_token);let f=null;c.aal&&(f=c.aal);let p=f;((i=(n=s.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const u=c.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(f=>f.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+JWKS_TTL>s)return i;const{data:o,error:c}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,i=o.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:b,error:g}=await this.getSession();if(g||!b.session)return{data:null,error:g};i=b.session.access_token}const{header:s,payload:o,signature:c,raw:{header:f,payload:p}}=decodeJWT(i);n?.allowExpired||validateExp(o.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:o,header:s,signature:c},error:null}}const u=getAlgorithm(s.alg),m=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,m,c,stringToUint8Array(`${f}.${p}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:o,header:s,signature:c},error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(e){super(e)}}var __awaiter=function(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function f(u){try{d(i.next(u))}catch(m){c(m)}}function p(u){try{d(i.throw(u))}catch(m){c(m)}}function d(u){u.done?o(u.value):s(u.value).then(f,p)}d((i=i.apply(t,e||[])).next())})};class SupabaseClient{constructor(e,n,i){var s,o,c;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const f=ensureTrailingSlash(e),p=new URL(f);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const d=`sb-${p.hostname.split(".")[0]}-auth-token`,u={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:d}),global:DEFAULT_GLOBAL_OPTIONS},m=applySettingDefaults(i??{},u);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,m.global.fetch),this.fetch=fetchWithAuth(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new PostgrestClient(new URL("rest/v1",p).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,storageKey:o,flowType:c,lock:f,debug:p},d,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,flowType:c,lock:f,debug:p,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(t,e,n)=>new SupabaseClient(t,e,n),supabaseUrl="https://oounmycsyfuqvzagiadh.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vdW5teWNzeWZ1cXZ6YWdpYWRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI0NjAzMTUsImV4cCI6MjA0ODAzNjMxNX0.cqxVFYCn7youkcsCvvIMVo4hD_HzUlgPoEEJCfckz-c",supabase=createClient(supabaseUrl,supabaseAnonKey),STORAGE_BUCKETS={IR_REPORTS:"ir-reports",IR_IMAGES:"ir-images"},TABLES={IR_REPORTS:"ir_reports",PROFILES:"profiles"};class IRReportAPI{static async uploadFile(e){const n=crypto.randomUUID(),i=`${n}/original.pdf`,{data:s,error:o}=await supabase.storage.from(STORAGE_BUCKETS.IR_REPORTS).upload(i,e,{cacheControl:"3600",upsert:!1});if(o)throw new Error(`Upload failed: ${o.message}`);const{data:{publicUrl:c}}=supabase.storage.from(STORAGE_BUCKETS.IR_REPORTS).getPublicUrl(i);return{id:n,file_url:c}}static async createReport(e){const{data:n,error:i}=await supabase.from(TABLES.IR_REPORTS).insert([e]).select().single();if(i)throw new Error(`Database error: ${i.message}`);return n}static async updateReport(e,n){try{const i={...n};if(n.metadata){const{data:c}=await supabase.from(TABLES.IR_REPORTS).select("metadata").eq("id",e).single();c&&(i.metadata={...c.metadata,...n.metadata})}const{data:s,error:o}=await supabase.from(TABLES.IR_REPORTS).update(i).eq("id",e).select().single();if(o)throw console.error("Supabase update error:",o),o;return s}catch(i){throw console.error("Failed to update report:",i),i}}static async uploadProfileImage(e,n){const i=n.name.split(".").pop()||"jpg",s=`${e}/profile.${i}`,{data:o,error:c}=await supabase.storage.from(STORAGE_BUCKETS.IR_IMAGES).upload(s,n,{cacheControl:"3600",upsert:!0});if(c)throw new Error(`Profile image upload failed: ${c.message}`);const{data:{publicUrl:f}}=supabase.storage.from(STORAGE_BUCKETS.IR_IMAGES).getPublicUrl(s);return await IRReportAPI.updateReport(e,{profile_image_url:f}),f}static async uploadAdditionalImage(e,n){const i=n.name.split(".").pop()||"jpg",s=Date.now(),o=`${e}/additional_${s}.${i}`,{data:c,error:f}=await supabase.storage.from(STORAGE_BUCKETS.IR_IMAGES).upload(o,n,{cacheControl:"3600",upsert:!1});if(f)throw new Error(`Additional image upload failed: ${f.message}`);const{data:{publicUrl:p}}=supabase.storage.from(STORAGE_BUCKETS.IR_IMAGES).getPublicUrl(o),d=await this.getReport(e);if(!d)throw new Error("Report not found");const m=[...d.additional_images||[],p];return await IRReportAPI.updateReport(e,{additional_images:m}),p}static async deleteImage(e,n,i=!1){const s=n.split("/"),o=s[s.length-1],c=`${e}/${o}`,{error:f}=await supabase.storage.from(STORAGE_BUCKETS.IR_IMAGES).remove([c]);f&&console.warn("Image deletion from storage failed:",f.message);const p=await this.getReport(e);if(p)if(i)await IRReportAPI.updateReport(e,{profile_image_url:void 0});else{const u=(p.additional_images||[]).filter(m=>m!==n);await IRReportAPI.updateReport(e,{additional_images:u})}}static validatePoliceStation(e){return!e||!e.trim()||/^[A-Za-z\s\-\.]*$/.test(e)?null:"Police station must contain only letters, spaces, hyphens, and periods"}static validateUidForName(e){return null}static async updateManualDetails(e,n){if(n.police_station!==void 0){const o=this.validatePoliceStation(n.police_station);if(o)throw new Error(o)}if(n.uid_for_name!==void 0){const o=this.validateUidForName(n.uid_for_name);if(o)throw new Error(o)}const{data:i,error:s}=await supabase.from(TABLES.IR_REPORTS).update(n).eq("id",e).select().single();if(s)throw s.code==="23505"&&s.message.includes("unique_uid_for_name")?new Error("This UID for Name is already in use. Please choose a different number."):s.code==="23514"&&s.message.includes("check_police_station_text_only")?new Error("Police station must contain only letters, spaces, hyphens, and periods"):new Error(`Manual details update failed: ${s.message}`);return i}static async uploadParsedJSON(e,n){const i=`${e}/parsed.json`,{data:s,error:o}=await supabase.storage.from(STORAGE_BUCKETS.IR_REPORTS).upload(i,JSON.stringify(n,null,2),{contentType:"application/json",cacheControl:"3600",upsert:!0});if(o)throw new Error(`JSON upload failed: ${o.message}`);const{data:{publicUrl:c}}=supabase.storage.from(STORAGE_BUCKETS.IR_REPORTS).getPublicUrl(i);return c}static async getReports(e){let n=supabase.from(TABLES.IR_REPORTS).select("*").order("uploaded_at",{ascending:!1});e?.query&&(n=n.or(`
        original_filename.ilike.%${e.query}%,
        summary.ilike.%${e.query}%,
        metadata->>name.ilike.%${e.query}%,
        metadata->>area_region.ilike.%${e.query}%
      `)),e?.suspectName&&(n=n.ilike("metadata->>name",`%${e.suspectName}%`)),e?.location&&(n=n.ilike("metadata->>area_region",`%${e.location}%`)),e?.dateRange?.start&&(n=n.gte("uploaded_at",e.dateRange.start.toISOString())),e?.dateRange?.end&&(n=n.lte("uploaded_at",e.dateRange.end.toISOString()));const{data:i,error:s}=await n;if(s)throw new Error(`Fetch failed: ${s.message}`);return i||[]}static async getReport(e){const{data:n,error:i}=await supabase.from(TABLES.IR_REPORTS).select("*").eq("id",e).single();if(i){if(i.code==="PGRST116")return null;throw new Error(`Fetch failed: ${i.message}`)}return n}static async deleteReport(e){const n=[`${e}/original.pdf`,`${e}/parsed.json`],{error:i}=await supabase.storage.from(STORAGE_BUCKETS.IR_REPORTS).remove(n);i&&console.warn("Storage cleanup failed:",i.message);const{error:s}=await supabase.from(TABLES.IR_REPORTS).delete().eq("id",e);if(s)throw new Error(`Delete failed: ${s.message}`)}static async getSearchSuggestions(e){if(!e||e.length<2)return[];const{data:n,error:i}=await supabase.from(TABLES.IR_REPORTS).select("metadata").neq("metadata",null).limit(100);if(i||!n)return[];const s=new Set;return n.forEach(o=>{const c=o.metadata;c&&(c.name?.toLowerCase().includes(e.toLowerCase())&&s.add(c.name),c.aliases?.forEach(f=>{f.toLowerCase().includes(e.toLowerCase())&&s.add(f)}),c.area_region?.toLowerCase().includes(e.toLowerCase())&&s.add(c.area_region),c.villages_covered?.forEach(f=>{f.toLowerCase().includes(e.toLowerCase())&&s.add(f)}))}),Array.from(s).slice(0,8)}static async downloadFile(e,n){const i=await fetch(e);if(!i.ok)throw new Error("Download failed");const s=await i.blob(),o=window.URL.createObjectURL(s),c=document.createElement("a");c.href=o,c.download=n,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}static async getStatistics(){const{data:e,error:n}=await supabase.from(TABLES.IR_REPORTS).select("status");if(n)throw new Error(`Stats fetch failed: ${n.message}`);return e.reduce((s,o)=>{switch(s.totalReports++,o.status){case"completed":s.completedReports++;break;case"processing":s.processingReports++;break;case"error":s.errorReports++;break}return s},{totalReports:0,completedReports:0,processingReports:0,errorReports:0})}static async getIncidentAnalytics(e){const n=await this.getReports(),i=new Map,s=new Map;n.forEach(p=>{p.status!=="completed"||!p.metadata||(p.metadata.criminal_activities?.forEach(d=>{const u=this.generateIncidentId(d.incident,"criminal_activity");this.addIncidentData(i,u,d.incident,{person_name:p.metadata?.name||"Unknown",person_id:p.id,aliases:p.metadata?.aliases||[],involvement_level:"primary",report_source:this.createReportReference(p,d.incident,"criminal_activity",d.year,d.location),other_incidents:[]},"criminal_activity",d.year,d.location),p.metadata?.name&&(s.has(p.metadata.name)||s.set(p.metadata.name,new Set),s.get(p.metadata.name).add(u))}),p.metadata.police_encounters?.forEach(d=>{const u=this.generateIncidentId(d.encounter_details,"police_encounter");this.addIncidentData(i,u,d.encounter_details,{person_name:p.metadata?.name||"Unknown",person_id:p.id,aliases:p.metadata?.aliases||[],involvement_level:"primary",report_source:this.createReportReference(p,d.encounter_details,"police_encounter",d.year),other_incidents:[]},"police_encounter",d.year),p.metadata?.name&&(s.has(p.metadata.name)||s.set(p.metadata.name,new Set),s.get(p.metadata.name).add(u))}),p.metadata.important_points?.forEach(d=>{if(d.toLowerCase().includes("incident")||d.toLowerCase().includes("encounter")||d.toLowerCase().includes("operation")){const u=this.generateIncidentId(d,"important_point");this.addIncidentData(i,u,d,{person_name:p.metadata?.name||"Unknown",person_id:p.id,aliases:p.metadata?.aliases||[],involvement_level:"mentioned",report_source:this.createReportReference(p,d,"important_point"),other_incidents:[]},"important_point"),p.metadata?.name&&(s.has(p.metadata.name)||s.set(p.metadata.name,new Set),s.get(p.metadata.name).add(u))}}),p.questions_analysis?.results?.forEach(d=>{if(d.answer&&(d.answer.toLowerCase().includes("incident")||d.answer.toLowerCase().includes("encounter")||d.answer.toLowerCase().includes("operation"))){const u=this.generateIncidentId(d.answer,"qa_mention");this.addIncidentData(i,u,d.answer,{person_name:p.metadata?.name||"Unknown",person_id:p.id,aliases:p.metadata?.aliases||[],involvement_level:"mentioned",report_source:this.createReportReference(p,`Q: ${d.standard_question} A: ${d.answer}`,"qa_mention"),other_incidents:[]},"qa_mention"),p.metadata?.name&&(s.has(p.metadata.name)||s.set(p.metadata.name,new Set),s.get(p.metadata.name).add(u))}}))}),s.forEach((p,d)=>{const u=Array.from(p);u.forEach(m=>{const v=i.get(m);v&&v.people_involved.forEach(b=>{b.person_name===d&&(b.other_incidents=u.filter(g=>g!==m))})})});const o=Array.from(i.values());let c=this.applyIncidentFilters(o,e);return{total_incidents:c.length,total_people:new Set(c.flatMap(p=>p.people_involved.map(d=>d.person_name))).size,most_common_incidents:c.sort((p,d)=>d.frequency-p.frequency).slice(0,10),most_involved_people:this.getMostInvolvedPeople(c),incident_timeline:this.getIncidentTimeline(c),location_hotspots:this.getLocationHotspots(c)}}static async getIncidentDetails(e){return(await this.getIncidentAnalytics()).most_common_incidents.find(i=>i.incident_id===e)||null}static generateIncidentId(e,n){return`${n}_${e.toLowerCase().replace(/[^a-z0-9]/g,"_")}`}static createReportReference(e,n,i,s,o){return{report_id:e.id,report_filename:e.original_filename,mention_context:n.length>200?n.substring(0,200)+"...":n,mention_type:i,year:s,location:o,uploaded_at:e.uploaded_at}}static addIncidentData(e,n,i,s,o,c,f){e.has(n)||e.set(n,{incident_id:n,incident_name:i,people_involved:[],source_reports:[],locations:[],years:[],frequency:0,incident_type:o,last_mentioned:s.report_source.uploaded_at,description:i});const p=e.get(n);p.people_involved.find(d=>d.person_id===s.person_id)||p.people_involved.push(s),p.source_reports.find(d=>d.report_id===s.report_source.report_id)||p.source_reports.push(s.report_source),f&&!p.locations.includes(f)&&p.locations.push(f),c&&!p.years.includes(c)&&p.years.push(c),p.frequency++,new Date(s.report_source.uploaded_at)>new Date(p.last_mentioned)&&(p.last_mentioned=s.report_source.uploaded_at)}static applyIncidentFilters(e,n){if(!n)return e;let i=e;if(n.search_query){const s=n.search_query.toLowerCase();i=i.filter(o=>o.incident_name.toLowerCase().includes(s)||o.people_involved.some(c=>c.person_name.toLowerCase().includes(s))||o.locations.some(c=>c.toLowerCase().includes(s)))}if(n.incident_type&&n.incident_type!=="all"&&(i=i.filter(s=>s.incident_type===n.incident_type)),n.person_name){const s=n.person_name.toLowerCase();i=i.filter(o=>o.people_involved.some(c=>c.person_name.toLowerCase().includes(s)))}if(n.location){const s=n.location.toLowerCase();i=i.filter(o=>o.locations.some(c=>c.toLowerCase().includes(s)))}return n.year_range&&(i=i.filter(s=>{const o=s.years.map(u=>parseInt(u)).filter(u=>!isNaN(u));if(o.length===0)return!0;const c=Math.min(...o),f=Math.max(...o),p=parseInt(n.year_range.start),d=parseInt(n.year_range.end);return f>=p&&c<=d})),n.min_people_involved&&(i=i.filter(s=>s.people_involved.length>=n.min_people_involved)),n.sort_by&&i.sort((s,o)=>{let c,f;switch(n.sort_by){case"frequency":c=s.frequency,f=o.frequency;break;case"date":c=new Date(s.last_mentioned),f=new Date(o.last_mentioned);break;case"people_count":c=s.people_involved.length,f=o.people_involved.length;break;case"alphabetical":c=s.incident_name.toLowerCase(),f=o.incident_name.toLowerCase();break;default:return 0}return n.sort_order==="desc"?c>f?-1:c<f?1:0:c<f?-1:c>f?1:0}),i}static getMostInvolvedPeople(e){const n=new Map;return e.forEach(i=>{i.people_involved.forEach(s=>{n.has(s.person_name)||n.set(s.person_name,{...s,other_incidents:[]});const o=n.get(s.person_name);o.other_incidents.includes(i.incident_id)||o.other_incidents.push(i.incident_id)})}),Array.from(n.values()).sort((i,s)=>s.other_incidents.length-i.other_incidents.length).slice(0,10)}static getIncidentTimeline(e){const n=new Map;return e.forEach(i=>{i.years.forEach(s=>{n.has(s)||n.set(s,{year:s,incident_count:0,incidents:[]});const o=n.get(s);o.incident_count++,o.incidents.push(i)})}),Array.from(n.values()).sort((i,s)=>parseInt(s.year)-parseInt(i.year))}static getLocationHotspots(e){const n=new Map;return e.forEach(i=>{i.locations.forEach(s=>{n.has(s)||n.set(s,{location:s,incident_count:0,people_count:0,incidents:[]});const o=n.get(s);o.incident_count++,o.people_count+=i.people_involved.length,o.incidents.push(i)})}),Array.from(n.values()).sort((i,s)=>s.incident_count-i.incident_count).slice(0,10)}}function ImageUpload({onImageUpload:t,isUploading:e=!1,currentImageUrl:n,onImageDelete:i,type:s="profile",size:o="md"}){const c=reactExports.useRef(null),[f,p]=reactExports.useState(!1),d={sm:"w-12 h-12",md:"w-16 h-16",lg:"w-24 h-24"},u=async w=>{if(!w.type.startsWith("image/")){alert("Please select an image file");return}if(w.size>5*1024*1024){alert("Image size must be less than 5MB");return}try{await t(w)}catch(_){console.error("Image upload failed:",_),alert("Image upload failed. Please try again.")}},m=w=>{const _=w.target.files?.[0];_&&u(_)},v=w=>{w.preventDefault(),p(!1);const _=w.dataTransfer.files[0];_&&u(_)},b=w=>{w.preventDefault(),p(!0)},g=w=>{w.preventDefault(),p(!1)},y=()=>{c.current?.click()};return s==="profile"?jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:`${d[o]} rounded-full border-2 border-gray-200 overflow-hidden relative ${f?"border-blue-400 bg-blue-50":""} ${e?"opacity-50":""} ${n?"cursor-default":"cursor-pointer"}`,onClick:!e&&!n?y:void 0,onDrop:n?void 0:v,onDragOver:n?void 0:b,onDragLeave:n?void 0:g,children:n?jsxRuntimeExports.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:e?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 text-gray-500 animate-spin"}):jsxRuntimeExports.jsx(Camera,{className:"h-4 w-4 text-gray-500"})})}),jsxRuntimeExports.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:m,className:"hidden",disabled:!!n})]}):jsxRuntimeExports.jsxs("button",{onClick:y,disabled:e,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all duration-200 disabled:opacity-50",children:[e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Uploading..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Add Images"})]}),jsxRuntimeExports.jsx("input",{ref:c,type:"file",accept:"image/*",multiple:!0,onChange:w=>{Array.from(w.target.files||[]).forEach(R=>u(R))},className:"hidden"})]})}function AdditionalImages({images:t,onImageDelete:e,readOnly:n=!1}){const[i,s]=reactExports.useState(!1),[o,c]=reactExports.useState(null),[f,p]=reactExports.useState(null),d=async u=>{if(e)try{p(u),await e(u)}catch(m){console.error("Failed to delete image:",m),alert("Failed to delete image. Please try again.")}finally{p(null)}};return!t||t.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>s(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-purple-700 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 hover:border-purple-300 transition-all duration-200",children:[jsxRuntimeExports.jsx(Images,{className:"h-4 w-4"}),jsxRuntimeExports.jsxs("span",{children:["View Images (",t.length,")"]})]}),i&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>s(!1),children:jsxRuntimeExports.jsxs("div",{className:"relative max-w-6xl max-h-screen p-6 bg-white rounded-lg m-4 overflow-hidden",onClick:u=>u.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Additional Images (",t.length,")"]}),jsxRuntimeExports.jsx("button",{onClick:()=>s(!1),className:"w-8 h-8 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center hover:bg-gray-200 transition-all",children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-96 overflow-y-auto",children:t.map((u,m)=>jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200 cursor-pointer hover:border-blue-300 transition-colors",children:[jsxRuntimeExports.jsx("img",{src:u,alt:`Additional ${m+1}`,className:"w-full h-full object-cover",onClick:()=>c(u)}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:jsxRuntimeExports.jsx(Eye,{className:"h-5 w-5 text-white"})})]}),!n&&e&&jsxRuntimeExports.jsx("button",{onClick:v=>{v.stopPropagation(),d(u)},disabled:f===u,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600 disabled:opacity-50",children:jsxRuntimeExports.jsx(X,{className:"h-3 w-3"})}),f===u&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"})})]},m))})]})}),o&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-60",onClick:()=>c(null),children:jsxRuntimeExports.jsxs("div",{className:"relative max-w-7xl max-h-screen p-4",children:[jsxRuntimeExports.jsx("img",{src:o,alt:"Preview",className:"max-w-full max-h-full object-contain rounded-lg"}),jsxRuntimeExports.jsx("button",{onClick:()=>c(null),className:"absolute top-2 right-2 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-75 transition-all",children:jsxRuntimeExports.jsx(X,{className:"h-5 w-5"})})]})})]})}function ReportCard({report:t,onViewDetails:e,onDownload:n,onReportUpdate:i}){const[s,o]=reactExports.useState(null),[c,f]=reactExports.useState(null),[p,d]=reactExports.useState(null),[u,m]=reactExports.useState(!1),[v,b]=reactExports.useState(!1),[g,y]=reactExports.useState({police_station:t.police_station||"",division:t.division||"",area_committee:t.area_committee||"",uid_for_name:t.uid_for_name||"",rank:t.rank||""}),w=["Szc","Dvc","Acm /ppcm","Coy","BN","Pm","Militia","Rpc","Others"],_=J=>!J||!J.trim()||/^[A-Za-z\s\-\.]*$/.test(J)?null:"Police station must contain only letters, spaces, hyphens, and periods",R=J=>null,k=(J,ee)=>{switch(J){case"police_station":return _(ee);case"uid_for_name":return R();default:return null}},C=async(J,ee)=>{try{f(J),d(null);const te=k(J,ee);if(te){d(te);return}const W=await IRReportAPI.updateManualDetails(t.id,{[J]:ee});o(null),i&&i(W)}catch(te){console.error(`Failed to update ${J}:`,te);const W=te instanceof Error?te.message:`Failed to update ${J}. Please try again.`;d(W)}finally{f(null)}},A=J=>{y(ee=>({...ee,[J]:t[J]||""})),o(null),d(null)},D=async J=>{try{m(!0);const ee=await IRReportAPI.uploadProfileImage(t.id,J);if(i){const te=await IRReportAPI.getReport(t.id);te&&i(te)}}catch(ee){throw console.error("Profile image upload failed:",ee),ee}finally{m(!1)}},H=async J=>{try{b(!0);const ee=await IRReportAPI.uploadAdditionalImage(t.id,J);if(i){const te=await IRReportAPI.getReport(t.id);te&&i(te)}}catch(ee){throw console.error("Additional image upload failed:",ee),ee}finally{b(!1)}},I=async J=>{try{if(await IRReportAPI.deleteImage(t.id,J,!1),i){const ee=await IRReportAPI.getReport(t.id);ee&&i(ee)}}catch(ee){throw console.error("Additional image deletion failed:",ee),ee}},F=J=>!t[J],Z=F("police_station")||F("division")||F("area_committee")||F("uid_for_name")||F("rank"),N=t.police_station||t.division||t.area_committee||t.uid_for_name||t.rank,G=(J,ee,te,W,O=!1)=>{const j=t[J],T=F(J),E=s===J,M=c===J;return E?jsxRuntimeExports.jsxs("div",{className:"bg-white border-2 border-blue-300 rounded-lg p-4 shadow-md",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center text-sm font-medium text-blue-800 mb-3",children:[te,jsxRuntimeExports.jsx("span",{className:"ml-2",children:ee})]}),O?jsxRuntimeExports.jsxs("select",{value:g[J],onChange:U=>{y($=>({...$,[J]:U.target.value})),d(null)},className:"w-full px-3 py-2 text-sm border-2 border-blue-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-3",children:[jsxRuntimeExports.jsxs("option",{value:"",children:["Select ",ee.toLowerCase()]}),w.map(U=>jsxRuntimeExports.jsx("option",{value:U,children:U},U))]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"text",value:g[J],onChange:U=>{const $=U.target.value;if(y(z=>({...z,[J]:$})),d(null),J==="police_station"||J==="uid_for_name"){const z=k(J,$);z&&d(z)}},className:`w-full px-3 py-2 text-sm border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2 ${p?"border-red-300 focus:border-red-500":"border-blue-200 focus:border-blue-500"}`,placeholder:W}),p&&jsxRuntimeExports.jsx("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-600",children:p})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>A(J),disabled:M,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition-all duration-200",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>C(J,g[J]),disabled:M||!!p,className:"px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-all duration-200",children:M?"Saving...":"Save"})]})]}):j?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-100 p-3 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[te,jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-blue-700",children:ee}),jsxRuntimeExports.jsx("p",{className:"text-base font-semibold text-gray-900",children:j})]})]}),T&&jsxRuntimeExports.jsx("button",{onClick:()=>{y(U=>({...U,[J]:j})),o(J),d(null)},className:"text-sm text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-100 transition-all duration-200",children:jsxRuntimeExports.jsx(PenLine,{className:"h-4 w-4"})})]}):T?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border-2 border-dashed border-blue-200 p-3 rounded-lg hover:border-blue-300 transition-all duration-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[te,jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-blue-700",children:ee}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Not set"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{y(U=>({...U,[J]:""})),o(J),d(null)},className:"text-sm text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-100 transition-all duration-200",children:jsxRuntimeExports.jsx(PenLine,{className:"h-4 w-4"})})]}):null};return jsxRuntimeExports.jsxs(motion.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{y:-4},className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300",children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-primary-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 text-lg leading-tight",children:t.metadata?.name||"Unknown Subject"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate max-w-xs",title:t.original_filename,children:t.original_filename.length>40?`${t.original_filename.substring(0,40)}...`:t.original_filename}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:format(new Date(t.uploaded_at),"MMM dd, yyyy")})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("div",{className:"h-1 w-1 bg-gray-400 rounded-full"}),jsxRuntimeExports.jsxs("span",{children:[(t.file_size/1024/1024).toFixed(1)," MB"]})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(ImageUpload,{type:"profile",size:"lg",currentImageUrl:t.profile_image_url,onImageUpload:D,isUploading:u})})]})}),(N||Z)&&jsxRuntimeExports.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"bg-white border-2 border-blue-100 rounded-lg p-4 shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center mb-4 pb-2 border-b border-blue-100",children:jsxRuntimeExports.jsxs("h4",{className:"text-base font-semibold text-blue-800 flex items-center",children:[jsxRuntimeExports.jsx(Shield,{className:"h-5 w-5 mr-2"}),"Administrative Details"]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G("police_station","Police Station",jsxRuntimeExports.jsx(Building2,{className:"h-4 w-4 text-blue-600"}),"Enter police station (text only)"),G("division","Division",jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-blue-600"}),"Enter division"),G("area_committee","Area Committee",jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-blue-600"}),"Enter area committee"),G("uid_for_name","UID for Name",jsxRuntimeExports.jsx(Hash,{className:"h-4 w-4 text-blue-600"}),"Enter unique identifier"),G("rank","Rank",jsxRuntimeExports.jsx(Award,{className:"h-4 w-4 text-blue-600"}),"Select rank",!0)]}),!N&&!Z&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"No administrative details available"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6 pt-0 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all duration-200",children:[jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"View Details"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>n(t,"pdf"),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all duration-200",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Download"})]}),jsxRuntimeExports.jsx(ImageUpload,{type:"additional",onImageUpload:H,isUploading:v}),t.additional_images&&t.additional_images.length>0&&jsxRuntimeExports.jsx(AdditionalImages,{images:t.additional_images,onImageDelete:I})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[t.status==="processing"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-amber-600",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-amber-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Processing..."})]}),t.status==="error"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Processing Error"})]})]})]})]})}var lib$h={exports:{}},core_min={};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(e,n){module.exports=e.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=T,e.bytesToString=re,e.createValidAbsoluteUrl=M,e.getModificationDate=Xe,e.getUuid=Pn,e.getVerbosityLevel=te,e.info=W,e.isArrayBuffer=He,e.isArrayEqual=nt,e.isNodeJS=void 0,e.normalizeUnicode=jt,e.objectFromMap=we,e.objectSize=Fe,e.setVerbosityLevel=ee,e.shadow=U,e.string32=_e,e.stringToBytes=le,e.stringToPDFString=Be,e.stringToUTF8String=Ke,e.unreachable=j,e.utf8StringToString=ke,e.warn=O;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n;const i=[1,0,0,1,0,0];e.IDENTITY_MATRIX=i;const s=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=s;const o=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=o;const c=1.35;e.LINE_FACTOR=c;const f=.35;e.LINE_DESCENT_FACTOR=f;const p=f/c;e.BASELINE_FACTOR=p;const d={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=d;const u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=u;const m="pdfjs_internal_editor_";e.AnnotationEditorPrefix=m;const v={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=v;const b={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=b;const g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=g;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=y;const w={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=w;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=_;const R={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=R;const k={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=k;const C={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=C;const A={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=A;const D={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=D;const H={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=H;const I={O:"PageOpen",C:"PageClose"};e.PageActionEventType=I;const F={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=F;const Z={NONE:0,BINARY:1};e.CMapCompressionType=Z;const N={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=N;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=G;let J=F.WARNINGS;function ee(Ie){Number.isInteger(Ie)&&(J=Ie)}function te(){return J}function W(Ie){J>=F.INFOS&&console.log(`Info: ${Ie}`)}function O(Ie){J>=F.WARNINGS&&console.log(`Warning: ${Ie}`)}function j(Ie){throw new Error(Ie)}function T(Ie,xe){Ie||j(xe)}function E(Ie){switch(Ie?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function M(Ie,xe=null,ve=null){if(!Ie)return null;try{if(ve&&typeof Ie=="string"&&(ve.addDefaultProtocol&&Ie.startsWith("www.")&&Ie.match(/\./g)?.length>=2&&(Ie=`http://${Ie}`),ve.tryConvertEncoding))try{Ie=Ke(Ie)}catch{}const Ge=xe?new URL(Ie,xe):new URL(Ie);if(E(Ge))return Ge}catch{}return null}function U(Ie,xe,ve,Ge=!1){return Object.defineProperty(Ie,xe,{value:ve,enumerable:!Ge,configurable:!0,writable:!1}),ve}const $=function(){function xe(ve,Ge){this.constructor===xe&&j("Cannot initialize BaseException."),this.message=ve,this.name=Ge}return xe.prototype=new Error,xe.constructor=xe,xe}();e.BaseException=$;class z extends ${constructor(xe,ve){super(xe,"PasswordException"),this.code=ve}}e.PasswordException=z;class q extends ${constructor(xe,ve){super(xe,"UnknownErrorException"),this.details=ve}}e.UnknownErrorException=q;class P extends ${constructor(xe){super(xe,"InvalidPDFException")}}e.InvalidPDFException=P;class V extends ${constructor(xe){super(xe,"MissingPDFException")}}e.MissingPDFException=V;class L extends ${constructor(xe,ve){super(xe,"UnexpectedResponseException"),this.status=ve}}e.UnexpectedResponseException=L;class Y extends ${constructor(xe){super(xe,"FormatError")}}e.FormatError=Y;class ne extends ${constructor(xe){super(xe,"AbortException")}}e.AbortException=ne;function re(Ie){(typeof Ie!="object"||Ie?.length===void 0)&&j("Invalid argument for bytesToString");const xe=Ie.length,ve=8192;if(xe<ve)return String.fromCharCode.apply(null,Ie);const Ge=[];for(let kt=0;kt<xe;kt+=ve){const dt=Math.min(kt+ve,xe),Ct=Ie.subarray(kt,dt);Ge.push(String.fromCharCode.apply(null,Ct))}return Ge.join("")}function le(Ie){typeof Ie!="string"&&j("Invalid argument for stringToBytes");const xe=Ie.length,ve=new Uint8Array(xe);for(let Ge=0;Ge<xe;++Ge)ve[Ge]=Ie.charCodeAt(Ge)&255;return ve}function _e(Ie){return String.fromCharCode(Ie>>24&255,Ie>>16&255,Ie>>8&255,Ie&255)}function Fe(Ie){return Object.keys(Ie).length}function we(Ie){const xe=Object.create(null);for(const[ve,Ge]of Ie)xe[ve]=Ge;return xe}function Te(){const Ie=new Uint8Array(4);return Ie[0]=1,new Uint32Array(Ie.buffer,0,1)[0]===1}function Re(){try{return new Function(""),!0}catch{return!1}}class fe{static get isLittleEndian(){return U(this,"isLittleEndian",Te())}static get isEvalSupported(){return U(this,"isEvalSupported",Re())}static get isOffscreenCanvasSupported(){return U(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?U(this,"platform",{isWin:!1,isMac:!1}):U(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return U(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=fe;const be=[...Array(256).keys()].map(Ie=>Ie.toString(16).padStart(2,"0"));class Ue{static makeHexColor(xe,ve,Ge){return`#${be[xe]}${be[ve]}${be[Ge]}`}static scaleMinMax(xe,ve){let Ge;xe[0]?(xe[0]<0&&(Ge=ve[0],ve[0]=ve[1],ve[1]=Ge),ve[0]*=xe[0],ve[1]*=xe[0],xe[3]<0&&(Ge=ve[2],ve[2]=ve[3],ve[3]=Ge),ve[2]*=xe[3],ve[3]*=xe[3]):(Ge=ve[0],ve[0]=ve[2],ve[2]=Ge,Ge=ve[1],ve[1]=ve[3],ve[3]=Ge,xe[1]<0&&(Ge=ve[2],ve[2]=ve[3],ve[3]=Ge),ve[2]*=xe[1],ve[3]*=xe[1],xe[2]<0&&(Ge=ve[0],ve[0]=ve[1],ve[1]=Ge),ve[0]*=xe[2],ve[1]*=xe[2]),ve[0]+=xe[4],ve[1]+=xe[4],ve[2]+=xe[5],ve[3]+=xe[5]}static transform(xe,ve){return[xe[0]*ve[0]+xe[2]*ve[1],xe[1]*ve[0]+xe[3]*ve[1],xe[0]*ve[2]+xe[2]*ve[3],xe[1]*ve[2]+xe[3]*ve[3],xe[0]*ve[4]+xe[2]*ve[5]+xe[4],xe[1]*ve[4]+xe[3]*ve[5]+xe[5]]}static applyTransform(xe,ve){const Ge=xe[0]*ve[0]+xe[1]*ve[2]+ve[4],kt=xe[0]*ve[1]+xe[1]*ve[3]+ve[5];return[Ge,kt]}static applyInverseTransform(xe,ve){const Ge=ve[0]*ve[3]-ve[1]*ve[2],kt=(xe[0]*ve[3]-xe[1]*ve[2]+ve[2]*ve[5]-ve[4]*ve[3])/Ge,dt=(-xe[0]*ve[1]+xe[1]*ve[0]+ve[4]*ve[1]-ve[5]*ve[0])/Ge;return[kt,dt]}static getAxialAlignedBoundingBox(xe,ve){const Ge=this.applyTransform(xe,ve),kt=this.applyTransform(xe.slice(2,4),ve),dt=this.applyTransform([xe[0],xe[3]],ve),Ct=this.applyTransform([xe[2],xe[1]],ve);return[Math.min(Ge[0],kt[0],dt[0],Ct[0]),Math.min(Ge[1],kt[1],dt[1],Ct[1]),Math.max(Ge[0],kt[0],dt[0],Ct[0]),Math.max(Ge[1],kt[1],dt[1],Ct[1])]}static inverseTransform(xe){const ve=xe[0]*xe[3]-xe[1]*xe[2];return[xe[3]/ve,-xe[1]/ve,-xe[2]/ve,xe[0]/ve,(xe[2]*xe[5]-xe[4]*xe[3])/ve,(xe[4]*xe[1]-xe[5]*xe[0])/ve]}static singularValueDecompose2dScale(xe){const ve=[xe[0],xe[2],xe[1],xe[3]],Ge=xe[0]*ve[0]+xe[1]*ve[2],kt=xe[0]*ve[1]+xe[1]*ve[3],dt=xe[2]*ve[0]+xe[3]*ve[2],Ct=xe[2]*ve[1]+xe[3]*ve[3],Bn=(Ge+Ct)/2,bn=Math.sqrt((Ge+Ct)**2-4*(Ge*Ct-dt*kt))/2,Wn=Bn+bn||1,vn=Bn-bn||1;return[Math.sqrt(Wn),Math.sqrt(vn)]}static normalizeRect(xe){const ve=xe.slice(0);return xe[0]>xe[2]&&(ve[0]=xe[2],ve[2]=xe[0]),xe[1]>xe[3]&&(ve[1]=xe[3],ve[3]=xe[1]),ve}static intersect(xe,ve){const Ge=Math.max(Math.min(xe[0],xe[2]),Math.min(ve[0],ve[2])),kt=Math.min(Math.max(xe[0],xe[2]),Math.max(ve[0],ve[2]));if(Ge>kt)return null;const dt=Math.max(Math.min(xe[1],xe[3]),Math.min(ve[1],ve[3])),Ct=Math.min(Math.max(xe[1],xe[3]),Math.max(ve[1],ve[3]));return dt>Ct?null:[Ge,dt,kt,Ct]}static bezierBoundingBox(xe,ve,Ge,kt,dt,Ct,Bn,bn){const Wn=[],vn=[[],[]];let Kn,Nn,Qn,tn,yi,In,fn,_n;for(let $r=0;$r<2;++$r){if($r===0?(Nn=6*xe-12*Ge+6*dt,Kn=-3*xe+9*Ge-9*dt+3*Bn,Qn=3*Ge-3*xe):(Nn=6*ve-12*kt+6*Ct,Kn=-3*ve+9*kt-9*Ct+3*bn,Qn=3*kt-3*ve),Math.abs(Kn)<1e-12){if(Math.abs(Nn)<1e-12)continue;tn=-Qn/Nn,0<tn&&tn<1&&Wn.push(tn);continue}fn=Nn*Nn-4*Qn*Kn,_n=Math.sqrt(fn),!(fn<0)&&(yi=(-Nn+_n)/(2*Kn),0<yi&&yi<1&&Wn.push(yi),In=(-Nn-_n)/(2*Kn),0<In&&In<1&&Wn.push(In))}let Yn=Wn.length,Sn;const zi=Yn;for(;Yn--;)tn=Wn[Yn],Sn=1-tn,vn[0][Yn]=Sn*Sn*Sn*xe+3*Sn*Sn*tn*Ge+3*Sn*tn*tn*dt+tn*tn*tn*Bn,vn[1][Yn]=Sn*Sn*Sn*ve+3*Sn*Sn*tn*kt+3*Sn*tn*tn*Ct+tn*tn*tn*bn;return vn[0][zi]=xe,vn[1][zi]=ve,vn[0][zi+1]=Bn,vn[1][zi+1]=bn,vn[0].length=vn[1].length=zi+2,[Math.min(...vn[0]),Math.min(...vn[1]),Math.max(...vn[0]),Math.max(...vn[1])]}}e.Util=Ue;const Ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Be(Ie){if(Ie[0]>=""){let ve;if(Ie[0]===""&&Ie[1]===""?ve="utf-16be":Ie[0]===""&&Ie[1]===""?ve="utf-16le":Ie[0]===""&&Ie[1]===""&&Ie[2]===""&&(ve="utf-8"),ve)try{const Ge=new TextDecoder(ve,{fatal:!0}),kt=le(Ie);return Ge.decode(kt)}catch(Ge){O(`stringToPDFString: "${Ge}".`)}}const xe=[];for(let ve=0,Ge=Ie.length;ve<Ge;ve++){const kt=Ne[Ie.charCodeAt(ve)];xe.push(kt?String.fromCharCode(kt):Ie.charAt(ve))}return xe.join("")}function Ke(Ie){return decodeURIComponent(escape(Ie))}function ke(Ie){return unescape(encodeURIComponent(Ie))}function He(Ie){return typeof Ie=="object"&&Ie?.byteLength!==void 0}function nt(Ie,xe){if(Ie.length!==xe.length)return!1;for(let ve=0,Ge=Ie.length;ve<Ge;ve++)if(Ie[ve]!==xe[ve])return!1;return!0}function Xe(Ie=new Date){return[Ie.getUTCFullYear().toString(),(Ie.getUTCMonth()+1).toString().padStart(2,"0"),Ie.getUTCDate().toString().padStart(2,"0"),Ie.getUTCHours().toString().padStart(2,"0"),Ie.getUTCMinutes().toString().padStart(2,"0"),Ie.getUTCSeconds().toString().padStart(2,"0")].join("")}class vt{#e=!1;constructor(){this.promise=new Promise((xe,ve)=>{this.resolve=Ge=>{this.#e=!0,xe(Ge)},this.reject=Ge=>{this.#e=!0,ve(Ge)}})}get settled(){return this.#e}}e.PromiseCapability=vt;let pt=null,Mt=null;function jt(Ie){return pt||(pt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Mt=new Map([["","t"]])),Ie.replaceAll(pt,(xe,ve,Ge)=>ve?ve.normalize("NFKC"):Mt.get(Ge))}function Pn(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Ie=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Ie);else for(let xe=0;xe<32;xe++)Ie[xe]=Math.floor(Math.random()*255);return re(Ie)}const $t="pdfjs_internal_id_";e.AnnotationPrefix=$t},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(t){if(typeof t=="string"||t instanceof URL?t={url:t}:(0,_util.isArrayBuffer)(t)&&(t={data:t}),typeof t!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:n}=e,i=t.url?getUrlProp(t.url):null,s=t.data?getDataProp(t.data):null,o=t.httpHeaders||null,c=t.withCredentials===!0,f=t.password??null,p=t.range instanceof PDFDataRangeTransport?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let u=t.worker instanceof PDFWorker?t.worker:null;const m=t.verbosity,v=typeof t.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(t.docBaseUrl)?t.docBaseUrl:null,b=typeof t.cMapUrl=="string"?t.cMapUrl:null,g=t.cMapPacked!==!1,y=t.CMapReaderFactory||DefaultCMapReaderFactory,w=typeof t.standardFontDataUrl=="string"?t.standardFontDataUrl:null,_=t.StandardFontDataFactory||DefaultStandardFontDataFactory,R=t.stopAtErrors!==!0,k=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,C=t.isEvalSupported!==!1,A=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!_util.isNodeJS,D=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,H=typeof t.disableFontFace=="boolean"?t.disableFontFace:_util.isNodeJS,I=t.fontExtraProperties===!0,F=t.enableXfa===!0,Z=t.ownerDocument||globalThis.document,N=t.disableRange===!0,G=t.disableStream===!0,J=t.disableAutoFetch===!0,ee=t.pdfBug===!0,te=p?p.length:t.length??NaN,W=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!_util.isNodeJS&&!H,O=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:y===_display_utils.DOMCMapReaderFactory&&_===_display_utils.DOMStandardFontDataFactory&&b&&w&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(w,document.baseURI),j=t.canvasFactory||new DefaultCanvasFactory({ownerDocument:Z}),T=t.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:Z}),E=null;(0,_util.setVerbosityLevel)(m);const M={canvasFactory:j,filterFactory:T};if(O||(M.cMapReaderFactory=new y({baseUrl:b,isCompressed:g}),M.standardFontDataFactory=new _({baseUrl:w})),!u){const z={verbosity:m,port:_worker_options.GlobalWorkerOptions.workerPort};u=z.port?PDFWorker.fromPort(z):new PDFWorker(z),e._worker=u}const U={docId:n,apiVersion:"3.11.174",data:s,password:f,disableAutoFetch:J,rangeChunkSize:d,length:te,docBaseUrl:v,enableXfa:F,evaluatorOptions:{maxImageSize:k,disableFontFace:H,ignoreErrors:R,isEvalSupported:C,isOffscreenCanvasSupported:A,canvasMaxAreaInBytes:D,fontExtraProperties:I,useSystemFonts:W,cMapUrl:O?b:null,standardFontDataUrl:O?w:null}},$={ignoreErrors:R,isEvalSupported:C,disableFontFace:H,fontExtraProperties:I,enableXfa:F,ownerDocument:Z,disableAutoFetch:J,pdfBug:ee,styleElement:E};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const z=_fetchDocument(u,U),q=new Promise(function(P){let V;p?V=new _transport_stream.PDFDataTransportStream({length:te,initialData:p.initialData,progressiveDone:p.progressiveDone,contentDispositionFilename:p.contentDispositionFilename,disableRange:N,disableStream:G},p):s||(V=(Y=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Y):(0,_display_utils.isValidFetchUrl)(Y.url)?new _displayFetch_stream.PDFFetchStream(Y):new _displayNetwork.PDFNetworkStream(Y))({url:i,length:te,httpHeaders:o,withCredentials:c,rangeChunkSize:d,disableRange:N,disableStream:G})),P(V)});return Promise.all([z,q]).then(function([P,V]){if(e.destroyed)throw new Error("Loading aborted");const L=new _message_handler.MessageHandler(n,P,u.port),Y=new WorkerTransport(L,e,V,$,M);e._transport=Y,L.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(t,e){if(t.destroyed)throw new Error("Worker was destroyed");const n=await t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(t.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(_util.isNodeJS&&typeof t=="string")return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(_util.isNodeJS&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return(0,_util.stringToBytes)(t);if(typeof t=="object"&&!isNaN(t?.length)||(0,_util.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,n,i=!1,s=null){this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(const i of this._rangeListeners)i(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,n){this._pdfInfo=e,this._transport=n,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(i=>{if(!i)return i;const s=[];for(const o in i)s.push(...i[o]);return s}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,n,i,s=!1){this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=s?new _display_utils.StatTimer:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:n,offsetX:i,offsetY:s,dontFlip:o})}getAnnotations({intent:e="display"}={}){const n=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:n,intent:i="display",annotationMode:s=_util.AnnotationMode.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:f=null,annotationCanvasMap:p=null,pageColors:d=null,printAnnotationStorage:u=null}){this._stats?.time("Overall");const m=this._transport.getRenderingIntent(i,s,u);this.#t=!1,this.#i(),f||(f=this._transport.getOptionalContentConfig());let v=this._intentStates.get(m.cacheKey);v||(v=Object.create(null),this._intentStates.set(m.cacheKey,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const b=!!(m.renderingIntent&_util.RenderingIntentFlag.PRINT);v.displayReadyCapability||(v.displayReadyCapability=new _util.PromiseCapability,v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m));const g=_=>{v.renderTasks.delete(y),(this._maybeCleanupAfterRender||b)&&(this.#t=!0),this.#n(!b),_?(y.capability.reject(_),this._abortOperatorList({intentState:v,reason:_ instanceof Error?_:new Error(_)})):y.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},y=new InternalRenderTask({callback:g,params:{canvasContext:e,viewport:n,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d});(v.renderTasks||=new Set).add(y);const w=y.task;return Promise.all([v.displayReadyCapability.promise,f]).then(([_,R])=>{if(this.destroyed){g();return}this._stats?.time("Rendering"),y.initializeGraphics({transparency:_,optionalContentConfig:R}),y.operatorListChanged()}).catch(g),w}getOperatorList({intent:e="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){function s(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(f))}const o=this._transport.getRenderingIntent(e,n,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let f;return c.opListReadCapability||(f=Object.create(null),f.operatorListChanged=s,c.opListReadCapability=new _util.PromiseCapability,(c.renderTasks||=new Set).add(f),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const n=this.streamTextContent(e);return new Promise(function(i,s){function o(){c.read().then(function({value:p,done:d}){if(d){i(f);return}Object.assign(f.styles,p.styles),f.items.push(...p.items),o()},s)}const c=n.getReader(),f={items:[],styles:Object.create(null)};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const n=this.#n(!1);return e&&n&&(this._stats&&=new _display_utils.StatTimer),n}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:n,operatorList:i}of this._intentStates.values())if(n.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,n){const i=this._intentStates.get(n);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let i=0,s=e.length;i<s;i++)n.operatorList.fnArray.push(e.fnArray[i]),n.operatorList.argsArray.push(e.argsArray[i]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:i}){const{map:s,transfers:o}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s},o).getReader(),p=this._intentStates.get(n);p.streamReader=f;const d=()=>{f.read().then(({value:u,done:m})=>{if(m){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,p),d())},u=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const m of p.renderTasks)m.operatorListChanged();this.#n(!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(u);else if(p.opListReadCapability)p.opListReadCapability.reject(u);else throw u}})};d()}_abortOperatorList({intentState:e,reason:n,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let s=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(s+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},s);return}}if(e.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,n){const i={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(const s of this.#e)s.call(this,i)})}addEventListener(e,n){this.#e.add(n)}removeEventListener(e,n){this.#e.delete(n)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:t=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),n=new _message_handler.MessageHandler("main","worker",e),i=()=>{e.removeEventListener("error",s),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||i()};e.addEventListener("error",s),n.on("test",c=>{if(e.removeEventListener("error",s),this.destroyed){i();return}c?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",c=>{if(e.removeEventListener("error",s),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};o();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const n=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(n+"_worker",n,e);t.setup(i,e);const s=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#workerPorts?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#i=null;constructor(e,n,i,s,o){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(e,n=null){const i=this.#e.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,n);return this.#e.set(e,s),s}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,n=_util.AnnotationMode.ENABLE,i=null,s=!1){let o=_util.RenderingIntentFlag.DISPLAY,c=_annotation_storage.SerializableEmpty;switch(e){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(n){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,c=(o&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return s&&(o+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:o,cacheKey:`${o}_${c.hash}`,annotationStorageSerializable:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(i,s)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){s.close();return}(0,_util.assert)(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",i=>{const s=new _util.PromiseCapability,o=this._fullReader;return o.headersReady.then(()=>{(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),o.onProgress=c=>{n.onProgress?.({loaded:c.loaded,total:c.total})}),s.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(i,s)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:c,done:f}){if(f){s.close();return}(0,_util.assert)(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{s.error(c)})},s.onCancel=c=>{o.cancel(c),s.ready.catch(f=>{if(!this.destroyed)throw f})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":s=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(s)}),e.on("PasswordRequest",i=>{if(this.#i=new _util.PromiseCapability,n.onPassword){const s=o=>{o instanceof Error?this.#i.reject(o):this.#i.resolve({password:o})};try{n.onPassword(s,i.code)}catch(o){this.#i.reject(o)}}else this.#i.reject(new _util.PasswordException(i.message,i.code));return this.#i.promise}),e.on("DataLoaded",i=>{n.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,o])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(s){case"Font":const c=this._params;if("error"in o){const d=o.error;(0,_util.warn)(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const f=c.pdfBug&&globalThis.FontInspector?.enabled?(d,u)=>globalThis.FontInspector.fontAdded(d,u):null,p=new _font_loader.FontFaceObject(o,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,inspectFont:f});this.fontLoader.bind(p).catch(d=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${s}`)}}),e.on("obj",([i,s,o,c])=>{if(this.destroyed)return;const f=this.#t.get(s);if(!f.objs.has(i))switch(o){case"Image":if(f.objs.resolve(i,c),c){let p;if(c.bitmap){const{width:d,height:u}=c;p=d*u*4}else p=c.data?.length||0;p>_util.MAX_IMAGE_SIZE_TO_CACHE&&(f._maybeCleanupAfterRender=!0)}break;case"Pattern":f.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}),e.on("DocProgress",i=>{this.destroyed||n.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,i=this.#n.get(n);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");const c=new PDFPageProxy(n,o,this,this._params.pdfBug);return this.#t.set(n,c),c});return this.#n.set(n,s),s}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:n})}}class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={capability:new _util.PromiseCapability,data:null}}get(e,n=null){if(n){const s=this.#t(e);return s.capability.promise.then(()=>n(s.data)),null}const i=this.#e[e];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,n=null){const i=this.#t(e);i.data=n,i.capability.resolve()}clear(){for(const e in this.#e){const{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:n,objs:i,commonObjs:s,annotationCanvasMap:o,operatorList:c,pageIndex:f,canvasFactory:p,filterFactory:d,useRequestAnimationFrame:u=!1,pdfBug:m=!1,pageColors:v=null}){this.callback=e,this.params=n,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=f,this.canvasFactory=p,this.filterFactory=d,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:o,background:c}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=n(1),s=n(4),o=n(8);const c=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=c;class f{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(u,m){const v=this.#t.get(u);return v===void 0?m:Object.assign(m,v)}getRawValue(u){return this.#t.get(u)}remove(u){if(this.#t.delete(u),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const m of this.#t.values())if(m instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(u,m){const v=this.#t.get(u);let b=!1;if(v!==void 0)for(const[g,y]of Object.entries(m))v[g]!==y&&(b=!0,v[g]=y);else b=!0,this.#t.set(u,m);b&&this.#n(),m instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(m.constructor._type)}has(u){return this.#t.has(u)}getAll(){return this.#t.size>0?(0,i.objectFromMap)(this.#t):null}setAll(u){for(const[m,v]of Object.entries(u))this.setValue(m,v)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new p(this)}get serializable(){if(this.#t.size===0)return c;const u=new Map,m=new o.MurmurHash3_64,v=[],b=Object.create(null);let g=!1;for(const[y,w]of this.#t){const _=w instanceof s.AnnotationEditor?w.serialize(!1,b):w;_&&(u.set(y,_),m.update(`${y}:${JSON.stringify(_)}`),g||=!!_.bitmap)}if(g)for(const y of u.values())y.bitmap&&v.push(y.bitmap);return u.size>0?{map:u,hash:m.hexdigest(),transfers:v}:c}}e.AnnotationStorage=f;class p extends f{#e;constructor(u){super();const{map:m,hash:v,transfers:b}=u.serializable,g=structuredClone(m,b?{transfer:b}:null);this.#e={map:g,hash:v,transfers:b}}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=p},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=n(5),s=n(1),o=n(6);class c{#e="";#t=!1;#n=null;#i=null;#o=null;#s=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#r=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=c._zIndex++;static _borderLineWidth=-1;static _colorManager=new i.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(d){this.constructor===c&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=d.isCentered,this._structTreeParentId=null;const{rotation:u,rawDims:{pageWidth:m,pageHeight:v,pageX:b,pageY:g}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[m,v],this.pageTranslation=[b,g];const[y,w]=this.parentDimensions;this.x=d.x/y,this.y=d.y/w,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(d){const u=new f({id:d.parent.getNextId(),parent:d.parent,uiManager:d._uiManager});u.annotationElementId=d.annotationElementId,u.deleted=!0,u._uiManager.addToAnnotationStorage(u)}static initialize(d,u=null){if(c._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(v=>[v,d.get(v)])),u?.strings)for(const v of u.strings)c._l10nPromise.set(v,d.get(v));if(c._borderLineWidth!==-1)return;const m=getComputedStyle(document.documentElement);c._borderLineWidth=parseFloat(m.getPropertyValue("--outline-width"))||0}static updateDefaultParams(d,u){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(d){return!1}static paste(d,u){(0,s.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(d){this.#h=d,this.div?.classList.toggle("draggable",d)}center(){const[d,u]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*u/(d*2),this.y+=this.width*d/(u*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*u/(d*2),this.y-=this.width*d/(u*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){this._focusEventsAllowed&&(this.#r?this.#r=!1:this.parent.setSelected(this))}focusout(d){!this._focusEventsAllowed||!this.isAttachedToDOM||d.relatedTarget?.closest(`#${this.id}`)||(d.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(d,u,m,v){const[b,g]=this.parentDimensions;[m,v]=this.screenToPageTranslation(m,v),this.x=(d+m)/b,this.y=(u+v)/g,this.fixAndSetPosition()}#v([d,u],m,v){[m,v]=this.screenToPageTranslation(m,v),this.x+=m/d,this.y+=v/u,this.fixAndSetPosition()}translate(d,u){this.#v(this.parentDimensions,d,u)}translateInPage(d,u){this.#v(this.pageDimensions,d,u),this.div.scrollIntoView({block:"nearest"})}drag(d,u){const[m,v]=this.parentDimensions;if(this.x+=d/m,this.y+=u/v,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:_,y:R}=this.div.getBoundingClientRect();this.parent.findNewParent(this,_,R)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:b,y:g}=this;const[y,w]=this.#g();b+=y,g+=w,this.div.style.left=`${(100*b).toFixed(2)}%`,this.div.style.top=`${(100*g).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[d,u]=this.parentDimensions,{_borderLineWidth:m}=c,v=m/d,b=m/u;switch(this.rotation){case 90:return[-v,b];case 180:return[v,b];case 270:return[v,-b];default:return[-v,-b]}}fixAndSetPosition(){const[d,u]=this.pageDimensions;let{x:m,y:v,width:b,height:g}=this;switch(b*=d,g*=u,m*=d,v*=u,this.rotation){case 0:m=Math.max(0,Math.min(d-b,m)),v=Math.max(0,Math.min(u-g,v));break;case 90:m=Math.max(0,Math.min(d-g,m)),v=Math.min(u,Math.max(b,v));break;case 180:m=Math.min(d,Math.max(b,m)),v=Math.min(u,Math.max(g,v));break;case 270:m=Math.min(d,Math.max(g,m)),v=Math.max(0,Math.min(u-b,v));break}this.x=m/=d,this.y=v/=u;const[y,w]=this.#g();m+=y,v+=w;const{style:_}=this.div;_.left=`${(100*m).toFixed(2)}%`,_.top=`${(100*v).toFixed(2)}%`,this.moveInDOM()}static#m(d,u,m){switch(m){case 90:return[u,-d];case 180:return[-d,-u];case 270:return[-u,d];default:return[d,u]}}screenToPageTranslation(d,u){return c.#m(d,u,this.parentRotation)}pageTranslationToScreen(d,u){return c.#m(d,u,360-this.parentRotation)}#u(d){switch(d){case 90:{const[u,m]=this.pageDimensions;return[0,-u/m,m/u,0]}case 180:return[-1,0,0,-1];case 270:{const[u,m]=this.pageDimensions;return[0,u/m,-m/u,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:d,pageDimensions:[u,m]}=this,v=u*d,b=m*d;return s.FeatureTest.isCSSRoundSupported?[Math.round(v),Math.round(b)]:[v,b]}setDims(d,u){const[m,v]=this.parentDimensions;this.div.style.width=`${(100*d/m).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*u/v).toFixed(2)}%`),this.#n?.classList.toggle("small",d<c.SMALL_EDITOR_SIZE||u<c.SMALL_EDITOR_SIZE)}fixDims(){const{style:d}=this.div,{height:u,width:m}=d,v=m.endsWith("%"),b=!this.#s&&u.endsWith("%");if(v&&b)return;const[g,y]=this.parentDimensions;v||(d.width=`${(100*parseFloat(m)/g).toFixed(2)}%`),!this.#s&&!b&&(d.height=`${(100*parseFloat(u)/y).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const d=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||d.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const u of d){const m=document.createElement("div");this.#a.append(m),m.classList.add("resizer",u),m.addEventListener("pointerdown",this.#w.bind(this,u)),m.addEventListener("contextmenu",o.noContextMenu)}this.div.prepend(this.#a)}#w(d,u){u.preventDefault();const{isMac:m}=s.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&m)return;const v=this.#E.bind(this,d),b=this._isDraggable;this._isDraggable=!1;const g={passive:!0,capture:!0};window.addEventListener("pointermove",v,g);const y=this.x,w=this.y,_=this.width,R=this.height,k=this.parent.div.style.cursor,C=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(u.target).cursor;const A=()=>{this._isDraggable=b,window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),window.removeEventListener("pointermove",v,g),this.parent.div.style.cursor=k,this.div.style.cursor=C;const D=this.x,H=this.y,I=this.width,F=this.height;D===y&&H===w&&I===_&&F===R||this.addCommands({cmd:()=>{this.width=I,this.height=F,this.x=D,this.y=H;const[Z,N]=this.parentDimensions;this.setDims(Z*I,N*F),this.fixAndSetPosition()},undo:()=>{this.width=_,this.height=R,this.x=y,this.y=w;const[Z,N]=this.parentDimensions;this.setDims(Z*_,N*R),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",A),window.addEventListener("blur",A)}#E(d,u){const[m,v]=this.parentDimensions,b=this.x,g=this.y,y=this.width,w=this.height,_=c.MIN_SIZE/m,R=c.MIN_SIZE/v,k=q=>Math.round(q*1e4)/1e4,C=this.#u(this.rotation),A=(q,P)=>[C[0]*q+C[2]*P,C[1]*q+C[3]*P],D=this.#u(360-this.rotation),H=(q,P)=>[D[0]*q+D[2]*P,D[1]*q+D[3]*P];let I,F,Z=!1,N=!1;switch(d){case"topLeft":Z=!0,I=(q,P)=>[0,0],F=(q,P)=>[q,P];break;case"topMiddle":I=(q,P)=>[q/2,0],F=(q,P)=>[q/2,P];break;case"topRight":Z=!0,I=(q,P)=>[q,0],F=(q,P)=>[0,P];break;case"middleRight":N=!0,I=(q,P)=>[q,P/2],F=(q,P)=>[0,P/2];break;case"bottomRight":Z=!0,I=(q,P)=>[q,P],F=(q,P)=>[0,0];break;case"bottomMiddle":I=(q,P)=>[q/2,P],F=(q,P)=>[q/2,0];break;case"bottomLeft":Z=!0,I=(q,P)=>[0,P],F=(q,P)=>[q,0];break;case"middleLeft":N=!0,I=(q,P)=>[0,P/2],F=(q,P)=>[q,P/2];break}const G=I(y,w),J=F(y,w);let ee=A(...J);const te=k(b+ee[0]),W=k(g+ee[1]);let O=1,j=1,[T,E]=this.screenToPageTranslation(u.movementX,u.movementY);if([T,E]=H(T/m,E/v),Z){const q=Math.hypot(y,w);O=j=Math.max(Math.min(Math.hypot(J[0]-G[0]-T,J[1]-G[1]-E)/q,1/y,1/w),_/y,R/w)}else N?O=Math.max(_,Math.min(1,Math.abs(J[0]-G[0]-T)))/y:j=Math.max(R,Math.min(1,Math.abs(J[1]-G[1]-E)))/w;const M=k(y*O),U=k(w*j);ee=A(...F(M,U));const $=te-ee[0],z=W-ee[1];this.width=M,this.height=U,this.x=$,this.y=z,this.setDims(m*M,v*U),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const d=this.#n=document.createElement("button");d.className="altText";const u=await c._l10nPromise.get("editor_alt_text_button_label");d.textContent=u,d.setAttribute("aria-label",u),d.tabIndex="0",d.addEventListener("contextmenu",o.noContextMenu),d.addEventListener("pointerdown",m=>m.stopPropagation()),d.addEventListener("click",m=>{m.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),d.addEventListener("keydown",m=>{m.target===d&&m.key==="Enter"&&(m.preventDefault(),this._uiManager.editAltText(this))}),this.#A(),this.div.append(d),c.SMALL_EDITOR_SIZE||(c.SMALL_EDITOR_SIZE=Math.min(128,Math.round(d.getBoundingClientRect().width*1.4)))}async#A(){const d=this.#n;if(!d)return;if(!this.#e&&!this.#t){d.classList.remove("done"),this.#i?.remove();return}c._l10nPromise.get("editor_alt_text_edit_button_label").then(m=>{d.setAttribute("aria-label",m)});let u=this.#i;if(!u){this.#i=u=document.createElement("span"),u.className="tooltip",u.setAttribute("role","tooltip");const m=u.id=`alt-text-tooltip-${this.id}`;d.setAttribute("aria-describedby",m);const v=100;d.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},v)}),d.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#i?.classList.remove("show")})}d.classList.add("done"),u.innerText=this.#t?await c._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,u.parentNode||d.append(u)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:d,decorative:u}){this.#e===d&&this.#t===u||(this.#e=d,this.#t=u,this.#A())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[d,u]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*u/d).toFixed(2)}%`,this.div.style.maxHeight=`${(100*d/u).toFixed(2)}%`);const[m,v]=this.getInitialTranslation();return this.translate(m,v),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(d){const{isMac:u}=s.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&u){d.preventDefault();return}this.#r=!0,this.#C(d)}#C(d){if(!this._isDraggable)return;const u=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let m,v;u&&(m={passive:!0,capture:!0},v=g=>{const[y,w]=this.screenToPageTranslation(g.movementX,g.movementY);this._uiManager.dragSelectedEditors(y,w)},window.addEventListener("pointermove",v,m));const b=()=>{if(window.removeEventListener("pointerup",b),window.removeEventListener("blur",b),u&&window.removeEventListener("pointermove",v,m),this.#r=!1,!this._uiManager.endDragSession()){const{isMac:g}=s.FeatureTest.platform;d.ctrlKey&&!g||d.shiftKey||d.metaKey&&g?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",b),window.addEventListener("blur",b)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(d,u,m){d.changeParent(this),this.x=u,this.y=m,this.fixAndSetPosition()}getRect(d,u){const m=this.parentScale,[v,b]=this.pageDimensions,[g,y]=this.pageTranslation,w=d/m,_=u/m,R=this.x*v,k=this.y*b,C=this.width*v,A=this.height*b;switch(this.rotation){case 0:return[R+w+g,b-k-_-A+y,R+w+C+g,b-k-_+y];case 90:return[R+_+g,b-k+w+y,R+_+A+g,b-k+w+C+y];case 180:return[R-w-C+g,b-k+_+y,R-w+g,b-k+_+A+y];case 270:return[R-_-A+g,b-k-w-C+y,R-_+g,b-k-w+y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,u){const[m,v,b,g]=d,y=b-m,w=g-v;switch(this.rotation){case 0:return[m,u-g,y,w];case 90:return[m,u-v,w,y];case 180:return[b,u-v,y,w];case 270:return[b,u-g,w,y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(d=!1,u=null){(0,s.unreachable)("An editor must be serializable")}static deserialize(d,u,m){const v=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:m});v.rotation=d.rotation;const[b,g]=v.pageDimensions,[y,w,_,R]=v.getRectInCurrentCoords(d.rect,g);return v.x=y/b,v.y=w/g,v.width=_/b,v.height=R/g,v}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(d,u){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(d){this.#f=d,this.parent&&(d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(d,u){this.#s=!0;const m=d/u,{style:v}=this.div;v.aspectRatio=m,v.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=c;class f extends c{constructor(d){super(d),this.annotationElementId=d.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=o,e.opacityToHex=c;var i=n(1),s=n(6);function o(b,g,y){for(const w of y)g.addEventListener(w,b[w].bind(b))}function c(b){return Math.round(Math.min(255,Math.max(1,255*b))).toString(16).padStart(2,"0")}class f{#e=0;getId(){return`${i.AnnotationEditorPrefix}${this.#e++}`}}class p{#e=(0,i.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',w=new OffscreenCanvas(1,3).getContext("2d"),_=new Image;_.src=g;const R=_.decode().then(()=>(w.drawImage(_,0,0,1,1,0,0,1,3),new Uint32Array(w.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",R)}async#i(g,y){this.#n||=new Map;let w=this.#n.get(g);if(w===null)return null;if(w?.bitmap)return w.refCounter+=1,w;try{w||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let _;if(typeof y=="string"){w.url=y;const R=await fetch(y);if(!R.ok)throw new Error(R.statusText);_=await R.blob()}else _=w.file=y;if(_.type==="image/svg+xml"){const R=p._isSVGFittingCanvas,k=new FileReader,C=new Image,A=new Promise((D,H)=>{C.onload=()=>{w.bitmap=C,w.isSvg=!0,D()},k.onload=async()=>{const I=w.svgUrl=k.result;C.src=await R?`${I}#svgView(preserveAspectRatio(none))`:I},C.onerror=k.onerror=H});k.readAsDataURL(_),await A}else w.bitmap=await createImageBitmap(_);w.refCounter=1}catch(_){console.error(_),w=null}return this.#n.set(g,w),w&&this.#n.set(w.id,w),w}async getFromFile(g){const{lastModified:y,name:w,size:_,type:R}=g;return this.#i(`${y}_${w}_${_}_${R}`,g)}async getFromUrl(g){return this.#i(g,g)}async getFromId(g){this.#n||=new Map;const y=this.#n.get(g);return y?y.bitmap?(y.refCounter+=1,y):y.file?this.getFromFile(y.file):this.getFromUrl(y.url):null}getSvgUrl(g){const y=this.#n.get(g);return y?.isSvg?y.svgUrl:null}deleteId(g){this.#n||=new Map;const y=this.#n.get(g);y&&(y.refCounter-=1,y.refCounter===0&&(y.bitmap=null))}isValidId(g){return g.startsWith(`image_${this.#e}_`)}}class d{#e=[];#t=!1;#n;#i=-1;constructor(g=128){this.#n=g}add({cmd:g,undo:y,mustExec:w,type:_=NaN,overwriteIfSameType:R=!1,keepUndo:k=!1}){if(w&&g(),this.#t)return;const C={cmd:g,undo:y,type:_};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(C);return}if(R&&this.#e[this.#i].type===_){k&&(C.undo=this.#e[this.#i].undo),this.#e[this.#i]=C;return}const A=this.#i+1;A===this.#n?this.#e.splice(0,1):(this.#i=A,A<this.#e.length&&this.#e.splice(A)),this.#e.push(C)}undo(){this.#i!==-1&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=d;class u{constructor(g){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:y}=i.FeatureTest.platform;for(const[w,_,R={}]of g)for(const k of w){const C=k.startsWith("mac+");y&&C?(this.callbacks.set(k.slice(4),{callback:_,options:R}),this.allKeys.add(k.split("+").at(-1))):!y&&!C&&(this.callbacks.set(k,{callback:_,options:R}),this.allKeys.add(k.split("+").at(-1)))}}#e(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);const y=this.buffer.join("+");return this.buffer.length=0,y}exec(g,y){if(!this.allKeys.has(y.key))return;const w=this.callbacks.get(this.#e(y));if(!w)return;const{callback:_,options:{bubbles:R=!1,args:k=[],checker:C=null}}=w;C&&!C(g,y)||(_.bind(g,...k)(),R||(y.stopPropagation(),y.preventDefault()))}}e.KeyboardManager=u;class m{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const g=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(g),(0,i.shadow)(this,"_colors",g)}convert(g){const y=(0,s.getRGB)(g);if(!window.matchMedia("(forced-colors: active)").matches)return y;for(const[w,_]of this._colors)if(_.every((R,k)=>R===y[k]))return m._colorsMapping.get(w);return y}getHexCode(g){const y=this._colors.get(g);return y?i.Util.makeHexColor(...y):g}}e.ColorManager=m;class v{#e=null;#t=new Map;#n=new Map;#i=null;#o=null;#s=new d;#a=0;#l=new Set;#c=null;#r=null;#f=new Set;#d=null;#h=new f;#p=!1;#v=!1;#g=null;#m=i.AnnotationEditorType.NONE;#u=new Set;#y=null;#w=this.blur.bind(this);#E=this.focus.bind(this);#A=this.copy.bind(this);#C=this.cut.bind(this);#O=this.paste.bind(this);#N=this.keydown.bind(this);#I=this.onEditingAction.bind(this);#x=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#P=this.onRotationChanging.bind(this);#k={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#b=[0,0];#T=null;#S=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const g=v.prototype,y=R=>{const{activeElement:k}=document;return k&&R.#S.contains(k)&&R.hasSomethingToControl()},w=this.TRANSLATE_SMALL,_=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new u([[["ctrl+a","mac+meta+a"],g.selectAll],[["ctrl+z","mac+meta+z"],g.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-w,0],checker:y}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-_,0],checker:y}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[w,0],checker:y}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[_,0],checker:y}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-w],checker:y}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-_],checker:y}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,w],checker:y}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,_],checker:y}]]))}constructor(g,y,w,_,R,k){this.#S=g,this.#L=y,this.#i=w,this._eventBus=_,this._eventBus._on("editingaction",this.#I),this._eventBus._on("pagechanging",this.#x),this._eventBus._on("scalechanging",this.#D),this._eventBus._on("rotationchanging",this.#P),this.#o=R.annotationStorage,this.#d=R.filterFactory,this.#y=k,this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#j(),this.#B(),this._eventBus._off("editingaction",this.#I),this._eventBus._off("pagechanging",this.#x),this._eventBus._off("scalechanging",this.#D),this._eventBus._off("rotationchanging",this.#P);for(const g of this.#n.values())g.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#s.destroy(),this.#i.destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",this.#y?this.#d.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(this.#S).direction)}editAltText(g){this.#i?.editAltText(this,g)}onPageChanging({pageNumber:g}){this.#a=g-1}focusMainContainer(){this.#S.focus()}findParent(g,y){for(const w of this.#n.values()){const{x:_,y:R,width:k,height:C}=w.div.getBoundingClientRect();if(g>=_&&g<=_+k&&y>=R&&y<=R+C)return w}return null}disableUserSelect(g=!1){this.#L.classList.toggle("noUserSelect",g)}addShouldRescale(g){this.#f.add(g)}removeShouldRescale(g){this.#f.delete(g)}onScaleChanging({scale:g}){this.commitOrRemove(),this.viewParameters.realScale=g*s.PixelsPerInch.PDF_TO_CSS_UNITS;for(const y of this.#f)y.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}addToAnnotationStorage(g){!g.isEmpty()&&this.#o&&!this.#o.has(g.id)&&this.#o.setValue(g.id,g)}#F(){window.addEventListener("focus",this.#E),window.addEventListener("blur",this.#w)}#B(){window.removeEventListener("focus",this.#E),window.removeEventListener("blur",this.#w)}blur(){if(!this.hasSelection)return;const{activeElement:g}=document;for(const y of this.#u)if(y.div.contains(g)){this.#g=[y,g],y._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[g,y]=this.#g;this.#g=null,y.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0}),y.focus()}#U(){window.addEventListener("keydown",this.#N,{capture:!0})}#j(){window.removeEventListener("keydown",this.#N,{capture:!0})}#M(){document.addEventListener("copy",this.#A),document.addEventListener("cut",this.#C),document.addEventListener("paste",this.#O)}#R(){document.removeEventListener("copy",this.#A),document.removeEventListener("cut",this.#C),document.removeEventListener("paste",this.#O)}addEditListeners(){this.#U(),this.#M()}removeEditListeners(){this.#j(),this.#R()}copy(g){if(g.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const y=[];for(const w of this.#u){const _=w.serialize(!0);_&&y.push(_)}y.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(y))}cut(g){this.copy(g),this.delete()}paste(g){g.preventDefault();const{clipboardData:y}=g;for(const R of y.items)for(const k of this.#r)if(k.isHandlingMimeForPasting(R.type)){k.paste(R,this.currentLayer);return}let w=y.getData("application/pdfjs");if(!w)return;try{w=JSON.parse(w)}catch(R){(0,i.warn)(`paste: "${R.message}".`);return}if(!Array.isArray(w))return;this.unselectAll();const _=this.currentLayer;try{const R=[];for(const A of w){const D=_.deserialize(A);if(!D)return;R.push(D)}const k=()=>{for(const A of R)this.#z(A);this.#q(R)},C=()=>{for(const A of R)A.remove()};this.addCommands({cmd:k,undo:C,mustExec:!0})}catch(R){(0,i.warn)(`paste: "${R.message}".`)}}keydown(g){this.getActive()?.shouldGetKeyboardEvents()||v._keyboardManager.exec(this,g)}onEditingAction(g){["undo","redo","delete","selectAll"].includes(g.name)&&this[g.name]()}#_(g){Object.entries(g).some(([w,_])=>this.#k[w]!==_)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#k,g)})}#V(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})}setEditingState(g){g?(this.#F(),this.#U(),this.#M(),this.#_({isEditing:this.#m!==i.AnnotationEditorType.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#j(),this.#R(),this.#_({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!this.#r){this.#r=g;for(const y of this.#r)this.#V(y.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(g){return this.#n.get(g)}get currentPageIndex(){return this.#a}addLayer(g){this.#n.set(g.pageIndex,g),this.#p?g.enable():g.disable()}removeLayer(g){this.#n.delete(g.pageIndex)}updateMode(g,y=null){if(this.#m!==g){if(this.#m=g,g===i.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#H(),this.unselectAll();for(const w of this.#n.values())w.updateMode(g);if(y){for(const w of this.#t.values())if(w.annotationElementId===y){this.setSelected(w),w.enterInEditMode();break}}}}updateToolbar(g){g!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:g})}updateParams(g,y){if(this.#r){if(g===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(g);return}for(const w of this.#u)w.updateParams(g,y);for(const w of this.#r)w.updateDefaultParams(g,y)}}enableWaiting(g=!1){if(this.#v!==g){this.#v=g;for(const y of this.#n.values())g?y.disableClick():y.enableClick(),y.div.classList.toggle("waiting",g)}}#H(){if(!this.#p){this.#p=!0;for(const g of this.#n.values())g.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(const g of this.#n.values())g.disable()}}getEditors(g){const y=[];for(const w of this.#t.values())w.pageIndex===g&&y.push(w);return y}getEditor(g){return this.#t.get(g)}addEditor(g){this.#t.set(g.id,g)}removeEditor(g){this.#t.delete(g.id),this.unselect(g),(!g.annotationElementId||!this.#l.has(g.annotationElementId))&&this.#o?.remove(g.id)}addDeletedAnnotationElement(g){this.#l.add(g.annotationElementId),g.deleted=!0}isDeletedAnnotationElement(g){return this.#l.has(g)}removeDeletedAnnotationElement(g){this.#l.delete(g.annotationElementId),g.deleted=!1}#z(g){const y=this.#n.get(g.pageIndex);y?y.addOrRebuild(g):this.addEditor(g)}setActiveEditor(g){this.#e!==g&&(this.#e=g,g&&this.#V(g.propertiesToUpdate))}toggleSelected(g){if(this.#u.has(g)){this.#u.delete(g),g.unselect(),this.#_({hasSelectedEditor:this.hasSelection});return}this.#u.add(g),g.select(),this.#V(g.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}setSelected(g){for(const y of this.#u)y!==g&&y.unselect();this.#u.clear(),this.#u.add(g),g.select(),this.#V(g.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}isSelected(g){return this.#u.has(g)}unselect(g){g.unselect(),this.#u.delete(g),this.#_({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#s.undo(),this.#_({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#s.redo(),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(g){this.#s.add(g),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const g of this.#t.values())return g.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const g=[...this.#u],y=()=>{for(const _ of g)_.remove()},w=()=>{for(const _ of g)this.#z(_)};this.addCommands({cmd:y,undo:w,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#q(g){this.#u.clear();for(const y of g)y.isEmpty()||(this.#u.add(y),y.select());this.#_({hasSelectedEditor:!0})}selectAll(){for(const g of this.#u)g.commit();this.#q(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const g of this.#u)g.unselect();this.#u.clear(),this.#_({hasSelectedEditor:!1})}}translateSelectedEditors(g,y,w=!1){if(w||this.commitOrRemove(),!this.hasSelection)return;this.#b[0]+=g,this.#b[1]+=y;const[_,R]=this.#b,k=[...this.#u],C=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#b[0]=this.#b[1]=0,this.addCommands({cmd:()=>{for(const A of k)this.#t.has(A.id)&&A.translateInPage(_,R)},undo:()=>{for(const A of k)this.#t.has(A.id)&&A.translateInPage(-_,-R)},mustExec:!1})},C);for(const A of k)A.translateInPage(g,y)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const g of this.#u)this.#c.set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const g=this.#c;this.#c=null;let y=!1;for(const[{x:_,y:R,pageIndex:k},C]of g)C.newX=_,C.newY=R,C.newPageIndex=k,y||=_!==C.savedX||R!==C.savedY||k!==C.savedPageIndex;if(!y)return!1;const w=(_,R,k,C)=>{if(this.#t.has(_.id)){const A=this.#n.get(C);A?_._setParentAndPosition(A,R,k):(_.pageIndex=C,_.x=R,_.y=k)}};return this.addCommands({cmd:()=>{for(const[_,{newX:R,newY:k,newPageIndex:C}]of g)w(_,R,k,C)},undo:()=>{for(const[_,{savedX:R,savedY:k,savedPageIndex:C}]of g)w(_,R,k,C)},mustExec:!0}),!0}dragSelectedEditors(g,y){if(this.#c)for(const w of this.#c.keys())w.drag(g,y)}rebuild(g){if(g.parent===null){const y=this.getLayer(g.pageIndex);y?(y.changeParent(g),y.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}isActive(g){return this.#e===g}getActive(){return this.#e}getMode(){return this.#m}get imageManager(){return(0,i.shadow)(this,"imageManager",new p)}}e.AnnotationEditorUIManager=v},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=H,e.getColorValues=G,e.getCurrentTransform=J,e.getCurrentTransformInverse=ee,e.getFilenameFromUrl=_,e.getPdfFilenameFromUrl=R,e.getRGB=N,e.getXfaPageViewport=Z,e.isDataScheme=y,e.isPdfFile=w,e.isValidFetchUrl=C,e.loadScript=D,e.noContextMenu=A,e.setLayerDimensions=te;var i=n(7),s=n(1);const o="http://www.w3.org/2000/svg";class c{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=c;class f extends i.BaseFilterFactory{#e;#t;#n;#i;#o;#s;#a;#l;#c;#r;#f=0;constructor({docId:O,ownerDocument:j=globalThis.document}={}){super(),this.#n=O,this.#i=j}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const O=this.#i.createElement("div"),{style:j}=O;j.visibility="hidden",j.contain="strict",j.width=j.height=0,j.position="absolute",j.top=j.left=0,j.zIndex=-1;const T=this.#i.createElementNS(o,"svg");T.setAttribute("width",0),T.setAttribute("height",0),this.#t=this.#i.createElementNS(o,"defs"),O.append(T),T.append(this.#t),this.#i.body.append(O)}return this.#t}addFilter(O){if(!O)return"none";let j=this.#d.get(O);if(j)return j;let T,E,M,U;if(O.length===1){const P=O[0],V=new Array(256);for(let L=0;L<256;L++)V[L]=P[L]/255;U=T=E=M=V.join(",")}else{const[P,V,L]=O,Y=new Array(256),ne=new Array(256),re=new Array(256);for(let le=0;le<256;le++)Y[le]=P[le]/255,ne[le]=V[le]/255,re[le]=L[le]/255;T=Y.join(","),E=ne.join(","),M=re.join(","),U=`${T}${E}${M}`}if(j=this.#d.get(U),j)return this.#d.set(O,j),j;const $=`g_${this.#n}_transfer_map_${this.#f++}`,z=`url(#${$})`;this.#d.set(O,z),this.#d.set(U,z);const q=this.#v($);return this.#m(T,E,M,q),z}addHCMFilter(O,j){const T=`${O}-${j}`;if(this.#s===T)return this.#a;if(this.#s=T,this.#a="none",this.#o?.remove(),!O||!j)return this.#a;const E=this.#u(O);O=s.Util.makeHexColor(...E);const M=this.#u(j);if(j=s.Util.makeHexColor(...M),this.#h.style.color="",O==="#000000"&&j==="#ffffff"||O===j)return this.#a;const U=new Array(256);for(let V=0;V<=255;V++){const L=V/255;U[V]=L<=.03928?L/12.92:((L+.055)/1.055)**2.4}const $=U.join(","),z=`g_${this.#n}_hcm_filter`,q=this.#l=this.#v(z);this.#m($,$,$,q),this.#p(q);const P=(V,L)=>{const Y=E[V]/255,ne=M[V]/255,re=new Array(L+1);for(let le=0;le<=L;le++)re[le]=Y+le/L*(ne-Y);return re.join(",")};return this.#m(P(0,5),P(1,5),P(2,5),q),this.#a=`url(#${z})`,this.#a}addHighlightHCMFilter(O,j,T,E){const M=`${O}-${j}-${T}-${E}`;if(this.#c===M)return this.#r;if(this.#c=M,this.#r="none",this.#l?.remove(),!O||!j)return this.#r;const[U,$]=[O,j].map(this.#u.bind(this));let z=Math.round(.2126*U[0]+.7152*U[1]+.0722*U[2]),q=Math.round(.2126*$[0]+.7152*$[1]+.0722*$[2]),[P,V]=[T,E].map(this.#u.bind(this));q<z&&([z,q,P,V]=[q,z,V,P]),this.#h.style.color="";const L=(re,le,_e)=>{const Fe=new Array(256),we=(q-z)/_e,Te=re/255,Re=(le-re)/(255*_e);let fe=0;for(let be=0;be<=_e;be++){const Ue=Math.round(z+be*we),Ne=Te+be*Re;for(let Be=fe;Be<=Ue;Be++)Fe[Be]=Ne;fe=Ue+1}for(let be=fe;be<256;be++)Fe[be]=Fe[fe-1];return Fe.join(",")},Y=`g_${this.#n}_hcm_highlight_filter`,ne=this.#l=this.#v(Y);return this.#p(ne),this.#m(L(P[0],V[0],5),L(P[1],V[1],5),L(P[2],V[2],5),ne),this.#r=`url(#${Y})`,this.#r}destroy(O=!1){O&&(this.#a||this.#r)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(O){const j=this.#i.createElementNS(o,"feColorMatrix");j.setAttribute("type","matrix"),j.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),O.append(j)}#v(O){const j=this.#i.createElementNS(o,"filter");return j.setAttribute("color-interpolation-filters","sRGB"),j.setAttribute("id",O),this.#h.append(j),j}#g(O,j,T){const E=this.#i.createElementNS(o,j);E.setAttribute("type","discrete"),E.setAttribute("tableValues",T),O.append(E)}#m(O,j,T,E){const M=this.#i.createElementNS(o,"feComponentTransfer");E.append(M),this.#g(M,"feFuncR",O),this.#g(M,"feFuncG",j),this.#g(M,"feFuncB",T)}#u(O){return this.#h.style.color=O,N(getComputedStyle(this.#h).getPropertyValue("color"))}}e.DOMFilterFactory=f;class p extends i.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,j){const T=this._document.createElement("canvas");return T.width=O,T.height=j,T}}e.DOMCanvasFactory=p;async function d(W,O=!1){if(C(W,document.baseURI)){const j=await fetch(W);if(!j.ok)throw new Error(j.statusText);return O?new Uint8Array(await j.arrayBuffer()):(0,s.stringToBytes)(await j.text())}return new Promise((j,T)=>{const E=new XMLHttpRequest;E.open("GET",W,!0),O&&(E.responseType="arraybuffer"),E.onreadystatechange=()=>{if(E.readyState===XMLHttpRequest.DONE){if(E.status===200||E.status===0){let M;if(O&&E.response?M=new Uint8Array(E.response):!O&&E.responseText&&(M=(0,s.stringToBytes)(E.responseText)),M){j(M);return}}T(new Error(E.statusText))}},E.send(null)})}class u extends i.BaseCMapReaderFactory{_fetchData(O,j){return d(O,this.isCompressed).then(T=>({cMapData:T,compressionType:j}))}}e.DOMCMapReaderFactory=u;class m extends i.BaseStandardFontDataFactory{_fetchData(O){return d(O,!0)}}e.DOMStandardFontDataFactory=m;class v extends i.BaseSVGFactory{_createSVG(O){return document.createElementNS(o,O)}}e.DOMSVGFactory=v;class b{constructor({viewBox:O,scale:j,rotation:T,offsetX:E=0,offsetY:M=0,dontFlip:U=!1}){this.viewBox=O,this.scale=j,this.rotation=T,this.offsetX=E,this.offsetY=M;const $=(O[2]+O[0])/2,z=(O[3]+O[1])/2;let q,P,V,L;switch(T%=360,T<0&&(T+=360),T){case 180:q=-1,P=0,V=0,L=1;break;case 90:q=0,P=1,V=1,L=0;break;case 270:q=0,P=-1,V=-1,L=0;break;case 0:q=1,P=0,V=0,L=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}U&&(V=-V,L=-L);let Y,ne,re,le;q===0?(Y=Math.abs(z-O[1])*j+E,ne=Math.abs($-O[0])*j+M,re=(O[3]-O[1])*j,le=(O[2]-O[0])*j):(Y=Math.abs($-O[0])*j+E,ne=Math.abs(z-O[1])*j+M,re=(O[2]-O[0])*j,le=(O[3]-O[1])*j),this.transform=[q*j,P*j,V*j,L*j,Y-q*j*$-V*j*z,ne-P*j*$-L*j*z],this.width=re,this.height=le}get rawDims(){const{viewBox:O}=this;return(0,s.shadow)(this,"rawDims",{pageWidth:O[2]-O[0],pageHeight:O[3]-O[1],pageX:O[0],pageY:O[1]})}clone({scale:O=this.scale,rotation:j=this.rotation,offsetX:T=this.offsetX,offsetY:E=this.offsetY,dontFlip:M=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:O,rotation:j,offsetX:T,offsetY:E,dontFlip:M})}convertToViewportPoint(O,j){return s.Util.applyTransform([O,j],this.transform)}convertToViewportRectangle(O){const j=s.Util.applyTransform([O[0],O[1]],this.transform),T=s.Util.applyTransform([O[2],O[3]],this.transform);return[j[0],j[1],T[0],T[1]]}convertToPdfPoint(O,j){return s.Util.applyInverseTransform([O,j],this.transform)}}e.PageViewport=b;class g extends s.BaseException{constructor(O,j=0){super(O,"RenderingCancelledException"),this.extraDelay=j}}e.RenderingCancelledException=g;function y(W){const O=W.length;let j=0;for(;j<O&&W[j].trim()==="";)j++;return W.substring(j,j+5).toLowerCase()==="data:"}function w(W){return typeof W=="string"&&/\.pdf$/i.test(W)}function _(W,O=!1){return O||([W]=W.split(/[#?]/,1)),W.substring(W.lastIndexOf("/")+1)}function R(W,O="document.pdf"){if(typeof W!="string")return O;if(y(W))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;const j=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,T=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,E=j.exec(W);let M=T.exec(E[1])||T.exec(E[2])||T.exec(E[3]);if(M&&(M=M[0],M.includes("%")))try{M=T.exec(decodeURIComponent(M))[0]}catch{}return M||O}class k{started=Object.create(null);times=[];time(O){O in this.started&&(0,s.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,s.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){const O=[];let j=0;for(const{name:T}of this.times)j=Math.max(T.length,j);for(const{name:T,start:E,end:M}of this.times)O.push(`${T.padEnd(j)} ${M-E}ms
`);return O.join("")}}e.StatTimer=k;function C(W,O){try{const{protocol:j}=O?new URL(W,O):new URL(W);return j==="http:"||j==="https:"}catch{return!1}}function A(W){W.preventDefault()}function D(W,O=!1){return new Promise((j,T)=>{const E=document.createElement("script");E.src=W,E.onload=function(M){O&&E.remove(),j(M)},E.onerror=function(){T(new Error(`Cannot load script at: ${E.src}`))},(document.head||document.documentElement).append(E)})}function H(W){console.log("Deprecated API usage: "+W)}let I;class F{static toDateObject(O){if(!O||typeof O!="string")return null;I||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const j=I.exec(O);if(!j)return null;const T=parseInt(j[1],10);let E=parseInt(j[2],10);E=E>=1&&E<=12?E-1:0;let M=parseInt(j[3],10);M=M>=1&&M<=31?M:1;let U=parseInt(j[4],10);U=U>=0&&U<=23?U:0;let $=parseInt(j[5],10);$=$>=0&&$<=59?$:0;let z=parseInt(j[6],10);z=z>=0&&z<=59?z:0;const q=j[7]||"Z";let P=parseInt(j[8],10);P=P>=0&&P<=23?P:0;let V=parseInt(j[9],10)||0;return V=V>=0&&V<=59?V:0,q==="-"?(U+=P,$+=V):q==="+"&&(U-=P,$-=V),new Date(Date.UTC(T,E,M,U,$,z))}}e.PDFDateString=F;function Z(W,{scale:O=1,rotation:j=0}){const{width:T,height:E}=W.attributes.style,M=[0,0,parseInt(T),parseInt(E)];return new b({viewBox:M,scale:O,rotation:j})}function N(W){if(W.startsWith("#")){const O=parseInt(W.slice(1),16);return[(O&16711680)>>16,(O&65280)>>8,O&255]}return W.startsWith("rgb(")?W.slice(4,-1).split(",").map(O=>parseInt(O)):W.startsWith("rgba(")?W.slice(5,-1).split(",").map(O=>parseInt(O)).slice(0,3):((0,s.warn)(`Not a valid color format: "${W}"`),[0,0,0])}function G(W){const O=document.createElement("span");O.style.visibility="hidden",document.body.append(O);for(const j of W.keys()){O.style.color=j;const T=window.getComputedStyle(O).color;W.set(j,N(T))}O.remove()}function J(W){const{a:O,b:j,c:T,d:E,e:M,f:U}=W.getTransform();return[O,j,T,E,M,U]}function ee(W){const{a:O,b:j,c:T,d:E,e:M,f:U}=W.getTransform().invertSelf();return[O,j,T,E,M,U]}function te(W,O,j=!1,T=!0){if(O instanceof b){const{pageWidth:E,pageHeight:M}=O.rawDims,{style:U}=W,$=s.FeatureTest.isCSSRoundSupported,z=`var(--scale-factor) * ${E}px`,q=`var(--scale-factor) * ${M}px`,P=$?`round(${z}, 1px)`:`calc(${z})`,V=$?`round(${q}, 1px)`:`calc(${q})`;!j||O.rotation%180===0?(U.width=P,U.height=V):(U.width=V,U.height=P)}T&&W.setAttribute("data-main-rotation",O.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=n(1);class s{constructor(){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(u){return"none"}addHCMFilter(u,m){return"none"}addHighlightHCMFilter(u,m,v,b){return"none"}destroy(u=!1){}}e.BaseFilterFactory=s;class o{constructor(){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,m){if(u<=0||m<=0)throw new Error("Invalid canvas size");const v=this._createCanvas(u,m);return{canvas:v,context:v.getContext("2d")}}reset(u,m,v){if(!u.canvas)throw new Error("Canvas is not specified");if(m<=0||v<=0)throw new Error("Invalid canvas size");u.canvas.width=m,u.canvas.height=v}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,m){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=o;class c{constructor({baseUrl:u=null,isCompressed:m=!0}){this.constructor===c&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=m}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const m=this.baseUrl+u+(this.isCompressed?".bcmap":""),v=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(m,v).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${m}`)})}_fetchData(u,m){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=c;class f{constructor({baseUrl:u=null}){this.constructor===f&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const m=`${this.baseUrl}${u}`;return this._fetchData(m).catch(v=>{throw new Error(`Unable to load font data at: ${m}`)})}_fetchData(u){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=f;class p{constructor(){this.constructor===p&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,m,v=!1){if(u<=0||m<=0)throw new Error("Invalid SVG dimensions");const b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),v||(b.setAttribute("width",`${u}px`),b.setAttribute("height",`${m}px`)),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${u} ${m}`),b}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=p},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=n(1);const s=3285377520,o=4294901760,c=65535;class f{constructor(d){this.h1=d?d&4294967295:s,this.h2=d?d&4294967295:s}update(d){let u,m;if(typeof d=="string"){u=new Uint8Array(d.length*2),m=0;for(let H=0,I=d.length;H<I;H++){const F=d.charCodeAt(H);F<=255?u[m++]=F:(u[m++]=F>>>8,u[m++]=F&255)}}else if((0,i.isArrayBuffer)(d))u=d.slice(),m=u.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const v=m>>2,b=m-v*4,g=new Uint32Array(u.buffer,0,v);let y=0,w=0,_=this.h1,R=this.h2;const k=3432918353,C=461845907,A=k&c,D=C&c;for(let H=0;H<v;H++)H&1?(y=g[H],y=y*k&o|y*A&c,y=y<<15|y>>>17,y=y*C&o|y*D&c,_^=y,_=_<<13|_>>>19,_=_*5+3864292196):(w=g[H],w=w*k&o|w*A&c,w=w<<15|w>>>17,w=w*C&o|w*D&c,R^=w,R=R<<13|R>>>19,R=R*5+3864292196);switch(y=0,b){case 3:y^=u[v*4+2]<<16;case 2:y^=u[v*4+1]<<8;case 1:y^=u[v*4],y=y*k&o|y*A&c,y=y<<15|y>>>17,y=y*C&o|y*D&c,v&1?_^=y:R^=y}this.h1=_,this.h2=R}hexdigest(){let d=this.h1,u=this.h2;return d^=u>>>1,d=d*3981806797&o|d*36045&c,u=u*4283543511&o|((u<<16|d>>>16)*2950163797&o)>>>16,d^=u>>>1,d=d*444984403&o|d*60499&c,u=u*3301882366&o|((u<<16|d>>>16)*3120437893&o)>>>16,d^=u>>>1,(d>>>0).toString(16).padStart(8,"0")+(u>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=n(1);class s{#e=new Set;constructor({ownerDocument:f=globalThis.document,styleElement:p=null}){this._document=f,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(f){this.nativeFontFaces.add(f),this._document.fonts.add(f)}removeNativeFontFace(f){this.nativeFontFaces.delete(f),this._document.fonts.delete(f)}insertRule(f){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const p=this.styleElement.sheet;p.insertRule(f,p.cssRules.length)}clear(){for(const f of this.nativeFontFaces)this._document.fonts.delete(f);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(f){if(!(!f||this.#e.has(f.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:p,src:d,style:u}=f,m=new FontFace(p,d,u);this.addNativeFontFace(m);try{await m.load(),this.#e.add(p)}catch{(0,i.warn)(`Cannot load system font: ${f.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(m)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(f){if(f.attached||f.missingFile&&!f.systemFontInfo)return;if(f.attached=!0,f.systemFontInfo){await this.loadSystemFont(f.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=f.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(u){throw(0,i.warn)(`Failed to load font '${d.family}': '${u}'.`),f.disableFontFace=!0,u}}return}const p=f.createFontFaceRule();if(p){if(this.insertRule(p),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const u=this._queueLoadingCallback(d);this._prepareFontLoadEvent(f,u)})}}get isFontLoadingAPISupported(){const f=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",f)}get isSyncFontLoadingSupported(){let f=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(f=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",f)}_queueLoadingCallback(f){function p(){for((0,i.assert)(!u.done,"completeRequest() cannot be called twice."),u.done=!0;d.length>0&&d[0].done;){const m=d.shift();setTimeout(m.callback,0)}}const{loadingRequests:d}=this,u={done:!1,complete:p,callback:f};return d.push(u),u}get _loadTestFont(){const f=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",f)}_prepareFontLoadEvent(f,p){function d(Z,N){return Z.charCodeAt(N)<<24|Z.charCodeAt(N+1)<<16|Z.charCodeAt(N+2)<<8|Z.charCodeAt(N+3)&255}function u(Z,N,G,J){const ee=Z.substring(0,N),te=Z.substring(N+G);return ee+J+te}let m,v;const b=this._document.createElement("canvas");b.width=1,b.height=1;const g=b.getContext("2d");let y=0;function w(Z,N){if(++y>30){(0,i.warn)("Load test font never loaded."),N();return}if(g.font="30px "+Z,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(w.bind(null,Z,N))}const _=`lt${Date.now()}${this.loadTestFontId++}`;let R=this._loadTestFont;R=u(R,976,_.length,_);const C=16,A=1482184792;let D=d(R,C);for(m=0,v=_.length-3;m<v;m+=4)D=D-A+d(_,m)|0;m<_.length&&(D=D-A+d(_+"XXX",m)|0),R=u(R,C,4,(0,i.string32)(D));const H=`url(data:font/opentype;base64,${btoa(R)});`,I=`@font-face {font-family:"${_}";src:${H}}`;this.insertRule(I);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const Z of[f.loadedName,_]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=Z,F.append(N)}this._document.body.append(F),w(_,()=>{F.remove(),p.complete()})}}e.FontLoader=s;class o{constructor(f,{isEvalSupported:p=!0,disableFontFace:d=!1,ignoreErrors:u=!1,inspectFont:m=null}){this.compiledGlyphs=Object.create(null);for(const v in f)this[v]=f[v];this.isEvalSupported=p!==!1,this.disableFontFace=d===!0,this.ignoreErrors=u===!0,this._inspectFont=m}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let f;if(!this.cssFontInfo)f=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),f=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return this._inspectFont?.(this),f}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const f=(0,i.bytesToString)(this.data),p=`url(data:${this.mimetype};base64,${btoa(f)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${p}}`;else{let u=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(u+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${u}src:${p}}`}return this._inspectFont?.(this,p),d}getPathGenerator(f,p){if(this.compiledGlyphs[p]!==void 0)return this.compiledGlyphs[p];let d;try{d=f.get(this.loadedName+"_path_"+p)}catch(u){if(!this.ignoreErrors)throw u;return(0,i.warn)(`getPathGenerator - ignoring character: "${u}".`),this.compiledGlyphs[p]=function(m,v){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const u=[];for(const m of d){const v=m.args!==void 0?m.args.join(","):"";u.push("c.",m.cmd,"(",v,`);
`)}return this.compiledGlyphs[p]=new Function("c","size",u.join(""))}return this.compiledGlyphs[p]=function(u,m){for(const v of d)v.cmd==="scale"&&(v.args=[m,-m]),u[v.cmd].apply(u,v.args)}}}e.FontFaceObject=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=n(7);n(1);const s=function(d){return new Promise((u,m)=>{require$$5.readFile(d,(b,g)=>{if(b||!g){m(new Error(b));return}u(new Uint8Array(g))})})};class o extends i.BaseFilterFactory{}e.NodeFilterFactory=o;class c extends i.BaseCanvasFactory{_createCanvas(u,m){return require$$5.createCanvas(u,m)}}e.NodeCanvasFactory=c;class f extends i.BaseCMapReaderFactory{_fetchData(u,m){return s(u).then(v=>({cMapData:v,compressionType:m}))}}e.NodeCMapReaderFactory=f;class p extends i.BaseStandardFontDataFactory{_fetchData(u){return s(u)}}e.NodeStandardFontDataFactory=p},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=n(1),s=n(6),o=n(12),c=n(13);const f=16,p=100,d=4096,u=15,m=10,v=1e3,b=16;function g(j,T){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){T.save(),this.__originalSave()},j.restore=function(){T.restore(),this.__originalRestore()},j.translate=function(M,U){T.translate(M,U),this.__originalTranslate(M,U)},j.scale=function(M,U){T.scale(M,U),this.__originalScale(M,U)},j.transform=function(M,U,$,z,q,P){T.transform(M,U,$,z,q,P),this.__originalTransform(M,U,$,z,q,P)},j.setTransform=function(M,U,$,z,q,P){T.setTransform(M,U,$,z,q,P),this.__originalSetTransform(M,U,$,z,q,P)},j.resetTransform=function(){T.resetTransform(),this.__originalResetTransform()},j.rotate=function(M){T.rotate(M),this.__originalRotate(M)},j.clip=function(M){T.clip(M),this.__originalClip(M)},j.moveTo=function(E,M){T.moveTo(E,M),this.__originalMoveTo(E,M)},j.lineTo=function(E,M){T.lineTo(E,M),this.__originalLineTo(E,M)},j.bezierCurveTo=function(E,M,U,$,z,q){T.bezierCurveTo(E,M,U,$,z,q),this.__originalBezierCurveTo(E,M,U,$,z,q)},j.rect=function(E,M,U,$){T.rect(E,M,U,$),this.__originalRect(E,M,U,$)},j.closePath=function(){T.closePath(),this.__originalClosePath()},j.beginPath=function(){T.beginPath(),this.__originalBeginPath()}}class y{constructor(T){this.canvasFactory=T,this.cache=Object.create(null)}getCanvas(T,E,M){let U;return this.cache[T]!==void 0?(U=this.cache[T],this.canvasFactory.reset(U,E,M)):(U=this.canvasFactory.create(E,M),this.cache[T]=U),U}delete(T){delete this.cache[T]}clear(){for(const T in this.cache){const E=this.cache[T];this.canvasFactory.destroy(E),delete this.cache[T]}}}function w(j,T,E,M,U,$,z,q,P,V){const[L,Y,ne,re,le,_e]=(0,s.getCurrentTransform)(j);if(Y===0&&ne===0){const Te=z*L+le,Re=Math.round(Te),fe=q*re+_e,be=Math.round(fe),Ue=(z+P)*L+le,Ne=Math.abs(Math.round(Ue)-Re)||1,Be=(q+V)*re+_e,Ke=Math.abs(Math.round(Be)-be)||1;return j.setTransform(Math.sign(L),0,0,Math.sign(re),Re,be),j.drawImage(T,E,M,U,$,0,0,Ne,Ke),j.setTransform(L,Y,ne,re,le,_e),[Ne,Ke]}if(L===0&&re===0){const Te=q*ne+le,Re=Math.round(Te),fe=z*Y+_e,be=Math.round(fe),Ue=(q+V)*ne+le,Ne=Math.abs(Math.round(Ue)-Re)||1,Be=(z+P)*Y+_e,Ke=Math.abs(Math.round(Be)-be)||1;return j.setTransform(0,Math.sign(Y),Math.sign(ne),0,Re,be),j.drawImage(T,E,M,U,$,0,0,Ke,Ne),j.setTransform(L,Y,ne,re,le,_e),[Ke,Ne]}j.drawImage(T,E,M,U,$,z,q,P,V);const Fe=Math.hypot(L,Y),we=Math.hypot(ne,re);return[Fe*P,we*V]}function _(j){const{width:T,height:E}=j;if(T>v||E>v)return null;const M=1e3,U=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),$=T+1;let z=new Uint8Array($*(E+1)),q,P,V;const L=T+7&-8;let Y=new Uint8Array(L*E),ne=0;for(const we of j.data){let Te=128;for(;Te>0;)Y[ne++]=we&Te?0:255,Te>>=1}let re=0;for(ne=0,Y[ne]!==0&&(z[0]=1,++re),P=1;P<T;P++)Y[ne]!==Y[ne+1]&&(z[P]=Y[ne]?2:1,++re),ne++;for(Y[ne]!==0&&(z[P]=2,++re),q=1;q<E;q++){ne=q*L,V=q*$,Y[ne-L]!==Y[ne]&&(z[V]=Y[ne]?1:8,++re);let we=(Y[ne]?4:0)+(Y[ne-L]?8:0);for(P=1;P<T;P++)we=(we>>2)+(Y[ne+1]?4:0)+(Y[ne-L+1]?8:0),U[we]&&(z[V+P]=U[we],++re),ne++;if(Y[ne-L]!==Y[ne]&&(z[V+P]=Y[ne]?2:4,++re),re>M)return null}for(ne=L*(E-1),V=q*$,Y[ne]!==0&&(z[V]=8,++re),P=1;P<T;P++)Y[ne]!==Y[ne+1]&&(z[V+P]=Y[ne]?4:8,++re),ne++;if(Y[ne]!==0&&(z[V+P]=4,++re),re>M)return null;const le=new Int32Array([0,$,-1,0,-$,0,0,0,1]),_e=new Path2D;for(q=0;re&&q<=E;q++){let we=q*$;const Te=we+T;for(;we<Te&&!z[we];)we++;if(we===Te)continue;_e.moveTo(we%$,q);const Re=we;let fe=z[we];do{const be=le[fe];do we+=be;while(!z[we]);const Ue=z[we];Ue!==5&&Ue!==10?(fe=Ue,z[we]=0):(fe=Ue&51*fe>>4,z[we]&=fe>>2|fe<<2),_e.lineTo(we%$,we/$|0),z[we]||--re}while(Re!==we);--q}return Y=null,z=null,function(we){we.save(),we.scale(1/T,-1/E),we.translate(0,-E),we.fill(_e),we.beginPath(),we.restore()}}class R{constructor(T,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,T,E])}clone(){const T=Object.create(this);return T.clipBox=this.clipBox.slice(),T}setCurrentPoint(T,E){this.x=T,this.y=E}updatePathMinMax(T,E,M){[E,M]=i.Util.applyTransform([E,M],T),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(T,E){const M=i.Util.applyTransform(E,T),U=i.Util.applyTransform(E.slice(2),T);this.minX=Math.min(this.minX,M[0],U[0]),this.minY=Math.min(this.minY,M[1],U[1]),this.maxX=Math.max(this.maxX,M[0],U[0]),this.maxY=Math.max(this.maxY,M[1],U[1])}updateScalingPathMinMax(T,E){i.Util.scaleMinMax(T,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(T,E,M,U,$,z,q,P,V,L){const Y=i.Util.bezierBoundingBox(E,M,U,$,z,q,P,V);if(L){L[0]=Math.min(L[0],Y[0],Y[2]),L[1]=Math.max(L[1],Y[0],Y[2]),L[2]=Math.min(L[2],Y[1],Y[3]),L[3]=Math.max(L[3],Y[1],Y[3]);return}this.updateRectMinMax(T,Y)}getPathBoundingBox(T=o.PathType.FILL,E=null){const M=[this.minX,this.minY,this.maxX,this.maxY];if(T===o.PathType.STROKE){E||(0,i.unreachable)("Stroke bounding box must include transform.");const U=i.Util.singularValueDecompose2dScale(E),$=U[0]*this.lineWidth/2,z=U[1]*this.lineWidth/2;M[0]-=$,M[1]-=z,M[2]+=$,M[3]+=z}return M}updateClipFromPath(){const T=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(T||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(T){this.clipBox=T,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(T=o.PathType.FILL,E=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(T,E))}}function k(j,T){if(typeof ImageData<"u"&&T instanceof ImageData){j.putImageData(T,0,0);return}const E=T.height,M=T.width,U=E%b,$=(E-U)/b,z=U===0?$:$+1,q=j.createImageData(M,b);let P=0,V;const L=T.data,Y=q.data;let ne,re,le,_e;if(T.kind===i.ImageKind.GRAYSCALE_1BPP){const Fe=L.byteLength,we=new Uint32Array(Y.buffer,0,Y.byteLength>>2),Te=we.length,Re=M+7>>3,fe=4294967295,be=i.FeatureTest.isLittleEndian?4278190080:255;for(ne=0;ne<z;ne++){for(le=ne<$?b:U,V=0,re=0;re<le;re++){const Ue=Fe-P;let Ne=0;const Be=Ue>Re?M:Ue*8-7,Ke=Be&-8;let ke=0,He=0;for(;Ne<Ke;Ne+=8)He=L[P++],we[V++]=He&128?fe:be,we[V++]=He&64?fe:be,we[V++]=He&32?fe:be,we[V++]=He&16?fe:be,we[V++]=He&8?fe:be,we[V++]=He&4?fe:be,we[V++]=He&2?fe:be,we[V++]=He&1?fe:be;for(;Ne<Be;Ne++)ke===0&&(He=L[P++],ke=128),we[V++]=He&ke?fe:be,ke>>=1}for(;V<Te;)we[V++]=0;j.putImageData(q,0,ne*b)}}else if(T.kind===i.ImageKind.RGBA_32BPP){for(re=0,_e=M*b*4,ne=0;ne<$;ne++)Y.set(L.subarray(P,P+_e)),P+=_e,j.putImageData(q,0,re),re+=b;ne<z&&(_e=M*U*4,Y.set(L.subarray(P,P+_e)),j.putImageData(q,0,re))}else if(T.kind===i.ImageKind.RGB_24BPP)for(le=b,_e=M*le,ne=0;ne<z;ne++){for(ne>=$&&(le=U,_e=M*le),V=0,re=_e;re--;)Y[V++]=L[P++],Y[V++]=L[P++],Y[V++]=L[P++],Y[V++]=255;j.putImageData(q,0,ne*b)}else throw new Error(`bad image kind: ${T.kind}`)}function C(j,T){if(T.bitmap){j.drawImage(T.bitmap,0,0);return}const E=T.height,M=T.width,U=E%b,$=(E-U)/b,z=U===0?$:$+1,q=j.createImageData(M,b);let P=0;const V=T.data,L=q.data;for(let Y=0;Y<z;Y++){const ne=Y<$?b:U;({srcPos:P}=(0,c.convertBlackAndWhiteToRGBA)({src:V,srcPos:P,dest:L,width:M,height:ne,nonBlackColor:0})),j.putImageData(q,0,Y*b)}}function A(j,T){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const M of E)j[M]!==void 0&&(T[M]=j[M]);j.setLineDash!==void 0&&(T.setLineDash(j.getLineDash()),T.lineDashOffset=j.lineDashOffset)}function D(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!i.isNodeJS){const{filter:T}=j;T!=="none"&&T!==""&&(j.filter="none")}}function H(j,T,E,M){const U=j.length;for(let $=3;$<U;$+=4){const z=j[$];if(z===0)j[$-3]=T,j[$-2]=E,j[$-1]=M;else if(z<255){const q=255-z;j[$-3]=j[$-3]*z+T*q>>8,j[$-2]=j[$-2]*z+E*q>>8,j[$-1]=j[$-1]*z+M*q>>8}}}function I(j,T,E){const M=j.length,U=1/255;for(let $=3;$<M;$+=4){const z=E?E[j[$]]:j[$];T[$]=T[$]*z*U|0}}function F(j,T,E){const M=j.length;for(let U=3;U<M;U+=4){const $=j[U-3]*77+j[U-2]*152+j[U-1]*28;T[U]=E?T[U]*E[$>>8]>>8:T[U]*$>>16}}function Z(j,T,E,M,U,$,z,q,P,V,L){const Y=!!$,ne=Y?$[0]:0,re=Y?$[1]:0,le=Y?$[2]:0,_e=U==="Luminosity"?F:I,we=Math.min(M,Math.ceil(1048576/E));for(let Te=0;Te<M;Te+=we){const Re=Math.min(we,M-Te),fe=j.getImageData(q-V,Te+(P-L),E,Re),be=T.getImageData(q,Te+P,E,Re);Y&&H(fe.data,ne,re,le),_e(fe.data,be.data,z),T.putImageData(be,q,Te+P)}}function N(j,T,E,M){const U=M[0],$=M[1],z=M[2]-U,q=M[3]-$;z===0||q===0||(Z(T.context,E,z,q,T.subtype,T.backdrop,T.transferMap,U,$,T.offsetX,T.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(E.canvas,0,0),j.restore())}function G(j,T){const E=i.Util.singularValueDecompose2dScale(j);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const M=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return T!==void 0?T:E[0]<=M||E[1]<=M}const J=["butt","round","square"],ee=["miter","round","bevel"],te={},W={};class O{constructor(T,E,M,U,$,{optionalContentConfig:z,markedContentStack:q=null},P,V){this.ctx=T,this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=M,this.canvasFactory=U,this.filterFactory=$,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=q||[],this.optionalContentConfig=z,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=P,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=V,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(T,E=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):E}beginDrawing({transform:T,viewport:E,transparency:M=!1,background:U=null}){const $=this.ctx.canvas.width,z=this.ctx.canvas.height,q=this.ctx.fillStyle;if(this.ctx.fillStyle=U||"#ffffff",this.ctx.fillRect(0,0,$,z),this.ctx.fillStyle=q,M){const P=this.cachedCanvases.getCanvas("transparent",$,z);this.compositeCtx=this.ctx,this.transparentCanvas=P.canvas,this.ctx=P.context,this.ctx.save(),this.ctx.transform(...(0,s.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),D(this.ctx),T&&(this.ctx.transform(...T),this.outputScaleX=T[0],this.outputScaleY=T[0]),this.ctx.transform(...E.transform),this.viewportScale=E.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}executeOperatorList(T,E,M,U){const $=T.argsArray,z=T.fnArray;let q=E||0;const P=$.length;if(P===q)return q;const V=P-q>m&&typeof M=="function",L=V?Date.now()+u:0;let Y=0;const ne=this.commonObjs,re=this.objs;let le;for(;;){if(U!==void 0&&q===U.nextBreakPoint)return U.breakIt(q,M),q;if(le=z[q],le!==i.OPS.dependency)this[le].apply(this,$[q]);else for(const _e of $[q]){const Fe=_e.startsWith("g_")?ne:re;if(!Fe.has(_e))return Fe.get(_e,M),q}if(q++,q===P)return q;if(V&&++Y>m){if(Date.now()>L)return M(),q;Y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const T of this._cachedBitmapsMap.values()){for(const E of T.values())typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);T.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const T=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(T!=="none"){const E=this.ctx.filter;this.ctx.filter=T,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=E}}}_scaleImage(T,E){const M=T.width,U=T.height;let $=Math.max(Math.hypot(E[0],E[1]),1),z=Math.max(Math.hypot(E[2],E[3]),1),q=M,P=U,V="prescale1",L,Y;for(;$>2&&q>1||z>2&&P>1;){let ne=q,re=P;$>2&&q>1&&(ne=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q/2),$/=q/ne),z>2&&P>1&&(re=P>=16384?Math.floor(P/2)-1||1:Math.ceil(P)/2,z/=P/re),L=this.cachedCanvases.getCanvas(V,ne,re),Y=L.context,Y.clearRect(0,0,ne,re),Y.drawImage(T,0,0,q,P,0,0,ne,re),T=L.canvas,q=ne,P=re,V=V==="prescale1"?"prescale2":"prescale1"}return{img:T,paintWidth:q,paintHeight:P}}_createMaskCanvas(T){const E=this.ctx,{width:M,height:U}=T,$=this.current.fillColor,z=this.current.patternFill,q=(0,s.getCurrentTransform)(E);let P,V,L,Y;if((T.bitmap||T.data)&&T.count>1){const Ne=T.bitmap||T.data.buffer;V=JSON.stringify(z?q:[q.slice(0,4),$]),P=this._cachedBitmapsMap.get(Ne),P||(P=new Map,this._cachedBitmapsMap.set(Ne,P));const Be=P.get(V);if(Be&&!z){const Ke=Math.round(Math.min(q[0],q[2])+q[4]),ke=Math.round(Math.min(q[1],q[3])+q[5]);return{canvas:Be,offsetX:Ke,offsetY:ke}}L=Be}L||(Y=this.cachedCanvases.getCanvas("maskCanvas",M,U),C(Y.context,T));let ne=i.Util.transform(q,[1/M,0,0,-1/U,0,0]);ne=i.Util.transform(ne,[1,0,0,1,0,-U]);const re=i.Util.applyTransform([0,0],ne),le=i.Util.applyTransform([M,U],ne),_e=i.Util.normalizeRect([re[0],re[1],le[0],le[1]]),Fe=Math.round(_e[2]-_e[0])||1,we=Math.round(_e[3]-_e[1])||1,Te=this.cachedCanvases.getCanvas("fillCanvas",Fe,we),Re=Te.context,fe=Math.min(re[0],le[0]),be=Math.min(re[1],le[1]);Re.translate(-fe,-be),Re.transform(...ne),L||(L=this._scaleImage(Y.canvas,(0,s.getCurrentTransformInverse)(Re)),L=L.img,P&&z&&P.set(V,L)),Re.imageSmoothingEnabled=G((0,s.getCurrentTransform)(Re),T.interpolate),w(Re,L,0,0,L.width,L.height,0,0,M,U),Re.globalCompositeOperation="source-in";const Ue=i.Util.transform((0,s.getCurrentTransformInverse)(Re),[1,0,0,1,-fe,-be]);return Re.fillStyle=z?$.getPattern(E,this,Ue,o.PathType.FILL):$,Re.fillRect(0,0,M,U),P&&!z&&(this.cachedCanvases.delete("fillCanvas"),P.set(V,Te.canvas)),{canvas:Te.canvas,offsetX:Math.round(fe),offsetY:Math.round(be)}}setLineWidth(T){T!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=T,this.ctx.lineWidth=T}setLineCap(T){this.ctx.lineCap=J[T]}setLineJoin(T){this.ctx.lineJoin=ee[T]}setMiterLimit(T){this.ctx.miterLimit=T}setDash(T,E){const M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(T),M.lineDashOffset=E)}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[E,M]of T)switch(E){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const T=this.inSMaskMode;this.current.activeSMask&&!T?this.beginSMaskMode():!this.current.activeSMask&&T&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.ctx.canvas.width,E=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,U=this.cachedCanvases.getCanvas(M,T,E);this.suspendedCtx=this.ctx,this.ctx=U.context;const $=this.ctx;$.setTransform(...(0,s.getCurrentTransform)(this.suspendedCtx)),A(this.suspendedCtx,$),g($,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),A(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(T){if(!this.current.activeSMask)return;T?(T[0]=Math.floor(T[0]),T[1]=Math.floor(T[1]),T[2]=Math.ceil(T[2]),T[3]=Math.ceil(T[3])):T=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const E=this.current.activeSMask,M=this.suspendedCtx;N(M,E,this.ctx,T),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(A(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const T=this.current;this.stateStack.push(T),this.current=T.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),A(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(T,E,M,U,$,z){this.ctx.transform(T,E,M,U,$,z),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(T,E,M){const U=this.ctx,$=this.current;let z=$.x,q=$.y,P,V;const L=(0,s.getCurrentTransform)(U),Y=L[0]===0&&L[3]===0||L[1]===0&&L[2]===0,ne=Y?M.slice(0):null;for(let re=0,le=0,_e=T.length;re<_e;re++)switch(T[re]|0){case i.OPS.rectangle:z=E[le++],q=E[le++];const Fe=E[le++],we=E[le++],Te=z+Fe,Re=q+we;U.moveTo(z,q),Fe===0||we===0?U.lineTo(Te,Re):(U.lineTo(Te,q),U.lineTo(Te,Re),U.lineTo(z,Re)),Y||$.updateRectMinMax(L,[z,q,Te,Re]),U.closePath();break;case i.OPS.moveTo:z=E[le++],q=E[le++],U.moveTo(z,q),Y||$.updatePathMinMax(L,z,q);break;case i.OPS.lineTo:z=E[le++],q=E[le++],U.lineTo(z,q),Y||$.updatePathMinMax(L,z,q);break;case i.OPS.curveTo:P=z,V=q,z=E[le+4],q=E[le+5],U.bezierCurveTo(E[le],E[le+1],E[le+2],E[le+3],z,q),$.updateCurvePathMinMax(L,P,V,E[le],E[le+1],E[le+2],E[le+3],z,q,ne),le+=6;break;case i.OPS.curveTo2:P=z,V=q,U.bezierCurveTo(z,q,E[le],E[le+1],E[le+2],E[le+3]),$.updateCurvePathMinMax(L,P,V,z,q,E[le],E[le+1],E[le+2],E[le+3],ne),z=E[le+2],q=E[le+3],le+=4;break;case i.OPS.curveTo3:P=z,V=q,z=E[le+2],q=E[le+3],U.bezierCurveTo(E[le],E[le+1],z,q,z,q),$.updateCurvePathMinMax(L,P,V,E[le],E[le+1],z,q,z,q,ne),le+=4;break;case i.OPS.closePath:U.closePath();break}Y&&$.updateScalingPathMinMax(L,ne),$.setCurrentPoint(z,q)}closePath(){this.ctx.closePath()}stroke(T=!0){const E=this.ctx,M=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&M?.getPattern?(E.save(),E.strokeStyle=M.getPattern(E,this,(0,s.getCurrentTransformInverse)(E),o.PathType.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),T&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(T=!0){const E=this.ctx,M=this.current.fillColor,U=this.current.patternFill;let $=!1;U&&(E.save(),E.fillStyle=M.getPattern(E,this,(0,s.getCurrentTransformInverse)(E),o.PathType.FILL),$=!0);const z=this.current.getClippedPathBoundingBox();this.contentVisible&&z!==null&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),$&&E.restore(),T&&this.consumePath(z)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=te}eoClip(){this.pendingClip=W}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const T=this.pendingTextPaths,E=this.ctx;if(T===void 0){E.beginPath();return}E.save(),E.beginPath();for(const M of T)E.setTransform(...M.transform),E.translate(M.x,M.y),M.addToPath(E,M.fontSize);E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}setCharSpacing(T){this.current.charSpacing=T}setWordSpacing(T){this.current.wordSpacing=T}setHScale(T){this.current.textHScale=T/100}setLeading(T){this.current.leading=-T}setFont(T,E){const M=this.commonObjs.get(T),U=this.current;if(!M)throw new Error(`Can't find font for ${T}`);if(U.fontMatrix=M.fontMatrix||i.FONT_IDENTITY_MATRIX,(U.fontMatrix[0]===0||U.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+T),E<0?(E=-E,U.fontDirection=-1):U.fontDirection=1,this.current.font=M,this.current.fontSize=E,M.isType3Font)return;const $=M.loadedName||"sans-serif",z=M.systemFontInfo?.css||`"${$}", ${M.fallbackName}`;let q="normal";M.black?q="900":M.bold&&(q="bold");const P=M.italic?"italic":"normal";let V=E;E<f?V=f:E>p&&(V=p),this.current.fontSizeScale=E/V,this.ctx.font=`${P} ${q} ${V}px ${z}`}setTextRenderingMode(T){this.current.textRenderingMode=T}setTextRise(T){this.current.textRise=T}moveText(T,E){this.current.x=this.current.lineX+=T,this.current.y=this.current.lineY+=E}setLeadingMoveText(T,E){this.setLeading(-E),this.moveText(T,E)}setTextMatrix(T,E,M,U,$,z){this.current.textMatrix=[T,E,M,U,$,z],this.current.textMatrixScale=Math.hypot(T,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(T,E,M,U){const $=this.ctx,z=this.current,q=z.font,P=z.textRenderingMode,V=z.fontSize/z.fontSizeScale,L=P&i.TextRenderingMode.FILL_STROKE_MASK,Y=!!(P&i.TextRenderingMode.ADD_TO_PATH_FLAG),ne=z.patternFill&&!q.missingFile;let re;(q.disableFontFace||Y||ne)&&(re=q.getPathGenerator(this.commonObjs,T)),q.disableFontFace||ne?($.save(),$.translate(E,M),$.beginPath(),re($,V),U&&$.setTransform(...U),(L===i.TextRenderingMode.FILL||L===i.TextRenderingMode.FILL_STROKE)&&$.fill(),(L===i.TextRenderingMode.STROKE||L===i.TextRenderingMode.FILL_STROKE)&&$.stroke(),$.restore()):((L===i.TextRenderingMode.FILL||L===i.TextRenderingMode.FILL_STROKE)&&$.fillText(T,E,M),(L===i.TextRenderingMode.STROKE||L===i.TextRenderingMode.FILL_STROKE)&&$.strokeText(T,E,M)),Y&&(this.pendingTextPaths||=[]).push({transform:(0,s.getCurrentTransform)($),x:E,y:M,fontSize:V,addToPath:re})}get isFontSubpixelAAEnabled(){const{context:T}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);T.scale(1.5,1),T.fillText("I",0,10);const E=T.getImageData(0,0,10,10).data;let M=!1;for(let U=3;U<E.length;U+=4)if(E[U]>0&&E[U]<255){M=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(T){const E=this.current,M=E.font;if(M.isType3Font)return this.showType3Text(T);const U=E.fontSize;if(U===0)return;const $=this.ctx,z=E.fontSizeScale,q=E.charSpacing,P=E.wordSpacing,V=E.fontDirection,L=E.textHScale*V,Y=T.length,ne=M.vertical,re=ne?1:-1,le=M.defaultVMetrics,_e=U*E.fontMatrix[0],Fe=E.textRenderingMode===i.TextRenderingMode.FILL&&!M.disableFontFace&&!E.patternFill;$.save(),$.transform(...E.textMatrix),$.translate(E.x,E.y+E.textRise),V>0?$.scale(L,-1):$.scale(L,1);let we;if(E.patternFill){$.save();const Ue=E.fillColor.getPattern($,this,(0,s.getCurrentTransformInverse)($),o.PathType.FILL);we=(0,s.getCurrentTransform)($),$.restore(),$.fillStyle=Ue}let Te=E.lineWidth;const Re=E.textMatrixScale;if(Re===0||Te===0){const Ue=E.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(Ue===i.TextRenderingMode.STROKE||Ue===i.TextRenderingMode.FILL_STROKE)&&(Te=this.getSinglePixelWidth())}else Te/=Re;if(z!==1&&($.scale(z,z),Te/=z),$.lineWidth=Te,M.isInvalidPDFjsFont){const Ue=[];let Ne=0;for(const Be of T)Ue.push(Be.unicode),Ne+=Be.width;$.fillText(Ue.join(""),0,0),E.x+=Ne*_e*L,$.restore(),this.compose();return}let fe=0,be;for(be=0;be<Y;++be){const Ue=T[be];if(typeof Ue=="number"){fe+=re*Ue*U/1e3;continue}let Ne=!1;const Be=(Ue.isSpace?P:0)+q,Ke=Ue.fontChar,ke=Ue.accent;let He,nt,Xe=Ue.width;if(ne){const pt=Ue.vmetric||le,Mt=-(Ue.vmetric?pt[1]:Xe*.5)*_e,jt=pt[2]*_e;Xe=pt?-pt[0]:Xe,He=Mt/z,nt=(fe+jt)/z}else He=fe/z,nt=0;if(M.remeasure&&Xe>0){const pt=$.measureText(Ke).width*1e3/U*z;if(Xe<pt&&this.isFontSubpixelAAEnabled){const Mt=Xe/pt;Ne=!0,$.save(),$.scale(Mt,1),He/=Mt}else Xe!==pt&&(He+=(Xe-pt)/2e3*U/z)}if(this.contentVisible&&(Ue.isInFont||M.missingFile)){if(Fe&&!ke)$.fillText(Ke,He,nt);else if(this.paintChar(Ke,He,nt,we),ke){const pt=He+U*ke.offset.x/z,Mt=nt-U*ke.offset.y/z;this.paintChar(ke.fontChar,pt,Mt,we)}}const vt=ne?Xe*_e-Be*V:Xe*_e+Be*V;fe+=vt,Ne&&$.restore()}ne?E.y-=fe:E.x+=fe*L,$.restore(),this.compose()}showType3Text(T){const E=this.ctx,M=this.current,U=M.font,$=M.fontSize,z=M.fontDirection,q=U.vertical?1:-1,P=M.charSpacing,V=M.wordSpacing,L=M.textHScale*z,Y=M.fontMatrix||i.FONT_IDENTITY_MATRIX,ne=T.length,re=M.textRenderingMode===i.TextRenderingMode.INVISIBLE;let le,_e,Fe,we;if(!(re||$===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,E.save(),E.transform(...M.textMatrix),E.translate(M.x,M.y),E.scale(L,z),le=0;le<ne;++le){if(_e=T[le],typeof _e=="number"){we=q*_e*$/1e3,this.ctx.translate(we,0),M.x+=we*L;continue}const Te=(_e.isSpace?V:0)+P,Re=U.charProcOperatorList[_e.operatorListId];if(!Re){(0,i.warn)(`Type3 character "${_e.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_e,this.save(),E.scale($,$),E.transform(...Y),this.executeOperatorList(Re),this.restore()),Fe=i.Util.applyTransform([_e.width,0],Y)[0]*$+Te,E.translate(Fe,0),M.x+=Fe*L}E.restore(),this.processingType3=null}}setCharWidth(T,E){}setCharWidthAndBounds(T,E,M,U,$,z){this.ctx.rect(M,U,$-M,z-U),this.ctx.clip(),this.endPath()}getColorN_Pattern(T){let E;if(T[0]==="TilingPattern"){const M=T[1],U=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),$={createCanvasGraphics:z=>new O(z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};E=new o.TilingPattern(T,M,this.ctx,$,U)}else E=this._getPattern(T[1],T[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(T,E,M){const U=i.Util.makeHexColor(T,E,M);this.ctx.strokeStyle=U,this.current.strokeColor=U}setFillRGBColor(T,E,M){const U=i.Util.makeHexColor(T,E,M);this.ctx.fillStyle=U,this.current.fillColor=U,this.current.patternFill=!1}_getPattern(T,E=null){let M;return this.cachedPatterns.has(T)?M=this.cachedPatterns.get(T):(M=(0,o.getShadingPattern)(this.getObject(T)),this.cachedPatterns.set(T,M)),E&&(M.matrix=E),M}shadingFill(T){if(!this.contentVisible)return;const E=this.ctx;this.save();const M=this._getPattern(T);E.fillStyle=M.getPattern(E,this,(0,s.getCurrentTransformInverse)(E),o.PathType.SHADING);const U=(0,s.getCurrentTransformInverse)(E);if(U){const{width:$,height:z}=E.canvas,[q,P,V,L]=i.Util.getAxialAlignedBoundingBox([0,0,$,z],U);this.ctx.fillRect(q,P,V-q,L-P)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(T,E){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(T)&&T.length===6&&this.transform(...T),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),E)){const M=E[2]-E[0],U=E[3]-E[1];this.ctx.rect(E[0],E[1],M,U),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),E),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(T){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;T.isolated||(0,i.info)("TODO: Support non-isolated groups."),T.knockout&&(0,i.warn)("Knockout groups not supported.");const M=(0,s.getCurrentTransform)(E);if(T.matrix&&E.transform(...T.matrix),!T.bbox)throw new Error("Bounding box is required.");let U=i.Util.getAxialAlignedBoundingBox(T.bbox,(0,s.getCurrentTransform)(E));const $=[0,0,E.canvas.width,E.canvas.height];U=i.Util.intersect(U,$)||[0,0,0,0];const z=Math.floor(U[0]),q=Math.floor(U[1]);let P=Math.max(Math.ceil(U[2])-z,1),V=Math.max(Math.ceil(U[3])-q,1),L=1,Y=1;P>d&&(L=P/d,P=d),V>d&&(Y=V/d,V=d),this.current.startNewPathAndClipBox([0,0,P,V]);let ne="groupAt"+this.groupLevel;T.smask&&(ne+="_smask_"+this.smaskCounter++%2);const re=this.cachedCanvases.getCanvas(ne,P,V),le=re.context;le.scale(1/L,1/Y),le.translate(-z,-q),le.transform(...M),T.smask?this.smaskStack.push({canvas:re.canvas,context:le,offsetX:z,offsetY:q,scaleX:L,scaleY:Y,subtype:T.smask.subtype,backdrop:T.smask.backdrop,transferMap:T.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(z,q),E.scale(L,Y),E.save()),A(E,le),this.ctx=le,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(T){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,T.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const U=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...U);const $=i.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],U);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose($)}}beginAnnotation(T,E,M,U,$){if(this.#e(),D(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(E)&&E.length===4){const z=E[2]-E[0],q=E[3]-E[1];if($&&this.annotationCanvasMap){M=M.slice(),M[4]-=E[0],M[5]-=E[1],E=E.slice(),E[0]=E[1]=0,E[2]=z,E[3]=q;const[P,V]=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),{viewportScale:L}=this,Y=Math.ceil(z*this.outputScaleX*L),ne=Math.ceil(q*this.outputScaleY*L);this.annotationCanvas=this.canvasFactory.create(Y,ne);const{canvas:re,context:le}=this.annotationCanvas;this.annotationCanvasMap.set(T,re),this.annotationCanvas.savedCtx=this.ctx,this.ctx=le,this.ctx.save(),this.ctx.setTransform(P,0,0,-V,0,q*V),D(this.ctx)}else D(this.ctx),this.ctx.rect(E[0],E[1],z,q),this.ctx.clip(),this.endPath()}this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...U)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(T){if(!this.contentVisible)return;const E=T.count;T=this.getObject(T.data,T),T.count=E;const M=this.ctx,U=this.processingType3;if(U&&(U.compiled===void 0&&(U.compiled=_(T)),U.compiled)){U.compiled(M);return}const $=this._createMaskCanvas(T),z=$.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(z,$.offsetX,$.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(T,E,M=0,U=0,$,z){if(!this.contentVisible)return;T=this.getObject(T.data,T);const q=this.ctx;q.save();const P=(0,s.getCurrentTransform)(q);q.transform(E,M,U,$,0,0);const V=this._createMaskCanvas(T);q.setTransform(1,0,0,1,V.offsetX-P[4],V.offsetY-P[5]);for(let L=0,Y=z.length;L<Y;L+=2){const ne=i.Util.transform(P,[E,M,U,$,z[L],z[L+1]]),[re,le]=i.Util.applyTransform([0,0],ne);q.drawImage(V.canvas,re,le)}q.restore(),this.compose()}paintImageMaskXObjectGroup(T){if(!this.contentVisible)return;const E=this.ctx,M=this.current.fillColor,U=this.current.patternFill;for(const $ of T){const{data:z,width:q,height:P,transform:V}=$,L=this.cachedCanvases.getCanvas("maskCanvas",q,P),Y=L.context;Y.save();const ne=this.getObject(z,$);C(Y,ne),Y.globalCompositeOperation="source-in",Y.fillStyle=U?M.getPattern(Y,this,(0,s.getCurrentTransformInverse)(E),o.PathType.FILL):M,Y.fillRect(0,0,q,P),Y.restore(),E.save(),E.transform(...V),E.scale(1,-1),w(E,L.canvas,0,0,q,P,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(T){if(!this.contentVisible)return;const E=this.getObject(T);if(!E){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(E)}paintImageXObjectRepeat(T,E,M,U){if(!this.contentVisible)return;const $=this.getObject(T);if(!$){(0,i.warn)("Dependent image isn't ready yet");return}const z=$.width,q=$.height,P=[];for(let V=0,L=U.length;V<L;V+=2)P.push({transform:[E,0,0,M,U[V],U[V+1]],x:0,y:0,w:z,h:q});this.paintInlineImageXObjectGroup($,P)}applyTransferMapsToCanvas(T){return this.current.transferMaps!=="none"&&(T.filter=this.current.transferMaps,T.drawImage(T.canvas,0,0),T.filter="none"),T.canvas}applyTransferMapsToBitmap(T){if(this.current.transferMaps==="none")return T.bitmap;const{bitmap:E,width:M,height:U}=T,$=this.cachedCanvases.getCanvas("inlineImage",M,U),z=$.context;return z.filter=this.current.transferMaps,z.drawImage(E,0,0),z.filter="none",$.canvas}paintInlineImageXObject(T){if(!this.contentVisible)return;const E=T.width,M=T.height,U=this.ctx;if(this.save(),!i.isNodeJS){const{filter:q}=U;q!=="none"&&q!==""&&(U.filter="none")}U.scale(1/E,-1/M);let $;if(T.bitmap)$=this.applyTransferMapsToBitmap(T);else if(typeof HTMLElement=="function"&&T instanceof HTMLElement||!T.data)$=T;else{const P=this.cachedCanvases.getCanvas("inlineImage",E,M).context;k(P,T),$=this.applyTransferMapsToCanvas(P)}const z=this._scaleImage($,(0,s.getCurrentTransformInverse)(U));U.imageSmoothingEnabled=G((0,s.getCurrentTransform)(U),T.interpolate),w(U,z.img,0,0,z.paintWidth,z.paintHeight,0,-M,E,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(T,E){if(!this.contentVisible)return;const M=this.ctx;let U;if(T.bitmap)U=T.bitmap;else{const $=T.width,z=T.height,P=this.cachedCanvases.getCanvas("inlineImage",$,z).context;k(P,T),U=this.applyTransferMapsToCanvas(P)}for(const $ of E)M.save(),M.transform(...$.transform),M.scale(1,-1),w(M,U,$.x,$.y,$.w,$.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(T){}markPointProps(T,E){}beginMarkedContent(T){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(T,E){T==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(E)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(T){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(T);const M=this.ctx;this.pendingClip&&(E||(this.pendingClip===W?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const T=(0,s.getCurrentTransform)(this.ctx);if(T[1]===0&&T[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(T[0]),Math.abs(T[3]));else{const E=Math.abs(T[0]*T[3]-T[2]*T[1]),M=Math.hypot(T[0],T[2]),U=Math.hypot(T[1],T[3]);this._cachedGetSinglePixelWidth=Math.max(M,U)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:T}=this.current,{a:E,b:M,c:U,d:$}=this.ctx.getTransform();let z,q;if(M===0&&U===0){const P=Math.abs(E),V=Math.abs($);if(P===V)if(T===0)z=q=1/P;else{const L=P*T;z=q=L<1?1/L:1}else if(T===0)z=1/P,q=1/V;else{const L=P*T,Y=V*T;z=L<1?1/L:1,q=Y<1?1/Y:1}}else{const P=Math.abs(E*$-M*U),V=Math.hypot(E,M),L=Math.hypot(U,$);if(T===0)z=L/P,q=V/P;else{const Y=T*P;z=L>Y?L/Y:1,q=V>Y?V/Y:1}}this._cachedScaleForStroking[0]=z,this._cachedScaleForStroking[1]=q}return this._cachedScaleForStroking}rescaleAndStroke(T){const{ctx:E}=this,{lineWidth:M}=this.current,[U,$]=this.getScaleForStroking();if(E.lineWidth=M||1,U===1&&$===1){E.stroke();return}const z=E.getLineDash();if(T&&E.save(),E.scale(U,$),z.length>0){const q=Math.max(U,$);E.setLineDash(z.map(P=>P/q)),E.lineDashOffset/=q}E.stroke(),T&&E.restore()}isContentVisible(){for(let T=this.markedContentStack.length-1;T>=0;T--)if(!this.markedContentStack[T].visible)return!1;return!0}}e.CanvasGraphics=O;for(const j in i.OPS)O.prototype[j]!==void 0&&(O.prototype[i.OPS[j]]=O.prototype[j])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=b;var i=n(1),s=n(6);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=o;function c(w,_){if(!_)return;const R=_[2]-_[0],k=_[3]-_[1],C=new Path2D;C.rect(_[0],_[1],R,k),w.clip(C)}class f{constructor(){this.constructor===f&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class p extends f{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let R;this._type==="axial"?R=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(R=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)R.addColorStop(k[0],k[1]);return R}getPattern(_,R,k,C){let A;if(C===o.STROKE||C===o.FILL){const D=R.current.getClippedPathBoundingBox(C,(0,s.getCurrentTransform)(_))||[0,0,0,0],H=Math.ceil(D[2]-D[0])||1,I=Math.ceil(D[3]-D[1])||1,F=R.cachedCanvases.getCanvas("pattern",H,I,!0),Z=F.context;Z.clearRect(0,0,Z.canvas.width,Z.canvas.height),Z.beginPath(),Z.rect(0,0,Z.canvas.width,Z.canvas.height),Z.translate(-D[0],-D[1]),k=i.Util.transform(k,[1,0,0,1,D[0],D[1]]),Z.transform(...R.baseTransform),this.matrix&&Z.transform(...this.matrix),c(Z,this._bbox),Z.fillStyle=this._createGradient(Z),Z.fill(),A=_.createPattern(F.canvas,"no-repeat");const N=new DOMMatrix(k);A.setTransform(N)}else c(_,this._bbox),A=this._createGradient(_);return A}}function d(w,_,R,k,C,A,D,H){const I=_.coords,F=_.colors,Z=w.data,N=w.width*4;let G;I[R+1]>I[k+1]&&(G=R,R=k,k=G,G=A,A=D,D=G),I[k+1]>I[C+1]&&(G=k,k=C,C=G,G=D,D=H,H=G),I[R+1]>I[k+1]&&(G=R,R=k,k=G,G=A,A=D,D=G);const J=(I[R]+_.offsetX)*_.scaleX,ee=(I[R+1]+_.offsetY)*_.scaleY,te=(I[k]+_.offsetX)*_.scaleX,W=(I[k+1]+_.offsetY)*_.scaleY,O=(I[C]+_.offsetX)*_.scaleX,j=(I[C+1]+_.offsetY)*_.scaleY;if(ee>=j)return;const T=F[A],E=F[A+1],M=F[A+2],U=F[D],$=F[D+1],z=F[D+2],q=F[H],P=F[H+1],V=F[H+2],L=Math.round(ee),Y=Math.round(j);let ne,re,le,_e,Fe,we,Te,Re;for(let fe=L;fe<=Y;fe++){if(fe<W){const Ke=fe<ee?0:(ee-fe)/(ee-W);ne=J-(J-te)*Ke,re=T-(T-U)*Ke,le=E-(E-$)*Ke,_e=M-(M-z)*Ke}else{let Ke;fe>j?Ke=1:W===j?Ke=0:Ke=(W-fe)/(W-j),ne=te-(te-O)*Ke,re=U-(U-q)*Ke,le=$-($-P)*Ke,_e=z-(z-V)*Ke}let be;fe<ee?be=0:fe>j?be=1:be=(ee-fe)/(ee-j),Fe=J-(J-O)*be,we=T-(T-q)*be,Te=E-(E-P)*be,Re=M-(M-V)*be;const Ue=Math.round(Math.min(ne,Fe)),Ne=Math.round(Math.max(ne,Fe));let Be=N*fe+Ue*4;for(let Ke=Ue;Ke<=Ne;Ke++)be=(ne-Ke)/(ne-Fe),be<0?be=0:be>1&&(be=1),Z[Be++]=re-(re-we)*be|0,Z[Be++]=le-(le-Te)*be|0,Z[Be++]=_e-(_e-Re)*be|0,Z[Be++]=255}}function u(w,_,R){const k=_.coords,C=_.colors;let A,D;switch(_.type){case"lattice":const H=_.verticesPerRow,I=Math.floor(k.length/H)-1,F=H-1;for(A=0;A<I;A++){let Z=A*H;for(let N=0;N<F;N++,Z++)d(w,R,k[Z],k[Z+1],k[Z+H],C[Z],C[Z+1],C[Z+H]),d(w,R,k[Z+H+1],k[Z+1],k[Z+H],C[Z+H+1],C[Z+1],C[Z+H])}break;case"triangles":for(A=0,D=k.length;A<D;A+=3)d(w,R,k[A],k[A+1],k[A+2],C[A],C[A+1],C[A+2]);break;default:throw new Error("illegal figure")}}class m extends f{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,R,k){const H=Math.floor(this._bounds[0]),I=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-H,Z=Math.ceil(this._bounds[3])-I,N=Math.min(Math.ceil(Math.abs(F*_[0]*1.1)),3e3),G=Math.min(Math.ceil(Math.abs(Z*_[1]*1.1)),3e3),J=F/N,ee=Z/G,te={coords:this._coords,colors:this._colors,offsetX:-H,offsetY:-I,scaleX:1/J,scaleY:1/ee},W=N+4,O=G+4,j=k.getCanvas("mesh",W,O,!1),T=j.context,E=T.createImageData(N,G);if(R){const U=E.data;for(let $=0,z=U.length;$<z;$+=4)U[$]=R[0],U[$+1]=R[1],U[$+2]=R[2],U[$+3]=255}for(const U of this._figures)u(E,U,te);return T.putImageData(E,2,2),{canvas:j.canvas,offsetX:H-2*J,offsetY:I-2*ee,scaleX:J,scaleY:ee}}getPattern(_,R,k,C){c(_,this._bbox);let A;if(C===o.SHADING)A=i.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(_));else if(A=i.Util.singularValueDecompose2dScale(R.baseTransform),this.matrix){const H=i.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*H[0],A[1]*H[1]]}const D=this._createMeshCanvas(A,C===o.SHADING?null:this._background,R.cachedCanvases);return C!==o.SHADING&&(_.setTransform(...R.baseTransform),this.matrix&&_.transform(...this.matrix)),_.translate(D.offsetX,D.offsetY),_.scale(D.scaleX,D.scaleY),_.createPattern(D.canvas,"no-repeat")}}class v extends f{getPattern(){return"hotpink"}}function b(w){switch(w[0]){case"RadialAxial":return new p(w);case"Mesh":return new m(w);case"Dummy":return new v}throw new Error(`Unknown IR type: ${w[0]}`)}const g={COLORED:1,UNCOLORED:2};class y{static MAX_PATTERN_SIZE=3e3;constructor(_,R,k,C,A){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=R,this.ctx=k,this.canvasGraphicsFactory=C,this.baseTransform=A}createPatternCanvas(_){const R=this.operatorList,k=this.bbox,C=this.xstep,A=this.ystep,D=this.paintType,H=this.tilingType,I=this.color,F=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+H);const Z=k[0],N=k[1],G=k[2],J=k[3],ee=i.Util.singularValueDecompose2dScale(this.matrix),te=i.Util.singularValueDecompose2dScale(this.baseTransform),W=[ee[0]*te[0],ee[1]*te[1]],O=this.getSizeAndScale(C,this.ctx.canvas.width,W[0]),j=this.getSizeAndScale(A,this.ctx.canvas.height,W[1]),T=_.cachedCanvases.getCanvas("pattern",O.size,j.size,!0),E=T.context,M=F.createCanvasGraphics(E);M.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(M,D,I);let U=Z,$=N,z=G,q=J;return Z<0&&(U=0,z+=Math.abs(Z)),N<0&&($=0,q+=Math.abs(N)),E.translate(-(O.scale*U),-(j.scale*$)),M.transform(O.scale,0,0,j.scale,0,0),E.save(),this.clipBbox(M,U,$,z,q),M.baseTransform=(0,s.getCurrentTransform)(M.ctx),M.executeOperatorList(R),M.endDrawing(),{canvas:T.canvas,scaleX:O.scale,scaleY:j.scale,offsetX:U,offsetY:$}}getSizeAndScale(_,R,k){_=Math.abs(_);const C=Math.max(y.MAX_PATTERN_SIZE,R);let A=Math.ceil(_*k);return A>=C?A=C:k=A/_,{scale:k,size:A}}clipBbox(_,R,k,C,A){const D=C-R,H=A-k;_.ctx.rect(R,k,D,H),_.current.updateRectMinMax((0,s.getCurrentTransform)(_.ctx),[R,k,C,A]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,R,k){const C=_.ctx,A=_.current;switch(R){case g.COLORED:const D=this.ctx;C.fillStyle=D.fillStyle,C.strokeStyle=D.strokeStyle,A.fillColor=D.fillStyle,A.strokeColor=D.strokeStyle;break;case g.UNCOLORED:const H=i.Util.makeHexColor(k[0],k[1],k[2]);C.fillStyle=H,C.strokeStyle=H,A.fillColor=H,A.strokeColor=H;break;default:throw new i.FormatError(`Unsupported paint type: ${R}`)}}getPattern(_,R,k,C){let A=k;C!==o.SHADING&&(A=i.Util.transform(A,R.baseTransform),this.matrix&&(A=i.Util.transform(A,this.matrix)));const D=this.createPatternCanvas(R);let H=new DOMMatrix(A);H=H.translate(D.offsetX,D.offsetY),H=H.scale(1/D.scaleX,1/D.scaleY);const I=_.createPattern(D.canvas,"repeat");return I.setTransform(H),I}}e.TilingPattern=y},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=o,e.convertToRGBA=s,e.grayToRGBA=f;var i=n(1);function s(p){switch(p.kind){case i.ImageKind.GRAYSCALE_1BPP:return o(p);case i.ImageKind.RGB_24BPP:return c(p)}return null}function o({src:p,srcPos:d=0,dest:u,width:m,height:v,nonBlackColor:b=4294967295,inverseDecode:g=!1}){const y=i.FeatureTest.isLittleEndian?4278190080:255,[w,_]=g?[b,y]:[y,b],R=m>>3,k=m&7,C=p.length;u=new Uint32Array(u.buffer);let A=0;for(let D=0;D<v;D++){for(const I=d+R;d<I;d++){const F=d<C?p[d]:255;u[A++]=F&128?_:w,u[A++]=F&64?_:w,u[A++]=F&32?_:w,u[A++]=F&16?_:w,u[A++]=F&8?_:w,u[A++]=F&4?_:w,u[A++]=F&2?_:w,u[A++]=F&1?_:w}if(k===0)continue;const H=d<C?p[d++]:255;for(let I=0;I<k;I++)u[A++]=H&1<<7-I?_:w}return{srcPos:d,destPos:A}}function c({src:p,srcPos:d=0,dest:u,destPos:m=0,width:v,height:b}){let g=0;const y=p.length>>2,w=new Uint32Array(p.buffer,d,y);if(i.FeatureTest.isLittleEndian){for(;g<y-2;g+=3,m+=4){const _=w[g],R=w[g+1],k=w[g+2];u[m]=_|4278190080,u[m+1]=_>>>24|R<<8|4278190080,u[m+2]=R>>>16|k<<16|4278190080,u[m+3]=k>>>8|4278190080}for(let _=g*4,R=p.length;_<R;_+=3)u[m++]=p[_]|p[_+1]<<8|p[_+2]<<16|4278190080}else{for(;g<y-2;g+=3,m+=4){const _=w[g],R=w[g+1],k=w[g+2];u[m]=_|255,u[m+1]=_<<24|R>>>8|255,u[m+2]=R<<16|k>>>16|255,u[m+3]=k<<8|255}for(let _=g*4,R=p.length;_<R;_+=3)u[m++]=p[_]<<24|p[_+1]<<16|p[_+2]<<8|255}return{srcPos:d,destPos:m}}function f(p,d){if(i.FeatureTest.isLittleEndian)for(let u=0,m=p.length;u<m;u++)d[u]=p[u]*65793|4278190080;else for(let u=0,m=p.length;u<m;u++)d[u]=p[u]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=n(1);const s={DATA:1,ERROR:2},o={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function c(p){switch(p instanceof Error||typeof p=="object"&&p!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new i.AbortException(p.message);case"MissingPDFException":return new i.MissingPDFException(p.message);case"PasswordException":return new i.PasswordException(p.message,p.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(p.message,p.status);case"UnknownErrorException":return new i.UnknownErrorException(p.message,p.details);default:return new i.UnknownErrorException(p.message,p.toString())}}class f{constructor(d,u,m){this.sourceName=d,this.targetName=u,this.comObj=m,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const b=v.data;if(b.targetName!==this.sourceName)return;if(b.stream){this.#t(b);return}if(b.callback){const y=b.callbackId,w=this.callbackCapabilities[y];if(!w)throw new Error(`Cannot resolve callback ${y}`);if(delete this.callbackCapabilities[y],b.callback===s.DATA)w.resolve(b.data);else if(b.callback===s.ERROR)w.reject(c(b.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[b.action];if(!g)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const y=this.sourceName,w=b.sourceName;new Promise(function(_){_(g(b.data))}).then(function(_){m.postMessage({sourceName:y,targetName:w,callback:s.DATA,callbackId:b.callbackId,data:_})},function(_){m.postMessage({sourceName:y,targetName:w,callback:s.ERROR,callbackId:b.callbackId,reason:c(_)})});return}if(b.streamId){this.#e(b);return}g(b.data)},m.addEventListener("message",this._onComObjOnMessage)}on(d,u){const m=this.actionHandler;if(m[d])throw new Error(`There is already an actionName called "${d}"`);m[d]=u}send(d,u,m){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:u},m)}sendWithPromise(d,u,m){const v=this.callbackId++,b=new i.PromiseCapability;this.callbackCapabilities[v]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:v,data:u},m)}catch(g){b.reject(g)}return b.promise}sendWithStream(d,u,m,v){const b=this.streamId++,g=this.sourceName,y=this.targetName,w=this.comObj;return new ReadableStream({start:_=>{const R=new i.PromiseCapability;return this.streamControllers[b]={controller:_,startCall:R,pullCall:null,cancelCall:null,isClosed:!1},w.postMessage({sourceName:g,targetName:y,action:d,streamId:b,data:u,desiredSize:_.desiredSize},v),R.promise},pull:_=>{const R=new i.PromiseCapability;return this.streamControllers[b].pullCall=R,w.postMessage({sourceName:g,targetName:y,stream:o.PULL,streamId:b,desiredSize:_.desiredSize}),R.promise},cancel:_=>{(0,i.assert)(_ instanceof Error,"cancel must have a valid reason");const R=new i.PromiseCapability;return this.streamControllers[b].cancelCall=R,this.streamControllers[b].isClosed=!0,w.postMessage({sourceName:g,targetName:y,stream:o.CANCEL,streamId:b,reason:c(_)}),R.promise}},m)}#e(d){const u=d.streamId,m=this.sourceName,v=d.sourceName,b=this.comObj,g=this,y=this.actionHandler[d.action],w={enqueue(_,R=1,k){if(this.isCancelled)return;const C=this.desiredSize;this.desiredSize-=R,C>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),b.postMessage({sourceName:m,targetName:v,stream:o.ENQUEUE,streamId:u,chunk:_},k)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:m,targetName:v,stream:o.CLOSE,streamId:u}),delete g.streamSinks[u])},error(_){(0,i.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:m,targetName:v,stream:o.ERROR,streamId:u,reason:c(_)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};w.sinkCapability.resolve(),w.ready=w.sinkCapability.promise,this.streamSinks[u]=w,new Promise(function(_){_(y(d.data,w))}).then(function(){b.postMessage({sourceName:m,targetName:v,stream:o.START_COMPLETE,streamId:u,success:!0})},function(_){b.postMessage({sourceName:m,targetName:v,stream:o.START_COMPLETE,streamId:u,reason:c(_)})})}#t(d){const u=d.streamId,m=this.sourceName,v=d.sourceName,b=this.comObj,g=this.streamControllers[u],y=this.streamSinks[u];switch(d.stream){case o.START_COMPLETE:d.success?g.startCall.resolve():g.startCall.reject(c(d.reason));break;case o.PULL_COMPLETE:d.success?g.pullCall.resolve():g.pullCall.reject(c(d.reason));break;case o.PULL:if(!y){b.postMessage({sourceName:m,targetName:v,stream:o.PULL_COMPLETE,streamId:u,success:!0});break}y.desiredSize<=0&&d.desiredSize>0&&y.sinkCapability.resolve(),y.desiredSize=d.desiredSize,new Promise(function(w){w(y.onPull?.())}).then(function(){b.postMessage({sourceName:m,targetName:v,stream:o.PULL_COMPLETE,streamId:u,success:!0})},function(w){b.postMessage({sourceName:m,targetName:v,stream:o.PULL_COMPLETE,streamId:u,reason:c(w)})});break;case o.ENQUEUE:if((0,i.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(d.chunk);break;case o.CLOSE:if((0,i.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this.#n(g,u);break;case o.ERROR:(0,i.assert)(g,"error should have stream controller"),g.controller.error(c(d.reason)),this.#n(g,u);break;case o.CANCEL_COMPLETE:d.success?g.cancelCall.resolve():g.cancelCall.reject(c(d.reason)),this.#n(g,u);break;case o.CANCEL:if(!y)break;new Promise(function(w){w(y.onCancel?.(c(d.reason)))}).then(function(){b.postMessage({sourceName:m,targetName:v,stream:o.CANCEL_COMPLETE,streamId:u,success:!0})},function(w){b.postMessage({sourceName:m,targetName:v,stream:o.CANCEL_COMPLETE,streamId:u,reason:c(w)})}),y.sinkCapability.reject(c(d.reason)),y.isCancelled=!0,delete this.streamSinks[u];break;default:throw new Error("Unexpected stream case")}}async#n(d,u){await Promise.allSettled([d.startCall?.promise,d.pullCall?.promise,d.cancelCall?.promise]),delete this.streamControllers[u]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(1);class s{#e;#t;constructor({parsedData:c,rawData:f}){this.#e=c,this.#t=f}getRaw(){return this.#t}get(c){return this.#e.get(c)??null}getAll(){return(0,i.objectFromMap)(this.#e)}has(c){return this.#e.has(c)}}e.Metadata=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=n(1),s=n(8);const o=Symbol("INTERNAL");class c{#e=!0;constructor(d,u){this.name=d,this.intent=u}get visible(){return this.#e}_setVisible(d,u){d!==o&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#e=u}}class f{#e=null;#t=new Map;#n=null;#i=null;constructor(d){if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,this.#i=d.order;for(const u of d.groups)this.#t.set(u.id,new c(u.name,u.intent));if(d.baseState==="OFF")for(const u of this.#t.values())u._setVisible(o,!1);for(const u of d.on)this.#t.get(u)._setVisible(o,!0);for(const u of d.off)this.#t.get(u)._setVisible(o,!1);this.#n=this.getHash()}}#o(d){const u=d.length;if(u<2)return!0;const m=d[0];for(let v=1;v<u;v++){const b=d[v];let g;if(Array.isArray(b))g=this.#o(b);else if(this.#t.has(b))g=this.#t.get(b).visible;else return(0,i.warn)(`Optional content group not found: ${b}`),!0;switch(m){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return m==="And"}isVisible(d){if(this.#t.size===0)return!0;if(!d)return(0,i.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return this.#t.has(d.id)?this.#t.get(d.id).visible:((0,i.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return this.#o(d.expression);if(!d.policy||d.policy==="AnyOn"){for(const u of d.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(this.#t.get(u).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const u of d.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(!this.#t.get(u).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const u of d.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(!this.#t.get(u).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const u of d.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(this.#t.get(u).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,i.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,u=!0){if(!this.#t.has(d)){(0,i.warn)(`Optional content group not found: ${d}`);return}this.#t.get(d)._setVisible(o,!!u),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,i.objectFromMap)(this.#t):null}getGroup(d){return this.#t.get(d)||null}getHash(){if(this.#e!==null)return this.#e;const d=new s.MurmurHash3_64;for(const[u,m]of this.#t)d.update(`${u}:${m.visible}`);return this.#e=d.hexdigest()}}e.OptionalContentConfig=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=n(1),s=n(6);class o{constructor({length:d,initialData:u,progressiveDone:m=!1,contentDispositionFilename:v=null,disableRange:b=!1,disableStream:g=!1},y){if((0,i.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m,this._contentDispositionFilename=v,u?.length>0){const w=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;this._queuedChunks.push(w)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!g,this._isRangeSupported=!b,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((w,_)=>{this._onReceiveData({begin:w,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((w,_)=>{this._onProgress({loaded:w,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(w=>{this._onReceiveData({chunk:w})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:d,chunk:u}){const m=u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer;if(d===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const v=this._rangeReaders.some(function(b){return b._begin!==d?!1:(b._enqueue(m),!0)});(0,i.assert)(v,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(d){d.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:d.loaded}):this._fullRequestReader?.onProgress?.({loaded:d.loaded,total:d.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const u=this._rangeReaders.indexOf(d);u>=0&&this._rangeReaders.splice(u,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new c(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,u){if(u<=this._progressiveDataLength)return null;const m=new f(this,d,u);return this._pdfDataRangeTransport.requestDataRange(d,u),this._rangeReaders.push(m),m}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(const u of this._rangeReaders.slice(0))u.cancel(d);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=o;class c{constructor(d,u,m=!1,v=null){this._stream=d,this._done=m||!1,this._filename=(0,s.isPdfFile)(v)?v:null,this._queuedChunks=u||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new i.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class f{constructor(d,u,m){this._stream=d,this._begin=u,this._end=m,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new i.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=n(1),s=n(20);function o(m,v,b){return{method:"GET",headers:m,signal:b.signal,mode:"cors",credentials:v?"include":"same-origin",redirect:"follow"}}function c(m){const v=new Headers;for(const b in m){const g=m[b];g!==void 0&&v.append(b,g)}return v}function f(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:((0,i.warn)(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class p{constructor(v){this.source=v,this.isHttp=/^https?:/i.test(v.url),this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(v,b){if(b<=this._progressiveDataLength)return null;const g=new u(this,v,b);return this._rangeRequestReaders.push(g),g}cancelAllRequests(v){this._fullRequestReader?.cancel(v);for(const b of this._rangeRequestReaders.slice(0))b.cancel(v)}}e.PDFFetchStream=p;class d{constructor(v){this._stream=v,this._reader=null,this._loaded=0,this._filename=null;const b=v.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=new i.PromiseCapability,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=c(this._stream.httpHeaders);const g=b.url;fetch(g,o(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,s.validateResponseStatus)(y.status))throw(0,s.createResponseStatusError)(y.status,g);this._reader=y.body.getReader(),this._headersCapability.resolve();const w=k=>y.headers.get(k),{allowRangeRequests:_,suggestedLength:R}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=R||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(w),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:v,done:b}=await this._reader.read();return b?{value:v,done:b}:(this._loaded+=v.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:f(v),done:!1})}cancel(v){this._reader?.cancel(v),this._abortController.abort()}}class u{constructor(v,b,g){this._stream=v,this._reader=null,this._loaded=0;const y=v.source;this._withCredentials=y.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!y.disableStream,this._abortController=new AbortController,this._headers=c(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${g-1}`);const w=y.url;fetch(w,o(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,s.validateResponseStatus)(_.status))throw(0,s.createResponseStatusError)(_.status,w);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:v,done:b}=await this._reader.read();return b?{value:v,done:b}:(this._loaded+=v.byteLength,this.onProgress?.({loaded:this._loaded}),{value:f(v),done:!1})}cancel(v){this._reader?.cancel(v),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=p,e.extractFilenameFromHeader=f,e.validateRangeRequestCapabilities=c,e.validateResponseStatus=d;var i=n(1),s=n(21),o=n(6);function c({getResponseHeader:u,isHttp:m,rangeChunkSize:v,disableRange:b}){const g={allowRangeRequests:!1,suggestedLength:void 0},y=parseInt(u("Content-Length"),10);return!Number.isInteger(y)||(g.suggestedLength=y,y<=2*v)||b||!m||u("Accept-Ranges")!=="bytes"||(u("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function f(u){const m=u("Content-Disposition");if(m){let v=(0,s.getFilenameFromContentDispositionHeader)(m);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,o.isPdfFile)(v))return v}return null}function p(u,m){return u===404||u===0&&m.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+m+'".'):new i.UnexpectedResponseException(`Unexpected server response (${u}) while retrieving PDF "${m}".`,u)}function d(u){return u===200||u===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=s;var i=n(1);function s(o){let c=!0,f=p("filename\\*","i").exec(o);if(f){f=f[1];let y=v(f);return y=unescape(y),y=b(y),y=g(y),u(y)}if(f=m(o),f){const y=g(f);return u(y)}if(f=p("filename","i").exec(o),f){f=f[1];let y=v(f);return y=g(y),u(y)}function p(y,w){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function d(y,w){if(y){if(!/^[\x00-\xFF]+$/.test(w))return w;try{const _=new TextDecoder(y,{fatal:!0}),R=(0,i.stringToBytes)(w);w=_.decode(R),c=!1}catch{}}return w}function u(y){return c&&/[\x80-\xff]/.test(y)&&(y=d("utf-8",y),c&&(y=d("iso-8859-1",y))),y}function m(y){const w=[];let _;const R=p("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=R.exec(y))!==null;){let[,C,A,D]=_;if(C=parseInt(C,10),C in w){if(C===0)break;continue}w[C]=[A,D]}const k=[];for(let C=0;C<w.length&&C in w;++C){let[A,D]=w[C];D=v(D),A&&(D=unescape(D),C===0&&(D=b(D))),k.push(D)}return k.join("")}function v(y){if(y.startsWith('"')){const w=y.slice(1).split('\\"');for(let _=0;_<w.length;++_){const R=w[_].indexOf('"');R!==-1&&(w[_]=w[_].slice(0,R),w.length=_+1),w[_]=w[_].replaceAll(/\\(.)/g,"$1")}y=w.join('"')}return y}function b(y){const w=y.indexOf("'");if(w===-1)return y;const _=y.slice(0,w),k=y.slice(w+1).replace(/^[^']*'/,"");return d(_,k)}function g(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,_,R,k){if(R==="q"||R==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,A){return String.fromCharCode(parseInt(A,16))}),d(_,k);try{k=atob(k)}catch{}return d(_,k)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=n(1),s=n(20);const o=200,c=206;function f(v){const b=v.response;return typeof b!="string"?b:(0,i.stringToBytes)(b).buffer}class p{constructor(b,g={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,g,y){const w={begin:b,end:g};for(const _ in y)w[_]=y[_];return this.request(w)}requestFull(b){return this.request(b)}request(b){const g=new XMLHttpRequest,y=this.currXhrId++,w=this.pendingRequests[y]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const R=this.httpHeaders[_];R!==void 0&&g.setRequestHeader(_,R)}return this.isHttp&&"begin"in b&&"end"in b?(g.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),w.expectedStatus=c):w.expectedStatus=o,g.responseType="arraybuffer",b.onError&&(g.onerror=function(_){b.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,y),g.onprogress=this.onProgress.bind(this,y),w.onHeadersReceived=b.onHeadersReceived,w.onDone=b.onDone,w.onError=b.onError,w.onProgress=b.onProgress,g.send(null),y}onProgress(b,g){const y=this.pendingRequests[b];y&&y.onProgress?.(g)}onStateChange(b,g){const y=this.pendingRequests[b];if(!y)return;const w=y.xhr;if(w.readyState>=2&&y.onHeadersReceived&&(y.onHeadersReceived(),delete y.onHeadersReceived),w.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],w.status===0&&this.isHttp){y.onError?.(w.status);return}const _=w.status||o;if(!(_===o&&y.expectedStatus===c)&&_!==y.expectedStatus){y.onError?.(w.status);return}const k=f(w);if(_===c){const C=w.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(C);y.onDone({begin:parseInt(A[1],10),chunk:k})}else k?y.onDone({begin:0,chunk:k}):y.onError?.(w.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const g=this.pendingRequests[b].xhr;delete this.pendingRequests[b],g.abort()}}class d{constructor(b){this._source=b,this._manager=new p(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const g=this._rangeRequestReaders.indexOf(b);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new u(this._manager,this._source),this._fullRequestReader}getRangeReader(b,g){const y=new m(this._manager,b,g);return y.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(y),y}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const g of this._rangeRequestReaders.slice(0))g.cancel(b)}}e.PDFNetworkStream=d;class u{constructor(b,g){this._manager=b;const y={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=b.requestFull(y),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,g=this._manager.getRequestXhr(b),y=R=>g.getResponseHeader(R),{allowRangeRequests:w,suggestedLength:_}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});w&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(y),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,s.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){this.onProgress?.({loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new i.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class m{constructor(b,g,y){this._manager=b;const w={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(g,y,w),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(b){const g=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,s.createResponseStatusError)(b,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){this.isStreamingSupported||this.onProgress?.({loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new i.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=n(1),s=n(20);const o=/^file:\/\/\/[a-zA-Z]:\//;function c(y){const w=require$$5,_=w.parse(y);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(y)?w.parse(`file:///${y}`):(_.host||(_.protocol="file:"),_)}class f{constructor(w){this.source=w,this.url=c(w.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new m(this),this._fullRequestReader}getRangeReader(w,_){if(_<=this._progressiveDataLength)return null;const R=this.isFsUrl?new g(this,w,_):new v(this,w,_);return this._rangeRequestReaders.push(R),R}cancelAllRequests(w){this._fullRequestReader?.cancel(w);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(w)}}e.PDFNodeStream=f;class p{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=w.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const w=this._readableStream.read();return w===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=w.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const _=w.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const w=this._readableStream.read();return w===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=w.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function u(y,w){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:w}}class m extends p{constructor(w){super(w);const _=R=>{if(R.statusCode===404){const D=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=D,this._headersCapability.reject(D);return}this._headersCapability.resolve(),this._setReadableStream(R);const k=D=>this._readableStream.headers[D.toLowerCase()],{allowRangeRequests:C,suggestedLength:A}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:k,isHttp:w.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=A||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(k)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(u(this._url,w.httpHeaders),_)}else{const R=require$$5;this._request=R.request(u(this._url,w.httpHeaders),_)}this._request.on("error",R=>{this._storedError=R,this._headersCapability.reject(R)}),this._request.end()}}class v extends d{constructor(w,_,R){super(w),this._httpHeaders={};for(const C in w.httpHeaders){const A=w.httpHeaders[C];A!==void 0&&(this._httpHeaders[C]=A)}this._httpHeaders.Range=`bytes=${_}-${R-1}`;const k=C=>{if(C.statusCode===404){const A=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A;return}this._setReadableStream(C)};if(this._request=null,this._url.protocol==="http:"){const C=require$$5;this._request=C.request(u(this._url,this._httpHeaders),k)}else{const C=require$$5;this._request=C.request(u(this._url,this._httpHeaders),k)}this._request.on("error",C=>{this._storedError=C}),this._request.end()}}class b extends p{constructor(w){super(w);let _=decodeURIComponent(this._url.path);o.test(this._url.href)&&(_=_.replace(/^\//,""));const R=require$$5;R.lstat(_,(k,C)=>{if(k){k.code==="ENOENT"&&(k=new i.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=k,this._headersCapability.reject(k);return}this._contentLength=C.size,this._setReadableStream(R.createReadStream(_)),this._headersCapability.resolve()})}}class g extends d{constructor(w,_,R){super(w);let k=decodeURIComponent(this._url.path);o.test(this._url.href)&&(k=k.replace(/^\//,""));const C=require$$5;this._setReadableStream(C.createReadStream(k,{start:_,end:R-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=n(6),s=n(1);const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/1999/xlink",p=["butt","round","square"],d=["miter","round","bevel"],u=function(C,A="",D=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!D)return URL.createObjectURL(new Blob([C],{type:A}));const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let I=`data:${A};base64,`;for(let F=0,Z=C.length;F<Z;F+=3){const N=C[F]&255,G=C[F+1]&255,J=C[F+2]&255,ee=N>>2,te=(N&3)<<4|G>>4,W=F+1<Z?(G&15)<<2|J>>6:64,O=F+2<Z?J&63:64;I+=H[ee]+H[te]+H[W]+H[O]}return I},m=function(){const C=new Uint8Array([137,80,78,71,13,10,26,10]),A=12,D=new Int32Array(256);for(let J=0;J<256;J++){let ee=J;for(let te=0;te<8;te++)ee=ee&1?3988292384^ee>>1&2147483647:ee>>1&2147483647;D[J]=ee}function H(J,ee,te){let W=-1;for(let O=ee;O<te;O++){const j=(W^J[O])&255,T=D[j];W=W>>>8^T}return W^-1}function I(J,ee,te,W){let O=W;const j=ee.length;te[O]=j>>24&255,te[O+1]=j>>16&255,te[O+2]=j>>8&255,te[O+3]=j&255,O+=4,te[O]=J.charCodeAt(0)&255,te[O+1]=J.charCodeAt(1)&255,te[O+2]=J.charCodeAt(2)&255,te[O+3]=J.charCodeAt(3)&255,O+=4,te.set(ee,O),O+=ee.length;const T=H(te,W+4,O);te[O]=T>>24&255,te[O+1]=T>>16&255,te[O+2]=T>>8&255,te[O+3]=T&255}function F(J,ee,te){let W=1,O=0;for(let j=ee;j<te;++j)W=(W+(J[j]&255))%65521,O=(O+W)%65521;return O<<16|W}function Z(J){if(!s.isNodeJS)return N(J);try{const ee=parseInt(process.versions.node)>=8?J:Buffer.from(J),te=require$$5.deflateSync(ee,{level:9});return te instanceof Uint8Array?te:new Uint8Array(te)}catch(ee){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ee)}return N(J)}function N(J){let ee=J.length;const te=65535,W=Math.ceil(ee/te),O=new Uint8Array(2+ee+W*5+4);let j=0;O[j++]=120,O[j++]=156;let T=0;for(;ee>te;)O[j++]=0,O[j++]=255,O[j++]=255,O[j++]=0,O[j++]=0,O.set(J.subarray(T,T+te),j),j+=te,T+=te,ee-=te;O[j++]=1,O[j++]=ee&255,O[j++]=ee>>8&255,O[j++]=~ee&65535&255,O[j++]=(~ee&65535)>>8&255,O.set(J.subarray(T),j),j+=J.length-T;const E=F(J,0,J.length);return O[j++]=E>>24&255,O[j++]=E>>16&255,O[j++]=E>>8&255,O[j++]=E&255,O}function G(J,ee,te,W){const O=J.width,j=J.height;let T,E,M;const U=J.data;switch(ee){case s.ImageKind.GRAYSCALE_1BPP:E=0,T=1,M=O+7>>3;break;case s.ImageKind.RGB_24BPP:E=2,T=8,M=O*3;break;case s.ImageKind.RGBA_32BPP:E=6,T=8,M=O*4;break;default:throw new Error("invalid format")}const $=new Uint8Array((1+M)*j);let z=0,q=0;for(let re=0;re<j;++re)$[z++]=0,$.set(U.subarray(q,q+M),z),q+=M,z+=M;if(ee===s.ImageKind.GRAYSCALE_1BPP&&W){z=0;for(let re=0;re<j;re++){z++;for(let le=0;le<M;le++)$[z++]^=255}}const P=new Uint8Array([O>>24&255,O>>16&255,O>>8&255,O&255,j>>24&255,j>>16&255,j>>8&255,j&255,T,E,0,0,0]),V=Z($),L=C.length+A*3+P.length+V.length,Y=new Uint8Array(L);let ne=0;return Y.set(C,ne),ne+=C.length,I("IHDR",P,Y,ne),ne+=A+P.length,I("IDATA",V,Y,ne),ne+=A+V.length,I("IEND",new Uint8Array(0),Y,ne),u(Y,"image/png",te)}return function(ee,te,W){const O=ee.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:ee.kind;return G(ee,O,te,W)}}();class v{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,D){this.x=A,this.y=D}}function b(C){let A=[];const D=[];for(const H of C){if(H.fn==="save"){A.push({fnId:92,fn:"group",items:[]}),D.push(A),A=A.at(-1).items;continue}H.fn==="restore"?A=D.pop():A.push(H)}return A}function g(C){if(Number.isInteger(C))return C.toString();const A=C.toFixed(10);let D=A.length-1;if(A[D]!=="0")return A;do D--;while(A[D]==="0");return A.substring(0,A[D]==="."?D:D+1)}function y(C){if(C[4]===0&&C[5]===0){if(C[1]===0&&C[2]===0)return C[0]===1&&C[3]===1?"":`scale(${g(C[0])} ${g(C[3])})`;if(C[0]===C[3]&&C[1]===-C[2]){const A=Math.acos(C[0])*180/Math.PI;return`rotate(${g(A)})`}}else if(C[0]===1&&C[1]===0&&C[2]===0&&C[3]===1)return`translate(${g(C[4])} ${g(C[5])})`;return`matrix(${g(C[0])} ${g(C[1])} ${g(C[2])} ${g(C[3])} ${g(C[4])} ${g(C[5])})`}let w=0,_=0,R=0;class k{constructor(A,D,H=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new v,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=A,this.objs=D,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!H,this._operatorIdMapping=[];for(const I in s.OPS)this._operatorIdMapping[s.OPS[I]]=I}getObject(A,D=null){return typeof A=="string"?A.startsWith("g_")?this.commonObjs.get(A):this.objs.get(A):D}save(){this.transformStack.push(this.transformMatrix);const A=this.current;this.extraStack.push(A),this.current=A.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(A){this.save(),this.executeOpTree(A),this.restore()}loadDependencies(A){const D=A.fnArray,H=A.argsArray;for(let I=0,F=D.length;I<F;I++)if(D[I]===s.OPS.dependency)for(const Z of H[I]){const N=Z.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(J=>{N.get(Z,J)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(A,D,H,I,F,Z){const N=[A,D,H,I,F,Z];this.transformMatrix=s.Util.transform(this.transformMatrix,N),this.tgrp=null}getSVG(A,D){this.viewport=D;const H=this._initialize(D);return this.loadDependencies(A).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(A)),H))}convertOpList(A){const D=this._operatorIdMapping,H=A.argsArray,I=A.fnArray,F=[];for(let Z=0,N=I.length;Z<N;Z++){const G=I[Z];F.push({fnId:G,fn:D[G],args:H[Z]})}return b(F)}executeOpTree(A){for(const D of A){const H=D.fn,I=D.fnId,F=D.args;switch(I|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(F);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case s.OPS.setFont:this.setFont(F);break;case s.OPS.showText:this.showText(F[0]);break;case s.OPS.showSpacedText:this.showText(F[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(F[0],F[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case s.OPS.setHScale:this.setHScale(F[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case s.OPS.setTextRise:this.setTextRise(F[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case s.OPS.setLineWidth:this.setLineWidth(F[0]);break;case s.OPS.setLineJoin:this.setLineJoin(F[0]);break;case s.OPS.setLineCap:this.setLineCap(F[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case s.OPS.setFillColorN:this.setFillColorN(F);break;case s.OPS.shadingFill:this.shadingFill(F[0]);break;case s.OPS.setDash:this.setDash(F[0],F[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case s.OPS.setFlatness:this.setFlatness(F[0]);break;case s.OPS.setGState:this.setGState(F[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case s.OPS.constructPath:this.constructPath(F[0],F[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(D.items);break;default:(0,s.warn)(`Unimplemented operator ${H}`);break}}}setWordSpacing(A){this.current.wordSpacing=A}setCharSpacing(A){this.current.charSpacing=A}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(A,D,H,I,F,Z){const N=this.current;N.textMatrix=N.lineMatrix=[A,D,H,I,F,Z],N.textMatrixScale=Math.hypot(A,D),N.x=N.lineX=0,N.y=N.lineY=0,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${g(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",g(-N.y)),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtElement.append(N.tspan)}beginText(){const A=this.current;A.x=A.lineX=0,A.y=A.lineY=0,A.textMatrix=s.IDENTITY_MATRIX,A.lineMatrix=s.IDENTITY_MATRIX,A.textMatrixScale=1,A.tspan=this.svgFactory.createElement("svg:tspan"),A.txtElement=this.svgFactory.createElement("svg:text"),A.txtgrp=this.svgFactory.createElement("svg:g"),A.xcoords=[],A.ycoords=[]}moveText(A,D){const H=this.current;H.x=H.lineX+=A,H.y=H.lineY+=D,H.xcoords=[],H.ycoords=[],H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${g(H.fontSize)}px`),H.tspan.setAttributeNS(null,"y",g(-H.y))}showText(A){const D=this.current,H=D.font,I=D.fontSize;if(I===0)return;const F=D.fontSizeScale,Z=D.charSpacing,N=D.wordSpacing,G=D.fontDirection,J=D.textHScale*G,ee=H.vertical,te=ee?1:-1,W=H.defaultVMetrics,O=I*D.fontMatrix[0];let j=0;for(const M of A){if(M===null){j+=G*N;continue}else if(typeof M=="number"){j+=te*M*I/1e3;continue}const U=(M.isSpace?N:0)+Z,$=M.fontChar;let z,q,P=M.width;if(ee){let L;const Y=M.vmetric||W;L=M.vmetric?Y[1]:P*.5,L=-L*O;const ne=Y[2]*O;P=Y?-Y[0]:P,z=L/F,q=(j+ne)/F}else z=j/F,q=0;(M.isInFont||H.missingFile)&&(D.xcoords.push(D.x+z),ee&&D.ycoords.push(-D.y+q),D.tspan.textContent+=$);const V=ee?P*O-U*G:P*O+U*G;j+=V}D.tspan.setAttributeNS(null,"x",D.xcoords.map(g).join(" ")),ee?D.tspan.setAttributeNS(null,"y",D.ycoords.map(g).join(" ")):D.tspan.setAttributeNS(null,"y",g(-D.y)),ee?D.y-=j:D.x+=j*J,D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${g(D.fontSize)}px`),D.fontStyle!==o.fontStyle&&D.tspan.setAttributeNS(null,"font-style",D.fontStyle),D.fontWeight!==o.fontWeight&&D.tspan.setAttributeNS(null,"font-weight",D.fontWeight);const T=D.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(T===s.TextRenderingMode.FILL||T===s.TextRenderingMode.FILL_STROKE?(D.fillColor!==o.fillColor&&D.tspan.setAttributeNS(null,"fill",D.fillColor),D.fillAlpha<1&&D.tspan.setAttributeNS(null,"fill-opacity",D.fillAlpha)):D.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?D.tspan.setAttributeNS(null,"fill","transparent"):D.tspan.setAttributeNS(null,"fill","none"),T===s.TextRenderingMode.STROKE||T===s.TextRenderingMode.FILL_STROKE){const M=1/(D.textMatrixScale||1);this._setStrokeAttributes(D.tspan,M)}let E=D.textMatrix;D.textRise!==0&&(E=E.slice(),E[5]+=D.textRise),D.txtElement.setAttributeNS(null,"transform",`${y(E)} scale(${g(J)}, -1)`),D.txtElement.setAttributeNS(c,"xml:space","preserve"),D.txtElement.append(D.tspan),D.txtgrp.append(D.txtElement),this._ensureTransformGroup().append(D.txtElement)}setLeadingMoveText(A,D){this.setLeading(-D),this.moveText(A,D)}addFontStyle(A){if(!A.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const D=u(A.data,A.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${A.loadedName}"; src: url(${D}); }
`}setFont(A){const D=this.current,H=this.commonObjs.get(A[0]);let I=A[1];D.font=H,this.embedFonts&&!H.missingFile&&!this.embeddedFonts[H.loadedName]&&(this.addFontStyle(H),this.embeddedFonts[H.loadedName]=H),D.fontMatrix=H.fontMatrix||s.FONT_IDENTITY_MATRIX;let F="normal";H.black?F="900":H.bold&&(F="bold");const Z=H.italic?"italic":"normal";I<0?(I=-I,D.fontDirection=-1):D.fontDirection=1,D.fontSize=I,D.fontFamily=H.loadedName,D.fontWeight=F,D.fontStyle=Z,D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"y",g(-D.y)),D.xcoords=[],D.ycoords=[]}endText(){const A=this.current;A.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&A.txtElement?.hasChildNodes()&&(A.element=A.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(A){A>0&&(this.current.lineWidth=A)}setLineCap(A){this.current.lineCap=p[A]}setLineJoin(A){this.current.lineJoin=d[A]}setMiterLimit(A){this.current.miterLimit=A}setStrokeAlpha(A){this.current.strokeAlpha=A}setStrokeRGBColor(A,D,H){this.current.strokeColor=s.Util.makeHexColor(A,D,H)}setFillAlpha(A){this.current.fillAlpha=A}setFillRGBColor(A,D,H){this.current.fillColor=s.Util.makeHexColor(A,D,H),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(A){this.current.strokeColor=this._makeColorN_Pattern(A)}setFillColorN(A){this.current.fillColor=this._makeColorN_Pattern(A)}shadingFill(A){const{width:D,height:H}=this.viewport,I=s.Util.inverseTransform(this.transformMatrix),[F,Z,N,G]=s.Util.getAxialAlignedBoundingBox([0,0,D,H],I),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",F),J.setAttributeNS(null,"y",Z),J.setAttributeNS(null,"width",N-F),J.setAttributeNS(null,"height",G-Z),J.setAttributeNS(null,"fill",this._makeShadingPattern(A)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(J)}_makeColorN_Pattern(A){return A[0]==="TilingPattern"?this._makeTilingPattern(A):this._makeShadingPattern(A)}_makeTilingPattern(A){const D=A[1],H=A[2],I=A[3]||s.IDENTITY_MATRIX,[F,Z,N,G]=A[4],J=A[5],ee=A[6],te=A[7],W=`shading${R++}`,[O,j,T,E]=s.Util.normalizeRect([...s.Util.applyTransform([F,Z],I),...s.Util.applyTransform([N,G],I)]),[M,U]=s.Util.singularValueDecompose2dScale(I),$=J*M,z=ee*U,q=this.svgFactory.createElement("svg:pattern");q.setAttributeNS(null,"id",W),q.setAttributeNS(null,"patternUnits","userSpaceOnUse"),q.setAttributeNS(null,"width",$),q.setAttributeNS(null,"height",z),q.setAttributeNS(null,"x",`${O}`),q.setAttributeNS(null,"y",`${j}`);const P=this.svg,V=this.transformMatrix,L=this.current.fillColor,Y=this.current.strokeColor,ne=this.svgFactory.create(T-O,E-j);if(this.svg=ne,this.transformMatrix=I,te===2){const re=s.Util.makeHexColor(...D);this.current.fillColor=re,this.current.strokeColor=re}return this.executeOpTree(this.convertOpList(H)),this.svg=P,this.transformMatrix=V,this.current.fillColor=L,this.current.strokeColor=Y,q.append(ne.childNodes[0]),this.defs.append(q),`url(#${W})`}_makeShadingPattern(A){switch(typeof A=="string"&&(A=this.objs.get(A)),A[0]){case"RadialAxial":const D=`shading${R++}`,H=A[3];let I;switch(A[1]){case"axial":const F=A[4],Z=A[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",D),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",F[0]),I.setAttributeNS(null,"y1",F[1]),I.setAttributeNS(null,"x2",Z[0]),I.setAttributeNS(null,"y2",Z[1]);break;case"radial":const N=A[4],G=A[5],J=A[6],ee=A[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",D),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",G[0]),I.setAttributeNS(null,"cy",G[1]),I.setAttributeNS(null,"r",ee),I.setAttributeNS(null,"fx",N[0]),I.setAttributeNS(null,"fy",N[1]),I.setAttributeNS(null,"fr",J);break;default:throw new Error(`Unknown RadialAxial type: ${A[1]}`)}for(const F of H){const Z=this.svgFactory.createElement("svg:stop");Z.setAttributeNS(null,"offset",F[0]),Z.setAttributeNS(null,"stop-color",F[1]),I.append(Z)}return this.defs.append(I),`url(#${D})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${A[0]}`)}}setDash(A,D){this.current.dashArray=A,this.current.dashPhase=D}constructPath(A,D){const H=this.current;let I=H.x,F=H.y,Z=[],N=0;for(const G of A)switch(G|0){case s.OPS.rectangle:I=D[N++],F=D[N++];const J=D[N++],ee=D[N++],te=I+J,W=F+ee;Z.push("M",g(I),g(F),"L",g(te),g(F),"L",g(te),g(W),"L",g(I),g(W),"Z");break;case s.OPS.moveTo:I=D[N++],F=D[N++],Z.push("M",g(I),g(F));break;case s.OPS.lineTo:I=D[N++],F=D[N++],Z.push("L",g(I),g(F));break;case s.OPS.curveTo:I=D[N+4],F=D[N+5],Z.push("C",g(D[N]),g(D[N+1]),g(D[N+2]),g(D[N+3]),g(I),g(F)),N+=6;break;case s.OPS.curveTo2:Z.push("C",g(I),g(F),g(D[N]),g(D[N+1]),g(D[N+2]),g(D[N+3])),I=D[N+2],F=D[N+3],N+=4;break;case s.OPS.curveTo3:I=D[N+2],F=D[N+3],Z.push("C",g(D[N]),g(D[N+1]),g(I),g(F),g(I),g(F)),N+=4;break;case s.OPS.closePath:Z.push("Z");break}Z=Z.join(" "),H.path&&A.length>0&&A[0]!==s.OPS.rectangle&&A[0]!==s.OPS.moveTo?Z=H.path.getAttributeNS(null,"d")+Z:(H.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(H.path)),H.path.setAttributeNS(null,"d",Z),H.path.setAttributeNS(null,"fill","none"),H.element=H.path,H.setCurrentPoint(I,F)}endPath(){const A=this.current;if(A.path=null,!this.pendingClip)return;if(!A.element){this.pendingClip=null;return}const D=`clippath${w++}`,H=this.svgFactory.createElement("svg:clipPath");H.setAttributeNS(null,"id",D),H.setAttributeNS(null,"transform",y(this.transformMatrix));const I=A.element.cloneNode(!0);if(this.pendingClip==="evenodd"?I.setAttributeNS(null,"clip-rule","evenodd"):I.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,H.append(I),this.defs.append(H),A.activeClipUrl){A.clipGroup=null;for(const F of this.extraStack)F.clipGroup=null;H.setAttributeNS(null,"clip-path",A.activeClipUrl)}A.activeClipUrl=`url(#${D})`,this.tgrp=null}clip(A){this.pendingClip=A}closePath(){const A=this.current;if(A.path){const D=`${A.path.getAttributeNS(null,"d")}Z`;A.path.setAttributeNS(null,"d",D)}}setLeading(A){this.current.leading=-A}setTextRise(A){this.current.textRise=A}setTextRenderingMode(A){this.current.textRenderingMode=A}setHScale(A){this.current.textHScale=A/100}setRenderingIntent(A){}setFlatness(A){}setGState(A){for(const[D,H]of A)switch(D){case"LW":this.setLineWidth(H);break;case"LC":this.setLineCap(H);break;case"LJ":this.setLineJoin(H);break;case"ML":this.setMiterLimit(H);break;case"D":this.setDash(H[0],H[1]);break;case"RI":this.setRenderingIntent(H);break;case"FL":this.setFlatness(H);break;case"Font":this.setFont(H);break;case"CA":this.setStrokeAlpha(H);break;case"ca":this.setFillAlpha(H);break;default:(0,s.warn)(`Unimplemented graphic state operator ${D}`);break}}fill(){const A=this.current;A.element&&(A.element.setAttributeNS(null,"fill",A.fillColor),A.element.setAttributeNS(null,"fill-opacity",A.fillAlpha),this.endPath())}stroke(){const A=this.current;A.element&&(this._setStrokeAttributes(A.element),A.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(A,D=1){const H=this.current;let I=H.dashArray;D!==1&&I.length>0&&(I=I.map(function(F){return D*F})),A.setAttributeNS(null,"stroke",H.strokeColor),A.setAttributeNS(null,"stroke-opacity",H.strokeAlpha),A.setAttributeNS(null,"stroke-miterlimit",g(H.miterLimit)),A.setAttributeNS(null,"stroke-linecap",H.lineCap),A.setAttributeNS(null,"stroke-linejoin",H.lineJoin),A.setAttributeNS(null,"stroke-width",g(D*H.lineWidth)+"px"),A.setAttributeNS(null,"stroke-dasharray",I.map(g).join(" ")),A.setAttributeNS(null,"stroke-dashoffset",g(D*H.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y","0"),A.setAttributeNS(null,"width","1px"),A.setAttributeNS(null,"height","1px"),A.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(A)}paintImageXObject(A){const D=this.getObject(A);if(!D){(0,s.warn)(`Dependent image with object ID ${A} is not ready yet`);return}this.paintInlineImageXObject(D)}paintInlineImageXObject(A,D){const H=A.width,I=A.height,F=m(A,this.forceDataSchema,!!D),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",g(H)),Z.setAttributeNS(null,"height",g(I)),this.current.element=Z,this.clip("nonzero");const N=this.svgFactory.createElement("svg:image");N.setAttributeNS(f,"xlink:href",F),N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y",g(-I)),N.setAttributeNS(null,"width",g(H)+"px"),N.setAttributeNS(null,"height",g(I)+"px"),N.setAttributeNS(null,"transform",`scale(${g(1/H)} ${g(-1/I)})`),D?D.append(N):this._ensureTransformGroup().append(N)}paintImageMaskXObject(A){const D=this.getObject(A.data,A);if(D.bitmap){(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const H=this.current,I=D.width,F=D.height,Z=H.fillColor;H.maskId=`mask${_++}`;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",H.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",g(I)),G.setAttributeNS(null,"height",g(F)),G.setAttributeNS(null,"fill",Z),G.setAttributeNS(null,"mask",`url(#${H.maskId})`),this.defs.append(N),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(D,N)}paintFormXObjectBegin(A,D){if(Array.isArray(A)&&A.length===6&&this.transform(A[0],A[1],A[2],A[3],A[4],A[5]),D){const H=D[2]-D[0],I=D[3]-D[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",D[0]),F.setAttributeNS(null,"y",D[1]),F.setAttributeNS(null,"width",g(H)),F.setAttributeNS(null,"height",g(I)),this.current.element=F,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(A){const D=this.svgFactory.create(A.width,A.height),H=this.svgFactory.createElement("svg:defs");D.append(H),this.defs=H;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",y(A.transform)),D.append(I),this.svg=I,D}_ensureClipGroup(){if(!this.current.clipGroup){const A=this.svgFactory.createElement("svg:g");A.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(A),this.current.clipGroup=A}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=k},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(s){const o=[],c={items:o,styles:Object.create(null)};function f(p){if(!p)return;let d=null;const u=p.name;if(u==="#text")d=p.value;else if(n.shouldBuildText(u))p?.attributes?.textContent?d=p.attributes.textContent:p.value&&(d=p.value);else return;if(d!==null&&o.push({str:d}),!!p.children)for(const m of p.children)f(m)}return f(s),c}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=y,e.updateTextLayer=w;var i=n(1),s=n(6);const o=1e5,c=30,f=.8,p=new Map;function d(_,R){let k;if(R&&i.FeatureTest.isOffscreenCanvasSupported)k=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const C=document.createElement("canvas");C.width=C.height=_,k=C.getContext("2d",{alpha:!1})}return k}function u(_,R){const k=p.get(_);if(k)return k;const C=d(c,R);C.font=`${c}px ${_}`;const A=C.measureText("");let D=A.fontBoundingBoxAscent,H=Math.abs(A.fontBoundingBoxDescent);if(D){const F=D/(D+H);return p.set(_,F),C.canvas.width=C.canvas.height=0,F}C.strokeStyle="red",C.clearRect(0,0,c,c),C.strokeText("g",0,0);let I=C.getImageData(0,0,c,c).data;H=0;for(let F=I.length-1-3;F>=0;F-=4)if(I[F]>0){H=Math.ceil(F/4/c);break}C.clearRect(0,0,c,c),C.strokeText("A",0,c),I=C.getImageData(0,0,c,c).data,D=0;for(let F=0,Z=I.length;F<Z;F+=4)if(I[F]>0){D=c-Math.floor(F/4/c);break}if(C.canvas.width=C.canvas.height=0,D){const F=D/(D+H);return p.set(_,F),F}return p.set(_,f),f}function m(_,R,k){const C=document.createElement("span"),A={angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,fontSize:0};_._textDivs.push(C);const D=i.Util.transform(_._transform,R.transform);let H=Math.atan2(D[1],D[0]);const I=k[R.fontName];I.vertical&&(H+=Math.PI/2);const F=Math.hypot(D[2],D[3]),Z=F*u(I.fontFamily,_._isOffscreenCanvasSupported);let N,G;H===0?(N=D[4],G=D[5]-Z):(N=D[4]+Z*Math.sin(H),G=D[5]-Z*Math.cos(H));const J="calc(var(--scale-factor)*",ee=C.style;_._container===_._rootContainer?(ee.left=`${(100*N/_._pageWidth).toFixed(2)}%`,ee.top=`${(100*G/_._pageHeight).toFixed(2)}%`):(ee.left=`${J}${N.toFixed(2)}px)`,ee.top=`${J}${G.toFixed(2)}px)`),ee.fontSize=`${J}${F.toFixed(2)}px)`,ee.fontFamily=I.fontFamily,A.fontSize=F,C.setAttribute("role","presentation"),C.textContent=R.str,C.dir=R.dir,_._fontInspectorEnabled&&(C.dataset.fontName=R.fontName),H!==0&&(A.angle=H*(180/Math.PI));let te=!1;if(R.str.length>1)te=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const W=Math.abs(R.transform[0]),O=Math.abs(R.transform[3]);W!==O&&Math.max(W,O)/Math.min(W,O)>1.5&&(te=!0)}te&&(A.canvasWidth=I.vertical?R.height:R.width),_._textDivProperties.set(C,A),_._isReadableStream&&_._layoutText(C)}function v(_){const{div:R,scale:k,properties:C,ctx:A,prevFontSize:D,prevFontFamily:H}=_,{style:I}=R;let F="";if(C.canvasWidth!==0&&C.hasText){const{fontFamily:Z}=I,{canvasWidth:N,fontSize:G}=C;(D!==G||H!==Z)&&(A.font=`${G*k}px ${Z}`,_.prevFontSize=G,_.prevFontFamily=Z);const{width:J}=A.measureText(R.textContent);J>0&&(F=`scaleX(${N*k/J})`)}C.angle!==0&&(F=`rotate(${C.angle}deg) ${F}`),F.length>0&&(I.transform=F)}function b(_){if(_._canceled)return;const R=_._textDivs,k=_._capability;if(R.length>o){k.resolve();return}if(!_._isReadableStream)for(const A of R)_._layoutText(A);k.resolve()}class g{constructor({textContentSource:R,container:k,viewport:C,textDivs:A,textDivProperties:D,textContentItemsStr:H,isOffscreenCanvasSupported:I}){this._textContentSource=R,this._isReadableStream=R instanceof ReadableStream,this._container=this._rootContainer=k,this._textDivs=A||[],this._textContentItemsStr=H||[],this._isOffscreenCanvasSupported=I,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=D||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,I)};const{pageWidth:F,pageHeight:Z,pageX:N,pageY:G}=C.rawDims;this._transform=[1,0,0,-1,-N,G+Z],this._pageWidth=F,this._pageHeight=Z,(0,s.setLayerDimensions)(k,C),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(R,k){for(const C of R){if(C.str===void 0){if(C.type==="beginMarkedContentProps"||C.type==="beginMarkedContent"){const A=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),C.id!==null&&this._container.setAttribute("id",`${C.id}`),A.append(this._container)}else C.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(C.str),m(this,C,k)}}_layoutText(R){const k=this._layoutTextParams.properties=this._textDivProperties.get(R);if(this._layoutTextParams.div=R,v(this._layoutTextParams),k.hasText&&this._container.append(R),k.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),this._container.append(C)}}_render(){const R=new i.PromiseCapability;let k=Object.create(null);if(this._isReadableStream){const C=()=>{this._reader.read().then(({value:A,done:D})=>{if(D){R.resolve();return}Object.assign(k,A.styles),this._processItems(A.items,k),C()},R.reject)};this._reader=this._textContentSource.getReader(),C()}else if(this._textContentSource){const{items:C,styles:A}=this._textContentSource;this._processItems(C,A),R.resolve()}else throw new Error('No "textContentSource" parameter specified.');R.promise.then(()=>{k=null,b(this)},this._capability.reject)}}e.TextLayerRenderTask=g;function y(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:R,viewport:k}=_,C=getComputedStyle(R),A=C.getPropertyValue("visibility"),D=parseFloat(C.getPropertyValue("--scale-factor"));A==="visible"&&(!D||Math.abs(D-k.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const H=new g(_);return H._render(),H}function w({container:_,viewport:R,textDivs:k,textDivProperties:C,isOffscreenCanvasSupported:A,mustRotate:D=!0,mustRescale:H=!0}){if(D&&(0,s.setLayerDimensions)(_,{rotation:R.rotation}),H){const I=d(0,A),Z={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:I};for(const N of k)Z.properties=C.get(N),Z.div=N,v(Z)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=n(1),s=n(4),o=n(28),c=n(33),f=n(6),p=n(34);class d{#e;#t=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#s=new Map;#a=!1;#l=!1;#c=!1;#r;static _initialized=!1;constructor({uiManager:m,pageIndex:v,div:b,accessibilityManager:g,annotationLayer:y,viewport:w,l10n:_}){const R=[o.FreeTextEditor,c.InkEditor,p.StampEditor];if(!d._initialized){d._initialized=!0;for(const k of R)k.initialize(_)}m.registerEditorTypes(R),this.#r=m,this.pageIndex=v,this.div=b,this.#e=g,this.#n=y,this.viewport=w,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}updateToolbar(m){this.#r.updateToolbar(m)}updateMode(m=this.#r.getMode()){this.#p(),m===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),m!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",m===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",m===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",m===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(m){if(!m&&this.#r.getMode()!==i.AnnotationEditorType.INK)return;if(!m){for(const b of this.#s.values())if(b.isEmpty()){b.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(m){this.#r.setEditingState(m)}addCommands(m){this.#r.addCommands(m)}enable(){this.div.style.pointerEvents="auto";const m=new Set;for(const b of this.#s.values())b.enableEditing(),b.annotationElementId&&m.add(b.annotationElementId);if(!this.#n)return;const v=this.#n.getEditableAnnotations();for(const b of v){if(b.hide(),this.#r.isDeletedAnnotationElement(b.data.id)||m.has(b.data.id))continue;const g=this.deserialize(b);g&&(this.addOrRebuild(g),g.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const m=new Set;for(const v of this.#s.values()){if(v.disableEditing(),!v.annotationElementId||v.serialize()!==null){m.add(v.annotationElementId);continue}this.getEditableAnnotation(v.annotationElementId)?.show(),v.remove()}if(this.#n){const v=this.#n.getEditableAnnotations();for(const b of v){const{id:g}=b.data;m.has(g)||this.#r.isDeletedAnnotationElement(g)||b.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(m){return this.#n?.getEditableAnnotation(m)||null}setActiveEditor(m){this.#r.getActive()!==m&&this.#r.setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(m){this.#s.set(m.id,m);const{annotationElementId:v}=m;v&&this.#r.isDeletedAnnotationElement(v)&&this.#r.removeDeletedAnnotationElement(m)}detach(m){this.#s.delete(m.id),this.#e?.removePointerInTextLayer(m.contentDiv),!this.#c&&m.annotationElementId&&this.#r.addDeletedAnnotationElement(m)}remove(m){this.detach(m),this.#r.removeEditor(m),m.div.contains(document.activeElement)&&setTimeout(()=>{this.#r.focusMainContainer()},0),m.div.remove(),m.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(m){m.parent!==this&&(m.annotationElementId&&(this.#r.addDeletedAnnotationElement(m.annotationElementId),s.AnnotationEditor.deleteAnnotationElement(m),m.annotationElementId=null),this.attach(m),m.parent?.detach(m),m.setParent(this),m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))}add(m){if(this.changeParent(m),this.#r.addEditor(m),this.attach(m),!m.isAttachedToDOM){const v=m.render();this.div.append(v),m.isAttachedToDOM=!0}m.fixAndSetPosition(),m.onceAdded(),this.#r.addToAnnotationStorage(m)}moveEditorInDOM(m){if(!m.isAttachedToDOM)return;const{activeElement:v}=document;m.div.contains(v)&&(m._focusEventsAllowed=!1,setTimeout(()=>{m.div.contains(document.activeElement)?m._focusEventsAllowed=!0:(m.div.addEventListener("focusin",()=>{m._focusEventsAllowed=!0},{once:!0}),v.focus())},0)),m._structTreeParentId=this.#e?.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addUndoableEditor(m){const v=()=>m._uiManager.rebuild(m),b=()=>{m.remove()};this.addCommands({cmd:v,undo:b,mustExec:!1})}getNextId(){return this.#r.getId()}#f(m){switch(this.#r.getMode()){case i.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(m);case i.AnnotationEditorType.INK:return new c.InkEditor(m);case i.AnnotationEditorType.STAMP:return new p.StampEditor(m)}return null}pasteEditor(m,v){this.#r.updateToolbar(m),this.#r.updateMode(m);const{offsetX:b,offsetY:g}=this.#h(),y=this.getNextId(),w=this.#f({parent:this,id:y,x:b,y:g,uiManager:this.#r,isCentered:!0,...v});w&&this.add(w)}deserialize(m){switch(m.annotationType??m.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(m,this,this.#r);case i.AnnotationEditorType.INK:return c.InkEditor.deserialize(m,this,this.#r);case i.AnnotationEditorType.STAMP:return p.StampEditor.deserialize(m,this,this.#r)}return null}#d(m,v){const b=this.getNextId(),g=this.#f({parent:this,id:b,x:m.offsetX,y:m.offsetY,uiManager:this.#r,isCentered:v});return g&&this.add(g),g}#h(){const{x:m,y:v,width:b,height:g}=this.div.getBoundingClientRect(),y=Math.max(0,m),w=Math.max(0,v),_=Math.min(window.innerWidth,m+b),R=Math.min(window.innerHeight,v+g),k=(y+_)/2-m,C=(w+R)/2-v,[A,D]=this.viewport.rotation%180===0?[k,C]:[C,k];return{offsetX:A,offsetY:D}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(m){this.#r.setSelected(m)}toggleSelected(m){this.#r.toggleSelected(m)}isSelected(m){return this.#r.isSelected(m)}unselect(m){this.#r.unselect(m)}pointerup(m){const{isMac:v}=i.FeatureTest.platform;if(!(m.button!==0||m.ctrlKey&&v)&&m.target===this.div&&this.#a){if(this.#a=!1,!this.#t){this.#t=!0;return}if(this.#r.getMode()===i.AnnotationEditorType.STAMP){this.#r.unselectAll();return}this.#d(m,!1)}}pointerdown(m){if(this.#a){this.#a=!1;return}const{isMac:v}=i.FeatureTest.platform;if(m.button!==0||m.ctrlKey&&v||m.target!==this.div)return;this.#a=!0;const b=this.#r.getActive();this.#t=!b||b.isEmpty()}findNewParent(m,v,b){const g=this.#r.findParent(v,b);return g===null||g===this?!1:(g.changeParent(m),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null));for(const m of this.#s.values())this.#e?.removePointerInTextLayer(m.contentDiv),m.setParent(null),m.isAttachedToDOM=!1,m.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#p(){this.#l=!0;for(const m of this.#s.values())m.isEmpty()&&m.remove();this.#l=!1}render({viewport:m}){this.viewport=m,(0,f.setLayerDimensions)(this.div,m);for(const v of this.#r.getEditors(this.pageIndex))this.add(v);this.updateMode()}update({viewport:m}){this.#r.commitOrRemove(),this.viewport=m,(0,f.setLayerDimensions)(this.div,{rotation:m.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:m,pageHeight:v}=this.viewport.rawDims;return[m,v]}}e.AnnotationEditorLayer=d},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=n(1),s=n(5),o=n(4),c=n(29);class f extends o.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#s="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const d=f.prototype,u=b=>b.isEmpty(),m=s.AnnotationEditorUIManager.TRANSLATE_SMALL,v=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new s.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],d.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],d.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],d._translateEmpty,{args:[-m,0],checker:u}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d._translateEmpty,{args:[-v,0],checker:u}],[["ArrowRight","mac+ArrowRight"],d._translateEmpty,{args:[m,0],checker:u}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d._translateEmpty,{args:[v,0],checker:u}],[["ArrowUp","mac+ArrowUp"],d._translateEmpty,{args:[0,-m],checker:u}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d._translateEmpty,{args:[0,-v],checker:u}],[["ArrowDown","mac+ArrowDown"],d._translateEmpty,{args:[0,m],checker:u}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d._translateEmpty,{args:[0,v],checker:u}]]))}static _type="freetext";constructor(d){super({...d,name:"freeTextEditor"}),this.#o=d.color||f._defaultColor||o.AnnotationEditor._defaultLineColor,this.#l=d.fontSize||f._defaultFontSize}static initialize(d){o.AnnotationEditor.initialize(d,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const u=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(u.getPropertyValue("--freetext-padding"))}static updateDefaultParams(d,u){switch(d){case i.AnnotationEditorParamsType.FREETEXT_SIZE:f._defaultFontSize=u;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:f._defaultColor=u;break}}updateParams(d,u){switch(d){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(u);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(u);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,f._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,f._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#r(d){const u=v=>{this.editorDiv.style.fontSize=`calc(${v}px * var(--scale-factor))`,this.translate(0,-(v-this.#l)*this.parentScale),this.#l=v,this.#h()},m=this.#l;this.addCommands({cmd:()=>{u(d)},undo:()=>{u(m)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(d){const u=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=d},undo:()=>{this.#o=this.editorDiv.style.color=u},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(d,u){this._uiManager.translateSelectedEditors(d,u,!0)}getInitialTranslation(){const d=this.parentScale;return[-f._internalPadding*d,-(f._internalPadding+this.#l)*d]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),d.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const d=this.editorDiv.getElementsByTagName("div");if(d.length===0)return this.editorDiv.innerText;const u=[];for(const m of d)u.push(m.innerText.replace(/\r\n?|\n/,""));return u.join(`
`)}#h(){const[d,u]=this.parentDimensions;let m;if(this.isAttachedToDOM)m=this.div.getBoundingClientRect();else{const{currentLayer:v,div:b}=this,g=b.style.display;b.style.display="hidden",v.div.append(this.div),m=b.getBoundingClientRect(),b.remove(),b.style.display=g}this.rotation%180===this.parentRotation%180?(this.width=m.width/d,this.height=m.height/u):(this.width=m.height/d,this.height=m.width/u),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const d=this.#s,u=this.#s=this.#d().trimEnd();if(d===u)return;const m=v=>{if(this.#s=v,!v){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{m(u)},undo:()=>{m(d)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(d){this.enterInEditMode()}keydown(d){d.target===this.div&&d.key==="Enter"&&(this.enterInEditMode(),d.preventDefault())}editorDivKeydown(d){f._keyboardManager.exec(this,d)}editorDivFocus(d){this.isEditing=!0}editorDivBlur(d){this.isEditing=!1}editorDivInput(d){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let d,u;this.width&&(d=this.x,u=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),o.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(v=>this.editorDiv?.setAttribute("aria-label",v)),o.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(v=>this.editorDiv?.setAttribute("default-content",v)),this.editorDiv.contentEditable=!0;const{style:m}=this.editorDiv;if(m.fontSize=`calc(${this.#l}px * var(--scale-factor))`,m.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[v,b]=this.parentDimensions;if(this.annotationElementId){const{position:g}=this.#c;let[y,w]=this.getInitialTranslation();[y,w]=this.pageTranslationToScreen(y,w);const[_,R]=this.pageDimensions,[k,C]=this.pageTranslation;let A,D;switch(this.rotation){case 0:A=d+(g[0]-k)/_,D=u+this.height-(g[1]-C)/R;break;case 90:A=d+(g[0]-k)/_,D=u-(g[1]-C)/R,[y,w]=[w,-y];break;case 180:A=d-this.width+(g[0]-k)/_,D=u-(g[1]-C)/R,[y,w]=[-y,-w];break;case 270:A=d+(g[0]-k-this.height*R)/_,D=u+(g[1]-C-this.width*_)/R,[y,w]=[-w,y];break}this.setAt(A*v,D*b,y,w)}else this.setAt(d*v,u*b,this.width*v,this.height*b);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#s)for(const d of this.#s.split(`
`)){const u=document.createElement("div");u.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(u)}}get contentDiv(){return this.editorDiv}static deserialize(d,u,m){let v=null;if(d instanceof c.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:g,fontColor:y},rect:w,rotation:_,id:R},textContent:k,textPosition:C,parent:{page:{pageNumber:A}}}=d;if(!k||k.length===0)return null;v=d={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(y),fontSize:g,value:k.join(`
`),position:C,pageIndex:A-1,rect:w,rotation:_,id:R,deleted:!1}}const b=super.deserialize(d,u,m);return b.#l=d.fontSize,b.#o=i.Util.makeHexColor(...d.color),b.#s=d.value,b.annotationElementId=d.id||null,b.#c=v,b}serialize(d=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const u=f._internalPadding*this.parentScale,m=this.getRect(u,u),v=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),b={annotationType:i.AnnotationEditorType.FREETEXT,color:v,fontSize:this.#l,value:this.#s,pageIndex:this.pageIndex,rect:m,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return d?b:this.annotationElementId&&!this.#v(b)?null:(b.id=this.annotationElementId,b)}#v(d){const{value:u,fontSize:m,color:v,rect:b,pageIndex:g}=this.#c;return d.value!==u||d.fontSize!==m||d.rect.some((y,w)=>Math.abs(y-b[w])>=1)||d.color.some((y,w)=>y!==v[w])||d.pageIndex!==g}#g(d=!1){if(!this.annotationElementId)return;if(this.#h(),!d&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const u=f._internalPadding*this.parentScale;this.#c.rect=this.getRect(u,u)}}e.FreeTextEditor=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var i=n(1),s=n(6),o=n(3),c=n(30),f=n(31),p=n(32);const d=1e3,u=9,m=new WeakSet;function v(q){return{width:q[2]-q[0],height:q[3]-q[1]}}class b{static create(P){switch(P.data.annotationType){case i.AnnotationType.LINK:return new y(P);case i.AnnotationType.TEXT:return new w(P);case i.AnnotationType.WIDGET:switch(P.data.fieldType){case"Tx":return new R(P);case"Btn":return P.data.radioButton?new A(P):P.data.checkBox?new C(P):new D(P);case"Ch":return new H(P);case"Sig":return new k(P)}return new _(P);case i.AnnotationType.POPUP:return new I(P);case i.AnnotationType.FREETEXT:return new Z(P);case i.AnnotationType.LINE:return new N(P);case i.AnnotationType.SQUARE:return new G(P);case i.AnnotationType.CIRCLE:return new J(P);case i.AnnotationType.POLYLINE:return new ee(P);case i.AnnotationType.CARET:return new W(P);case i.AnnotationType.INK:return new O(P);case i.AnnotationType.POLYGON:return new te(P);case i.AnnotationType.HIGHLIGHT:return new j(P);case i.AnnotationType.UNDERLINE:return new T(P);case i.AnnotationType.SQUIGGLY:return new E(P);case i.AnnotationType.STRIKEOUT:return new M(P);case i.AnnotationType.STAMP:return new U(P);case i.AnnotationType.FILEATTACHMENT:return new $(P);default:return new g(P)}}}class g{#e=!1;constructor(P,{isRenderable:V=!1,ignoreBorder:L=!1,createQuadrilaterals:Y=!1}={}){this.isRenderable=V,this.data=P.data,this.layer=P.layer,this.linkService=P.linkService,this.downloadManager=P.downloadManager,this.imageResourcesPath=P.imageResourcesPath,this.renderForms=P.renderForms,this.svgFactory=P.svgFactory,this.annotationStorage=P.annotationStorage,this.enableScripting=P.enableScripting,this.hasJSActions=P.hasJSActions,this._fieldObjects=P.fieldObjects,this.parent=P.parent,V&&(this.container=this._createContainer(L)),Y&&this._createQuadrilaterals()}static _hasPopupData({titleObj:P,contentsObj:V,richText:L}){return!!(P?.str||V?.str||L?.str)}get hasPopupData(){return g._hasPopupData(this.data)}_createContainer(P){const{data:V,parent:{page:L,viewport:Y}}=this,ne=document.createElement("section");ne.setAttribute("data-annotation-id",V.id),this instanceof _||(ne.tabIndex=d),ne.style.zIndex=this.parent.zIndex++,this.data.popupRef&&ne.setAttribute("aria-haspopup","dialog"),V.noRotate&&ne.classList.add("norotate");const{pageWidth:re,pageHeight:le,pageX:_e,pageY:Fe}=Y.rawDims;if(!V.rect||this instanceof I){const{rotation:be}=V;return!V.hasOwnCanvas&&be!==0&&this.setRotation(be,ne),ne}const{width:we,height:Te}=v(V.rect),Re=i.Util.normalizeRect([V.rect[0],L.view[3]-V.rect[1]+L.view[1],V.rect[2],L.view[3]-V.rect[3]+L.view[1]]);if(!P&&V.borderStyle.width>0){ne.style.borderWidth=`${V.borderStyle.width}px`;const be=V.borderStyle.horizontalCornerRadius,Ue=V.borderStyle.verticalCornerRadius;if(be>0||Ue>0){const Be=`calc(${be}px * var(--scale-factor)) / calc(${Ue}px * var(--scale-factor))`;ne.style.borderRadius=Be}else if(this instanceof A){const Be=`calc(${we}px * var(--scale-factor)) / calc(${Te}px * var(--scale-factor))`;ne.style.borderRadius=Be}switch(V.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:ne.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:ne.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:ne.style.borderBottomStyle="solid";break}const Ne=V.borderColor||null;Ne?(this.#e=!0,ne.style.borderColor=i.Util.makeHexColor(Ne[0]|0,Ne[1]|0,Ne[2]|0)):ne.style.borderWidth=0}ne.style.left=`${100*(Re[0]-_e)/re}%`,ne.style.top=`${100*(Re[1]-Fe)/le}%`;const{rotation:fe}=V;return V.hasOwnCanvas||fe===0?(ne.style.width=`${100*we/re}%`,ne.style.height=`${100*Te/le}%`):this.setRotation(fe,ne),ne}setRotation(P,V=this.container){if(!this.data.rect)return;const{pageWidth:L,pageHeight:Y}=this.parent.viewport.rawDims,{width:ne,height:re}=v(this.data.rect);let le,_e;P%180===0?(le=100*ne/L,_e=100*re/Y):(le=100*re/L,_e=100*ne/Y),V.style.width=`${le}%`,V.style.height=`${_e}%`,V.setAttribute("data-main-rotation",(360-P)%360)}get _commonActions(){const P=(V,L,Y)=>{const ne=Y.detail[V],re=ne[0],le=ne.slice(1);Y.target.style[L]=c.ColorConverters[`${re}_HTML`](le),this.annotationStorage.setValue(this.data.id,{[L]:c.ColorConverters[`${re}_rgb`](le)})};return(0,i.shadow)(this,"_commonActions",{display:V=>{const{display:L}=V.detail,Y=L%2===1;this.container.style.visibility=Y?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Y,noPrint:L===1||L===2})},print:V=>{this.annotationStorage.setValue(this.data.id,{noPrint:!V.detail.print})},hidden:V=>{const{hidden:L}=V.detail;this.container.style.visibility=L?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:L,noView:L})},focus:V=>{setTimeout(()=>V.target.focus({preventScroll:!1}),0)},userName:V=>{V.target.title=V.detail.userName},readonly:V=>{V.target.disabled=V.detail.readonly},required:V=>{this._setRequired(V.target,V.detail.required)},bgColor:V=>{P("bgColor","backgroundColor",V)},fillColor:V=>{P("fillColor","backgroundColor",V)},fgColor:V=>{P("fgColor","color",V)},textColor:V=>{P("textColor","color",V)},borderColor:V=>{P("borderColor","borderColor",V)},strokeColor:V=>{P("strokeColor","borderColor",V)},rotation:V=>{const L=V.detail.rotation;this.setRotation(L),this.annotationStorage.setValue(this.data.id,{rotation:L})}})}_dispatchEventFromSandbox(P,V){const L=this._commonActions;for(const Y of Object.keys(V.detail))(P[Y]||L[Y])?.(V)}_setDefaultPropertiesFromJS(P){if(!this.enableScripting)return;const V=this.annotationStorage.getRawValue(this.data.id);if(!V)return;const L=this._commonActions;for(const[Y,ne]of Object.entries(V)){const re=L[Y];if(re){const le={detail:{[Y]:ne},target:P};re(le),delete V[Y]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:P}=this.data;if(!P)return;const[V,L,Y,ne]=this.data.rect;if(P.length===1){const[,{x:Ue,y:Ne},{x:Be,y:Ke}]=P[0];if(Y===Ue&&ne===Ne&&V===Be&&L===Ke)return}const{style:re}=this.container;let le;if(this.#e){const{borderColor:Ue,borderWidth:Ne}=re;re.borderWidth=0,le=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ue}" stroke-width="${Ne}">`],this.container.classList.add("hasBorder")}const _e=Y-V,Fe=ne-L,{svgFactory:we}=this,Te=we.createElement("svg");Te.classList.add("quadrilateralsContainer"),Te.setAttribute("width",0),Te.setAttribute("height",0);const Re=we.createElement("defs");Te.append(Re);const fe=we.createElement("clipPath"),be=`clippath_${this.data.id}`;fe.setAttribute("id",be),fe.setAttribute("clipPathUnits","objectBoundingBox"),Re.append(fe);for(const[,{x:Ue,y:Ne},{x:Be,y:Ke}]of P){const ke=we.createElement("rect"),He=(Be-V)/_e,nt=(ne-Ne)/Fe,Xe=(Ue-Be)/_e,vt=(Ne-Ke)/Fe;ke.setAttribute("x",He),ke.setAttribute("y",nt),ke.setAttribute("width",Xe),ke.setAttribute("height",vt),fe.append(ke),le?.push(`<rect vector-effect="non-scaling-stroke" x="${He}" y="${nt}" width="${Xe}" height="${vt}"/>`)}this.#e&&(le.push("</g></svg>')"),re.backgroundImage=le.join("")),this.container.append(Te),this.container.style.clipPath=`url(#${be})`}_createPopup(){const{container:P,data:V}=this;P.setAttribute("aria-haspopup","dialog");const L=new I({data:{color:V.color,titleObj:V.titleObj,modificationDate:V.modificationDate,contentsObj:V.contentsObj,richText:V.richText,parentRect:V.rect,borderStyle:0,id:`popup_${V.id}`,rotation:V.rotation},parent:this.parent,elements:[this]});this.parent.div.append(L.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(P,V=null){const L=[];if(this._fieldObjects){const Y=this._fieldObjects[P];if(Y)for(const{page:ne,id:re,exportValues:le}of Y){if(ne===-1||re===V)continue;const _e=typeof le=="string"?le:null,Fe=document.querySelector(`[data-element-id="${re}"]`);if(Fe&&!m.has(Fe)){(0,i.warn)(`_getElementsByName - element not allowed: ${re}`);continue}L.push({id:re,exportValue:_e,domElement:Fe})}return L}for(const Y of document.getElementsByName(P)){const{exportValue:ne}=Y,re=Y.getAttribute("data-element-id");re!==V&&m.has(Y)&&L.push({id:re,exportValue:ne,domElement:Y})}return L}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const P=this.getElementsToTriggerPopup();if(Array.isArray(P))for(const V of P)V.classList.add("highlightArea");else P.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:P,data:{id:V}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:P,editId:V})})}}class y extends g{constructor(P,V=null){super(P,{isRenderable:!0,ignoreBorder:!!V?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=P.data.isTooltipOnly}render(){const{data:P,linkService:V}=this,L=document.createElement("a");L.setAttribute("data-element-id",P.id);let Y=!1;return P.url?(V.addLinkAttributes(L,P.url,P.newWindow),Y=!0):P.action?(this._bindNamedAction(L,P.action),Y=!0):P.attachment?(this._bindAttachment(L,P.attachment),Y=!0):P.setOCGState?(this.#t(L,P.setOCGState),Y=!0):P.dest?(this._bindLink(L,P.dest),Y=!0):(P.actions&&(P.actions.Action||P.actions["Mouse Up"]||P.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,P),Y=!0),P.resetForm?(this._bindResetFormAction(L,P.resetForm),Y=!0):this.isTooltipOnly&&!Y&&(this._bindLink(L,""),Y=!0)),this.container.classList.add("linkAnnotation"),Y&&this.container.append(L),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(P,V){P.href=this.linkService.getDestinationHash(V),P.onclick=()=>(V&&this.linkService.goToDestination(V),!1),(V||V==="")&&this.#e()}_bindNamedAction(P,V){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeNamedAction(V),!1),this.#e()}_bindAttachment(P,V){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,V.content,V.filename),!1),this.#e()}#t(P,V){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeSetOCGState(V),!1),this.#e()}_bindJSAction(P,V){P.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Y of Object.keys(V.actions)){const ne=L.get(Y);ne&&(P[ne]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:V.id,name:Y}}),!1))}P.onclick||(P.onclick=()=>!1),this.#e()}_bindResetFormAction(P,V){const L=P.onclick;if(L||(P.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(P.onclick=()=>!1);return}P.onclick=()=>{L?.();const{fields:Y,refs:ne,include:re}=V,le=[];if(Y.length!==0||ne.length!==0){const we=new Set(ne);for(const Te of Y){const Re=this._fieldObjects[Te]||[];for(const{id:fe}of Re)we.add(fe)}for(const Te of Object.values(this._fieldObjects))for(const Re of Te)we.has(Re.id)===re&&le.push(Re)}else for(const we of Object.values(this._fieldObjects))le.push(...we);const _e=this.annotationStorage,Fe=[];for(const we of le){const{id:Te}=we;switch(Fe.push(Te),we.type){case"text":{const fe=we.defaultValue||"";_e.setValue(Te,{value:fe});break}case"checkbox":case"radiobutton":{const fe=we.defaultValue===we.exportValues;_e.setValue(Te,{value:fe});break}case"combobox":case"listbox":{const fe=we.defaultValue||"";_e.setValue(Te,{value:fe});break}default:continue}const Re=document.querySelector(`[data-element-id="${Te}"]`);if(Re){if(!m.has(Re)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Te}`);continue}}else continue;Re.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Fe,name:"ResetForm"}}),!1}}}class w extends g{constructor(P){super(P,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const P=document.createElement("img");return P.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",P.alt="[{{type}} Annotation]",P.dataset.l10nId="text_annotation_type",P.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(P),this.container}}class _ extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(P){this.data.hasOwnCanvas&&(P.previousSibling?.nodeName==="CANVAS"&&(P.previousSibling.hidden=!0),P.hidden=!1)}_getKeyModifier(P){const{isWin:V,isMac:L}=i.FeatureTest.platform;return V&&P.ctrlKey||L&&P.metaKey}_setEventListener(P,V,L,Y,ne){L.includes("mouse")?P.addEventListener(L,re=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Y,value:ne(re),shift:re.shiftKey,modifier:this._getKeyModifier(re)}})}):P.addEventListener(L,re=>{if(L==="blur"){if(!V.focused||!re.relatedTarget)return;V.focused=!1}else if(L==="focus"){if(V.focused)return;V.focused=!0}ne&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Y,value:ne(re)}})})}_setEventListeners(P,V,L,Y){for(const[ne,re]of L)(re==="Action"||this.data.actions?.[re])&&((re==="Focus"||re==="Blur")&&(V||={focused:!1}),this._setEventListener(P,V,ne,re,Y),re==="Focus"&&!this.data.actions?.Blur?this._setEventListener(P,V,"blur","Blur",null):re==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(P,V,"focus","Focus",null))}_setBackgroundColor(P){const V=this.data.backgroundColor||null;P.style.backgroundColor=V===null?"transparent":i.Util.makeHexColor(V[0],V[1],V[2])}_setTextStyle(P){const V=["left","center","right"],{fontColor:L}=this.data.defaultAppearanceData,Y=this.data.defaultAppearanceData.fontSize||u,ne=P.style;let re;const le=2,_e=Fe=>Math.round(10*Fe)/10;if(this.data.multiLine){const Fe=Math.abs(this.data.rect[3]-this.data.rect[1]-le),we=Math.round(Fe/(i.LINE_FACTOR*Y))||1,Te=Fe/we;re=Math.min(Y,_e(Te/i.LINE_FACTOR))}else{const Fe=Math.abs(this.data.rect[3]-this.data.rect[1]-le);re=Math.min(Y,_e(Fe/i.LINE_FACTOR))}ne.fontSize=`calc(${re}px * var(--scale-factor))`,ne.color=i.Util.makeHexColor(L[0],L[1],L[2]),this.data.textAlignment!==null&&(ne.textAlign=V[this.data.textAlignment])}_setRequired(P,V){V?P.setAttribute("required",!0):P.removeAttribute("required"),P.setAttribute("aria-required",V)}}class R extends _{constructor(P){const V=P.renderForms||!P.data.hasAppearance&&!!P.data.fieldValue;super(P,{isRenderable:V})}setPropertyOnSiblings(P,V,L,Y){const ne=this.annotationStorage;for(const re of this._getElementsByName(P.name,P.id))re.domElement&&(re.domElement[V]=L),ne.setValue(re.id,{[Y]:L})}render(){const P=this.annotationStorage,V=this.data.id;this.container.classList.add("textWidgetAnnotation");let L=null;if(this.renderForms){const Y=P.getValue(V,{value:this.data.fieldValue});let ne=Y.value||"";const re=P.getValue(V,{charLimit:this.data.maxLen}).charLimit;re&&ne.length>re&&(ne=ne.slice(0,re));let le=Y.formattedValue||this.data.textContent?.join(`
`)||null;le&&this.data.comb&&(le=le.replaceAll(/\s+/g,""));const _e={userValue:ne,formattedValue:le,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(L=document.createElement("textarea"),L.textContent=le??ne,this.data.doNotScroll&&(L.style.overflowY="hidden")):(L=document.createElement("input"),L.type="text",L.setAttribute("value",le??ne),this.data.doNotScroll&&(L.style.overflowX="hidden")),this.data.hasOwnCanvas&&(L.hidden=!0),m.add(L),L.setAttribute("data-element-id",V),L.disabled=this.data.readOnly,L.name=this.data.fieldName,L.tabIndex=d,this._setRequired(L,this.data.required),re&&(L.maxLength=re),L.addEventListener("input",we=>{P.setValue(V,{value:we.target.value}),this.setPropertyOnSiblings(L,"value",we.target.value,"value"),_e.formattedValue=null}),L.addEventListener("resetform",we=>{const Te=this.data.defaultFieldValue??"";L.value=_e.userValue=Te,_e.formattedValue=null});let Fe=we=>{const{formattedValue:Te}=_e;Te!=null&&(we.target.value=Te),we.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){L.addEventListener("focus",Te=>{if(_e.focused)return;const{target:Re}=Te;_e.userValue&&(Re.value=_e.userValue),_e.lastCommittedValue=Re.value,_e.commitKey=1,_e.focused=!0}),L.addEventListener("updatefromsandbox",Te=>{this.showElementAndHideCanvas(Te.target);const Re={value(fe){_e.userValue=fe.detail.value??"",P.setValue(V,{value:_e.userValue.toString()}),fe.target.value=_e.userValue},formattedValue(fe){const{formattedValue:be}=fe.detail;_e.formattedValue=be,be!=null&&fe.target!==document.activeElement&&(fe.target.value=be),P.setValue(V,{formattedValue:be})},selRange(fe){fe.target.setSelectionRange(...fe.detail.selRange)},charLimit:fe=>{const{charLimit:be}=fe.detail,{target:Ue}=fe;if(be===0){Ue.removeAttribute("maxLength");return}Ue.setAttribute("maxLength",be);let Ne=_e.userValue;!Ne||Ne.length<=be||(Ne=Ne.slice(0,be),Ue.value=_e.userValue=Ne,P.setValue(V,{value:Ne}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:V,name:"Keystroke",value:Ne,willCommit:!0,commitKey:1,selStart:Ue.selectionStart,selEnd:Ue.selectionEnd}}))}};this._dispatchEventFromSandbox(Re,Te)}),L.addEventListener("keydown",Te=>{_e.commitKey=1;let Re=-1;if(Te.key==="Escape"?Re=0:Te.key==="Enter"&&!this.data.multiLine?Re=2:Te.key==="Tab"&&(_e.commitKey=3),Re===-1)return;const{value:fe}=Te.target;_e.lastCommittedValue!==fe&&(_e.lastCommittedValue=fe,_e.userValue=fe,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:V,name:"Keystroke",value:fe,willCommit:!0,commitKey:Re,selStart:Te.target.selectionStart,selEnd:Te.target.selectionEnd}}))});const we=Fe;Fe=null,L.addEventListener("blur",Te=>{if(!_e.focused||!Te.relatedTarget)return;_e.focused=!1;const{value:Re}=Te.target;_e.userValue=Re,_e.lastCommittedValue!==Re&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:V,name:"Keystroke",value:Re,willCommit:!0,commitKey:_e.commitKey,selStart:Te.target.selectionStart,selEnd:Te.target.selectionEnd}}),we(Te)}),this.data.actions?.Keystroke&&L.addEventListener("beforeinput",Te=>{_e.lastCommittedValue=null;const{data:Re,target:fe}=Te,{value:be,selectionStart:Ue,selectionEnd:Ne}=fe;let Be=Ue,Ke=Ne;switch(Te.inputType){case"deleteWordBackward":{const ke=be.substring(0,Ue).match(/\w*[^\w]*$/);ke&&(Be-=ke[0].length);break}case"deleteWordForward":{const ke=be.substring(Ue).match(/^[^\w]*\w*/);ke&&(Ke+=ke[0].length);break}case"deleteContentBackward":Ue===Ne&&(Be-=1);break;case"deleteContentForward":Ue===Ne&&(Ke+=1);break}Te.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:V,name:"Keystroke",value:be,change:Re||"",willCommit:!1,selStart:Be,selEnd:Ke}})}),this._setEventListeners(L,_e,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Te=>Te.target.value)}if(Fe&&L.addEventListener("blur",Fe),this.data.comb){const Te=(this.data.rect[2]-this.data.rect[0])/re;L.classList.add("comb"),L.style.letterSpacing=`calc(${Te}px * var(--scale-factor) - 1ch)`}}else L=document.createElement("div"),L.textContent=this.data.fieldValue,L.style.verticalAlign="middle",L.style.display="table-cell";return this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class k extends _{constructor(P){super(P,{isRenderable:!!P.data.hasOwnCanvas})}}class C extends _{constructor(P){super(P,{isRenderable:P.renderForms})}render(){const P=this.annotationStorage,V=this.data,L=V.id;let Y=P.getValue(L,{value:V.exportValue===V.fieldValue}).value;typeof Y=="string"&&(Y=Y!=="Off",P.setValue(L,{value:Y})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ne=document.createElement("input");return m.add(ne),ne.setAttribute("data-element-id",L),ne.disabled=V.readOnly,this._setRequired(ne,this.data.required),ne.type="checkbox",ne.name=V.fieldName,Y&&ne.setAttribute("checked",!0),ne.setAttribute("exportValue",V.exportValue),ne.tabIndex=d,ne.addEventListener("change",re=>{const{name:le,checked:_e}=re.target;for(const Fe of this._getElementsByName(le,L)){const we=_e&&Fe.exportValue===V.exportValue;Fe.domElement&&(Fe.domElement.checked=we),P.setValue(Fe.id,{value:we})}P.setValue(L,{value:_e})}),ne.addEventListener("resetform",re=>{const le=V.defaultFieldValue||"Off";re.target.checked=le===V.exportValue}),this.enableScripting&&this.hasJSActions&&(ne.addEventListener("updatefromsandbox",re=>{const le={value(_e){_e.target.checked=_e.detail.value!=="Off",P.setValue(L,{value:_e.target.checked})}};this._dispatchEventFromSandbox(le,re)}),this._setEventListeners(ne,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],re=>re.target.checked)),this._setBackgroundColor(ne),this._setDefaultPropertiesFromJS(ne),this.container.append(ne),this.container}}class A extends _{constructor(P){super(P,{isRenderable:P.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const P=this.annotationStorage,V=this.data,L=V.id;let Y=P.getValue(L,{value:V.fieldValue===V.buttonValue}).value;typeof Y=="string"&&(Y=Y!==V.buttonValue,P.setValue(L,{value:Y}));const ne=document.createElement("input");if(m.add(ne),ne.setAttribute("data-element-id",L),ne.disabled=V.readOnly,this._setRequired(ne,this.data.required),ne.type="radio",ne.name=V.fieldName,Y&&ne.setAttribute("checked",!0),ne.tabIndex=d,ne.addEventListener("change",re=>{const{name:le,checked:_e}=re.target;for(const Fe of this._getElementsByName(le,L))P.setValue(Fe.id,{value:!1});P.setValue(L,{value:_e})}),ne.addEventListener("resetform",re=>{const le=V.defaultFieldValue;re.target.checked=le!=null&&le===V.buttonValue}),this.enableScripting&&this.hasJSActions){const re=V.buttonValue;ne.addEventListener("updatefromsandbox",le=>{const _e={value:Fe=>{const we=re===Fe.detail.value;for(const Te of this._getElementsByName(Fe.target.name)){const Re=we&&Te.id===L;Te.domElement&&(Te.domElement.checked=Re),P.setValue(Te.id,{value:Re})}}};this._dispatchEventFromSandbox(_e,le)}),this._setEventListeners(ne,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.checked)}return this._setBackgroundColor(ne),this._setDefaultPropertiesFromJS(ne),this.container.append(ne),this.container}}class D extends y{constructor(P){super(P,{ignoreBorder:P.data.hasAppearance})}render(){const P=super.render();P.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(P.title=this.data.alternativeText);const V=P.lastChild;return this.enableScripting&&this.hasJSActions&&V&&(this._setDefaultPropertiesFromJS(V),V.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({},L)})),P}}class H extends _{constructor(P){super(P,{isRenderable:P.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const P=this.annotationStorage,V=this.data.id,L=P.getValue(V,{value:this.data.fieldValue}),Y=document.createElement("select");m.add(Y),Y.setAttribute("data-element-id",V),Y.disabled=this.data.readOnly,this._setRequired(Y,this.data.required),Y.name=this.data.fieldName,Y.tabIndex=d;let ne=this.data.combo&&this.data.options.length>0;this.data.combo||(Y.size=this.data.options.length,this.data.multiSelect&&(Y.multiple=!0)),Y.addEventListener("resetform",we=>{const Te=this.data.defaultFieldValue;for(const Re of Y.options)Re.selected=Re.value===Te});for(const we of this.data.options){const Te=document.createElement("option");Te.textContent=we.displayValue,Te.value=we.exportValue,L.value.includes(we.exportValue)&&(Te.setAttribute("selected",!0),ne=!1),Y.append(Te)}let re=null;if(ne){const we=document.createElement("option");we.value=" ",we.setAttribute("hidden",!0),we.setAttribute("selected",!0),Y.prepend(we),re=()=>{we.remove(),Y.removeEventListener("input",re),re=null},Y.addEventListener("input",re)}const le=we=>{const Te=we?"value":"textContent",{options:Re,multiple:fe}=Y;return fe?Array.prototype.filter.call(Re,be=>be.selected).map(be=>be[Te]):Re.selectedIndex===-1?null:Re[Re.selectedIndex][Te]};let _e=le(!1);const Fe=we=>{const Te=we.target.options;return Array.prototype.map.call(Te,Re=>({displayValue:Re.textContent,exportValue:Re.value}))};return this.enableScripting&&this.hasJSActions?(Y.addEventListener("updatefromsandbox",we=>{const Te={value(Re){re?.();const fe=Re.detail.value,be=new Set(Array.isArray(fe)?fe:[fe]);for(const Ue of Y.options)Ue.selected=be.has(Ue.value);P.setValue(V,{value:le(!0)}),_e=le(!1)},multipleSelection(Re){Y.multiple=!0},remove(Re){const fe=Y.options,be=Re.detail.remove;fe[be].selected=!1,Y.remove(be),fe.length>0&&Array.prototype.findIndex.call(fe,Ne=>Ne.selected)===-1&&(fe[0].selected=!0),P.setValue(V,{value:le(!0),items:Fe(Re)}),_e=le(!1)},clear(Re){for(;Y.length!==0;)Y.remove(0);P.setValue(V,{value:null,items:[]}),_e=le(!1)},insert(Re){const{index:fe,displayValue:be,exportValue:Ue}=Re.detail.insert,Ne=Y.children[fe],Be=document.createElement("option");Be.textContent=be,Be.value=Ue,Ne?Ne.before(Be):Y.append(Be),P.setValue(V,{value:le(!0),items:Fe(Re)}),_e=le(!1)},items(Re){const{items:fe}=Re.detail;for(;Y.length!==0;)Y.remove(0);for(const be of fe){const{displayValue:Ue,exportValue:Ne}=be,Be=document.createElement("option");Be.textContent=Ue,Be.value=Ne,Y.append(Be)}Y.options.length>0&&(Y.options[0].selected=!0),P.setValue(V,{value:le(!0),items:Fe(Re)}),_e=le(!1)},indices(Re){const fe=new Set(Re.detail.indices);for(const be of Re.target.options)be.selected=fe.has(be.index);P.setValue(V,{value:le(!0)}),_e=le(!1)},editable(Re){Re.target.disabled=!Re.detail.editable}};this._dispatchEventFromSandbox(Te,we)}),Y.addEventListener("input",we=>{const Te=le(!0);P.setValue(V,{value:Te}),we.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:V,name:"Keystroke",value:_e,changeEx:Te,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Y,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],we=>we.target.value)):Y.addEventListener("input",function(we){P.setValue(V,{value:le(!0)})}),this.data.combo&&this._setTextStyle(Y),this._setBackgroundColor(Y),this._setDefaultPropertiesFromJS(Y),this.container.append(Y),this.container}}class I extends g{constructor(P){const{data:V,elements:L}=P;super(P,{isRenderable:g._hasPopupData(V)}),this.elements=L}render(){this.container.classList.add("popupAnnotation");const P=new F({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),V=[];for(const L of this.elements)L.popup=P,V.push(L.data.id),L.addHighlightArea();return this.container.setAttribute("aria-controls",V.map(L=>`${i.AnnotationPrefix}${L}`).join(",")),this.container}}class F{#e=null;#t=this.#u.bind(this);#n=this.#E.bind(this);#i=this.#w.bind(this);#o=this.#y.bind(this);#s=null;#a=null;#l=null;#c=null;#r=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#g=null;#m=!1;constructor({container:P,color:V,elements:L,titleObj:Y,modificationDate:ne,contentsObj:re,richText:le,parent:_e,rect:Fe,parentRect:we,open:Te}){this.#a=P,this.#g=Y,this.#l=re,this.#v=le,this.#r=_e,this.#s=V,this.#p=Fe,this.#f=we,this.#c=L;const Re=s.PDFDateString.toDateObject(ne);Re&&(this.#e=_e.l10n.get("annotation_date_string",{date:Re.toLocaleDateString(),time:Re.toLocaleTimeString()})),this.trigger=L.flatMap(fe=>fe.getElementsToTriggerPopup());for(const fe of this.trigger)fe.addEventListener("click",this.#o),fe.addEventListener("mouseenter",this.#i),fe.addEventListener("mouseleave",this.#n),fe.classList.add("popupTriggerArea");for(const fe of L)fe.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,Te&&this.#y()}render(){if(this.#h)return;const{page:{view:P},viewport:{rawDims:{pageWidth:V,pageHeight:L,pageX:Y,pageY:ne}}}=this.#r,re=this.#h=document.createElement("div");if(re.className="popup",this.#s){const ke=re.style.outlineColor=i.Util.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?re.style.backgroundColor=`color-mix(in srgb, ${ke} 30%, white)`:re.style.backgroundColor=i.Util.makeHexColor(...this.#s.map(nt=>Math.floor(.7*(255-nt)+nt)))}const le=document.createElement("span");le.className="header";const _e=document.createElement("h1");if(le.append(_e),{dir:_e.dir,str:_e.textContent}=this.#g,re.append(le),this.#e){const ke=document.createElement("span");ke.classList.add("popupDate"),this.#e.then(He=>{ke.textContent=He}),le.append(ke)}const Fe=this.#l,we=this.#v;if(we?.str&&(!Fe?.str||Fe.str===we.str))p.XfaLayer.render({xfaHtml:we.html,intent:"richText",div:re}),re.lastChild.classList.add("richText","popupContent");else{const ke=this._formatContents(Fe);re.append(ke)}let Te=!!this.#f,Re=Te?this.#f:this.#p;for(const ke of this.#c)if(!Re||i.Util.intersect(ke.data.rect,Re)!==null){Re=ke.data.rect,Te=!0;break}const fe=i.Util.normalizeRect([Re[0],P[3]-Re[1]+P[1],Re[2],P[3]-Re[3]+P[1]]),Ue=Te?Re[2]-Re[0]+5:0,Ne=fe[0]+Ue,Be=fe[1],{style:Ke}=this.#a;Ke.left=`${100*(Ne-Y)/V}%`,Ke.top=`${100*(Be-ne)/L}%`,this.#a.append(re)}_formatContents({str:P,dir:V}){const L=document.createElement("p");L.classList.add("popupContent"),L.dir=V;const Y=P.split(/(?:\r\n?|\n)/);for(let ne=0,re=Y.length;ne<re;++ne){const le=Y[ne];L.append(document.createTextNode(le)),ne<re-1&&L.append(document.createElement("br"))}return L}#u(P){P.altKey||P.shiftKey||P.ctrlKey||P.metaKey||(P.key==="Enter"||P.key==="Escape"&&this.#d)&&this.#y()}#y(){this.#d=!this.#d,this.#d?(this.#w(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#E(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#w(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#E(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class Z extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0}),this.textContent=P.data.textContent,this.textPosition=P.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const P=document.createElement("div");P.classList.add("annotationTextContent"),P.setAttribute("role","comment");for(const V of this.textContent){const L=document.createElement("span");L.textContent=V,P.append(L)}this.container.append(P)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=Z;class N extends g{#e=null;constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const P=this.data,{width:V,height:L}=v(P.rect),Y=this.svgFactory.create(V,L,!0),ne=this.#e=this.svgFactory.createElement("svg:line");return ne.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),ne.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),ne.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),ne.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),ne.setAttribute("stroke-width",P.borderStyle.width||1),ne.setAttribute("stroke","transparent"),ne.setAttribute("fill","transparent"),Y.append(ne),this.container.append(Y),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class G extends g{#e=null;constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const P=this.data,{width:V,height:L}=v(P.rect),Y=this.svgFactory.create(V,L,!0),ne=P.borderStyle.width,re=this.#e=this.svgFactory.createElement("svg:rect");return re.setAttribute("x",ne/2),re.setAttribute("y",ne/2),re.setAttribute("width",V-ne),re.setAttribute("height",L-ne),re.setAttribute("stroke-width",ne||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),Y.append(re),this.container.append(Y),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class J extends g{#e=null;constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const P=this.data,{width:V,height:L}=v(P.rect),Y=this.svgFactory.create(V,L,!0),ne=P.borderStyle.width,re=this.#e=this.svgFactory.createElement("svg:ellipse");return re.setAttribute("cx",V/2),re.setAttribute("cy",L/2),re.setAttribute("rx",V/2-ne/2),re.setAttribute("ry",L/2-ne/2),re.setAttribute("stroke-width",ne||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),Y.append(re),this.container.append(Y),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ee extends g{#e=null;constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:V,height:L}=v(P.rect),Y=this.svgFactory.create(V,L,!0);let ne=[];for(const le of P.vertices){const _e=le.x-P.rect[0],Fe=P.rect[3]-le.y;ne.push(_e+","+Fe)}ne=ne.join(" ");const re=this.#e=this.svgFactory.createElement(this.svgElementName);return re.setAttribute("points",ne),re.setAttribute("stroke-width",P.borderStyle.width||1),re.setAttribute("stroke","transparent"),re.setAttribute("fill","transparent"),Y.append(re),this.container.append(Y),!P.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class te extends ee{constructor(P){super(P),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class W extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class O extends g{#e=[];constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const P=this.data,{width:V,height:L}=v(P.rect),Y=this.svgFactory.create(V,L,!0);for(const ne of P.inkLists){let re=[];for(const _e of ne){const Fe=_e.x-P.rect[0],we=P.rect[3]-_e.y;re.push(`${Fe},${we}`)}re=re.join(" ");const le=this.svgFactory.createElement(this.svgElementName);this.#e.push(le),le.setAttribute("points",re),le.setAttribute("stroke-width",P.borderStyle.width||1),le.setAttribute("stroke","transparent"),le.setAttribute("fill","transparent"),!P.popupRef&&this.hasPopupData&&this._createPopup(),Y.append(le)}return this.container.append(Y),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=O;class j extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class T extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class E extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class M extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class U extends g{constructor(P){super(P,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=U;class $ extends g{#e=null;constructor(P){super(P,{isRenderable:!0});const{filename:V,content:L}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(V,!0),this.content=L,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:V,content:L})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:P,data:V}=this;let L;V.hasAppearance||V.fillAlpha===0?L=document.createElement("div"):(L=document.createElement("img"),L.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(V.name)?"paperclip":"pushpin"}.svg`,V.fillAlpha&&V.fillAlpha<1&&(L.style=`filter: opacity(${Math.round(V.fillAlpha*100)}%);`)),L.addEventListener("dblclick",this.#t.bind(this)),this.#e=L;const{isMac:Y}=i.FeatureTest.platform;return P.addEventListener("keydown",ne=>{ne.key==="Enter"&&(Y?ne.metaKey:ne.ctrlKey)&&this.#t()}),!V.popupRef&&this.hasPopupData?this._createPopup():L.classList.add("popupTriggerArea"),P.append(L),P}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class z{#e=null;#t=null;#n=new Map;constructor({div:P,accessibilityManager:V,annotationCanvasMap:L,l10n:Y,page:ne,viewport:re}){this.div=P,this.#e=V,this.#t=L,this.l10n=Y,this.page=ne,this.viewport=re,this.zIndex=0,this.l10n||=f.NullL10n}#i(P,V){const L=P.firstChild||P;L.id=`${i.AnnotationPrefix}${V}`,this.div.append(P),this.#e?.moveElementInDOM(this.div,P,L,!1)}async render(P){const{annotations:V}=P,L=this.div;(0,s.setLayerDimensions)(L,this.viewport);const Y=new Map,ne={data:null,layer:L,linkService:P.linkService,downloadManager:P.downloadManager,imageResourcesPath:P.imageResourcesPath||"",renderForms:P.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:P.annotationStorage||new o.AnnotationStorage,enableScripting:P.enableScripting===!0,hasJSActions:P.hasJSActions,fieldObjects:P.fieldObjects,parent:this,elements:null};for(const re of V){if(re.noHTML)continue;const le=re.annotationType===i.AnnotationType.POPUP;if(le){const we=Y.get(re.id);if(!we)continue;ne.elements=we}else{const{width:we,height:Te}=v(re.rect);if(we<=0||Te<=0)continue}ne.data=re;const _e=b.create(ne);if(!_e.isRenderable)continue;if(!le&&re.popupRef){const we=Y.get(re.popupRef);we?we.push(_e):Y.set(re.popupRef,[_e])}_e.annotationEditorType>0&&this.#n.set(_e.data.id,_e);const Fe=_e.render();re.hidden&&(Fe.style.visibility="hidden"),this.#i(Fe,re.id)}this.#o(),await this.l10n.translate(L)}update({viewport:P}){const V=this.div;this.viewport=P,(0,s.setLayerDimensions)(V,{rotation:P.rotation}),this.#o(),V.hidden=!1}#o(){if(!this.#t)return;const P=this.div;for(const[V,L]of this.#t){const Y=P.querySelector(`[data-annotation-id="${V}"]`);if(!Y)continue;const{firstChild:ne}=Y;ne?ne.nodeName==="CANVAS"?ne.replaceWith(L):ne.before(L):Y.append(L)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(P){return this.#n.get(P)}}e.AnnotationLayer=z},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function i(o){return Math.max(0,Math.min(255,255*o))}class s{static CMYK_G([c,f,p,d]){return["G",1-Math.min(1,.3*c+.59*p+.11*f+d)]}static G_CMYK([c]){return["CMYK",0,0,0,1-c]}static G_RGB([c]){return["RGB",c,c,c]}static G_rgb([c]){return c=i(c),[c,c,c]}static G_HTML([c]){const f=n(c);return`#${f}${f}${f}`}static RGB_G([c,f,p]){return["G",.3*c+.59*f+.11*p]}static RGB_rgb(c){return c.map(i)}static RGB_HTML(c){return`#${c.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([c,f,p,d]){return["RGB",1-Math.min(1,c+d),1-Math.min(1,p+d),1-Math.min(1,f+d)]}static CMYK_rgb([c,f,p,d]){return[i(1-Math.min(1,c+d)),i(1-Math.min(1,p+d)),i(1-Math.min(1,f+d))]}static CMYK_HTML(c){const f=this.CMYK_RGB(c).slice(1);return this.RGB_HTML(f)}static RGB_CMYK([c,f,p]){const d=1-c,u=1-f,m=1-p,v=Math.min(d,u,m);return["CMYK",d,u,m,v]}}e.ColorConverters=s},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=i;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function i(c,f){switch(c){case"find_match_count":c=`find_match_count[${f.total===1?"one":"other"}]`;break;case"find_match_count_limit":c=`find_match_count_limit[${f.limit===1?"one":"other"}]`;break}return n[c]||""}function s(c,f){return f?c.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(p,d)=>d in f?f[d]:"{{"+d+"}}"):c}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(c,f=null,p=i(c,f)){return s(p,f)},async translate(c){}};e.NullL10n=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=n(25);class s{static setupStorage(c,f,p,d,u){const m=d.getValue(f,{value:null});switch(p.name){case"textarea":if(m.value!==null&&(c.textContent=m.value),u==="print")break;c.addEventListener("input",v=>{d.setValue(f,{value:v.target.value})});break;case"input":if(p.attributes.type==="radio"||p.attributes.type==="checkbox"){if(m.value===p.attributes.xfaOn?c.setAttribute("checked",!0):m.value===p.attributes.xfaOff&&c.removeAttribute("checked"),u==="print")break;c.addEventListener("change",v=>{d.setValue(f,{value:v.target.checked?v.target.getAttribute("xfaOn"):v.target.getAttribute("xfaOff")})})}else{if(m.value!==null&&c.setAttribute("value",m.value),u==="print")break;c.addEventListener("input",v=>{d.setValue(f,{value:v.target.value})})}break;case"select":if(m.value!==null){c.setAttribute("value",m.value);for(const v of p.children)v.attributes.value===m.value?v.attributes.selected=!0:v.attributes.hasOwnProperty("selected")&&delete v.attributes.selected}c.addEventListener("input",v=>{const b=v.target.options,g=b.selectedIndex===-1?"":b[b.selectedIndex].value;d.setValue(f,{value:g})});break}}static setAttributes({html:c,element:f,storage:p=null,intent:d,linkService:u}){const{attributes:m}=f,v=c instanceof HTMLAnchorElement;m.type==="radio"&&(m.name=`${m.name}-${d}`);for(const[b,g]of Object.entries(m))if(g!=null)switch(b){case"class":g.length&&c.setAttribute(b,g.join(" "));break;case"dataId":break;case"id":c.setAttribute("data-element-id",g);break;case"style":Object.assign(c.style,g);break;case"textContent":c.textContent=g;break;default:(!v||b!=="href"&&b!=="newWindow")&&c.setAttribute(b,g)}v&&u.addLinkAttributes(c,m.href,m.newWindow),p&&m.dataId&&this.setupStorage(c,m.dataId,f,p)}static render(c){const f=c.annotationStorage,p=c.linkService,d=c.xfaHtml,u=c.intent||"display",m=document.createElement(d.name);d.attributes&&this.setAttributes({html:m,element:d,intent:u,linkService:p});const v=[[d,-1,m]],b=c.div;if(b.append(m),c.viewport){const y=`matrix(${c.viewport.transform.join(",")})`;b.style.transform=y}u!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const g=[];for(;v.length>0;){const[y,w,_]=v.at(-1);if(w+1===y.children.length){v.pop();continue}const R=y.children[++v.at(-1)[1]];if(R===null)continue;const{name:k}=R;if(k==="#text"){const A=document.createTextNode(R.value);g.push(A),_.append(A);continue}const C=R?.attributes?.xmlns?document.createElementNS(R.attributes.xmlns,k):document.createElement(k);if(_.append(C),R.attributes&&this.setAttributes({html:C,element:R,storage:f,intent:u,linkService:p}),R.children&&R.children.length>0)v.push([R,-1,C]);else if(R.value){const A=document.createTextNode(R.value);i.XfaText.shouldBuildText(k)&&g.push(A),C.append(A)}}for(const y of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:g}}static update(c){const f=`matrix(${c.viewport.transform.join(",")})`;c.div.style.transform=f,c.div.hidden=!1}}e.XfaLayer=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var i=n(1),s=n(4),o=n(29),c=n(6),f=n(5);class p extends s.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#s=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#r=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(u){super({...u,name:"inkEditor"}),this.color=u.color||null,this.thickness=u.thickness||null,this.opacity=u.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(u){s.AnnotationEditor.initialize(u,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(u,m){switch(u){case i.AnnotationEditorParamsType.INK_THICKNESS:p._defaultThickness=m;break;case i.AnnotationEditorParamsType.INK_COLOR:p._defaultColor=m;break;case i.AnnotationEditorParamsType.INK_OPACITY:p._defaultOpacity=m/100;break}}updateParams(u,m){switch(u){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#v(m);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#g(m);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#m(m);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,p._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,p._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(p._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||p._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||p._defaultColor||s.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??p._defaultOpacity))]]}#v(u){const m=this.thickness;this.addCommands({cmd:()=>{this.thickness=u,this.#R()},undo:()=>{this.thickness=m,this.#R()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(u){const m=this.color;this.addCommands({cmd:()=>{this.color=u,this.#x()},undo:()=>{this.color=m,this.#x()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(u){u/=100;const m=this.opacity;this.addCommands({cmd:()=>{this.opacity=u,this.#x()},undo:()=>{this.opacity=m,this.#x()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#P(),this.#k()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(u){!this.parent&&u?this._uiManager.removeShouldRescale(this):this.parent&&u===null&&this._uiManager.addShouldRescale(this),super.setParent(u)}onScaleChanging(){const[u,m]=this.parentDimensions,v=this.width*u,b=this.height*m;this.setDimensions(v,b)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#s))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#s))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:u,parentDimensions:[m,v]}=this;switch(u){case 90:return[0,v,v,m];case 180:return[m,v,m,v];case 270:return[m,0,v,m];default:return[0,0,m,v]}}#y(){const{ctx:u,color:m,opacity:v,thickness:b,parentScale:g,scaleFactor:y}=this;u.lineWidth=b*g/y,u.lineCap="round",u.lineJoin="round",u.miterLimit=10,u.strokeStyle=`${m}${(0,f.opacityToHex)(v)}`}#w(u,m){this.canvas.addEventListener("contextmenu",c.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#s),this.isEditing=!0,this.#r||(this.#r=!0,this.#b(),this.thickness||=p._defaultThickness,this.color||=p._defaultColor||s.AnnotationEditor._defaultLineColor,this.opacity??=p._defaultOpacity),this.currentPath.push([u,m]),this.#c=!1,this.#y(),this.#p=()=>{this.#O(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#E(u,m){const[v,b]=this.currentPath.at(-1);if(this.currentPath.length>1&&u===v&&m===b)return;const g=this.currentPath;let y=this.#a;if(g.push([u,m]),this.#c=!0,g.length<=2){y.moveTo(...g[0]),y.lineTo(u,m);return}g.length===3&&(this.#a=y=new Path2D,y.moveTo(...g[0])),this.#N(y,...g.at(-3),...g.at(-2),u,m)}#A(){if(this.currentPath.length===0)return;const u=this.currentPath.at(-1);this.#a.lineTo(...u)}#C(u,m){this.#p=null,u=Math.min(Math.max(u,0),this.canvas.width),m=Math.min(Math.max(m,0),this.canvas.height),this.#E(u,m),this.#A();let v;if(this.currentPath.length!==1)v=this.#I();else{const _=[u,m];v=[[_,_.slice(),_.slice(),_]]}const b=this.#a,g=this.currentPath;this.currentPath=[],this.#a=new Path2D;const y=()=>{this.allRawPaths.push(g),this.paths.push(v),this.bezierPath2D.push(b),this.rebuild()},w=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#P(),this.#k()),this.#R())};this.addCommands({cmd:y,undo:w,mustExec:!0})}#O(){if(!this.#c)return;this.#c=!1;const u=Math.ceil(this.thickness*this.parentScale),m=this.currentPath.slice(-3),v=m.map(y=>y[0]),b=m.map(y=>y[1]);Math.min(...v)-u,Math.max(...v)+u,Math.min(...b)-u,Math.max(...b)+u;const{ctx:g}=this;g.save(),g.clearRect(0,0,this.canvas.width,this.canvas.height);for(const y of this.bezierPath2D)g.stroke(y);g.stroke(this.#a),g.restore()}#N(u,m,v,b,g,y,w){const _=(m+b)/2,R=(v+g)/2,k=(b+y)/2,C=(g+w)/2;u.bezierCurveTo(_+2*(b-_)/3,R+2*(g-R)/3,k+2*(b-k)/3,C+2*(g-C)/3,k,C)}#I(){const u=this.currentPath;if(u.length<=2)return[[u[0],u[0],u.at(-1),u.at(-1)]];const m=[];let v,[b,g]=u[0];for(v=1;v<u.length-2;v++){const[A,D]=u[v],[H,I]=u[v+1],F=(A+H)/2,Z=(D+I)/2,N=[b+2*(A-b)/3,g+2*(D-g)/3],G=[F+2*(A-F)/3,Z+2*(D-Z)/3];m.push([[b,g],N,G,[F,Z]]),[b,g]=[F,Z]}const[y,w]=u[v],[_,R]=u[v+1],k=[b+2*(y-b)/3,g+2*(w-g)/3],C=[_+2*(y-_)/3,R+2*(w-R)/3];return m.push([[b,g],k,C,[_,R]]),m}#x(){if(this.isEmpty()){this.#S();return}this.#y();const{canvas:u,ctx:m}=this;m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,u.width,u.height),this.#S();for(const v of this.bezierPath2D)m.stroke(v)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#R(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(u){this._focusEventsAllowed&&(super.focusin(u),this.enableEditMode())}canvasPointerdown(u){u.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),u.preventDefault(),u.type!=="mouse"&&this.div.focus(),this.#w(u.offsetX,u.offsetY))}canvasPointermove(u){u.preventDefault(),this.#E(u.offsetX,u.offsetY)}canvasPointerup(u){u.preventDefault(),this.#D(u)}canvasPointerleave(u){this.#D(u)}#D(u){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#s),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",c.noContextMenu)},10),this.#C(u.offsetX,u.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#P(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(u=>this.canvas?.setAttribute("aria-label",u)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#k(){this.#f=new ResizeObserver(u=>{const m=u[0].contentRect;m.width&&m.height&&this.setDimensions(m.width,m.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let u,m;this.width&&(u=this.x,m=this.y),super.render(),s.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(w=>this.div?.setAttribute("aria-label",w));const[v,b,g,y]=this.#u();if(this.setAt(v,b,0,0),this.setDims(g,y),this.#P(),this.width){const[w,_]=this.parentDimensions;this.setAspectRatio(this.width*w,this.height*_),this.setAt(u*w,m*_,this.width*w,this.height*_),this.#r=!0,this.#b(),this.setDims(this.width*w,this.height*_),this.#x(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#k(),this.div}#b(){if(!this.#r)return;const[u,m]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*u),this.canvas.height=Math.ceil(this.height*m),this.#S()}setDimensions(u,m){const v=Math.round(u),b=Math.round(m);if(this.#d===v&&this.#h===b)return;this.#d=v,this.#h=b,this.canvas.style.visibility="hidden";const[g,y]=this.parentDimensions;this.width=u/g,this.height=m/y,this.fixAndSetPosition(),this.#l&&this.#T(u,m),this.#b(),this.#x(),this.canvas.style.visibility="visible",this.fixDims()}#T(u,m){const v=this.#M(),b=(u-v)/this.#t,g=(m-v)/this.#e;this.scaleFactor=Math.min(b,g)}#S(){const u=this.#M()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+u,this.translationY*this.scaleFactor+u)}static#L(u){const m=new Path2D;for(let v=0,b=u.length;v<b;v++){const[g,y,w,_]=u[v];v===0&&m.moveTo(...g),m.bezierCurveTo(y[0],y[1],w[0],w[1],_[0],_[1])}return m}static#F(u,m,v){const[b,g,y,w]=m;switch(v){case 0:for(let _=0,R=u.length;_<R;_+=2)u[_]+=b,u[_+1]=w-u[_+1];break;case 90:for(let _=0,R=u.length;_<R;_+=2){const k=u[_];u[_]=u[_+1]+b,u[_+1]=k+g}break;case 180:for(let _=0,R=u.length;_<R;_+=2)u[_]=y-u[_],u[_+1]+=g;break;case 270:for(let _=0,R=u.length;_<R;_+=2){const k=u[_];u[_]=y-u[_+1],u[_+1]=w-k}break;default:throw new Error("Invalid rotation")}return u}static#B(u,m,v){const[b,g,y,w]=m;switch(v){case 0:for(let _=0,R=u.length;_<R;_+=2)u[_]-=b,u[_+1]=w-u[_+1];break;case 90:for(let _=0,R=u.length;_<R;_+=2){const k=u[_];u[_]=u[_+1]-g,u[_+1]=k-b}break;case 180:for(let _=0,R=u.length;_<R;_+=2)u[_]=y-u[_],u[_+1]-=g;break;case 270:for(let _=0,R=u.length;_<R;_+=2){const k=u[_];u[_]=w-u[_+1],u[_+1]=y-k}break;default:throw new Error("Invalid rotation")}return u}#U(u,m,v,b){const g=[],y=this.thickness/2,w=u*m+y,_=u*v+y;for(const R of this.paths){const k=[],C=[];for(let A=0,D=R.length;A<D;A++){const[H,I,F,Z]=R[A],N=u*H[0]+w,G=u*H[1]+_,J=u*I[0]+w,ee=u*I[1]+_,te=u*F[0]+w,W=u*F[1]+_,O=u*Z[0]+w,j=u*Z[1]+_;A===0&&(k.push(N,G),C.push(N,G)),k.push(J,ee,te,W,O,j),C.push(J,ee),A===D-1&&C.push(O,j)}g.push({bezier:p.#F(k,b,this.rotation),points:p.#F(C,b,this.rotation)})}return g}#j(){let u=1/0,m=-1/0,v=1/0,b=-1/0;for(const g of this.paths)for(const[y,w,_,R]of g){const k=i.Util.bezierBoundingBox(...y,...w,..._,...R);u=Math.min(u,k[0]),v=Math.min(v,k[1]),m=Math.max(m,k[2]),b=Math.max(b,k[3])}return[u,v,m,b]}#M(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#R(u=!1){if(this.isEmpty())return;if(!this.#l){this.#x();return}const m=this.#j(),v=this.#M();this.#t=Math.max(s.AnnotationEditor.MIN_SIZE,m[2]-m[0]),this.#e=Math.max(s.AnnotationEditor.MIN_SIZE,m[3]-m[1]);const b=Math.ceil(v+this.#t*this.scaleFactor),g=Math.ceil(v+this.#e*this.scaleFactor),[y,w]=this.parentDimensions;this.width=b/y,this.height=g/w,this.setAspectRatio(b,g);const _=this.translationX,R=this.translationY;this.translationX=-m[0],this.translationY=-m[1],this.#b(),this.#x(),this.#d=b,this.#h=g,this.setDims(b,g);const k=u?v/this.scaleFactor/2:0;this.translate(_-this.translationX-k,R-this.translationY-k)}static deserialize(u,m,v){if(u instanceof o.InkAnnotationElement)return null;const b=super.deserialize(u,m,v);b.thickness=u.thickness,b.color=i.Util.makeHexColor(...u.color),b.opacity=u.opacity;const[g,y]=b.pageDimensions,w=b.width*g,_=b.height*y,R=b.parentScale,k=u.thickness/2;b.#l=!0,b.#d=Math.round(w),b.#h=Math.round(_);const{paths:C,rect:A,rotation:D}=u;for(let{bezier:I}of C){I=p.#B(I,A,D);const F=[];b.paths.push(F);let Z=R*(I[0]-k),N=R*(I[1]-k);for(let J=2,ee=I.length;J<ee;J+=6){const te=R*(I[J]-k),W=R*(I[J+1]-k),O=R*(I[J+2]-k),j=R*(I[J+3]-k),T=R*(I[J+4]-k),E=R*(I[J+5]-k);F.push([[Z,N],[te,W],[O,j],[T,E]]),Z=T,N=E}const G=this.#L(F);b.bezierPath2D.push(G)}const H=b.#j();return b.#t=Math.max(s.AnnotationEditor.MIN_SIZE,H[2]-H[0]),b.#e=Math.max(s.AnnotationEditor.MIN_SIZE,H[3]-H[1]),b.#T(w,_),b}serialize(){if(this.isEmpty())return null;const u=this.getRect(0,0),m=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:m,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,u),pageIndex:this.pageIndex,rect:u,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}e.InkEditor=p},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var i=n(1),s=n(4),o=n(6),c=n(29);class f extends s.AnnotationEditor{#e=null;#t=null;#n=null;#i=null;#o=null;#s=null;#a=null;#l=null;#c=!1;#r=!1;static _type="stamp";constructor(d){super({...d,name:"stampEditor"}),this.#i=d.bitmapUrl,this.#o=d.bitmapFile}static initialize(d){s.AnnotationEditor.initialize(d)}static get supportedTypes(){const d=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",d.map(u=>`image/${u}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(d){return this.supportedTypes.includes(d)}static paste(d,u){u.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:d.getAsFile()})}#f(d,u=!1){if(!d){this.remove();return}this.#e=d.bitmap,u||(this.#t=d.id,this.#c=d.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#s&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(u=>this.#f(u,!0)).finally(()=>this.#d());return}if(this.#i){const u=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(u).then(m=>this.#f(m)).finally(()=>this.#d());return}if(this.#o){const u=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(u).then(m=>this.#f(m)).finally(()=>this.#d());return}const d=document.createElement("input");d.type="file",d.accept=f.supportedTypesStr,this.#n=new Promise(u=>{d.addEventListener("change",async()=>{if(!d.files||d.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const m=await this._uiManager.imageManager.getFromFile(d.files[0]);this.#f(m)}u()}),d.addEventListener("cancel",()=>{this.remove(),u()})}).finally(()=>this.#d()),d.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let d,u;if(this.width&&(d=this.x,u=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[m,v]=this.parentDimensions;this.setAt(d*m,u*v,this.width*m,this.height*v)}return this.div}#p(){const{div:d}=this;let{width:u,height:m}=this.#e;const[v,b]=this.pageDimensions,g=.75;if(this.width)u=this.width*v,m=this.height*b;else if(u>g*v||m>g*b){const R=Math.min(g*v/u,g*b/m);u*=R,m*=R}const[y,w]=this.parentDimensions;this.setDims(u*y/v,m*w/b),this._uiManager.enableWaiting(!1);const _=this.#s=document.createElement("canvas");d.append(_),d.hidden=!1,this.#m(u,m),this.#y(),this.#r||(this.parent.addUndoableEditor(this),this.#r=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(d,u){const[m,v]=this.parentDimensions;this.width=d/m,this.height=u/v,this.setDims(d,u),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const b=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(d,u)},b)}#g(d,u){const{width:m,height:v}=this.#e;let b=m,g=v,y=this.#e;for(;b>2*d||g>2*u;){const w=b,_=g;b>2*d&&(b=b>=16384?Math.floor(b/2)-1:Math.ceil(b/2)),g>2*u&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2));const R=new OffscreenCanvas(b,g);R.getContext("2d").drawImage(y,0,0,w,_,0,0,b,g),y=R.transferToImageBitmap()}return y}#m(d,u){d=Math.ceil(d),u=Math.ceil(u);const m=this.#s;if(!m||m.width===d&&m.height===u)return;m.width=d,m.height=u;const v=this.#c?this.#e:this.#g(d,u),b=m.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(v,0,0,v.width,v.height,0,0,d,u)}#u(d){if(d){if(this.#c){const v=this._uiManager.imageManager.getSvgUrl(this.#t);if(v)return v}const u=document.createElement("canvas");return{width:u.width,height:u.height}=this.#e,u.getContext("2d").drawImage(this.#e,0,0),u.toDataURL()}if(this.#c){const[u,m]=this.pageDimensions,v=Math.round(this.width*u*o.PixelsPerInch.PDF_TO_CSS_UNITS),b=Math.round(this.height*m*o.PixelsPerInch.PDF_TO_CSS_UNITS),g=new OffscreenCanvas(v,b);return g.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,v,b),g.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this.#a=new ResizeObserver(d=>{const u=d[0].contentRect;u.width&&u.height&&this.#v(u.width,u.height)}),this.#a.observe(this.div)}static deserialize(d,u,m){if(d instanceof c.StampAnnotationElement)return null;const v=super.deserialize(d,u,m),{rect:b,bitmapUrl:g,bitmapId:y,isSvg:w,accessibilityData:_}=d;y&&m.imageManager.isValidId(y)?v.#t=y:v.#i=g,v.#c=w;const[R,k]=v.pageDimensions;return v.width=(b[2]-b[0])/R,v.height=(b[3]-b[1])/k,_&&(v.altTextData=_),v}serialize(d=!1,u=null){if(this.isEmpty())return null;const m={annotationType:i.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(d)return m.bitmapUrl=this.#u(!0),m.accessibilityData=this.altTextData,m;const{decorative:v,altText:b}=this.altTextData;if(!v&&b&&(m.accessibilityData={type:"Figure",alt:b}),u===null)return m;u.stamps||=new Map;const g=this.#c?(m.rect[2]-m.rect[0])*(m.rect[3]-m.rect[1]):null;if(!u.stamps.has(this.#t))u.stamps.set(this.#t,{area:g,serialized:m}),m.bitmap=this.#u(!1);else if(this.#c){const y=u.stamps.get(this.#t);g>y.area&&(y.area=g,y.serialized.bitmap.close(),y.serialized.bitmap=this.#u(!1))}return m}}e.StampEditor=f}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return c.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return f.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return p.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),s=__w_pdfjs_require__(26),o=__w_pdfjs_require__(27),c=__w_pdfjs_require__(5),f=__w_pdfjs_require__(29),p=__w_pdfjs_require__(14),d=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,function(t){var e=requireReact(),n=requirePdf();function i(B){var Q=Object.create(null);return B&&Object.keys(B).forEach(function(ae){if(ae!=="default"){var oe=Object.getOwnPropertyDescriptor(B,ae);Object.defineProperty(Q,ae,oe.get?oe:{enumerable:!0,get:function(){return B[ae]}})}}),Q.default=B,Object.freeze(Q)}var s,o=i(e),c=i(n);t.AnnotationType=void 0,(s=t.AnnotationType||(t.AnnotationType={}))[s.Text=1]="Text",s[s.Link=2]="Link",s[s.FreeText=3]="FreeText",s[s.Line=4]="Line",s[s.Square=5]="Square",s[s.Circle=6]="Circle",s[s.Polygon=7]="Polygon",s[s.Polyline=8]="Polyline",s[s.Highlight=9]="Highlight",s[s.Underline=10]="Underline",s[s.Squiggly=11]="Squiggly",s[s.StrikeOut=12]="StrikeOut",s[s.Stamp=13]="Stamp",s[s.Caret=14]="Caret",s[s.Ink=15]="Ink",s[s.Popup=16]="Popup",s[s.FileAttachment=17]="FileAttachment";var f=function(B,Q){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,oe){ae.__proto__=oe}||function(ae,oe){for(var ue in oe)Object.prototype.hasOwnProperty.call(oe,ue)&&(ae[ue]=oe[ue])},f(B,Q)};function p(B,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function ae(){this.constructor=B}f(B,Q),B.prototype=Q===null?Object.create(Q):(ae.prototype=Q.prototype,new ae)}var d,u=function(){return u=Object.assign||function(B){for(var Q,ae=1,oe=arguments.length;ae<oe;ae++)for(var ue in Q=arguments[ae])Object.prototype.hasOwnProperty.call(Q,ue)&&(B[ue]=Q[ue]);return B},u.apply(this,arguments)};t.TextDirection=void 0,(d=t.TextDirection||(t.TextDirection={})).RightToLeft="RTL",d.LeftToRight="LTR";var m,v=o.createContext({currentTheme:"light",direction:t.TextDirection.LeftToRight,setCurrentTheme:function(){}}),b=function(B){var Q=[];return Object.keys(B).forEach(function(ae){ae&&B[ae]&&Q.push(ae)}),Q.join(" ")},g=typeof window<"u"?o.useLayoutEffect:o.useEffect,y=function(B){var Q=o.useRef(null),ae=B.once,oe=B.threshold,ue=B.onVisibilityChanged;return g(function(){var de=Q.current;if(de){var ye=new IntersectionObserver(function(he){he.forEach(function(se){var pe=se.isIntersecting,me=se.intersectionRatio;ue({isVisible:pe,ratio:me}),pe&&ae&&(ye.unobserve(de),ye.disconnect())})},{threshold:oe||0});return ye.observe(de),function(){ye.unobserve(de),ye.disconnect()}}},[]),Q},w=function(B){var Q=B.children,ae=B.ignoreDirection,oe=ae!==void 0&&ae,ue=B.size,de=ue===void 0?24:ue,ye=o.useContext(v).direction,he=!oe&&ye===t.TextDirection.RightToLeft,se="".concat(de||24,"px");return o.createElement("svg",{"aria-hidden":"true",className:b({"rpv-core__icon":!0,"rpv-core__icon--rtl":he}),focusable:"false",height:se,viewBox:"0 0 24 24",width:se},Q)},_=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},R=function(B){var Q=B.children,ae=B.testId,oe=B.onClick,ue=o.useContext(v).direction===t.TextDirection.RightToLeft,de=ae?{"data-testid":ae}:{};return o.createElement("button",u({className:b({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":ue}),type:"button",onClick:oe},de),Q)},k=function(B){var Q=B.size,ae=Q===void 0?"4rem":Q,oe=B.testId,ue=o.useState(!1),de=ue[0],ye=ue[1],he=oe?{"data-testid":oe}:{},se=y({onVisibilityChanged:function(pe){ye(pe.isVisible)}});return o.createElement("div",u({},he,{className:b({"rpv-core__spinner":!0,"rpv-core__spinner--animating":de}),ref:se,style:{height:ae,width:ae}}))},C=function(B){var Q=B.ariaLabel,ae=Q===void 0?"":Q,oe=B.autoFocus,ue=oe!==void 0&&oe,de=B.placeholder,ye=de===void 0?"":de,he=B.testId,se=B.type,pe=se===void 0?"text":se,me=B.value,Me=me===void 0?"":me,De=B.onChange,je=B.onKeyDown,We=je===void 0?function(){}:je,qe=o.useContext(v).direction,ze=o.useRef(),bt=qe===t.TextDirection.RightToLeft,it={ref:ze,"data-testid":"","aria-label":ae,className:b({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":bt}),placeholder:ye,value:Me,onChange:function(at){return De(at.target.value)},onKeyDown:We};return he&&(it["data-testid"]=he),g(function(){if(ue){var at=ze.current;if(at){var ht=window.scrollX,Ze=window.scrollY;at.focus(),window.scrollTo(ht,Ze)}}},[]),pe==="text"?o.createElement("input",u({type:"text"},it)):o.createElement("input",u({type:"password"},it))};(function(B){B[B.ExitFullScreen=0]="ExitFullScreen",B[B.FullScreenChange=1]="FullScreenChange",B[B.FullScreenElement=2]="FullScreenElement",B[B.FullScreenEnabled=3]="FullScreenEnabled",B[B.RequestFullScreen=4]="RequestFullScreen"})(m||(m={}));var A,D={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},H={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},I={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},F=typeof window<"u",Z=F&&(m.FullScreenEnabled in document&&D||H.FullScreenEnabled in document&&H||I.FullScreenEnabled in document&&I)||D,N=function(){return F&&Z.FullScreenEnabled in document&&document[Z.FullScreenEnabled]===!0},G=function(B){return F?B[Z.ExitFullScreen]():Promise.resolve({})},J=function(){return F?document[Z.FullScreenElement]:null},ee=function(B,Q){var ae=o.useRef(),oe=function(){ae.current&&clearTimeout(ae.current)};return o.useEffect(function(){return function(){return oe()}},[]),o.useCallback(function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];oe(),ae.current=setTimeout(function(){B.apply(void 0,ue)},Q)},[B,Q])},te=function(){var B=o.useRef(!1);return o.useEffect(function(){return B.current=!0,function(){B.current=!1}},[]),B},W=function(B){var Q=o.useRef(B);return o.useEffect(function(){Q.current=B},[B]),Q.current};(function(B){B.NotRenderedYet="NotRenderedYet",B.Rendering="Rendering",B.Rendered="Rendered"})(A||(A={}));var O,j=-9999,T=function(B){var Q=B.doc,ae=Q.numPages,oe=Q.loadingTask.docId,ue=o.useMemo(function(){return Array(ae).fill(null).map(function(he,se){return{pageIndex:se,renderStatus:A.NotRenderedYet,visibility:j}})},[oe]),de=o.useRef({currentRenderingPage:-1,startRange:0,endRange:ae-1,visibilities:ue}),ye=function(he,se){de.current.visibilities[he].visibility=se};return{getHighestPriorityPage:function(){var he=de.current.visibilities.slice(de.current.startRange,de.current.endRange+1).filter(function(De){return De.visibility>j});if(!he.length)return-1;for(var se=he[0].pageIndex,pe=he[he.length-1].pageIndex,me=he.length,Me=0;Me<me;Me++){if(he[Me].renderStatus===A.Rendering)return-1;if(he[Me].renderStatus===A.NotRenderedYet)return he[Me].pageIndex}return pe+1<ae&&de.current.visibilities[pe+1].renderStatus!==A.Rendered?pe+1:se-1>=0&&de.current.visibilities[se-1].renderStatus!==A.Rendered?se-1:-1},isInRange:function(he){return he>=de.current.startRange&&he<=de.current.endRange},markNotRendered:function(){for(var he=0;he<ae;he++)de.current.visibilities[he].renderStatus=A.NotRenderedYet},markRendered:function(he){de.current.visibilities[he].renderStatus=A.Rendered},markRendering:function(he){de.current.currentRenderingPage!==-1&&de.current.currentRenderingPage!==he&&de.current.visibilities[de.current.currentRenderingPage].renderStatus===A.Rendering&&(de.current.visibilities[de.current.currentRenderingPage].renderStatus=A.NotRenderedYet),de.current.visibilities[he].renderStatus=A.Rendering,de.current.currentRenderingPage=he},setOutOfRange:function(he){ye(he,j)},setRange:function(he,se){de.current.startRange=he,de.current.endRange=se;for(var pe=0;pe<ae;pe++)(pe<he||pe>se)&&(de.current.visibilities[pe].visibility=j,de.current.visibilities[pe].renderStatus=A.NotRenderedYet)},setVisibility:ye}},E={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},M=o.createContext({l10n:E,setL10n:function(){}}),U=0,$=function(){return U++},z=function(B,Q,ae){var oe=function(ue){var de=Q.current;if(de){var ye=ue.target;if(ye instanceof Element&&ye.shadowRoot){var he=ue.composedPath();he.length>0&&!de.contains(he[0])&&ae()}else de.contains(ye)||ae()}};o.useEffect(function(){if(B){var ue={capture:!0};return document.addEventListener("click",oe,ue),function(){document.removeEventListener("click",oe,ue)}}},[])},q=function(B){var Q=function(ae){ae.key==="Escape"&&B()};o.useEffect(function(){return document.addEventListener("keyup",Q),function(){document.removeEventListener("keyup",Q)}},[])},P=function(B){var Q=B.ariaControlsSuffix,ae=B.children,oe=B.closeOnClickOutside,ue=B.closeOnEscape,de=B.onToggle,ye=o.useRef(),he=o.useContext(v).direction===t.TextDirection.RightToLeft;return o.useEffect(function(){var se=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=se}},[]),q(function(){ye.current&&ue&&de()}),z(oe,ye,de),g(function(){var se=ye.current;if(se){var pe=.75*document.body.clientHeight;se.getBoundingClientRect().height>=pe&&(se.style.overflow="auto",se.style.maxHeight="".concat(pe,"px"))}},[]),o.createElement("div",{"aria-modal":"true",className:b({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":he}),id:"rpv-core__modal-body-".concat(Q),ref:ye,role:"dialog",tabIndex:-1},ae)},V=function(B){var Q=B.children;return o.createElement("div",{className:"rpv-core__modal-overlay"},Q)};t.ToggleStatus=void 0,(O=t.ToggleStatus||(t.ToggleStatus={})).Close="Close",O.Open="Open",O.Toggle="Toggle";var L,Y=function(B){var Q=o.useState(B),ae=Q[0],oe=Q[1];return{opened:ae,toggle:function(ue){switch(ue){case t.ToggleStatus.Close:oe(!1);break;case t.ToggleStatus.Open:oe(!0);break;case t.ToggleStatus.Toggle:default:oe(function(de){return!de})}}}},ne=function(B){var Q=B.content,ae=B.isOpened,oe=ae!==void 0&&ae,ue=B.target,de=Y(oe),ye=de.opened,he=de.toggle;return o.createElement(o.Fragment,null,ue&&ue(he,ye),ye&&Q(he))};t.Position=void 0,(L=t.Position||(t.Position={})).TopLeft="TOP_LEFT",L.TopCenter="TOP_CENTER",L.TopRight="TOP_RIGHT",L.RightTop="RIGHT_TOP",L.RightCenter="RIGHT_CENTER",L.RightBottom="RIGHT_BOTTOM",L.BottomLeft="BOTTOM_LEFT",L.BottomCenter="BOTTOM_CENTER",L.BottomRight="BOTTOM_RIGHT",L.LeftTop="LEFT_TOP",L.LeftCenter="LEFT_CENTER",L.LeftBottom="LEFT_BOTTOM";var re,le,_e,Fe,we,Te,Re,fe,be=function(B,Q,ae,oe,ue){g(function(){var de=Q.current,ye=B.current,he=ae.current;if(ye&&de&&he){var se=he.getBoundingClientRect(),pe=function(De,je,We,qe){var ze=je.getBoundingClientRect(),bt=De.getBoundingClientRect(),it=bt.height,at=bt.width,ht=0,Ze=0;switch(We){case t.Position.TopLeft:ht=ze.top-it,Ze=ze.left;break;case t.Position.TopCenter:ht=ze.top-it,Ze=ze.left+ze.width/2-at/2;break;case t.Position.TopRight:ht=ze.top-it,Ze=ze.left+ze.width-at;break;case t.Position.RightTop:ht=ze.top,Ze=ze.left+ze.width;break;case t.Position.RightCenter:ht=ze.top+ze.height/2-it/2,Ze=ze.left+ze.width;break;case t.Position.RightBottom:ht=ze.top+ze.height-it,Ze=ze.left+ze.width;break;case t.Position.BottomLeft:ht=ze.top+ze.height,Ze=ze.left;break;case t.Position.BottomCenter:ht=ze.top+ze.height,Ze=ze.left+ze.width/2-at/2;break;case t.Position.BottomRight:ht=ze.top+ze.height,Ze=ze.left+ze.width-at;break;case t.Position.LeftTop:ht=ze.top,Ze=ze.left-at;break;case t.Position.LeftCenter:ht=ze.top+ze.height/2-it/2,Ze=ze.left-at;break;case t.Position.LeftBottom:ht=ze.top+ze.height-it,Ze=ze.left-at}return{left:Ze+(qe.left||0),top:ht+(qe.top||0)}}(ye,de,oe,ue),me=pe.top,Me=pe.left;ye.style.top="".concat(me-se.top,"px"),ye.style.left="".concat(Me-se.left,"px")}},[])},Ue=function(B){var Q,ae=B.customClassName,oe=B.position;return o.createElement("div",{className:b((Q={"rpv-core__arrow":!0,"rpv-core__arrow--tl":oe===t.Position.TopLeft,"rpv-core__arrow--tc":oe===t.Position.TopCenter,"rpv-core__arrow--tr":oe===t.Position.TopRight,"rpv-core__arrow--rt":oe===t.Position.RightTop,"rpv-core__arrow--rc":oe===t.Position.RightCenter,"rpv-core__arrow--rb":oe===t.Position.RightBottom,"rpv-core__arrow--bl":oe===t.Position.BottomLeft,"rpv-core__arrow--bc":oe===t.Position.BottomCenter,"rpv-core__arrow--br":oe===t.Position.BottomRight,"rpv-core__arrow--lt":oe===t.Position.LeftTop,"rpv-core__arrow--lc":oe===t.Position.LeftCenter,"rpv-core__arrow--lb":oe===t.Position.LeftBottom},Q["".concat(ae)]=ae!=="",Q))})},Ne=function(B){var Q=B.ariaControlsSuffix,ae=B.children,oe=B.closeOnClickOutside,ue=B.offset,de=B.position,ye=B.targetRef,he=B.onClose,se=o.useRef(),pe=o.useRef(),me=o.useRef(),Me=o.useContext(v).direction===t.TextDirection.RightToLeft;z(oe,se,he),be(se,ye,me,de,ue),g(function(){var je=pe.current;if(je){var We=.75*document.body.clientHeight;je.getBoundingClientRect().height>=We&&(je.style.overflow="auto",je.style.maxHeight="".concat(We,"px"))}},[]);var De="rpv-core__popover-body-inner-".concat(Q);return o.createElement(o.Fragment,null,o.createElement("div",{ref:me,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{"aria-describedby":De,className:b({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Me}),id:"rpv-core__popover-body-".concat(Q),ref:se,role:"dialog",tabIndex:-1},o.createElement(Ue,{customClassName:"rpv-core__popover-body-arrow",position:de}),o.createElement("div",{id:De,ref:pe},ae)))},Be=function(B){var Q=B.closeOnEscape,ae=B.onClose,oe=o.useRef();return q(function(){oe.current&&Q&&ae()}),o.createElement("div",{className:"rpv-core__popover-overlay",ref:oe})},Ke=function(B){var Q=B.ariaControlsSuffix,ae=B.children,oe=B.contentRef,ue=B.offset,de=B.position,ye=B.targetRef,he=o.useRef(),se=o.useContext(v).direction===t.TextDirection.RightToLeft;return be(oe,ye,he,de,ue),o.createElement(o.Fragment,null,o.createElement("div",{ref:he,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{className:b({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":se}),id:"rpv-core__tooltip-body-".concat(Q),ref:oe,role:"tooltip"},o.createElement(Ue,{customClassName:"rpv-core__tooltip-body-arrow",position:de}),o.createElement("div",{className:"rpv-core__tooltip-body-content"},ae)))};t.FullScreenMode=void 0,(re=t.FullScreenMode||(t.FullScreenMode={})).Normal="Normal",re.Entering="Entering",re.Entered="Entered",re.EnteredCompletely="EnteredCompletely",re.Exitting="Exitting",re.Exited="Exited",t.LayerRenderStatus=void 0,(le=t.LayerRenderStatus||(t.LayerRenderStatus={}))[le.PreRender=0]="PreRender",le[le.DidRender=1]="DidRender",t.PageMode=void 0,(_e=t.PageMode||(t.PageMode={})).Attachments="UseAttachments",_e.Bookmarks="UseOutlines",_e.ContentGroup="UseOC",_e.Default="UserNone",_e.FullScreen="FullScreen",_e.Thumbnails="UseThumbs",t.PasswordStatus=void 0,(Fe=t.PasswordStatus||(t.PasswordStatus={})).RequiredPassword="RequiredPassword",Fe.WrongPassword="WrongPassword",t.RotateDirection=void 0,(we=t.RotateDirection||(t.RotateDirection={})).Backward="Backward",we.Forward="Forward",t.ScrollMode=void 0,(Te=t.ScrollMode||(t.ScrollMode={})).Page="Page",Te.Horizontal="Horizontal",Te.Vertical="Vertical",Te.Wrapped="Wrapped",t.SpecialZoomLevel=void 0,(Re=t.SpecialZoomLevel||(t.SpecialZoomLevel={})).ActualSize="ActualSize",Re.PageFit="PageFit",Re.PageWidth="PageWidth",t.ViewMode=void 0,(fe=t.ViewMode||(t.ViewMode={})).DualPage="DualPage",fe.DualPageWithCover="DualPageWithCover",fe.SinglePage="SinglePage";var ke,He=function(B,Q){return B.reduce(function(ae,oe,ue){return ue%Q?ae[ae.length-1].push(oe):ae.push([oe]),ae},[])},nt=function(B,Q){switch(Q[1].name){case"XYZ":return{bottomOffset:function(ae,oe){return Q[3]===null?oe:Q[3]},leftOffset:function(ae,oe){return Q[2]===null?0:Q[2]},pageIndex:B,scaleTo:Q[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:B,scaleTo:t.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:Q[2],leftOffset:0,pageIndex:B,scaleTo:t.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:B,scaleTo:1}}},Xe=new Map,vt=new Map,pt=function(B,Q){return"".concat(B.loadingTask.docId,"___").concat(Q.num,"R").concat(Q.gen===0?"":Q.gen)},Mt=function(B,Q,ae){Xe.set(pt(B,Q),ae)},jt=function(B,Q){if(!B)return Promise.reject("The document is not loaded yet");var ae="".concat(B.loadingTask.docId,"___").concat(Q),oe=vt.get(ae);return oe?Promise.resolve(oe):new Promise(function(ue,de){B.getPage(Q+1).then(function(ye){vt.set(ae,ye),ye.ref&&Mt(B,ye.ref,Q),ue(ye)})})},Pn=function(B,Q){return new Promise(function(ae){new Promise(function(oe){typeof Q=="string"?B.getDestination(Q).then(function(ue){oe(ue)}):oe(Q)}).then(function(oe){if(typeof oe[0]=="object"&&oe[0]!==null){var ue=oe[0],de=function(he,se){var pe=pt(he,se);return Xe.has(pe)?Xe.get(pe):null}(B,ue);de===null?B.getPageIndex(ue).then(function(he){Mt(B,ue,he),Pn(B,Q).then(function(se){return ae(se)})}):ae(nt(de,oe))}else{var ye=nt(oe[0],oe);ae(ye)}})})};(function(B){B[B.Solid=1]="Solid",B[B.Dashed=2]="Dashed",B[B.Beveled=3]="Beveled",B[B.Inset=4]="Inset",B[B.Underline=5]="Underline"})(ke||(ke={}));var $t,Ie=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),xe=function(B,Q,ae,oe){var ue=parseInt(B,10);return ue>=Q&&ue<=ae?ue:oe},ve=function(B){return B.contentsObj?B.contentsObj.str:B.contents||""},Ge=function(B){return B.titleObj?B.titleObj.str:B.title||""},kt=function(B){var Q=B.annotation,ae=o.useContext(v).direction,oe=Ge(Q),ue=ve(Q),de=ae===t.TextDirection.RightToLeft,ye=o.useRef(),he="";if(Q.modificationDate){var se=function(pe){var me=Ie.exec(pe);if(!me)return null;var Me=parseInt(me[1],10),De=xe(me[2],1,12,1)-1,je=xe(me[3],1,31,1),We=xe(me[4],0,23,0),qe=xe(me[5],0,59,0),ze=xe(me[6],0,59,0),bt=me[7]||"Z",it=xe(me[8],0,23,0),at=xe(me[9],0,59,0);switch(bt){case"-":We+=it,qe+=at;break;case"+":We-=it,qe-=at}return new Date(Date.UTC(Me,De,je,We,qe,ze))}(Q.modificationDate);he=se?"".concat(se.toLocaleDateString(),", ").concat(se.toLocaleTimeString()):""}return o.useLayoutEffect(function(){if(ye.current){var pe=document.querySelector('[data-annotation-id="'.concat(Q.id,'"]'));if(pe){var me=pe;return me.style.zIndex+=1,function(){me.style.zIndex="".concat(parseInt(me.style.zIndex,10)-1)}}}},[]),o.createElement("div",{ref:ye,className:b({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":de}),style:{top:Q.annotationType===t.AnnotationType.Popup?"":"100%"}},oe&&o.createElement(o.Fragment,null,o.createElement("div",{className:b({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!de,"rpv-core__annotation-popup-title--rtl":de})},oe),o.createElement("div",{className:"rpv-core__annotation-popup-date"},he)),ue&&o.createElement("div",{className:"rpv-core__annotation-popup-content"},ue.split(`
`).map(function(pe,me){return o.createElement(o.Fragment,{key:me},pe,o.createElement("br",null))})))};(function(B){B.Click="Click",B.Hover="Hover"})($t||($t={}));var dt,Ct=function(B){var Q,ae=B.annotation,oe=B.children,ue=B.ignoreBorder,de=B.hasPopup,ye=B.isRenderable,he=B.page,se=B.viewport,pe=ae.rect,me=function(){var lt=Y(!1),It=lt.opened,Dt=lt.toggle,Lt=o.useState($t.Hover),Ft=Lt[0],zt=Lt[1];return{opened:It,closeOnHover:function(){Ft===$t.Hover&&Dt(t.ToggleStatus.Close)},openOnHover:function(){Ft===$t.Hover&&Dt(t.ToggleStatus.Open)},toggleOnClick:function(){switch(Ft){case $t.Click:It&&zt($t.Hover),Dt(t.ToggleStatus.Toggle);break;case $t.Hover:zt($t.Click),Dt(t.ToggleStatus.Open)}}}}(),Me=me.closeOnHover,De=me.opened,je=me.openOnHover,We=me.toggleOnClick,qe=(Q=[pe[0],he.view[3]+he.view[1]-pe[1],pe[2],he.view[3]+he.view[1]-pe[3]],[Math.min(Q[0],Q[2]),Math.min(Q[1],Q[3]),Math.max(Q[0],Q[2]),Math.max(Q[1],Q[3])]),ze=pe[2]-pe[0],bt=pe[3]-pe[1],it={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!ue&&ae.borderStyle.width>0){switch(ae.borderStyle.style){case ke.Dashed:it.borderStyle="dashed";break;case ke.Solid:it.borderStyle="solid";break;case ke.Underline:it=Object.assign({borderBottomStyle:"solid"},it);case ke.Beveled:case ke.Inset:}var at=ae.borderStyle.width;it.borderWidth="".concat(at,"px"),ae.borderStyle.style!==ke.Underline&&(ze-=2*at,bt-=2*at);var ht=ae.borderStyle,Ze=ht.horizontalCornerRadius,mt=ht.verticalCornerRadius;(Ze>0||mt>0)&&(it.borderRadius="".concat(Ze,"px / ").concat(mt,"px")),ae.color?it.borderColor="rgb(".concat(0|ae.color[0],", ").concat(0|ae.color[1],", ").concat(0|ae.color[2],")"):it.borderWidth="0"}return o.createElement(o.Fragment,null,ye&&oe({popup:{opened:De,closeOnHover:Me,openOnHover:je,toggleOnClick:We},slot:{attrs:{style:Object.assign({height:"".concat(bt,"px"),left:"".concat(qe[0],"px"),top:"".concat(qe[1],"px"),transform:"matrix(".concat(se.transform.join(","),")"),transformOrigin:"-".concat(qe[0],"px -").concat(qe[1],"px"),width:"".concat(ze,"px")},it)},children:o.createElement(o.Fragment,null,de&&De&&o.createElement(kt,{annotation:ae}))}}))},Bn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye);return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},bn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye),se=Q.rect,pe=se[2]-se[0],me=se[3]-se[1],Me=Q.borderStyle.width;return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(De){return o.createElement("div",u({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":Q.id,onClick:De.popup.toggleOnClick,onMouseEnter:De.popup.openOnHover,onMouseLeave:De.popup.closeOnHover}),o.createElement("svg",{height:"".concat(me,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(pe," ").concat(me),width:"".concat(pe,"px")},o.createElement("circle",{cy:me/2,fill:"none",rx:pe/2-Me/2,ry:me/2-Me/2,stroke:"transparent",strokeWidth:Me||1})),De.slot.children)})},Wn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Ge(Q),de=ve(Q),ye=!(Q.hasPopup!==!1||!ue&&!de),he=function(){var se,pe,me,Me,De=Q.file;De&&(se=De.filename,pe=De.content,me=typeof pe=="string"?"":URL.createObjectURL(new Blob([pe],{type:""})),(Me=document.createElement("a")).style.display="none",Me.href=me||se,Me.setAttribute("download",function(je){var We=je.split("/").pop();return We?We.split("#")[0].split("?")[0]:je}(se)),document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),me&&URL.revokeObjectURL(me))};return o.createElement(Ct,{annotation:Q,hasPopup:ye,ignoreBorder:!0,isRenderable:!0,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onDoubleClick:he,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},vn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye);return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},Kn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Ge(Q),de=ve(Q),ye=!(!ue&&!de),he=!Q.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(Q.parentType)!==-1;return g(function(){if(Q.parentId){var se=document.querySelector('[data-annotation-id="'.concat(Q.parentId,'"]')),pe=document.querySelector('[data-annotation-id="'.concat(Q.id,'"]'));if(se&&pe){var me=parseFloat(se.style.left),Me=parseFloat(se.style.top)+parseFloat(se.style.height);pe.style.left="".concat(me,"px"),pe.style.top="".concat(Me,"px"),pe.style.transformOrigin="-".concat(me,"px -").concat(Me,"px")}}},[]),o.createElement(Ct,{annotation:Q,hasPopup:he,ignoreBorder:!1,isRenderable:ye,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":Q.id}),o.createElement(kt,{annotation:Q}))})},Nn=function(B){var Q=B.annotation,ae=B.childAnnotation,oe=B.page,ue=B.viewport,de=Q.hasPopup===!1,ye=Ge(Q),he=ve(Q),se=!!(Q.hasPopup||ye||he);if(Q.quadPoints&&Q.quadPoints.length>0){var pe=Q.quadPoints.map(function(me){return Object.assign({},Q,{rect:[me[2].x,me[2].y,me[1].x,me[1].y],quadPoints:[]})});return o.createElement(o.Fragment,null,pe.map(function(me,Me){return o.createElement(Nn,{key:Me,annotation:me,childAnnotation:ae,page:oe,viewport:ue})}))}return o.createElement(Ct,{annotation:Q,hasPopup:de,ignoreBorder:!0,isRenderable:se,page:oe,viewport:ue},function(me){return o.createElement(o.Fragment,null,o.createElement("div",u({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":Q.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),me.slot.children),ae&&ae.annotationType===t.AnnotationType.Popup&&me.popup.opened&&o.createElement(Kn,{annotation:ae,page:oe,viewport:ue}))})},Qn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye),se=Q.rect,pe=se[2]-se[0],me=se[3]-se[1],Me=Q.borderStyle.width;return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(De){return o.createElement("div",u({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":Q.id,onClick:De.popup.toggleOnClick,onMouseEnter:De.popup.openOnHover,onMouseLeave:De.popup.closeOnHover}),Q.inkLists&&Q.inkLists.length&&o.createElement("svg",{height:"".concat(me,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(pe," ").concat(me),width:"".concat(pe,"px")},Q.inkLists.map(function(je,We){return o.createElement("polyline",{key:We,fill:"none",stroke:"transparent",strokeWidth:Me||1,points:je.map(function(qe){return"".concat(qe.x-se[0],",").concat(se[3]-qe.y)}).join(" ")})})),De.slot.children)})},tn=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye),se=Q.rect,pe=se[2]-se[0],me=se[3]-se[1],Me=Q.borderStyle.width;return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(De){return o.createElement("div",u({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":Q.id,onClick:De.popup.toggleOnClick,onMouseEnter:De.popup.openOnHover,onMouseLeave:De.popup.closeOnHover}),o.createElement("svg",{height:"".concat(me,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(pe," ").concat(me),width:"".concat(pe,"px")},o.createElement("line",{stroke:"transparent",strokeWidth:Me||1,x1:se[2]-Q.lineCoordinates[0],x2:se[2]-Q.lineCoordinates[2],y1:se[3]-Q.lineCoordinates[1],y2:se[3]-Q.lineCoordinates[3]})),De.slot.children)})},yi=/^([^\w]*)(javascript|data|vbscript)/im,In=/&#(\w+)(^\w|;)?/g,fn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,_n=/^([^:]+):/gm,Yn=function(B,Q){var ae,oe=(ae=B||"",ae.replace(In,function(he,se){return String.fromCharCode(se)})).replace(fn,"").trim();if(!oe)return Q;var ue=oe[0];if(ue==="."||ue==="/")return oe;var de=oe.match(_n);if(!de)return oe;var ye=de[0];return yi.test(ye)?Q:oe},Sn=function(B){var Q,ae=B.annotation,oe=B.annotationContainerRef,ue=B.doc,de=B.outlines,ye=B.page,he=B.pageIndex,se=B.scale,pe=B.viewport,me=B.onExecuteNamedAction,Me=B.onJumpFromLinkAnnotation,De=B.onJumpToDest,je=o.useRef(),We=de&&de.length&&ae.dest&&typeof ae.dest=="string"?(Q=de.find(function(it){return it.dest===ae.dest}))===null||Q===void 0?void 0:Q.title:"",qe=!!(ae.url||ae.dest||ae.action||ae.unsafeUrl),ze={};if(ae.url||ae.unsafeUrl){var bt=Yn(ae.url||ae.unsafeUrl,"");bt?ze={"data-target":"external",href:bt,rel:"noopener noreferrer nofollow",target:ae.newWindow?"_blank":"",title:bt}:qe=!1}else ze={href:"","data-annotation-link":ae.id,onClick:function(it){it.preventDefault(),ae.action?me(ae.action):Pn(ue,ae.dest).then(function(at){var ht=je.current,Ze=oe.current;if(ht&&Ze){var mt=ht.getBoundingClientRect();Ze.style.setProperty("height","100%"),Ze.style.setProperty("width","100%");var lt=Ze.getBoundingClientRect();Ze.style.removeProperty("height"),Ze.style.removeProperty("width");var It=(mt.left-lt.left)/se,Dt=(lt.bottom-mt.bottom+mt.height)/se;Me({bottomOffset:Dt,label:We,leftOffset:It,pageIndex:he})}De(at)})}};return We&&(ze=Object.assign({},ze,{title:We,"aria-label":We})),o.createElement(Ct,{annotation:ae,hasPopup:!1,ignoreBorder:!1,isRenderable:qe,page:ye,viewport:pe},function(it){return o.createElement("div",u({},it.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":ae.id,"data-testid":"core__annotation--link-".concat(ae.id)}),o.createElement("a",u({ref:je},ze)))})},zi=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye),se=Q.rect,pe=se[2]-se[0],me=se[3]-se[1],Me=Q.borderStyle.width;return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(De){return o.createElement("div",u({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":Q.id,onClick:De.popup.toggleOnClick,onMouseEnter:De.popup.openOnHover,onMouseLeave:De.popup.closeOnHover}),Q.vertices&&Q.vertices.length&&o.createElement("svg",{height:"".concat(me,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(pe," ").concat(me),width:"".concat(pe,"px")},o.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Me||1,points:Q.vertices.map(function(je){return"".concat(je.x-se[0],",").concat(se[3]-je.y)}).join(" ")})),De.slot.children)})},$r=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye),se=Q.rect,pe=se[2]-se[0],me=se[3]-se[1],Me=Q.borderStyle.width;return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(De){return o.createElement("div",u({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":Q.id,onClick:De.popup.toggleOnClick,onMouseEnter:De.popup.openOnHover,onMouseLeave:De.popup.closeOnHover}),Q.vertices&&Q.vertices.length&&o.createElement("svg",{height:"".concat(me,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(pe," ").concat(me),width:"".concat(pe,"px")},o.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Me||1,points:Q.vertices.map(function(je){return"".concat(je.x-se[0],",").concat(se[3]-je.y)}).join(" ")})),De.slot.children)})},Ys=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye),se=Q.rect,pe=se[2]-se[0],me=se[3]-se[1],Me=Q.borderStyle.width;return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(De){return o.createElement("div",u({},De.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":Q.id,onClick:De.popup.toggleOnClick,onMouseEnter:De.popup.openOnHover,onMouseLeave:De.popup.closeOnHover}),o.createElement("svg",{height:"".concat(me,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(pe," ").concat(me),width:"".concat(pe,"px")},o.createElement("rect",{height:me-Me,fill:"none",stroke:"transparent",strokeWidth:Me||1,x:Me/2,y:Me/2,width:pe-Me})),De.slot.children)})},zr=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye);return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},Ya=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye);return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},or=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye);return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},lr=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),o.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),o.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),o.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},qr=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),o.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),o.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),o.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),o.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),o.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),o.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),o.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),o.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),o.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},cr=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),o.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},kn=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),o.createElement("path",{d:"M6 4.5L6 0.5"}),o.createElement("path",{d:"M18 4.5L18 0.5"}),o.createElement("path",{d:"M10 4.5L10 0.5"}),o.createElement("path",{d:"M14 4.5L14 0.5"}))},Xs=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),o.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),o.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},Zs=function(){return o.createElement(w,{size:16},o.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},qi=function(B){var Q=B.annotation,ae=B.childAnnotation,oe=B.page,ue=B.viewport,de=Q.hasPopup===!1,ye=Ge(Q),he=ve(Q),se=!!(Q.hasPopup||ye||he),pe=Q.name?Q.name.toLowerCase():"";return o.createElement(Ct,{annotation:Q,hasPopup:de,ignoreBorder:!1,isRenderable:se,page:oe,viewport:ue},function(me){return o.createElement(o.Fragment,null,o.createElement("div",u({},me.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":Q.id,onClick:me.popup.toggleOnClick,onMouseEnter:me.popup.openOnHover,onMouseLeave:me.popup.closeOnHover}),pe&&o.createElement("div",{className:"rpv-core__annotation-text-icon"},pe==="check"&&o.createElement(_,null),pe==="comment"&&o.createElement(lr,null),pe==="help"&&o.createElement(qr,null),pe==="insert"&&o.createElement(Zs,null),pe==="key"&&o.createElement(cr,null),pe==="note"&&o.createElement(kn,null),(pe==="newparagraph"||pe==="paragraph")&&o.createElement(Xs,null)),me.slot.children),ae&&ae.annotationType===t.AnnotationType.Popup&&me.popup.opened&&o.createElement(Kn,{annotation:ae,page:oe,viewport:ue}))})},ur=function(B){var Q=B.annotation,ae=B.page,oe=B.viewport,ue=Q.hasPopup===!1,de=Ge(Q),ye=ve(Q),he=!!(Q.hasPopup||de||ye);return o.createElement(Ct,{annotation:Q,hasPopup:ue,ignoreBorder:!0,isRenderable:he,page:ae,viewport:oe},function(se){return o.createElement("div",u({},se.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":Q.id,onClick:se.popup.toggleOnClick,onMouseEnter:se.popup.openOnHover,onMouseLeave:se.popup.closeOnHover}),se.slot.children)})},cl=function(B){var Q=B.annotations,ae=B.doc,oe=B.outlines,ue=B.page,de=B.pageIndex,ye=B.plugins,he=B.rotation,se=B.scale,pe=B.onExecuteNamedAction,me=B.onJumpFromLinkAnnotation,Me=B.onJumpToDest,De=o.useRef(),je=ue.getViewport({rotation:he,scale:se}).clone({dontFlip:!0}),We=Q.filter(function(qe){return!qe.parentId});return g(function(){var qe=De.current;qe&&ye.forEach(function(ze){ze.onAnnotationLayerRender&&ze.onAnnotationLayerRender({annotations:We,container:qe,pageIndex:de,rotation:he,scale:se})})},[]),o.createElement("div",{ref:De,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(de)},We.map(function(qe){var ze=Q.find(function(bt){return bt.parentId===qe.id});switch(qe.annotationType){case t.AnnotationType.Caret:return o.createElement(Bn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Circle:return o.createElement(bn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.FileAttachment:return o.createElement(Wn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.FreeText:return o.createElement(vn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Highlight:return o.createElement(Nn,{key:qe.id,annotation:qe,childAnnotation:ze,page:ue,viewport:je});case t.AnnotationType.Ink:return o.createElement(Qn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Line:return o.createElement(tn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Link:return o.createElement(Sn,{key:qe.id,annotation:qe,annotationContainerRef:De,doc:ae,outlines:oe,page:ue,pageIndex:de,scale:se,viewport:je,onExecuteNamedAction:pe,onJumpFromLinkAnnotation:me,onJumpToDest:Me});case t.AnnotationType.Polygon:return o.createElement(zi,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Polyline:return o.createElement($r,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Popup:return o.createElement(Kn,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Square:return o.createElement(Ys,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Squiggly:return o.createElement(zr,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Stamp:return o.createElement(Ya,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.StrikeOut:return o.createElement(or,{key:qe.id,annotation:qe,page:ue,viewport:je});case t.AnnotationType.Text:return o.createElement(qi,{key:qe.id,annotation:qe,childAnnotation:ze,page:ue,viewport:je});case t.AnnotationType.Underline:return o.createElement(ur,{key:qe.id,annotation:qe,page:ue,viewport:je});default:return o.createElement(o.Fragment,{key:qe.id})}}))},Js=function(B){var Q=B.page,ae=B.renderAnnotations,oe=te(),ue=o.useState({loading:!0,annotations:[]}),de=ue[0],ye=ue[1];return o.useEffect(function(){Q.getAnnotations({intent:"display"}).then(function(he){oe.current&&ye({loading:!1,annotations:he})})},[]),de.loading?o.createElement(o.Fragment,null):ae(de.annotations)},Qs=function(B){var Q=B.doc,ae=B.outlines,oe=B.page,ue=B.pageIndex,de=B.plugins,ye=B.rotation,he=B.scale,se=B.onExecuteNamedAction,pe=B.onJumpFromLinkAnnotation,me=B.onJumpToDest;return o.createElement(Js,{page:oe,renderAnnotations:function(Me){return o.createElement(cl,{annotations:Me,doc:Q,outlines:ae,page:oe,pageIndex:ue,plugins:de,rotation:ye,scale:he,onExecuteNamedAction:se,onJumpFromLinkAnnotation:pe,onJumpToDest:me})}})},da=function(B,Q){var ae=B%Q;return ae===0?B:Math.floor(B-ae)},ha=function(B){var Q=B.canvasLayerRef,ae=B.height,oe=B.page,ue=B.pageIndex,de=B.plugins,ye=B.rotation,he=B.scale,se=B.width,pe=B.onRenderCanvasCompleted,me=o.useRef();return g(function(){var Me=me.current;Me&&Me.cancel();var De=Q.current;De.removeAttribute("data-testid"),de.forEach(function(lt){lt.onCanvasLayerRender&&lt.onCanvasLayerRender({ele:De,pageIndex:ue,rotation:ye,scale:he,status:t.LayerRenderStatus.PreRender})});var je=oe.getViewport({rotation:ye,scale:he}),We=window.devicePixelRatio||1,qe=Math.sqrt(16777216/(je.width*je.height)),ze=We>qe;ze?De.style.transform="scale(1, 1)":De.style.removeProperty("transform");var bt=Math.min(qe,We),it=function(lt,It){var Dt,Lt;if(Math.floor(lt)===lt)return[lt,1];var Ft=1/lt;if(Ft>It)return[1,It];if(Math.floor(Ft)===Ft)return[1,Ft];for(var zt=lt>1?Ft:lt,pn=0,Jt=1,yn=1,nn=1;;){var dn=pn+yn,hn=Jt+nn;if(hn>It)break;zt<=dn/hn?(yn=(Dt=[dn,hn])[0],nn=Dt[1]):(pn=(Lt=[dn,hn])[0],Jt=Lt[1])}return zt<(pn/Jt+yn/nn)/2?zt===lt?[pn,Jt]:[Jt,pn]:zt===lt?[yn,nn]:[nn,yn]}(bt,8),at=it[0],ht=it[1];De.width=da(je.width*bt,at),De.height=da(je.height*bt,at),De.style.width="".concat(da(je.width,ht),"px"),De.style.height="".concat(da(je.height,ht),"px"),De.hidden=!0;var Ze=De.getContext("2d",{alpha:!1}),mt=ze||We!==1?[bt,0,0,bt,0,0]:null;return me.current=oe.render({canvasContext:Ze,transform:mt,viewport:je}),me.current.promise.then(function(){De.hidden=!1,De.setAttribute("data-testid","core__canvas-layer-".concat(ue)),de.forEach(function(lt){lt.onCanvasLayerRender&&lt.onCanvasLayerRender({ele:De,pageIndex:ue,rotation:ye,scale:he,status:t.LayerRenderStatus.DidRender})}),pe()},function(){pe()}),function(){De&&(De.width=0,De.height=0)}},[]),o.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(ae,"px"),width:"".concat(se,"px")}},o.createElement("canvas",{ref:Q}))},fa=function(B){var Q=B.height,ae=B.page,oe=B.rotation,ue=B.scale,de=B.width,ye=o.useRef();return g(function(){var he=ye.current,se=ae.getViewport({rotation:oe,scale:ue});ae.getOperatorList().then(function(pe){(function(){var me=ye.current;me&&(me.innerHTML="")})(),new c.SVGGraphics(ae.commonObjs,ae.objs).getSVG(pe,se).then(function(me){me.style.height="".concat(Q,"px"),me.style.width="".concat(de,"px"),he.appendChild(me)})})},[]),o.createElement("div",{className:"rpv-core__svg-layer",ref:ye})},Ri=function(B){var Q=B.containerRef,ae=B.page,oe=B.pageIndex,ue=B.plugins,de=B.rotation,ye=B.scale,he=B.onRenderTextCompleted,se=o.useRef(),pe=function(){var me=Q.current;me&&([].slice.call(me.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Me){return me.removeChild(Me)}),[].slice.call(me.querySelectorAll('br[role="presentation"]')).forEach(function(Me){return me.removeChild(Me)}))};return g(function(){var me=se.current;me&&me.cancel();var Me=Q.current;if(Me){Me.removeAttribute("data-testid");var De=ae.getViewport({rotation:de,scale:ye});return ue.forEach(function(je){je.onTextLayerRender&&je.onTextLayerRender({ele:Me,pageIndex:oe,scale:ye,status:t.LayerRenderStatus.PreRender})}),ae.getTextContent().then(function(je){pe(),se.current=c.renderTextLayer({container:Me,textContent:je,textContentSource:je,viewport:De}),se.current.promise.then(function(){Me.setAttribute("data-testid","core__text-layer-".concat(oe)),[].slice.call(Me.children).forEach(function(We){We.classList.contains("rpv-core__text-layer-text--not")||We.classList.add("rpv-core__text-layer-text")}),ue.forEach(function(We){We.onTextLayerRender&&We.onTextLayerRender({ele:Me,pageIndex:oe,scale:ye,status:t.LayerRenderStatus.DidRender})}),he()},function(){Me.removeAttribute("data-testid"),he()})}),function(){var je;pe(),(je=se.current)===null||je===void 0||je.cancel()}}},[]),o.createElement("div",{className:"rpv-core__text-layer",ref:Q})},Xa=function(B){var Q=B.doc,ae=B.measureRef,oe=B.outlines,ue=B.pageIndex,de=B.pageRotation,ye=B.pageSize,he=B.plugins,se=B.renderPage,pe=B.renderQueueKey,me=B.rotation,Me=B.scale,De=B.shouldRender,je=B.viewMode,We=B.onExecuteNamedAction,qe=B.onJumpFromLinkAnnotation,ze=B.onJumpToDest,bt=B.onRenderCompleted,it=B.onRotatePage,at=te(),ht=o.useState(null),Ze=ht[0],mt=ht[1],lt=o.useState(!1),It=lt[0],Dt=lt[1],Lt=o.useState(!1),Ft=Lt[0],zt=Lt[1],pn=o.useRef(),Jt=o.useRef(),yn=Math.abs(me+de)%180==0,nn=ye.pageWidth*Me,dn=ye.pageHeight*Me,hn=yn?nn:dn,ln=yn?dn:nn,jn=(ye.rotation+me+de)%360,xi=o.useRef(0),ci=se||function(Rn){return o.createElement(o.Fragment,null,Rn.canvasLayer.children,Rn.textLayer.children,Rn.annotationLayer.children)};return o.useEffect(function(){mt(null),Dt(!1),zt(!1)},[de,me,Me]),o.useEffect(function(){De&&at.current&&!Ze&&jt(Q,ue).then(function(Rn){at.current&&(xi.current=pe,mt(Rn))})},[De,Ze]),o.useEffect(function(){It&&Ft&&(pe!==xi.current?(mt(null),Dt(!1),zt(!1)):bt(ue))},[It,Ft]),o.createElement("div",{className:b({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":je===t.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":je===t.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":je===t.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(ue),ref:ae,style:{height:"".concat(ln,"px"),width:"".concat(hn,"px")}},Ze?o.createElement(o.Fragment,null,ci({annotationLayer:{attrs:{},children:o.createElement(Qs,{doc:Q,outlines:oe,page:Ze,pageIndex:ue,plugins:he,rotation:jn,scale:Me,onExecuteNamedAction:We,onJumpFromLinkAnnotation:qe,onJumpToDest:ze})},canvasLayer:{attrs:{},children:o.createElement(ha,{canvasLayerRef:pn,height:ln,page:Ze,pageIndex:ue,plugins:he,rotation:jn,scale:Me,width:hn,onRenderCanvasCompleted:function(){at.current&&Dt(!0)}})},canvasLayerRendered:It,doc:Q,height:ln,pageIndex:ue,rotation:jn,scale:Me,svgLayer:{attrs:{},children:o.createElement(fa,{height:ln,page:Ze,rotation:jn,scale:Me,width:hn})},textLayer:{attrs:{},children:o.createElement(Ri,{containerRef:Jt,page:Ze,pageIndex:ue,plugins:he,rotation:jn,scale:Me,onRenderTextCompleted:function(){at.current&&zt(!0)}})},textLayerRendered:Ft,width:hn,markRendered:bt,onRotatePage:function(Rn){return it(ue,Rn)}}),he.map(function(Rn,Xn){return Rn.renderPageLayer?o.createElement(o.Fragment,{key:Xn},Rn.renderPageLayer({canvasLayerRef:pn,canvasLayerRendered:It,doc:Q,height:ln,pageIndex:ue,rotation:jn,scale:Me,textLayerRef:Jt,textLayerRendered:Ft,width:hn})):o.createElement(o.Fragment,{key:Xn})})):o.createElement(k,{testId:"core__page-layer-loading-".concat(ue)}))},eo=function(B,Q){var ae=Q.rect;return B.height!==ae.height||B.width!==ae.width?ae:B};(function(B){B.Horizontal="Horizontal",B.Vertical="Vertical",B.Both="Both"})(dt||(dt={}));var dr=function(B){return 1-Math.pow(1-B,4)},hr=1e-4,pa={left:0,top:0},to={capture:!1,passive:!0},no=function(B){var Q=B.elementRef,ae=B.enableSmoothScroll,oe=B.isRtl,ue=B.scrollDirection,de=B.onSmoothScroll,ye=o.useState(pa),he=ye[0],se=ye[1],pe=o.useState(Q.current),me=pe[0],Me=pe[1],De=oe?-1:1,je=o.useRef(ue);je.current=ue;var We=o.useRef(pa),qe=o.useRef(!0),ze=o.useCallback(function(){qe.current=!0,ae&&se(We.current),de(!1)},[]),bt=o.useCallback(function(){if(me){switch(je.current){case dt.Horizontal:We.current={left:De*me.scrollLeft,top:0};break;case dt.Both:We.current={left:De*me.scrollLeft,top:me.scrollTop};break;case dt.Vertical:default:We.current={left:0,top:me.scrollTop}}ae&&!qe.current||se(We.current)}},[me]);g(function(){Me(Q.current)}),g(function(){if(me)return me.addEventListener("scroll",bt,to),function(){me.removeEventListener("scroll",bt,to)}},[me]);var it=o.useCallback(function(at,ht){var Ze=Q.current;if(!Ze)return Promise.resolve();var mt={left:0,top:0};switch(je.current){case dt.Horizontal:mt.left=De*at.left;break;case dt.Both:mt.left=De*at.left,mt.top=at.top;break;case dt.Vertical:default:mt.top=at.top}return ht?(qe.current=!1,de(!0),new Promise(function(lt,It){(function(Dt,Lt,Ft,zt,pn,Jt){pn===void 0&&(pn=function(Xn){return Xn}),Jt===void 0&&(Jt=function(){});var yn=0,nn=0,dn=!1;switch(Lt){case dt.Horizontal:nn=Dt.scrollLeft,yn=0;case dt.Both:nn=Dt.scrollLeft,yn=Dt.scrollTop;break;case dt.Vertical:default:nn=0,yn=Dt.scrollTop}var hn=function(){dn||(dn=!0,Dt.scrollLeft=Ft.left,Dt.scrollTop=Ft.top,Jt())};if(Math.abs(yn-Ft.top)<=hr&&Lt===dt.Vertical)hn();else if(Math.abs(nn-Ft.left)<=hr&&Lt===dt.Horizontal)hn();else{var ln,jn=-1,xi=nn-Ft.left,ci=yn-Ft.top,Rn=function(Xn){jn===-1&&(jn=Xn);var Ti=Xn-jn,ct=Math.min(Ti/zt,1),st=pn(ct),Qe={left:nn-xi*st,top:yn-ci*st};switch(Lt){case dt.Horizontal:Dt.scrollLeft=Qe.left;break;case dt.Both:Dt.scrollLeft=Qe.left,Dt.scrollTop=Qe.top;break;case dt.Vertical:default:Dt.scrollTop=Qe.top}Math.abs(Qe.top-Ft.top)<=hr&&Math.abs(Qe.left-Ft.left)<=hr&&!dn&&(window.cancelAnimationFrame(ln),hn()),Ti<zt?ln=window.requestAnimationFrame(Rn):window.cancelAnimationFrame(ln)};ln=window.requestAnimationFrame(Rn)}})(Ze,je.current,mt,400,dr,function(){ze(),lt()})})):new Promise(function(lt,It){switch(je.current){case dt.Horizontal:Ze.scrollLeft=mt.left;break;case dt.Both:Ze.scrollLeft=mt.left,Ze.scrollTop=mt.top;break;case dt.Vertical:default:Ze.scrollTop=mt.top}lt()})},[Q]);return{scrollOffset:he,scrollTo:it}},Un=function(B,Q,ae){return Math.max(B,Math.min(ae,Q))},io=function(B,Q){if(Q!==t.ViewMode.DualPageWithCover)return 0;if(!function(ue){var de=ue.length;if(de===1)return!1;for(var ye=1;ye<de;ye++)if(ue[ye].height!==ue[0].height||ue[ye].width!==ue[0].width)return!0;return!1}(B))return 2*B[0].width;var ae=He(B.slice(1),2).map(function(ue){return ue.length===2?ue[0].width+ue[1].width:ue[0].width}),oe=[B[0].width].concat(ae);return Math.max.apply(Math,oe)},ul={left:0,top:0},ma={left:0,top:0},ga={left:0,top:0},va={left:0,top:0},dl={height:0,width:0},ei={left:0,top:0},ya="data-virtual-index",ro=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Za=function(B){var Q=B.enableSmoothScroll,ae=B.isRtl,oe=B.numberOfItems,ue=B.parentRef,de=B.setRenderRange,ye=B.sizes,he=B.scrollMode,se=B.viewMode,pe=o.useState(!1),me=pe[0],Me=pe[1],De=o.useCallback(function(ct){return Me(ct)},[]),je=o.useRef(he);je.current=he;var We=o.useRef(se);We.current=se;var qe=he===t.ScrollMode.Wrapped||se===t.ViewMode.DualPageWithCover||se===t.ViewMode.DualPage?dt.Both:he===t.ScrollMode.Horizontal?dt.Horizontal:dt.Vertical,ze=no({elementRef:ue,enableSmoothScroll:Q,isRtl:ae,scrollDirection:qe,onSmoothScroll:De}),bt=ze.scrollOffset,it=ze.scrollTo,at=function(ct){var st=ct.elementRef,Qe=o.useState(st.current),tt=Qe[0],Je=Qe[1],ut=o.useRef(!1),gt=o.useReducer(eo,{height:0,width:0}),et=gt[0],Ye=gt[1];return g(function(){st.current!==tt&&Je(st.current)}),g(function(){if(tt&&!ut.current){ut.current=!0;var yt=tt.getBoundingClientRect(),At=yt.height,Kt=yt.width;Ye({rect:{height:At,width:Kt}})}},[tt]),o.useEffect(function(){if(tt){var yt=new ResizeObserver(function(At,Kt){At.forEach(function(Bt){if(Bt.target===tt){var Mn=Bt.contentRect,ti=Mn.height,_t=Mn.width;Ye({rect:{height:ti,width:_t}})}})});return yt.observe(tt),function(){yt.unobserve(tt)}}},[tt]),et}({elementRef:ue}),ht=o.useRef({scrollOffset:ei,measurements:[]});ht.current.scrollOffset=bt;var Ze=o.useMemo(function(){return Array(oe).fill(-1)},[]),mt=o.useState(Ze),lt=mt[0],It=mt[1],Dt=o.useMemo(function(){var ct=new IntersectionObserver(function(st){st.forEach(function(Qe){var tt=Qe.isIntersecting?Qe.intersectionRatio:-1,Je=Qe.target.getAttribute(ya);if(Je){var ut=parseInt(Je,10);0<=ut&&ut<oe&&It(function(gt){return gt[ut]=tt,function(et,Ye,yt){for(var At,Kt=0,Bt=Ye.length;Kt<Bt;Kt++)!At&&Kt in Ye||(At||(At=Array.prototype.slice.call(Ye,0,Kt)),At[Kt]=Ye[Kt]);return et.concat(At||Array.prototype.slice.call(Ye))}([],gt)})}})},{threshold:ro});return ct},[]),Lt=o.useMemo(function(){return he===t.ScrollMode.Page&&se===t.ViewMode.SinglePage?function(ct,st,Qe){for(var tt=[],Je=0;Je<ct;Je++){var ut={height:Math.max(st.height,Qe[Je].height),width:Math.max(st.width,Qe[Je].width)},gt=Je===0?va:tt[Je-1].end,et={left:gt.left+ut.width,top:gt.top+ut.height};tt[Je]={index:Je,start:gt,size:ut,end:et,visibility:-1}}return tt}(oe,at,ye):se===t.ViewMode.DualPageWithCover?function(ct,st,Qe,tt){for(var Je=[],ut=0,gt=0,et=ga,Ye=0;Ye<ct;Ye++){var yt=Ye===0?{height:tt===t.ScrollMode.Page?Math.max(st.height,Qe[Ye].height):Qe[Ye].height,width:tt===t.ScrollMode.Page?Math.max(st.width,Qe[Ye].width):Qe[Ye].width}:{height:tt===t.ScrollMode.Page?Math.max(st.height,Qe[Ye].height):Qe[Ye].height,width:Math.max(st.width/2,Qe[Ye].width)};tt===t.ScrollMode.Page?et=Ye===0?ga:{left:Ye%2==0?yt.width:0,top:Math.floor((Ye-1)/2)*yt.height+Je[0].end.top}:Ye===0?(et=ga,ut=Qe[0].height,gt=0):Ye%2==1?(et={left:0,top:ut+=gt},gt=Ye===ct-1?Qe[Ye].height:Math.max(Qe[Ye].height,Qe[Ye+1].height)):et={left:Je[Ye-1].end.left,top:ut};var At={left:et.left+yt.width,top:et.top+yt.height};Je[Ye]={index:Ye,start:et,size:yt,end:At,visibility:-1}}return Je}(oe,at,ye,he):se===t.ViewMode.DualPage?function(ct,st,Qe,tt){for(var Je=[],ut=0,gt=0,et=ma,Ye=0;Ye<ct;Ye++){var yt={height:tt===t.ScrollMode.Page?Math.max(st.height,Qe[Ye].height):Qe[Ye].height,width:Math.max(st.width/2,Qe[Ye].width)};tt===t.ScrollMode.Page?et={left:Ye%2==0?0:yt.width,top:Math.floor(Ye/2)*yt.height}:Ye%2==0?(et={left:0,top:ut+=gt},gt=Ye===ct-1?Qe[Ye].height:Math.max(Qe[Ye].height,Qe[Ye+1].height)):et={left:Je[Ye-1].end.left,top:ut};var At={left:et.left+yt.width,top:et.top+yt.height};Je[Ye]={index:Ye,start:et,size:yt,end:At,visibility:-1}}return Je}(oe,at,ye,he):function(ct,st,Qe,tt){for(var Je=[],ut=0,gt={left:0,top:0},et=0,Ye=ul,yt=0;yt<ct;yt++){var At=Qe[yt];if(yt===0)ut=At.width,gt={left:0,top:0},et=At.height;else switch(tt){case t.ScrollMode.Wrapped:(ut+=At.width)<st.width?(Ye={left:Je[yt-1].end.left,top:gt.top},et=Math.max(et,At.height)):(ut=At.width,gt={left:(Ye={left:gt.left,top:gt.top+et}).left,top:Ye.top},et=At.height);break;case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:Ye=Je[yt-1].end}var Kt={left:Ye.left+At.width,top:Ye.top+At.height};Je[yt]={index:yt,start:Ye,size:At,end:Kt,visibility:-1}}return Je}(oe,at,ye,he)},[he,ye,se,at]),Ft=Lt[oe-1]?{height:Lt[oe-1].end.top,width:Lt[oe-1].end.left}:dl;ht.current.measurements=Lt;var zt=o.useMemo(function(){var ct=function(yt,At,Kt,Bt){var Mn=0;switch(yt){case dt.Horizontal:Mn=Bt.left;break;case dt.Vertical:default:Mn=Bt.top}var ti=At.length-1,_t=function(Gt,ui,Gi,Wr){for(;Gt<=ui;){var Ci=(Gt+ui)/2|0,Wi=Wr(Ci);if(Wi<Gi)Gt=Ci+1;else{if(!(Wi>Gi))return Ci;ui=Ci-1}}return Gt>0?Gt-1:0}(0,ti,Mn,function(Gt){switch(yt){case dt.Horizontal:return At[Gt].start.left;case dt.Both:case dt.Vertical:default:return At[Gt].start.top}});if(yt===dt.Both)for(var An=At[_t].start.top;_t-1>=0&&At[_t-1].start.top===An&&At[_t-1].start.left>=Bt.left;)_t--;for(var Yt=_t;Yt<=ti;){var Ht={top:At[Yt].start.top-Bt.top,left:At[Yt].start.left-Bt.left},cn={height:Kt.height-Ht.top,width:Kt.width-Ht.left};if(yt===dt.Horizontal&&cn.width<0||yt===dt.Vertical&&cn.height<0||yt===dt.Both&&(cn.width<0||cn.height<0))break;Yt++}return{start:_t,end:Yt}}(qe,Lt,at,bt),st=ct.start,Qe=ct.end,tt=lt.slice(Un(0,oe,st),Un(0,oe,Qe)),Je=st+tt.reduce(function(yt,At,Kt,Bt){return At>Bt[yt]?Kt:yt},0),ut=Je=Un(0,oe-1,Je),gt=de({endPage:Qe,numPages:oe,startPage:st}),et=gt.startPage,Ye=gt.endPage;switch(et=Math.max(et,0),Ye=Math.min(Ye,oe-1),se){case t.ViewMode.DualPageWithCover:Je>0&&(ut=Je%2==1?Je:Je-1),et=et===0?0:et%2==1?et:et-1,oe-(Ye=Ye%2==1?Ye-1:Ye)<=2&&(Ye=oe-1);break;case t.ViewMode.DualPage:ut=Je%2==0?Je:Je-1,et=et%2==0?et:et-1,Ye=Ye%2==1?Ye:Ye-1;break;case t.ViewMode.SinglePage:default:ut=Je}return{startPage:et,endPage:Ye,maxVisbilityIndex:ut}},[Lt,at,bt,se,lt]),pn=zt.startPage,Jt=zt.endPage,yn=zt.maxVisbilityIndex,nn=o.useMemo(function(){for(var ct=[],st=function(tt){var Je=Lt[tt],ut=u(u({},Je),{visibility:lt[tt]!==void 0?lt[tt]:-1,measureRef:function(gt){gt&&(gt.setAttribute(ya,"".concat(tt)),Dt.observe(gt))}});ct.push(ut)},Qe=pn;Qe<=Jt;Qe++)st(Qe);return ct},[pn,Jt,lt,Lt]),dn=o.useCallback(function(ct,st){var Qe=ht.current.measurements[Un(0,oe-1,ct)],tt=je.current===t.ScrollMode.Page?ei:st;return Qe?it({left:tt.left+Qe.start.left,top:tt.top+Qe.start.top},Q):Promise.resolve()},[it,Q]),hn=o.useCallback(function(ct,st){var Qe=ht.current.measurements,tt=Qe[ct].start,Je=Qe.find(function(gt){return gt.start.top-tt.top>1e-12});if(!Je)return Promise.resolve();var ut=Je.index;switch(We.current){case t.ViewMode.DualPage:ut=ut%2==0?ut:ut+1;break;case t.ViewMode.DualPageWithCover:ut=ut%2==1?ut:ut+1}return dn(ut,st)},[]),ln=o.useCallback(function(ct,st){for(var Qe=ht.current.measurements,tt=Qe[ct].start,Je=ct,ut=!1,gt=oe-1;gt>=0;gt--)if(tt.top-Qe[gt].start.top>1e-12){ut=!0,Je=Qe[gt].index;break}if(!ut)return Promise.resolve();switch(We.current){case t.ViewMode.DualPage:Je=Je%2==0?Je:Je-1;break;case t.ViewMode.DualPageWithCover:Je=Je%2==0?Je-1:Je}return Je===ct&&(Je=ct-1),dn(Je,st)},[]),jn=o.useCallback(function(ct,st){if(We.current===t.ViewMode.DualPageWithCover||We.current===t.ViewMode.DualPage)return hn(ct,st);switch(je.current){case t.ScrollMode.Wrapped:return hn(ct,st);case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:return dn(ct+1,st)}},[]),xi=o.useCallback(function(ct,st){if(We.current===t.ViewMode.DualPageWithCover||We.current===t.ViewMode.DualPage)return ln(ct,st);switch(je.current){case t.ScrollMode.Wrapped:return ln(ct,st);case t.ScrollMode.Horizontal:case t.ScrollMode.Vertical:default:return dn(ct-1,st)}},[]),ci=o.useCallback(function(){return function(ct,st){switch(st){case t.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(ct.width,"px")};case t.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(ct.height,"px"),width:"100%"}}}(Ft,je.current)},[Ft]),Rn=o.useCallback(function(ct){return function(st,Qe,tt){return tt!==t.ScrollMode.Page?{}:{height:"".concat(Qe.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(st.start.top,"px)")}}(ct,at,je.current)},[at]),Xn=o.useCallback(function(ct){return function(st,Qe,tt,Je,ut){var gt,et,Ye,yt,At,Kt,Bt,Mn=Qe?"right":"left",ti=Qe?-1:1,_t=tt.length,An=st.start.left*ti,Yt=st.size,Ht=Yt.height,cn=Yt.width;if(Je===t.ViewMode.DualPageWithCover){var Gt=ut===t.ScrollMode.Page?0:st.start.top;return st.index===0||_t%2==0&&st.index===_t-1?((gt={height:"".concat(Ht,"px"),minWidth:"".concat(io(tt,Je),"px"),width:"100%"})[Mn]=0,gt.position="absolute",gt.top=0,gt.transform="translate(".concat(An,"px, ").concat(Gt,"px)"),gt):((et={height:"".concat(Ht,"px"),width:"".concat(cn,"px")})[Mn]=0,et.position="absolute",et.top=0,et.transform="translate(".concat(An,"px, ").concat(Gt,"px)"),et)}if(Je===t.ViewMode.DualPage)return(Ye={height:"".concat(Ht,"px"),width:"".concat(cn,"px")})[Mn]=0,Ye.position="absolute",Ye.top=0,Ye.transform="translate(".concat(An,"px, ").concat(ut===t.ScrollMode.Page?0:st.start.top,"px)"),Ye;switch(ut){case t.ScrollMode.Horizontal:return(yt={height:"100%",width:"".concat(cn,"px")})[Mn]=0,yt.position="absolute",yt.top=0,yt.transform="translateX(".concat(An,"px)"),yt;case t.ScrollMode.Page:return(At={height:"".concat(Ht,"px"),width:"".concat(cn,"px")})[Mn]=0,At.position="absolute",At.top=0,At;case t.ScrollMode.Wrapped:return(Kt={height:"".concat(Ht,"px"),width:"".concat(cn,"px")})[Mn]=0,Kt.position="absolute",Kt.top=0,Kt.transform="translate(".concat(An,"px, ").concat(st.start.top,"px)"),Kt;case t.ScrollMode.Vertical:default:return(Bt={height:"".concat(Ht,"px"),width:"100%"})[Mn]=0,Bt.position="absolute",Bt.top=0,Bt.transform="translateY(".concat(st.start.top,"px)"),Bt}}(ct,ae,ye,We.current,je.current)},[ae,ye]),Ti=o.useCallback(function(ct,st){var Qe=ht.current,tt=Qe.measurements,Je=Qe.scrollOffset,ut=tt[Un(0,oe-1,st)];if(ut){var gt=je.current===t.ScrollMode.Page?{left:ut.start.left,top:ut.start.top}:{left:Je.left*ct,top:Je.top*ct};return it(gt,!1)}return Promise.resolve()},[]);return o.useEffect(function(){return function(){Dt.disconnect()}},[]),{boundingClientRect:at,isSmoothScrolling:me,startPage:pn,endPage:Jt,maxVisbilityIndex:yn,virtualItems:nn,getContainerStyles:ci,getItemContainerStyles:Rn,getItemStyles:Xn,scrollToItem:dn,scrollToNextItem:jn,scrollToPreviousItem:xi,zoom:Ti}},Di=function(B,Q,ae,oe,ue,de){var ye=ae;switch(!0){case(ue===t.ViewMode.DualPageWithCover&&de>=3):case(ue===t.ViewMode.DualPage&&de>=3):ye=2*ae;break;default:ye=ae}switch(oe){case t.SpecialZoomLevel.ActualSize:return 1;case t.SpecialZoomLevel.PageFit:return Math.min((B.clientWidth-17)/ye,(B.clientHeight-16)/Q);case t.SpecialZoomLevel.PageWidth:return(B.clientWidth-17)/ye}},ao=function(B){var Q,ae,oe=B.getCurrentPage,ue=(Q=50,ae=o.useRef([]),o.useEffect(function(){return function(){ae.current=[]}},[]),{push:function(pe){var me=ae.current;me.length+1>Q&&me.shift(),me.push(pe),ae.current=me},map:function(pe){return ae.current.map(function(me){return pe(me)})},pop:function(){var pe=ae.current;if(pe.length===0)return null;var me=pe.pop();return ae.current=pe,me}}),de=function(pe){var me=o.useRef([]);return o.useEffect(function(){return function(){me.current=[]}},[]),{dequeue:function(){var Me=me.current;if(Me.length===0)return null;var De=Me.shift();return me.current=Me,De||null},enqueue:function(Me){var De=me.current;De.length+1>pe&&De.pop(),me.current=[Me].concat(De)},map:function(Me){return me.current.map(function(De){return Me(De)})}}}(50),ye=function(){var pe=de.dequeue();return pe&&ue.push(pe),pe&&pe.pageIndex===oe()?ye():pe},he=function(){var pe=ue.pop();return pe&&de.enqueue(pe),pe&&pe.pageIndex===oe()?he():pe},se=o.useCallback(function(pe){ue.push(pe)},[]);return{getNextDestination:ye,getPreviousDestination:he,markVisitedDestination:se}},Ja=function(B){var Q=[];return B.map(function(ae){Q=Q.concat(ae).concat(function(oe){var ue=[];return oe.items&&oe.items.length>0&&(ue=ue.concat(Ja(oe.items))),ue}(ae))}),Q},Hi={capture:!1,passive:!0},hl={height:0,width:0},xa={height:0,width:0},so=function(B){var Q=B.getCurrentPage,ae=B.getCurrentScrollMode,oe=B.jumpToPage,ue=B.targetRef,de=o.useState(t.FullScreenMode.Normal),ye=de[0],he=de[1],se=function(){var lt=o.useState(hl),It=lt[0],Dt=lt[1],Lt=ee(function(){Dt({height:window.innerHeight,width:window.innerWidth})},100);return g(function(){return window.addEventListener("resize",Lt,Hi),function(){window.removeEventListener("resize",Lt,Hi)}},[]),It}(),pe=o.useState(xa),me=pe[0],Me=pe[1],De=o.useRef(xa),je=o.useRef(Q()),We=o.useRef(xa),qe=o.useState(ue.current),ze=qe[0],bt=qe[1],it=o.useRef();g(function(){ue.current!==ze&&bt(ue.current)},[]),g(function(){if(ze){var lt=new ResizeObserver(function(It){It.forEach(function(Dt){var Lt=Dt.target.getBoundingClientRect(),Ft=Lt.height,zt=Lt.width;Me({height:Ft,width:zt})})});return lt.observe(ze),function(){lt.unobserve(ze),lt.disconnect()}}},[ze]);var at=o.useCallback(function(lt){var It=J();return It&&It!==lt?(he(t.FullScreenMode.Normal),G(It)):Promise.resolve()},[]),ht=o.useCallback(function(lt){lt&&N()&&(bt(lt),at(lt).then(function(){it.current=lt,he(t.FullScreenMode.Entering),function(It){F&&It[Z.RequestFullScreen]()}(lt)}))},[]),Ze=o.useCallback(function(){J()&&(he(t.FullScreenMode.Exitting),G(document))},[]),mt=o.useCallback(function(){ze&&J()!==ze&&he(t.FullScreenMode.Exitting)},[ze]);return o.useEffect(function(){switch(ye){case t.FullScreenMode.Entering:it.current&&(it.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),je.current=Q(),De.current={height:window.innerHeight,width:window.innerWidth};break;case t.FullScreenMode.Entered:ae()===t.ScrollMode.Page?oe(je.current).then(function(){he(t.FullScreenMode.EnteredCompletely)}):he(t.FullScreenMode.EnteredCompletely);break;case t.FullScreenMode.Exitting:it.current&&(it.current.style.backgroundColor="",it.current=null),je.current=Q();break;case t.FullScreenMode.Exited:he(t.FullScreenMode.Normal),ae()===t.ScrollMode.Page&&oe(je.current)}},[ye]),o.useEffect(function(){if(ye!==t.FullScreenMode.Normal)return ye===t.FullScreenMode.Entering&&se.height===me.height&&se.width===me.width&&se.height>0&&se.width>0&&(We.current.height===0||se.height==We.current.height)?(We.current={height:window.innerHeight,width:window.innerWidth},void he(t.FullScreenMode.Entered)):void(ye===t.FullScreenMode.Exitting&&De.current.height===se.height&&De.current.width===se.width&&se.height>0&&se.width>0&&he(t.FullScreenMode.Exited))},[ye,se,me]),o.useEffect(function(){var lt;return lt=mt,F&&document.addEventListener(Z.FullScreenChange,lt),function(){(function(It){F&&document.removeEventListener(Z.FullScreenChange,It)})(mt)}},[ze]),{enterFullScreenMode:ht,exitFullScreenMode:Ze,fullScreenMode:ye}},Qa={buildPageStyles:function(){return{}},transformSize:function(B){return B.size}},fr={left:0,top:0},fl=function(B){var Q=B.currentFile,ae=B.defaultScale,oe=B.doc,ue=B.enableSmoothScroll,de=B.initialPage,ye=B.initialRotation,he=B.initialScale,se=B.pageLayout,pe=B.pageSizes,me=B.plugins,Me=B.renderPage,De=B.scrollMode,je=B.setRenderRange,We=B.viewMode,qe=B.viewerState,ze=B.onDocumentLoad,bt=B.onOpenFile,it=B.onPageChange,at=B.onRotate,ht=B.onRotatePage,Ze=B.onZoom,mt=oe.numPages,lt=oe.loadingTask.docId,It=o.useContext(M).l10n,Dt=o.useContext(v),Lt=Dt.direction===t.TextDirection.RightToLeft,Ft=o.useRef(),zt=o.useRef(),pn=o.useState(de),Jt=pn[0],yn=pn[1],nn=o.useRef(null),dn=ao({getCurrentPage:function(){return _t.current.pageIndex}}),hn=o.useState(ye),ln=hn[0],jn=hn[1],xi=W(ln),ci=o.useState(!1),Rn=ci[0],Xn=ci[1],Ti=o.useState(new Map),ct=Ti[0],st=Ti[1],Qe=o.useState(De),tt=Qe[0],Je=Qe[1],ut=W(tt),gt=o.useState(We),et=gt[0],Ye=gt[1],yt=W(et),At=function($e){var ot=te(),Pt=o.useState([]),Tt=Pt[0],St=Pt[1];return o.useEffect(function(){$e.getOutline().then(function(Rt){if(ot.current&&Rt!==null){var mn=Ja(Rt);St(mn)}})},[]),Tt}(oe),Kt=o.useState(he),Bt=Kt[0],Mn=Kt[1],ti=W(Bt),_t=o.useRef(qe),An=o.useRef(typeof ae=="string"?ae:null),Yt=o.useRef(-1),Ht=o.useRef(-1),cn=o.useRef(de),Gt=so({getCurrentPage:function(){return _t.current.pageIndex},getCurrentScrollMode:function(){return _t.current.scrollMode},jumpToPage:function($e){return Ii($e)},targetRef:zt}),ui=o.useState(-1),Gi=ui[0],Wr=ui[1],Ci=o.useState(0),Wi=Ci[0],oo=Ci[1],Zn=T({doc:oe});o.useEffect(function(){return function(){Xe.clear(),vt.clear()}},[lt]);var rs=o.useMemo(function(){return Object.assign({},Qa,se)},[]),pl=o.useMemo(function(){return Array(mt).fill(0).map(function($e,ot){var Pt=[pe[ot].pageHeight,pe[ot].pageWidth],Tt=Math.abs(ln)%180==0?{height:Pt[0],width:Pt[1]}:{height:Pt[1],width:Pt[0]},St={height:Tt.height*Bt,width:Tt.width*Bt};return rs.transformSize({numPages:mt,pageIndex:ot,size:St})})},[ln,Bt]),Xt=Za({enableSmoothScroll:ue,isRtl:Lt,numberOfItems:mt,parentRef:zt,scrollMode:tt,setRenderRange:je,sizes:pl,viewMode:et}),ml=ee(function(){!An.current||_t.current.fullScreenMode!==t.FullScreenMode.Normal||de>0&&cn.current===de||ai(An.current)},200);(function($e){var ot=$e.targetRef,Pt=$e.onResize;g(function(){var Tt=new ResizeObserver(function(Rt){Rt.forEach(function(mn){Pt(mn.target)})}),St=ot.current;if(St)return Tt.observe(St),function(){Tt.unobserve(St)}},[])})({targetRef:zt,onResize:ml});var Ni=function($e){var ot=$e;me.forEach(function(Pt){Pt.onViewerStateChange&&(ot=Pt.onViewerStateChange(ot))}),_t.current=ot},gl=function(){return zt.current},ni=function(){return _t.current},Kr=o.useCallback(function($e){dn.markVisitedDestination($e)},[]),Ea=o.useCallback(function($e){var ot=$e.pageIndex,Pt=$e.bottomOffset,Tt=$e.leftOffset,St=$e.scaleTo,Rt=zt.current,mn=_t.current;return Rt&&mn?new Promise(function(di,yr){jt(oe,ot).then(function(xr){var ii=xr.getViewport({scale:1}),Xr=0,Zr=(typeof Pt=="function"?Pt(ii.width,ii.height):Pt)||0,ki=(typeof Tt=="function"?Tt(ii.width,ii.height):Tt)||0,br=mn.scale;switch(St){case t.SpecialZoomLevel.PageFit:Xr=0,ki=0,ai(t.SpecialZoomLevel.PageFit);break;case t.SpecialZoomLevel.PageWidth:br=Di(Rt,pe[ot].pageHeight,pe[ot].pageWidth,t.SpecialZoomLevel.PageWidth,We,mt),Xr=(ii.height-Zr)*br,ki*=br,ai(br);break;default:Xr=(ii.height-Zr)*br,ki*=br}switch(mn.scrollMode){case t.ScrollMode.Horizontal:Xt.scrollToItem(ot,{left:ki,top:0}).then(function(){di()});break;case t.ScrollMode.Vertical:default:Xt.scrollToItem(ot,{left:0,top:Xr}).then(function(){di()})}})}):Promise.resolve()},[]),as=o.useCallback(function($e){return dn.markVisitedDestination($e),Ea($e)},[]),lo=o.useCallback(function(){var $e=dn.getNextDestination();return $e?Ea($e):Promise.resolve()},[]),co=o.useCallback(function(){var $e=dn.getPreviousDestination();return $e?Ea($e):Promise.resolve()},[]),ss=o.useCallback(function(){return Xt.scrollToNextItem(_t.current.pageIndex,fr)},[]),Ii=o.useCallback(function($e){return 0<=$e&&$e<mt?Xt.scrollToItem($e,fr):Promise.resolve()},[]),gr=o.useCallback(function(){return Xt.scrollToPreviousItem(_t.current.pageIndex,fr)},[]),wa=o.useCallback(function($e){var ot,Pt;(ot=$e.name,Pt=ot.split(/\./).pop(),Pt?Pt.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Tt){var St=new FileReader;St.readAsArrayBuffer($e),St.onload=function(){var Rt=new Uint8Array(St.result);Tt(Rt)}}).then(function(Tt){bt($e.name,Tt)})},[bt]),vr=o.useCallback(function($e){var ot=$e===t.RotateDirection.Backward?-90:90,Pt=_t.current.rotation,Tt=Pt===360||Pt===-360?ot:Pt+ot;Zn.markNotRendered(),jn(Tt),Ni(u(u({},_t.current),{rotation:Tt})),at({direction:$e,doc:oe,rotation:Tt})},[]),Yr=o.useCallback(function($e,ot){var Pt=ot===t.RotateDirection.Backward?-90:90,Tt=_t.current.pagesRotation,St=(Tt.has($e)?Tt.get($e):ye)+Pt,Rt=Tt.set($e,St);st(Rt),Xn(function(mn){return!mn}),Ni(u(u({},_t.current),{pagesRotation:Rt,rotatedPage:$e})),ht({direction:ot,doc:oe,pageIndex:$e,rotation:St}),Zn.markRendering($e),Wr($e)},[]),os=o.useCallback(function($e){Ni(u(u({},_t.current),{scrollMode:$e})),Je($e)},[]),Li=o.useCallback(function($e){Ni(u(u({},_t.current),{viewMode:$e})),Ye($e)},[]),ai=o.useCallback(function($e){var ot=zt.current,Pt=_t.current.pageIndex;if(!(Pt<0||Pt>=mt)){var Tt=pe[Pt].pageHeight,St=pe[Pt].pageWidth,Rt=ot?typeof $e=="string"?Di(ot,Tt,St,$e,_t.current.viewMode,mt):$e:1;An.current=typeof $e=="string"?$e:null,Rt!==_t.current.scale&&(oo(function(mn){return mn+1}),Zn.markNotRendered(),Mn(Rt),Ze({doc:oe,scale:Rt}),Ni(u(u({},_t.current),{scale:Rt})))}},[]),ls=o.useCallback(function($e){Gt.enterFullScreenMode($e)},[]),uo=o.useCallback(function(){Gt.exitFullScreenMode()},[]);o.useEffect(function(){Ni(u(u({},_t.current),{fullScreenMode:Gt.fullScreenMode}))},[Gt.fullScreenMode]),o.useEffect(function(){var $e={enterFullScreenMode:ls,exitFullScreenMode:uo,getPagesContainer:gl,getViewerState:ni,jumpToDestination:as,jumpToNextDestination:lo,jumpToPreviousDestination:co,jumpToNextPage:ss,jumpToPreviousPage:gr,jumpToPage:Ii,openFile:wa,rotate:vr,rotatePage:Yr,setViewerState:Ni,switchScrollMode:os,switchViewMode:Li,zoom:ai};return me.forEach(function(ot){ot.install&&ot.install($e)}),function(){me.forEach(function(ot){ot.uninstall&&ot.uninstall($e)})}},[lt]),o.useEffect(function(){ze({doc:oe,file:Q}),me.forEach(function($e){$e.onDocumentLoad&&$e.onDocumentLoad({doc:oe,file:Q})})},[lt]);var Pi,Sa,Ra,cs=Xt.boundingClientRect;Pi=function(){de&&Ii(de)},Sa=cs.height>0&&cs.width>0,Ra=o.useRef(!1),g(function(){Sa&&!Ra.current&&(Ra.current=!0,Pi())},[Pi,Sa]),g(function(){var $e=_t.current.pageIndex;$e>-1&&ut!==tt&&Xt.scrollToItem($e,fr).then(function(){Gt.fullScreenMode===t.FullScreenMode.EnteredCompletely&&(ue||Zn.markNotRendered(),Yt.current=-1)})},[tt]),g(function(){var $e=_t.current.pageIndex;$e>-1&&xi!==ln&&Xt.scrollToItem($e,fr)},[ln]),g(function(){ti!=0&&ti!=_t.current.scale&&Xt.zoom(_t.current.scale/ti,_t.current.pageIndex).then(function(){Gt.fullScreenMode===t.FullScreenMode.EnteredCompletely&&(Ht.current=-1)})},[Bt]),g(function(){if(yt!==_t.current.viewMode){var $e=Xt.startPage,ot=Xt.endPage,Pt=Xt.virtualItems;Zn.markNotRendered(),Zn.setRange($e,ot);for(var Tt=function(Rt){var mn=Pt.find(function(di){return di.index===Rt});mn&&Zn.setVisibility(Rt,mn.visibility)},St=$e;St<=ot;St++)Tt(St);us()}},[et]),g(function(){var $e=_t.current.pageIndex;$e>-1&&yt!==et&&Xt.scrollToItem($e,fr)},[et]),g(function(){var $e=_t.current.pageIndex;$e>0&&$e===de&&cn.current===de&&An.current&&(cn.current=-1,ai(An.current))},[Jt]),o.useEffect(function(){Xt.isSmoothScrolling||nn.current!==null&&nn.current===Jt||(nn.current=Jt,it({currentPage:Jt,doc:oe}))},[Jt,Xt.isSmoothScrolling]),o.useEffect(function(){Gt.fullScreenMode===t.FullScreenMode.Entering&&_t.current.scrollMode===t.ScrollMode.Page&&(Yt.current=_t.current.pageIndex),Gt.fullScreenMode===t.FullScreenMode.EnteredCompletely&&_t.current.scrollMode===t.ScrollMode.Page&&ue&&(Yt.current=-1),Gt.fullScreenMode===t.FullScreenMode.EnteredCompletely&&An.current&&(Ht.current=_t.current.pageIndex,ai(An.current))},[Gt.fullScreenMode]),o.useEffect(function(){if(Gt.fullScreenMode!==t.FullScreenMode.Entering&&Gt.fullScreenMode!==t.FullScreenMode.Exitting&&!Xt.isSmoothScrolling){var $e=Xt.startPage,ot=Xt.endPage,Pt=Xt.maxVisbilityIndex,Tt=Xt.virtualItems,St=Pt,Rt=Gt.fullScreenMode===t.FullScreenMode.Entered||Gt.fullScreenMode===t.FullScreenMode.EnteredCompletely;if(!(Rt&&St!==Yt.current&&Yt.current>-1||Rt&&St!==Ht.current&&Ht.current>-1)){yn(St),Ni(u(u({},_t.current),{pageIndex:St})),Zn.setRange($e,ot);for(var mn=function(yr){var xr=Tt.find(function(ii){return ii.index===yr});xr&&Zn.setVisibility(yr,xr.visibility)},di=$e;di<=ot;di++)mn(di);us()}}},[Xt.startPage,Xt.endPage,Xt.isSmoothScrolling,Xt.maxVisbilityIndex,Gt.fullScreenMode,Rn,ln,Bt]);var vl=o.useCallback(function($e){Zn.markRendered($e),us()},[Wi]),us=function(){var $e=Zn.getHighestPriorityPage();$e>-1&&Zn.isInRange($e)&&(Zn.markRendering($e),Wr($e))},yl=function($e){var ot=Jt-1,Pt=Jt+1;switch($e){case"FirstPage":Ii(0);break;case"LastPage":Ii(mt-1);break;case"NextPage":Pt<mt&&Ii(Pt);break;case"PrevPage":ot>=0&&Ii(ot)}},ho=o.useCallback(function(){var $e=Xt.virtualItems,ot=[];switch(et){case t.ViewMode.DualPage:ot=He($e,2);break;case t.ViewMode.DualPageWithCover:$e.length&&(ot=$e[0].index===0?[[$e[0]]].concat(He($e.slice(1),2)):He($e,2));break;case t.ViewMode.SinglePage:default:ot=He($e,1)}var Pt=It&&It.core?It.core.pageLabel:"Page {{pageIndex}}",Tt={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Ft,style:{height:"100%"}},children:o.createElement(o.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:b({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":tt===t.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Lt,"rpv-core__inner-pages--single":tt===t.ScrollMode.Page,"rpv-core__inner-pages--vertical":tt===t.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":tt===t.ScrollMode.Wrapped}),ref:zt,style:{height:"100%",position:"relative"}},children:o.createElement("div",{"data-testid":"core__inner-current-page-".concat(Jt),style:Object.assign({"--scale-factor":Bt},Xt.getContainerStyles())},ot.map(function(St){return o.createElement("div",{className:b({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":tt===t.ScrollMode.Page}),style:Xt.getItemContainerStyles(St[0]),key:"".concat(St[0].index,"-").concat(et)},St.map(function(Rt){var mn=et===t.ViewMode.DualPageWithCover&&(Rt.index===0||mt%2==0&&Rt.index===mt-1);return o.createElement("div",{"aria-label":Pt.replace("{{pageIndex}}","".concat(Rt.index+1)),className:b({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":et===t.ViewMode.DualPage&&Rt.index%2==0,"rpv-core__inner-page--dual-odd":et===t.ViewMode.DualPage&&Rt.index%2==1,"rpv-core__inner-page--dual-cover":mn,"rpv-core__inner-page--dual-cover-even":et===t.ViewMode.DualPageWithCover&&!mn&&Rt.index%2==0,"rpv-core__inner-page--dual-cover-odd":et===t.ViewMode.DualPageWithCover&&!mn&&Rt.index%2==1,"rpv-core__inner-page--single":et===t.ViewMode.SinglePage&&tt===t.ScrollMode.Page}),role:"region",key:"".concat(Rt.index,"-").concat(et),style:Object.assign({},Xt.getItemStyles(Rt),rs.buildPageStyles({numPages:mt,pageIndex:Rt.index,scrollMode:tt,viewMode:et}))},o.createElement(Xa,{doc:oe,measureRef:Rt.measureRef,outlines:At,pageIndex:Rt.index,pageRotation:ct.has(Rt.index)?ct.get(Rt.index):0,pageSize:pe[Rt.index],plugins:me,renderPage:Me,renderQueueKey:Wi,rotation:ln,scale:Bt,shouldRender:Gi===Rt.index,viewMode:et,onExecuteNamedAction:yl,onJumpFromLinkAnnotation:Kr,onJumpToDest:as,onRenderCompleted:vl,onRotatePage:Yr}))}))}))}};return me.forEach(function(St){St.renderViewer&&(Tt=St.renderViewer({containerRef:Ft,doc:oe,pagesContainerRef:zt,pagesRotation:ct,pageSizes:pe,rotation:ln,slot:Tt,themeContext:Dt,jumpToPage:Ii,openFile:wa,rotate:vr,rotatePage:Yr,switchScrollMode:os,switchViewMode:Li,zoom:ai}))}),Tt},[me,Xt]),ds=o.useCallback(function($e){return o.createElement("div",u({},$e.attrs,{style:$e.attrs&&$e.attrs.style?$e.attrs.style:{}}),$e.children,$e.subSlot&&ds($e.subSlot))},[]);return ds(ho())},Hr=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],ts=function(B){var Q=B.defaultScale,ae=B.doc,oe=B.render,ue=B.scrollMode,de=B.viewMode,ye=o.useRef(),he=o.useState({pageSizes:[],scale:0}),se=he[0],pe=he[1];return o.useLayoutEffect(function(){var me=Array(ae.numPages).fill(0).map(function(Me,De){return new Promise(function(je,We){jt(ae,De).then(function(qe){var ze=qe.getViewport({scale:1});je({pageHeight:ze.height,pageWidth:ze.width,rotation:ze.rotation})})})});Promise.all(me).then(function(Me){var De=ye.current;if(De&&Me.length!==0){var je=Me[0].pageWidth,We=Me[0].pageHeight,qe=De.parentElement,ze=(qe.clientWidth-45)/je,bt=(qe.clientHeight-45)/We,it=ze;switch(ue){case t.ScrollMode.Horizontal:it=Math.min(ze,bt);break;case t.ScrollMode.Vertical:default:it=ze}var at,ht,Ze=Q?typeof Q=="string"?Di(qe,We,je,Q,de,ae.numPages):Q:(at=it,(ht=Hr.findIndex(function(mt){return mt>=at}))===-1||ht===0?at:Hr[ht-1]);pe({pageSizes:Me,scale:Ze})}})},[ae.loadingTask.docId]),se.pageSizes.length===0||se.scale===0?o.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:ye},o.createElement(k,null)):oe(se.pageSizes,se.scale)},pr=function(){},Oi=function(B){function Q(ae,oe){var ue=B.call(this)||this;return ue.verifyPassword=ae,ue.passwordStatus=oe,ue}return p(Q,B),Q}(pr),mr=function(B){var Q=B.passwordStatus,ae=B.renderProtectedView,oe=B.verifyPassword,ue=B.onDocumentAskPassword,de=o.useContext(M).l10n,ye=o.useState(""),he=ye[0],se=ye[1],pe=o.useContext(v).direction===t.TextDirection.RightToLeft,me=function(){return oe(he)};return o.useEffect(function(){ue&&ue({verifyPassword:oe})},[]),ae?ae({passwordStatus:Q,verifyPassword:oe}):o.createElement("div",{className:"rpv-core__asking-password-wrapper"},o.createElement("div",{className:b({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":pe})},o.createElement("div",{className:"rpv-core__asking-password-message"},Q===t.PasswordStatus.RequiredPassword&&de.core.askingPassword.requirePasswordToOpen,Q===t.PasswordStatus.WrongPassword&&de.core.wrongPassword.tryAgain),o.createElement("div",{className:"rpv-core__asking-password-body"},o.createElement("div",{className:b({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!pe,"rpv-core__asking-password-input--rtl":pe})},o.createElement(C,{testId:"core__asking-password-input",type:"password",value:he,onChange:se,onKeyDown:function(Me){Me.key==="Enter"&&me()}})),o.createElement(R,{onClick:me},de.core.askingPassword.submit))))},ns=function(B){function Q(ae){var oe=B.call(this)||this;return oe.doc=ae,oe}return p(Q,B),Q}(pr),ba=function(B){function Q(ae){var oe=B.call(this)||this;return oe.error=ae,oe}return p(Q,B),Q}(pr),_a=function(B){function Q(ae){var oe=B.call(this)||this;return oe.percentages=ae,oe}return p(Q,B),Q}(pr),Gr=function(B){var Q=B.characterMap,ae=B.file,oe=B.httpHeaders,ue=B.render,de=B.renderError,ye=B.renderLoader,he=B.renderProtectedView,se=B.transformGetDocumentParams,pe=B.withCredentials,me=B.onDocumentAskPassword,Me=o.useContext(v).direction===t.TextDirection.RightToLeft,De=o.useState(new _a(0)),je=De[0],We=De[1],qe=o.useRef(""),ze=te();return o.useEffect(function(){qe.current="",We(new _a(0));var bt=new c.PDFWorker({name:"PDFWorker_".concat(Date.now())}),it=Object.assign({httpHeaders:oe,withCredentials:pe,worker:bt},typeof ae=="string"?{url:ae}:{data:ae},Q?{cMapUrl:Q.url,cMapPacked:Q.isCompressed}:{}),at=se?se(it):it,ht=c.getDocument(at);return ht.onPassword=function(Ze,mt){switch(mt){case c.PasswordResponses.NEED_PASSWORD:ze.current&&We(new Oi(Ze,t.PasswordStatus.RequiredPassword));break;case c.PasswordResponses.INCORRECT_PASSWORD:ze.current&&We(new Oi(Ze,t.PasswordStatus.WrongPassword))}},ht.onProgress=function(Ze){var mt=Ze.total>0?Math.min(100,100*Ze.loaded/Ze.total):100;ze.current&&qe.current===""&&We(new _a(mt))},ht.promise.then(function(Ze){qe.current=Ze.loadingTask.docId,ze.current&&We(new ns(Ze))},function(Ze){return ze.current&&!bt.destroyed&&We(new ba({message:Ze.message||"Cannot load document",name:Ze.name}))}),function(){ht.destroy(),bt.destroy()}},[ae]),je instanceof Oi?o.createElement(mr,{passwordStatus:je.passwordStatus,renderProtectedView:he,verifyPassword:je.verifyPassword,onDocumentAskPassword:me}):je instanceof ns?ue(je.doc):je instanceof ba?de?de(je.error):o.createElement("div",{className:b({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Me})},o.createElement("div",{className:"rpv-core__doc-error-text"},je.error.message)):o.createElement("div",{"data-testid":"core__doc-loading",className:b({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Me})},ye?ye(je.percentages):o.createElement(k,null))},Ai=function(B,Q){var ae=o.useMemo(function(){return B==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":B},[]),oe=o.useState(ae),ue=oe[0],de=oe[1],ye=W(ue);return o.useEffect(function(){if(B==="auto"){var he=window.matchMedia("(prefers-color-scheme: dark)"),se=function(pe){de(pe.matches?"dark":"light")};return he.addEventListener("change",se),function(){return he.removeEventListener("change",se)}}},[]),o.useEffect(function(){ue!==ye&&Q&&Q(ue)},[ue]),o.useEffect(function(){B!==ue&&de(B)},[B]),{currentTheme:ue,setCurrentTheme:de}},is=function(B){return{startPage:B.startPage-3,endPage:B.endPage+3}};t.Button=function(B){var Q=B.children,ae=B.testId,oe=B.onClick,ue=o.useContext(v).direction===t.TextDirection.RightToLeft,de=ae?{"data-testid":ae}:{};return o.createElement("button",u({className:b({"rpv-core__button":!0,"rpv-core__button--rtl":ue}),type:"button",onClick:oe},de),Q)},t.Icon=w,t.LazyRender=function(B){var Q=B.attrs,ae=B.children,oe=B.testId,ue=o.useState(!1),de=ue[0],ye=ue[1],he=oe?u(u({},Q),{"data-testid":oe}):Q,se=y({once:!0,onVisibilityChanged:function(pe){pe.isVisible&&ye(!0)}});return o.createElement("div",u({ref:se},he),de&&ae)},t.LocalizationContext=M,t.Menu=function(B){var Q=B.children,ae=o.useRef(),oe=o.useRef([]),ue=o.useContext(v).direction===t.TextDirection.RightToLeft,de=function(he){if(ae.current)switch(he.key){case"Tab":he.preventDefault();break;case"ArrowDown":he.preventDefault(),ye(function(se,pe){return pe+1});break;case"ArrowUp":he.preventDefault(),ye(function(se,pe){return pe-1});break;case"End":he.preventDefault(),ye(function(se,pe){return se.length-1});break;case"Home":he.preventDefault(),ye(function(se,pe){return 0})}},ye=function(he){if(ae.current){var se=oe.current,pe=se.findIndex(function(Me){return Me.getAttribute("tabindex")==="0"}),me=Math.min(se.length-1,Math.max(0,he(se,pe)));pe>=0&&pe<=se.length-1&&se[pe].setAttribute("tabindex","-1"),se[me].setAttribute("tabindex","0"),se[me].focus()}};return g(function(){var he=ae.current;if(he){var se=function(pe){var me=[];return pe.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Me){if(Me instanceof HTMLElement){var De=Me.parentElement;(De===pe||window.getComputedStyle(De).display!=="none")&&me.push(Me)}}),me}(he);oe.current=se}},[]),g(function(){return document.addEventListener("keydown",de),function(){document.removeEventListener("keydown",de)}},[]),o.createElement("div",{ref:ae,"aria-orientation":"vertical",className:b({"rpv-core__menu":!0,"rpv-core__menu--rtl":ue}),role:"menu",tabIndex:0},Q)},t.MenuDivider=function(){return o.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},t.MenuItem=function(B){var Q=B.checked,ae=Q!==void 0&&Q,oe=B.children,ue=B.icon,de=ue===void 0?null:ue,ye=B.isDisabled,he=ye!==void 0&&ye,se=B.testId,pe=B.onClick,me=o.useContext(v).direction===t.TextDirection.RightToLeft,Me=se?{"data-testid":se}:{};return o.createElement("button",u({className:b({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":he,"rpv-core__menu-item--ltr":!me,"rpv-core__menu-item--rtl":me}),role:"menuitem",tabIndex:-1,type:"button",onClick:pe},Me),o.createElement("div",{className:b({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!me,"rpv-core__menu-item-icon--rtl":me})},de),o.createElement("div",{className:b({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!me,"rpv-core__menu-item-label--rtl":me})},oe),o.createElement("div",{className:b({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!me,"rpv-core__menu-item-check--rtl":me})},ae&&o.createElement(_,null)))},t.MinimalButton=function(B){var Q=B.ariaLabel,ae=Q===void 0?"":Q,oe=B.ariaKeyShortcuts,ue=oe===void 0?"":oe,de=B.children,ye=B.isDisabled,he=ye!==void 0&&ye,se=B.isSelected,pe=se!==void 0&&se,me=B.testId,Me=B.onClick,De=o.useContext(v).direction===t.TextDirection.RightToLeft,je=me?{"data-testid":me}:{};return o.createElement("button",u({"aria-label":ae},ue&&{"aria-keyshortcuts":ue},he&&{"aria-disabled":!0},{className:b({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":he,"rpv-core__minimal-button--rtl":De,"rpv-core__minimal-button--selected":pe}),type:"button",onClick:Me},je),de)},t.Modal=function(B){var Q=B.ariaControlsSuffix,ae=B.closeOnClickOutside,oe=B.closeOnEscape,ue=B.content,de=B.isOpened,ye=de!==void 0&&de,he=B.target,se=Q||"".concat($());return o.createElement(ne,{target:he?function(pe,me){return o.createElement("div",{"aria-expanded":me?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(se)},he(pe,me))}:null,content:function(pe){return o.createElement(V,null,o.createElement(P,{ariaControlsSuffix:se,closeOnClickOutside:ae,closeOnEscape:oe,onToggle:pe},ue(pe)))},isOpened:ye})},t.Popover=function(B){var Q=B.ariaHasPopup,ae=Q===void 0?"dialog":Q,oe=B.ariaControlsSuffix,ue=B.closeOnClickOutside,de=B.closeOnEscape,ye=B.content,he=B.lockScroll,se=he===void 0||he,pe=B.offset,me=B.position,Me=B.target,De=Y(!1),je=De.opened,We=De.toggle,qe=o.useRef(),ze=o.useMemo(function(){return oe||"".concat($())},[]);return o.createElement("div",{ref:qe,"aria-expanded":je?"true":"false","aria-haspopup":ae,"aria-controls":"rpv-core__popver-body-".concat(ze)},Me(We,je),je&&o.createElement(o.Fragment,null,se&&o.createElement(Be,{closeOnEscape:de,onClose:We}),o.createElement(Ne,{ariaControlsSuffix:ze,closeOnClickOutside:ue,offset:pe,position:me,targetRef:qe,onClose:We},ye(We))))},t.PrimaryButton=R,t.ProgressBar=function(B){var Q=B.progress,ae=o.useContext(v).direction===t.TextDirection.RightToLeft;return o.createElement("div",{className:b({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":ae})},o.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(Q,"%")}},Q,"%"))},t.Separator=function(){return o.createElement("div",{className:"rpv-core__separator"})},t.Spinner=k,t.Splitter=function(B){var Q=B.constrain,ae=o.useContext(v).direction===t.TextDirection.RightToLeft,oe=o.useRef(),ue=o.useRef(),de=o.useRef(),ye=o.useRef(0),he=o.useRef(0),se=o.useRef(0),pe=o.useRef(0),me={capture:!0},Me=function(je){var We=oe.current,qe=ue.current,ze=de.current;if(We&&qe&&ze){var bt=pe.current,it=je.clientX-ye.current,at=se.current+(ae?-it:it),ht=We.parentElement.getBoundingClientRect().width,Ze=100*at/ht;if(We.classList.add("rpv-core__splitter--resizing"),Q){var mt=ht-at-bt;if(!Q({firstHalfPercentage:Ze,firstHalfSize:at,secondHalfPercentage:100*mt/ht,secondHalfSize:mt}))return}qe.style.width="".concat(Ze,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),qe.classList.add("rpv-core__splitter-sibling--resizing"),ze.classList.add("rpv-core__splitter-sibling--resizing")}},De=function(je){var We=oe.current,qe=ue.current,ze=de.current;We&&qe&&ze&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),We.classList.remove("rpv-core__splitter--resizing"),qe.classList.remove("rpv-core__splitter-sibling--resizing"),ze.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Me,me),document.removeEventListener("mouseup",De,me))};return o.useEffect(function(){var je=oe.current;je&&(pe.current=je.getBoundingClientRect().width,ue.current=je.previousElementSibling,de.current=je.nextElementSibling)},[]),o.createElement("div",{ref:oe,className:"rpv-core__splitter",onMouseDown:function(je){var We=ue.current;We&&(ye.current=je.clientX,he.current=je.clientY,se.current=We.getBoundingClientRect().width,document.addEventListener("mousemove",Me,me),document.addEventListener("mouseup",De,me))}})},t.TextBox=C,t.ThemeContext=v,t.Tooltip=function(B){var Q=B.ariaControlsSuffix,ae=B.content,oe=B.offset,ue=B.position,de=B.target,ye=Y(!1),he=ye.opened,se=ye.toggle,pe=o.useRef(),me=o.useRef(),Me=o.useMemo(function(){return Q||"".concat($())},[]);q(function(){pe.current&&document.activeElement&&pe.current.contains(document.activeElement)&&je()});var De=function(){se(t.ToggleStatus.Open)},je=function(){se(t.ToggleStatus.Close)};return o.createElement(o.Fragment,null,o.createElement("div",{ref:pe,"aria-describedby":"rpv-core__tooltip-body-".concat(Me),onBlur:function(We){We.relatedTarget instanceof HTMLElement&&We.currentTarget.parentElement&&We.currentTarget.parentElement.contains(We.relatedTarget)?me.current&&(me.current.style.display="none"):je()},onFocus:De,onMouseEnter:De,onMouseLeave:je},de),he&&o.createElement(Ke,{ariaControlsSuffix:Me,contentRef:me,offset:oe,position:ue,targetRef:pe},ae()))},t.Viewer=function(B){var Q=B.characterMap,ae=B.defaultScale,oe=B.enableSmoothScroll,ue=oe===void 0||oe,de=B.fileUrl,ye=B.httpHeaders,he=ye===void 0?{}:ye,se=B.initialPage,pe=se===void 0?0:se,me=B.pageLayout,Me=B.initialRotation,De=Me===void 0?0:Me,je=B.localization,We=B.plugins,qe=We===void 0?[]:We,ze=B.renderError,bt=B.renderLoader,it=B.renderPage,at=B.renderProtectedView,ht=B.scrollMode,Ze=ht===void 0?t.ScrollMode.Vertical:ht,mt=B.setRenderRange,lt=mt===void 0?is:mt,It=B.transformGetDocumentParams,Dt=B.theme,Lt=Dt===void 0?{direction:t.TextDirection.LeftToRight,theme:"light"}:Dt,Ft=B.viewMode,zt=Ft===void 0?t.ViewMode.SinglePage:Ft,pn=B.withCredentials,Jt=pn!==void 0&&pn,yn=B.onDocumentAskPassword,nn=B.onDocumentLoad,dn=nn===void 0?function(){}:nn,hn=B.onPageChange,ln=hn===void 0?function(){}:hn,jn=B.onRotate,xi=jn===void 0?function(){}:jn,ci=B.onRotatePage,Rn=ci===void 0?function(){}:ci,Xn=B.onSwitchTheme,Ti=Xn===void 0?function(){}:Xn,ct=B.onZoom,st=ct===void 0?function(){}:ct,Qe=o.useState({data:de,name:typeof de=="string"?de:"",shouldLoad:!1}),tt=Qe[0],Je=Qe[1],ut=function(Yt,Ht){Je({data:Ht,name:Yt,shouldLoad:!0})},gt=o.useState(!1),et=gt[0],Ye=gt[1],yt=W(tt);o.useEffect(function(){var Yt,Ht,cn,Gt;Yt=yt.data,Gt=typeof(Ht=de),(cn=typeof Yt)=="string"&&Gt==="string"&&Yt===Ht||cn==="object"&&Gt==="object"&&Yt.length===Ht.length&&Yt.every(function(ui,Gi){return ui===Ht[Gi]})||Je({data:de,name:typeof de=="string"?de:"",shouldLoad:et})},[de,et]);var At=y({onVisibilityChanged:function(Yt){Ye(Yt.isVisible),Yt.isVisible&&Je(function(Ht){return Object.assign({},Ht,{shouldLoad:!0})})}}),Kt=typeof Lt=="string"?{direction:t.TextDirection.LeftToRight,theme:Lt}:Lt,Bt=o.useState(je||E),Mn=Bt[0],ti=Bt[1],_t={l10n:Mn,setL10n:ti},An=Object.assign({},{direction:Kt.direction},Ai(Kt.theme||"light",Ti));return o.useEffect(function(){je&&ti(je)},[je]),o.createElement(M.Provider,{value:_t},o.createElement(v.Provider,{value:An},o.createElement("div",{ref:At,className:"rpv-core__viewer rpv-core__viewer--".concat(An.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},tt.shouldLoad&&o.createElement(Gr,{characterMap:Q,file:tt.data,httpHeaders:he,render:function(Yt){return o.createElement(ts,{defaultScale:ae,doc:Yt,render:function(Ht,cn){return o.createElement(fl,{currentFile:{data:tt.data,name:tt.name},defaultScale:ae,doc:Yt,enableSmoothScroll:ue,initialPage:pe,initialRotation:De,initialScale:cn,pageLayout:me,pageSizes:Ht,plugins:qe,renderPage:it,scrollMode:Ze,setRenderRange:lt,viewMode:zt,viewerState:{file:tt,fullScreenMode:t.FullScreenMode.Normal,pageIndex:-1,pageHeight:Ht[0].pageHeight,pageWidth:Ht[0].pageWidth,pagesRotation:new Map,rotation:De,scale:cn,scrollMode:Ze,viewMode:zt},onDocumentLoad:dn,onOpenFile:ut,onPageChange:ln,onRotate:xi,onRotatePage:Rn,onZoom:st})},scrollMode:Ze,viewMode:zt})},renderError:ze,renderLoader:bt,renderProtectedView:at,transformGetDocumentParams:It,withCredentials:Jt,onDocumentAskPassword:yn}))))},t.Worker=function(B){var Q=B.children,ae=B.workerUrl;return c.GlobalWorkerOptions.workerSrc=ae,o.createElement(o.Fragment,null,Q)},t.chunk=He,t.classNames=b,t.createStore=function(B){var Q=B||{},ae={},oe=function(de,ye){var he;Q=u(u({},Q),((he={})[de]=ye,he)),(ae[de]||[]).forEach(function(se){return se(Q[de])})},ue=function(de){return Q[de]};return{subscribe:function(de,ye){ae[de]=(ae[de]||[]).concat(ye)},unsubscribe:function(de,ye){ae[de]=(ae[de]||[]).filter(function(he){return he!==ye})},update:function(de,ye){oe(de,ye)},updateCurrentValue:function(de,ye){var he=ue(de);he!==void 0&&oe(de,ye(he))},get:function(de){return ue(de)}}},t.getDestination=Pn,t.getPage=jt,t.isFullScreenEnabled=N,t.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},t.useDebounceCallback=ee,t.useIntersectionObserver=y,t.useIsMounted=te,t.useIsomorphicLayoutEffect=g,t.usePrevious=W,t.useRenderQueue=T}(core_min)),core_min}var hasRequiredLib$h;function requireLib$h(){if(hasRequiredLib$h)return lib$h.exports;hasRequiredLib$h=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$h.exports=requireCore_min(),lib$h.exports}var libExports$2=requireLib$h(),lib$g={exports:{}},defaultLayout_min={},lib$f={exports:{}},attachment_min={},hasRequiredAttachment_min;function requireAttachment_min(){if(hasRequiredAttachment_min)return attachment_min;hasRequiredAttachment_min=1;var t=requireLib$h();function e(c){var f=Object.create(null);return c&&Object.keys(c).forEach(function(p){if(p!=="default"){var d=Object.getOwnPropertyDescriptor(c,p);Object.defineProperty(f,p,d.get?d:{enumerable:!0,get:function(){return c[p]}})}}),f.default=c,Object.freeze(f)}var n=e(requireReact()),i=function(c){var f=c.files,p=n.useRef(),d=n.useContext(t.LocalizationContext).l10n,u=n.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,m=n.useRef([]),v=d&&d.attachment?d.attachment.clickToDownload:"Click to download",b=function(g){var y=p.current,w=[].slice.call(y.getElementsByClassName("rpv-attachment__item"));if(w.length!==0){w.forEach(function(k){return k.setAttribute("tabindex","-1")});var _=document.activeElement,R=w[Math.min(w.length-1,Math.max(0,g(w,_)))];R.setAttribute("tabindex","0"),R.focus()}};return t.useIsomorphicLayoutEffect(function(){var g=p.current;if(g){var y=[].slice.call(g.getElementsByClassName("rpv-attachment__item"));if(m.current=y,y.length>0){var w=y[0];w.focus(),w.setAttribute("tabindex","0")}}},[]),n.createElement("div",{"data-testid":"attachment__list",className:t.classNames({"rpv-attachment__list":!0,"rpv-attachment__list--rtl":u}),ref:p,tabIndex:-1,onKeyDown:function(g){switch(g.key){case"ArrowDown":g.preventDefault(),b(function(y,w){return y.indexOf(w)+1});break;case"ArrowUp":g.preventDefault(),b(function(y,w){return y.indexOf(w)-1});break;case"End":g.preventDefault(),b(function(y,w){return y.length-1});break;case"Home":g.preventDefault(),b(function(y,w){return 0})}}},f.map(function(g){return n.createElement("button",{className:"rpv-attachment__item",key:g.fileName,tabIndex:-1,title:v,type:"button",onClick:function(){return y=g.fileName,w=g.data,_=typeof w=="string"?"":URL.createObjectURL(new Blob([w],{type:""})),(R=document.createElement("a")).style.display="none",R.href=_||y,R.setAttribute("download",function(k){var C=k.split("/").pop();return C?C.split("#")[0].split("?")[0]:k}(y)),document.body.appendChild(R),R.click(),document.body.removeChild(R),void(_&&URL.revokeObjectURL(_));var y,w,_,R}},g.fileName)}))},s=function(c){var f=c.doc,p=n.useContext(t.LocalizationContext).l10n,d=n.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,u=p&&p.attachment?p.attachment.noAttachment:"There is no attachment",m=n.useState({files:[],isLoaded:!1}),v=m[0],b=m[1];return n.useEffect(function(){f.getAttachments().then(function(g){var y=g?Object.keys(g).map(function(w){return{data:g[w].content,fileName:g[w].filename}}):[];b({files:y,isLoaded:!0})})},[f]),v.isLoaded?v.files.length===0?n.createElement("div",{"data-testid":"attachment__empty",className:t.classNames({"rpv-attachment__empty":!0,"rpv-attachment__empty--rtl":d})},u):n.createElement(i,{files:v.files}):n.createElement(t.Spinner,null)},o=function(c){var f=c.store,p=n.useState(f.get("doc")),d=p[0],u=p[1],m=function(v){u(v)};return n.useEffect(function(){return f.subscribe("doc",m),function(){f.unsubscribe("doc",m)}},[]),d?n.createElement(s,{doc:d}):n.createElement("div",{className:"rpv-attachment__loader"},n.createElement(t.Spinner,null))};return attachment_min.attachmentPlugin=function(){var c=n.useMemo(function(){return t.createStore({})},[]);return{onDocumentLoad:function(f){c.update("doc",f.doc)},Attachments:function(){return n.createElement(o,{store:c})}}},attachment_min}var hasRequiredLib$g;function requireLib$g(){if(hasRequiredLib$g)return lib$f.exports;hasRequiredLib$g=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$f.exports=requireAttachment_min(),lib$f.exports}var lib$e={exports:{}},bookmark_min={},hasRequiredBookmark_min;function requireBookmark_min(){if(hasRequiredBookmark_min)return bookmark_min;hasRequiredBookmark_min=1;var t=requireLib$h();function e(v){var b=Object.create(null);return v&&Object.keys(v).forEach(function(g){if(g!=="default"){var y=Object.getOwnPropertyDescriptor(v,g);Object.defineProperty(b,g,y.get?y:{enumerable:!0,get:function(){return v[g]}})}}),b.default=v,Object.freeze(b)}var n,i=e(requireReact()),s=function(){return s=Object.assign||function(v){for(var b,g=1,y=arguments.length;g<y;g++)for(var w in b=arguments[g])Object.prototype.hasOwnProperty.call(b,w)&&(v[w]=b[w]);return v},s.apply(this,arguments)},o=function(){return i.createElement(t.Icon,{size:16},i.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},c=function(){return i.createElement(t.Icon,{size:16},i.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},f=function(v){var b=v.bookmark,g=v.depth,y=v.doc,w=v.index,_=v.isBookmarkExpanded,R=v.numberOfSiblings,k=v.pathFromRoot,C=v.renderBookmarkItem,A=v.store,D=k?"".concat(k,".").concat(w):"".concat(w),H=i.useMemo(function(){return function(M){var U=M.count,$=M.items;if(U>=0)return!1;var z=$.length;if(z===0)return!1;for(var q=$.concat([]);q.length>0;){var P=q.shift(),V=P.items;P.count&&V&&P.count>0&&V.length>0&&(z+=V.length,q=q.concat(V))}return Math.abs(U)===z}(b)},[b]),I=A.get("bookmarkExpandedMap"),F=_?_({bookmark:b,doc:y,depth:g,index:w}):I.has(D)?I.get(D):!H,Z=i.useState(F),N=Z[0],G=Z[1],J=b.items&&b.items.length>0,ee=function(){var M=!N;A.updateCurrentValue("bookmarkExpandedMap",function(U){return U.set(D,M)}),G(M)},te=function(){var M=b.dest,U=A.get("jumpToDestination");t.getDestination(y,M).then(function($){U&&U(s({label:b.title},$))})},W=function(){J&&b.dest&&te()},O=function(){!J&&b.dest&&te()},j=function(M,U){return i.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:"".concat(1.25*g,"rem")},onClick:M},U)},T=function(M,U){return J?i.createElement("span",{className:"rpv-bookmark__toggle","data-testid":"bookmark__toggle-".concat(g,"-").concat(w),onClick:ee},N?M:U):i.createElement("span",{className:"rpv-bookmark__toggle"})},E=function(M){return b.url?i.createElement("a",{className:"rpv-bookmark__title",href:b.url,rel:"noopener noreferrer nofollow",target:b.newWindow?"_blank":""},b.title):i.createElement("div",{className:"rpv-bookmark__title","aria-label":b.title,onClick:M},b.title)};return i.createElement("li",{"aria-expanded":N?"true":"false","aria-label":b.title,"aria-level":g+1,"aria-posinset":w+1,"aria-setsize":R,role:"treeitem",tabIndex:-1},C?C({bookmark:b,depth:g,hasSubItems:J,index:w,isExpanded:N,path:D,defaultRenderItem:j,defaultRenderTitle:E,defaultRenderToggle:T,onClickItem:O,onClickTitle:W,onToggleSubItems:ee}):j(O,i.createElement(i.Fragment,null,T(i.createElement(o,null),i.createElement(c,null)),E(W))),J&&N&&i.createElement(p,{bookmarks:b.items,depth:g+1,doc:y,isBookmarkExpanded:_,isRoot:!1,pathFromRoot:D,renderBookmarkItem:C,store:A}))},p=function(v){var b=v.bookmarks,g=v.depth,y=g===void 0?0:g,w=v.doc,_=v.isBookmarkExpanded,R=v.isRoot,k=v.pathFromRoot,C=v.renderBookmarkItem,A=v.store;return i.createElement("ul",{className:"rpv-bookmark__list",role:R?"tree":"group",tabIndex:-1},b.map(function(D,H){return i.createElement(f,{bookmark:D,depth:y,doc:w,index:H,isBookmarkExpanded:_,key:H,numberOfSiblings:b.length,pathFromRoot:k,renderBookmarkItem:C,store:A})}))};(function(v){v[v.Collapse=0]="Collapse",v[v.Expand=1]="Expand"})(n||(n={}));var d=function(v){var b=v.bookmarks,g=v.doc,y=v.isBookmarkExpanded,w=v.renderBookmarkItem,_=v.store,R=i.useRef(),k=function(H){var I=R.current;if(I&&H.target instanceof HTMLElement&&I.contains(H.target))switch(H.key){case"ArrowDown":H.preventDefault(),A(function(F,Z){return F.indexOf(Z)+1});break;case"ArrowLeft":H.preventDefault(),D(n.Collapse);break;case"ArrowRight":H.preventDefault(),D(n.Expand);break;case"ArrowUp":H.preventDefault,A(function(F,Z){return F.indexOf(Z)-1});break;case"End":H.preventDefault(),A(function(F,Z){return F.length-1});break;case" ":case"Enter":case"Space":H.preventDefault(),C();break;case"Home":H.preventDefault(),A(function(F,Z){return 0})}},C=function(){var H=document.activeElement.closest(".rpv-bookmark__item").querySelector(".rpv-bookmark__title");H&&H.click()},A=function(H){var I=R.current,F=[].slice.call(I.getElementsByClassName("rpv-bookmark__item"));if(F.length!==0){var Z=document.activeElement,N=F[Math.min(F.length-1,Math.max(0,H(F,Z)))];Z.setAttribute("tabindex","-1"),N.setAttribute("tabindex","0"),N.focus()}},D=function(H){var I=R.current;if([].slice.call(I.getElementsByClassName("rpv-bookmark__item")).length!==0){var F=document.activeElement.closest(".rpv-bookmark__item"),Z=H===n.Collapse?"true":"false";if(F&&F.parentElement.getAttribute("aria-expanded")===Z){var N=F.querySelector(".rpv-bookmark__toggle");N&&N.click()}}};return i.useEffect(function(){return document.addEventListener("keydown",k),function(){document.removeEventListener("keydown",k)}},[]),i.useEffect(function(){var H=R.current;if(H){var I=[].slice.call(H.getElementsByClassName("rpv-bookmark__item"));I.length>0&&(I[0].focus(),I[0].setAttribute("tabindex","0"))}},[]),i.createElement("div",{ref:R},i.createElement(p,{bookmarks:b,depth:0,doc:g,isBookmarkExpanded:y,isRoot:!0,pathFromRoot:"",renderBookmarkItem:w,store:_}))},u=function(v){var b=v.doc,g=v.isBookmarkExpanded,y=v.renderBookmarkItem,w=v.store,_=i.useContext(t.LocalizationContext).l10n,R=i.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,k=i.useState({isLoaded:!1,items:[]}),C=k[0],A=k[1];return i.useEffect(function(){A({isLoaded:!1,items:[]}),b.getOutline().then(function(D){A({isLoaded:!0,items:D||[]})})},[b]),C.isLoaded?C.items.length===0?i.createElement("div",{"data-testid":"bookmark__empty",className:t.classNames({"rpv-bookmark__empty":!0,"rpv-bookmark__empty--rtl":R})},_&&_.bookmark?_.bookmark.noBookmark:"There is no bookmark"):i.createElement("div",{"data-testid":"bookmark__container",className:t.classNames({"rpv-bookmark__container":!0,"rpv-bookmark__container--rtl":R})},i.createElement(d,{bookmarks:C.items,doc:b,isBookmarkExpanded:g,renderBookmarkItem:y,store:w})):i.createElement("div",{className:"rpv-bookmark__loader"},i.createElement(t.Spinner,null))},m=function(v){var b=v.isBookmarkExpanded,g=v.renderBookmarkItem,y=v.store,w=i.useState(y.get("doc")),_=w[0],R=w[1],k=function(C){R(C)};return i.useEffect(function(){return y.subscribe("doc",k),function(){y.unsubscribe("doc",k)}},[]),_?i.createElement(u,{doc:_,isBookmarkExpanded:b,renderBookmarkItem:g,store:y}):i.createElement("div",{className:"rpv-bookmark__loader"},i.createElement(t.Spinner,null))};return bookmark_min.DownArrowIcon=o,bookmark_min.RightArrowIcon=c,bookmark_min.bookmarkPlugin=function(){var v=i.useMemo(function(){return t.createStore({bookmarkExpandedMap:new Map})},[]);return{install:function(b){v.update("jumpToDestination",b.jumpToDestination)},onDocumentLoad:function(b){v.update("doc",b.doc)},Bookmarks:function(b){return i.createElement(m,{isBookmarkExpanded:b?.isBookmarkExpanded,renderBookmarkItem:b?.renderBookmarkItem,store:v})}}},bookmark_min}var hasRequiredLib$f;function requireLib$f(){if(hasRequiredLib$f)return lib$e.exports;hasRequiredLib$f=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$e.exports=requireBookmark_min(),lib$e.exports}var lib$d={exports:{}},thumbnail_min={},hasRequiredThumbnail_min;function requireThumbnail_min(){return hasRequiredThumbnail_min||(hasRequiredThumbnail_min=1,function(t){var e=requireLib$h();function n(y){var w=Object.create(null);return y&&Object.keys(y).forEach(function(_){if(_!=="default"){var R=Object.getOwnPropertyDescriptor(y,_);Object.defineProperty(w,_,R.get?R:{enumerable:!0,get:function(){return y[_]}})}}),w.default=y,Object.freeze(w)}var i,s=n(requireReact());t.ThumbnailDirection=void 0,(i=t.ThumbnailDirection||(t.ThumbnailDirection={})).Horizontal="Horizontal",i.Vertical="Vertical";var o=function(){return o=Object.assign||function(y){for(var w,_=1,R=arguments.length;_<R;_++)for(var k in w=arguments[_])Object.prototype.hasOwnProperty.call(w,k)&&(y[k]=w[k]);return y},o.apply(this,arguments)},c=function(y){var w=y.doc,_=y.getPageIndex,R=y.renderSpinner,k=y.store,C=y.width,A=w.numPages,D=_?_({numPages:A}):0,H=Math.max(0,Math.min(D,A-1)),I=k.get("pagesRotation")||new Map,F=I.has(H)?I.get(H):0,Z=s.useState(""),N=Z[0],G=Z[1],J=e.useIsMounted(),ee=s.useRef(),te=s.useState(k.get("rotation")||0),W=te[0],O=te[1],j=s.useState(F),T=j[0],E=j[1],M=s.useState(!1),U=M[0],$=M[1],z=function(V){var L=V.has(H)?V.get(H):0;E(L)},q=function(V){O(V)},P=e.useIntersectionObserver({onVisibilityChanged:function(V){$(V.isVisible)}});return s.useEffect(function(){if(U){var V=P.current;V&&(G(""),e.getPage(w,H).then(function(L){var Y=L.getViewport({scale:1}),ne=(Y.rotation+W+T)%360,re=Math.abs(W+T)%180==0,le=re?Y.width:Y.height,_e=re?Y.height:Y.width,Fe=document.createElement("canvas"),we=Fe.getContext("2d",{alpha:!1}),Te=V.clientWidth,Re=V.clientHeight,fe=C?C/le:Math.min(Te/le,Re/_e),be=fe*le,Ue=fe*_e;Fe.height=Ue,Fe.width=be,Fe.style.opacity="0";var Ne=L.getViewport({rotation:ne,scale:fe});ee.current=L.render({canvasContext:we,viewport:Ne}),ee.current.promise.then(function(){J.current&&G(Fe.toDataURL()),Fe.width=0,Fe.height=0},function(){})}))}},[T,U]),s.useEffect(function(){return k.subscribe("pagesRotation",z),k.subscribe("rotation",q),function(){k.unsubscribe("pagesRotation",z),k.unsubscribe("rotation",q)}},[]),s.useEffect(function(){return function(){var V;(V=ee.current)===null||V===void 0||V.cancel()}},[]),s.createElement("div",{ref:P,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},N?s.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:N}):s.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},R?R():s.createElement(e.Spinner,null)))},f=function(y){var w=y.getPageIndex,_=y.renderSpinner,R=y.store,k=y.width,C=s.useState(R.get("doc")),A=C[0],D=C[1],H=function(I){D(I)};return s.useEffect(function(){return R.subscribe("doc",H),function(){R.unsubscribe("doc",H)}},[]),s.createElement("div",{className:"rpv-thumbnail__cover"},A?s.createElement(c,{doc:A,getPageIndex:w,renderSpinner:_,store:R,width:k}):s.createElement("div",{className:"rpv-thumbnail__cover-loader"},_?_():s.createElement(e.Spinner,null)))},p=function(){return s.createElement(e.Spinner,null)},d=s.createContext({renderSpinner:p}),u=function(y){var w=y.children,_=y.doc,R=e.useIsMounted(),k=s.useState({loading:!0,labels:[]}),C=k[0],A=k[1];return s.useEffect(function(){_.getPageLabels().then(function(D){R.current&&A({loading:!1,labels:D||[]})})},[_.loadingTask.docId]),C.loading?s.createElement(s.Fragment,null):w(C.labels)},m=function(y){var w=y.page,_=y.pageHeight,R=y.pageIndex,k=y.pageWidth,C=y.rotation,A=y.thumbnailHeight,D=y.thumbnailWidth,H=y.onRenderCompleted,I=s.useContext(e.LocalizationContext).l10n,F=s.useRef(),Z=s.useState(""),N=Z[0],G=Z[1],J=I&&I.thumbnail?I.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return s.useEffect(function(){var ee=F.current;ee&&ee.cancel();var te=document.createElement("canvas"),W=te.getContext("2d",{alpha:!1}),O=D,j=O/(k/_),T=O/k;te.height=j,te.width=O,te.style.height="".concat(j,"px"),te.style.width="".concat(O,"px");var E=w.getViewport({rotation:C,scale:T});return F.current=w.render({canvasContext:W,viewport:E}),F.current.promise.then(function(){G(te.toDataURL()),H(R)},function(){H(R)}),function(){var M;(M=F.current)===null||M===void 0||M.cancel()}},[C]),N?s.createElement("img",{"aria-label":J.replace("{{pageIndex}}","".concat(R+1)),src:N,height:"".concat(A,"px"),width:"".concat(D,"px")}):s.useContext(d).renderSpinner()},v=function(y){var w=y.doc,_=y.pageHeight,R=y.pageIndex,k=y.pageRotation,C=y.pageWidth,A=y.rotation,D=y.shouldRender,H=y.thumbnailWidth,I=y.onRenderCompleted,F=y.onVisibilityChanged,Z=e.useIsMounted(),N=s.useState({height:_,page:null,viewportRotation:0,width:C}),G=N[0],J=N[1],ee=G.page,te=G.height,W=G.width,O=W/te,j=Math.abs(A+k)%180==0,T=j?H:H/O,E=j?H/O:H;s.useEffect(function(){D&&e.getPage(w,R).then(function($){var z=$.getViewport({scale:1});Z.current&&J({height:z.height,page:$,viewportRotation:z.rotation,width:z.width})})},[D]);var M=(G.viewportRotation+A+k)%360,U=e.useIntersectionObserver({onVisibilityChanged:function($){F(R,$)}});return s.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(R),ref:U,style:{height:"".concat(E,"px"),width:"".concat(T,"px")}},ee?s.createElement(m,{page:ee,pageHeight:j?te:W,pageIndex:R,pageWidth:j?W:te,rotation:M,thumbnailHeight:E,thumbnailWidth:T,onRenderCompleted:I}):s.useContext(d).renderSpinner())},b=function(y){var w=y.currentPage,_=y.doc,R=y.labels,k=y.pagesRotation,C=y.pageHeight,A=y.pageWidth,D=y.renderCurrentPageLabel,H=y.renderThumbnailItem,I=y.rotatedPage,F=y.rotation,Z=y.thumbnailDirection,N=y.thumbnailWidth,G=y.viewMode,J=y.onJumpToPage,ee=y.onRotatePage,te=_.numPages,W=_.loadingTask.docId,O=s.useRef(null),j=s.useRef([]),T=s.useState(w),E=T[0],M=T[1],U=s.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,$=s.useState(-1),z=$[0],q=$[1],P=e.useIsMounted(),V=e.usePrevious(G),L=s.useRef(!1),Y=e.useRenderQueue({doc:_}),ne=s.useMemo(function(){return Array(te).fill(0).map(function(fe,be){return be})},[W]),re=s.useMemo(function(){switch(G){case e.ViewMode.DualPage:return e.chunk(ne,2);case e.ViewMode.DualPageWithCover:return[[ne[0]]].concat(e.chunk(ne.slice(1),2));case e.ViewMode.SinglePage:default:return e.chunk(ne,1)}},[W,G]),le=function(){if(O.current){var fe=j.current,be=E+1;be<fe.length&&(E>=0&&fe[E].setAttribute("tabindex","-1"),M(be))}},_e=function(){if(O.current){var fe=j.current,be=E-1;be>=0&&(E>=0&&fe[E].setAttribute("tabindex","-1"),M(be))}},Fe=function(){E>=0&&E<te&&J(E)};e.useIsomorphicLayoutEffect(function(){var fe=O.current;fe&&(j.current=Array.from(fe.querySelectorAll(".rpv-thumbnail__item")))},[G]),s.useEffect(function(){var fe=j.current;if(!(fe.length===0||E<0||E>fe.length)){var be=fe[E];be.setAttribute("tabindex","0"),be.focus()}},[E]),e.useIsomorphicLayoutEffect(function(){var fe=O.current,be=j.current;if(!(!fe||be.length===0||w<0||w>be.length)){var Ue=be[w].closest(".rpv-thumbnail__items");Ue&&(Z===t.ThumbnailDirection.Vertical?function(Ne,Be){var Ke=Ne.getBoundingClientRect().top-Be.getBoundingClientRect().top,ke=Ne.clientHeight,He=Be.clientHeight;Ke<0?Be.scrollTop+=Ke:Ke+ke<=He||(Be.scrollTop+=Ke+ke-He)}(Ue,fe):function(Ne,Be){var Ke=Ne.getBoundingClientRect().left-Be.getBoundingClientRect().left,ke=Ne.clientWidth,He=Be.clientWidth;Ke<0?Be.scrollLeft+=Ke:Ke+ke<=He||(Be.scrollLeft+=Ke+ke-He)}(Ue,fe))}},[w,Z]);var we=s.useCallback(function(fe){P.current&&(Y.markRendered(fe),L.current=!1,Re())},[W]),Te=s.useCallback(function(fe,be){be.isVisible?Y.setVisibility(fe,be.ratio):Y.setOutOfRange(fe),Re()},[W]),Re=s.useCallback(function(){if(!L.current){var fe=Y.getHighestPriorityPage();fe>-1&&(Y.markRendering(fe),L.current=!0,q(fe))}},[W]);return s.useEffect(function(){I>=0&&(Y.markRendering(I),L.current=!0,q(I))},[W,I]),e.useIsomorphicLayoutEffect(function(){V!==G&&(Y.markNotRendered(),Re())},[G]),s.createElement("div",{ref:O,"data-testid":"thumbnail__list",className:e.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":Z===t.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":U,"rpv-thumbnail__list--vertical":Z===t.ThumbnailDirection.Vertical}),onKeyDown:function(fe){switch(fe.key){case"ArrowDown":le();break;case"ArrowUp":_e();break;case"Enter":Fe()}}},re.map(function(fe,be){var Ue=!1;switch(G){case e.ViewMode.DualPage:Ue=w===2*be||w===2*be+1;break;case e.ViewMode.DualPageWithCover:Ue=w===0&&be===0||be>0&&w===2*be-1||be>0&&w===2*be;break;case e.ViewMode.SinglePage:default:Ue=w===be}return s.createElement("div",{className:e.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":G===e.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":G===e.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":G===e.ViewMode.SinglePage,"rpv-thumbnail__items--selected":Ue}),key:"".concat(be,"___").concat(G)},fe.map(function(Ne){return function(Be){var Ke=G===e.ViewMode.DualPageWithCover&&(Be===0||te%2==0&&Be===te-1),ke="".concat(_.loadingTask.docId,"___").concat(Be),He=R.length===te?R[Be]:"".concat(Be+1),nt=D?D({currentPage:w,pageIndex:Be,numPages:te,pageLabel:He}):He,Xe=k.has(Be)?k.get(Be):0,vt=s.createElement(v,{doc:_,pageHeight:C,pageIndex:Be,pageRotation:Xe,pageWidth:A,rotation:F,shouldRender:z===Be,thumbnailWidth:N,onRenderCompleted:we,onVisibilityChanged:Te});return H?H({currentPage:w,key:ke,numPages:te,pageIndex:Be,renderPageLabel:s.createElement(s.Fragment,null,nt),renderPageThumbnail:vt,onJumpToPage:function(){return J(Be)},onRotatePage:function(pt){return ee(Be,pt)}}):s.createElement("div",{key:ke},s.createElement("div",{className:e.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":G===e.ViewMode.DualPage&&Be%2==0,"rpv-thumbnail__item--dual-odd":G===e.ViewMode.DualPage&&Be%2==1,"rpv-thumbnail__item--dual-cover":Ke,"rpv-thumbnail__item--dual-cover-even":G===e.ViewMode.DualPageWithCover&&!Ke&&Be%2==0,"rpv-thumbnail__item--dual-cover-odd":G===e.ViewMode.DualPageWithCover&&!Ke&&Be%2==1,"rpv-thumbnail__item--single":G===e.ViewMode.SinglePage,"rpv-thumbnail__item--selected":w===Be}),role:"button",tabIndex:w===Be?0:-1,onClick:function(){return J(Be)}},vt),s.createElement("div",{"data-testid":"thumbnail__label-".concat(Be),className:"rpv-thumbnail__label"},nt))}(Ne)}))}))},g=function(y){var w=y.renderCurrentPageLabel,_=y.renderThumbnailItem,R=y.store,k=y.thumbnailDirection,C=y.thumbnailWidth,A=s.useState(R.get("doc")),D=A[0],H=A[1],I=s.useState(R.get("currentPage")||0),F=I[0],Z=I[1],N=s.useState(R.get("pageHeight")||0),G=N[0],J=N[1],ee=s.useState(R.get("pageWidth")||0),te=ee[0],W=ee[1],O=s.useState(R.get("rotation")||0),j=O[0],T=O[1],E=s.useState(R.get("pagesRotation")||new Map),M=E[0],U=E[1],$=s.useState(R.get("rotatedPage")||-1),z=$[0],q=$[1],P=s.useState(R.get("viewMode")),V=P[0],L=P[1],Y=function(be){Z(be)},ne=function(be){H(be)},re=function(be){J(be)},le=function(be){W(be)},_e=function(be){T(be)},Fe=function(be){U(be)},we=function(be){q(be)},Te=function(be){L(be)},Re=function(be){var Ue=R.get("jumpToPage");Ue&&Ue(be)},fe=function(be,Ue){R.get("rotatePage")(be,Ue)};return s.useEffect(function(){return R.subscribe("doc",ne),R.subscribe("pageHeight",re),R.subscribe("pageWidth",le),R.subscribe("rotatedPage",we),R.subscribe("rotation",_e),R.subscribe("pagesRotation",Fe),R.subscribe("viewMode",Te),function(){R.unsubscribe("doc",ne),R.unsubscribe("pageHeight",re),R.unsubscribe("pageWidth",le),R.unsubscribe("rotatedPage",we),R.unsubscribe("rotation",_e),R.unsubscribe("pagesRotation",Fe),R.unsubscribe("viewMode",Te)}},[]),e.useIsomorphicLayoutEffect(function(){return R.subscribe("currentPage",Y),function(){R.unsubscribe("currentPage",Y)}},[]),D?s.createElement(e.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},s.createElement(u,{doc:D},function(be){return s.createElement(b,{currentPage:F,doc:D,labels:be,pagesRotation:M,pageHeight:G,pageWidth:te,renderCurrentPageLabel:w,renderThumbnailItem:_,rotatedPage:z,rotation:j,thumbnailDirection:k,thumbnailWidth:C,viewMode:V,onJumpToPage:Re,onRotatePage:fe})})):s.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},s.useContext(d).renderSpinner())};t.thumbnailPlugin=function(y){var w=s.useMemo(function(){return e.createStore({rotatePage:function(){},viewMode:e.ViewMode.SinglePage})},[]),_=s.useState(""),R=_[0],k=_[1];return{install:function(C){w.update("jumpToPage",C.jumpToPage),w.update("rotatePage",C.rotatePage)},onDocumentLoad:function(C){k(C.doc.loadingTask.docId),w.update("doc",C.doc)},onViewerStateChange:function(C){return w.update("currentPage",C.pageIndex),w.update("pagesRotation",C.pagesRotation),w.update("pageHeight",C.pageHeight),w.update("pageWidth",C.pageWidth),w.update("rotation",C.rotation),w.update("rotatedPage",C.rotatedPage),w.update("viewMode",C.viewMode),C},Cover:function(C){return s.createElement(f,o({},C,{renderSpinner:y?.renderSpinner,store:w}))},Thumbnails:s.useCallback(function(C){return s.createElement(d.Provider,{value:{renderSpinner:y?.renderSpinner||p}},s.createElement(g,{renderCurrentPageLabel:y?.renderCurrentPageLabel,renderThumbnailItem:C?.renderThumbnailItem,store:w,thumbnailDirection:C?.thumbnailDirection||t.ThumbnailDirection.Vertical,thumbnailWidth:y?.thumbnailWidth||100}))},[R])}}}(thumbnail_min)),thumbnail_min}var hasRequiredLib$e;function requireLib$e(){if(hasRequiredLib$e)return lib$d.exports;hasRequiredLib$e=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$d.exports=requireThumbnail_min(),lib$d.exports}var lib$c={exports:{}},toolbar_min={},lib$b={exports:{}},selectionMode_min={},hasRequiredSelectionMode_min;function requireSelectionMode_min(){return hasRequiredSelectionMode_min||(hasRequiredSelectionMode_min=1,function(t){var e=requireLib$h();function n(g){var y=Object.create(null);return g&&Object.keys(g).forEach(function(w){if(w!=="default"){var _=Object.getOwnPropertyDescriptor(g,w);Object.defineProperty(y,w,_.get?_:{enumerable:!0,get:function(){return g[w]}})}}),y.default=g,Object.freeze(y)}var i,s=n(requireReact()),o=function(){return s.createElement(e.Icon,{size:16},s.createElement("path",{d:`M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4
            c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335
            c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67
            c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6`}))},c=function(){return c=Object.assign||function(g){for(var y,w=1,_=arguments.length;w<_;w++)for(var R in y=arguments[w])Object.prototype.hasOwnProperty.call(y,R)&&(g[R]=y[R]);return g},c.apply(this,arguments)};t.SelectionMode=void 0,(i=t.SelectionMode||(t.SelectionMode={})).Hand="Hand",i.Text="Text";var f=function(){return s.createElement(e.Icon,{size:16},s.createElement("path",{d:`M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906
            L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262
            c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0
            l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z`}))},p=function(g){var y=g.children,w=g.mode,_=g.onClick,R=s.useContext(e.LocalizationContext).l10n,k="",C=s.createElement(f,null);switch(w){case t.SelectionMode.Hand:k=R&&R.selectionMode?R.selectionMode.handTool:"Hand tool",C=s.createElement(o,null);break;case t.SelectionMode.Text:default:k=R&&R.selectionMode?R.selectionMode.textSelectionTool:"Text selection tool",C=s.createElement(f,null)}return y({icon:C,label:k,onClick:_})},d={left:0,top:8},u=function(g){var y=g.isSelected,w=g.mode,_=g.onClick,R="";switch(w){case t.SelectionMode.Hand:R="selection-mode__hand-button";break;case t.SelectionMode.Text:default:R="selection-mode__text-button"}return s.createElement(p,{mode:w,onClick:_},function(k){return s.createElement(e.Tooltip,{ariaControlsSuffix:"selection-mode-switch",position:e.Position.BottomCenter,target:s.createElement(e.MinimalButton,{ariaLabel:k.label,isSelected:y,testId:R,onClick:k.onClick},k.icon),content:function(){return k.label},offset:d})})},m=function(g){var y=g.children,w=g.mode,_=g.store,R=w===_.get("selectionMode");return(y||function(k){return s.createElement(u,{isSelected:R,mode:k.mode,onClick:k.onClick})})({isSelected:R,mode:w,onClick:function(){return _.update("selectionMode",w)}})},v=function(g){var y=g.isSelected,w=g.mode,_=g.onClick,R="";switch(w){case t.SelectionMode.Hand:R="selection-mode__hand-menu";break;case t.SelectionMode.Text:default:R="selection-mode__text-menu"}return s.createElement(p,{mode:w,onClick:_},function(k){return s.createElement(e.MenuItem,{checked:y,icon:k.icon,testId:R,onClick:k.onClick},k.label)})},b=function(g){var y=g.store,w=s.useRef(null),_=s.useState(t.SelectionMode.Text),R=_[0],k=_[1],C=s.useRef({top:0,left:0,x:0,y:0}),A=function(Z){var N=w.current;N&&(N.scrollTop=C.current.top-(Z.clientY-C.current.y),N.scrollLeft=C.current.left-(Z.clientX-C.current.x))},D=function(){var Z=w.current;Z&&(Z.classList.add("rpv-selection-mode__grab"),Z.classList.remove("rpv-selection-mode__grabbing"),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D))},H=function(Z){var N=w.current;N&&R!==t.SelectionMode.Text&&(N.classList.remove("rpv-selection-mode__grab"),N.classList.add("rpv-selection-mode__grabbing"),Z.preventDefault(),Z.stopPropagation(),C.current={left:N.scrollLeft,top:N.scrollTop,x:Z.clientX,y:Z.clientY},document.addEventListener("mousemove",A),document.addEventListener("mouseup",D))},I=function(Z){w.current=Z()},F=function(Z){k(Z)};return s.useEffect(function(){var Z=w.current;if(Z)return R===t.SelectionMode.Hand?Z.classList.add("rpv-selection-mode__grab"):Z.classList.remove("rpv-selection-mode__grab"),Z.addEventListener("mousedown",H),function(){Z.removeEventListener("mousedown",H)}},[R]),s.useEffect(function(){return y.subscribe("getPagesContainer",I),y.subscribe("selectionMode",F),function(){y.unsubscribe("getPagesContainer",I),y.unsubscribe("selectionMode",F)}},[]),s.createElement(s.Fragment,null)};t.HandToolIcon=o,t.TextSelectionIcon=f,t.selectionModePlugin=function(g){var y=s.useMemo(function(){return e.createStore()},[]),w=function(_){return s.createElement(m,c({},_,{store:y}))};return{install:function(_){y.update("selectionMode",g&&g.selectionMode?g.selectionMode:t.SelectionMode.Text),y.update("getPagesContainer",_.getPagesContainer)},renderViewer:function(_){var R=_.slot;return R.subSlot&&R.subSlot.children&&(R.subSlot.children=s.createElement(s.Fragment,null,s.createElement(b,{store:y}),R.subSlot.children)),R},SwitchSelectionMode:w,SwitchSelectionModeButton:function(_){return s.createElement(w,{mode:_.mode},function(R){return s.createElement(u,{isSelected:R.isSelected,mode:R.mode,onClick:function(){R.onClick()}})})},SwitchSelectionModeMenuItem:function(_){return s.createElement(w,{mode:_.mode},function(R){return s.createElement(v,{isSelected:R.isSelected,mode:R.mode,onClick:function(){R.onClick(),_.onClick()}})})}}}}(selectionMode_min)),selectionMode_min}var hasRequiredLib$d;function requireLib$d(){if(hasRequiredLib$d)return lib$b.exports;hasRequiredLib$d=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$b.exports=requireSelectionMode_min(),lib$b.exports}var lib$a={exports:{}},fullScreen_min={},hasRequiredFullScreen_min;function requireFullScreen_min(){if(hasRequiredFullScreen_min)return fullScreen_min;hasRequiredFullScreen_min=1;var t=requireLib$h();function e(_){var R=Object.create(null);return _&&Object.keys(_).forEach(function(k){if(k!=="default"){var C=Object.getOwnPropertyDescriptor(_,k);Object.defineProperty(R,k,C.get?C:{enumerable:!0,get:function(){return _[k]}})}}),R.default=_,Object.freeze(R)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),n.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),n.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),n.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),n.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},s=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:"M0.5 12L23.5 12"}),n.createElement("path",{d:"M11.5 1L11.5 23"}),n.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),n.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),n.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),n.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},o=function(){return o=Object.assign||function(_){for(var R,k=1,C=arguments.length;k<C;k++)for(var A in R=arguments[k])Object.prototype.hasOwnProperty.call(R,A)&&(_[A]=R[A]);return _},o.apply(this,arguments)},c={left:0,top:8},f=function(_){var R=_.enableShortcuts,k=_.onClick,C=n.useContext(t.LocalizationContext).l10n,A=C&&C.fullScreen?C.fullScreen.enterFullScreen:"Full screen",D=R?t.isMac()?"Meta+Ctrl+F":"F11":"";return n.createElement(t.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaKeyShortcuts:D,ariaLabel:A,isDisabled:!t.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:k},n.createElement(s,null)),content:function(){return A},offset:c})},p={left:0,top:8},d=function(_){var R=_.onClick,k=n.useContext(t.LocalizationContext).l10n,C=k&&k.fullScreen?k.fullScreen.exitFullScreen:"Exit full screen";return n.createElement(t.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:C,testId:"full-screen__exit-button-with-tooltip",onClick:R},n.createElement(i,null)),content:function(){return C},offset:p})},u=function(_,R){var k=n.useState(R.get("fullScreenMode")),C=k[0],A=k[1],D=n.useCallback(function(H){A(H)},[]);return n.useEffect(function(){return R.subscribe("fullScreenMode",D),function(){R.unsubscribe("fullScreenMode",D)}},[]),{enterFullScreen:function(){var H=R.get("getPagesContainer");if(H){var I=_(H());R.get("enterFullScreenMode")(I)}},exitFullScreen:function(){R.get("exitFullScreenMode")()},isFullScreen:C===t.FullScreenMode.Entering||C===t.FullScreenMode.EnteredCompletely}},m=function(_){var R=_.children,k=_.enableShortcuts,C=_.getFullScreenTarget,A=_.store,D=u(C,A),H=D.enterFullScreen,I=D.exitFullScreen,F=D.isFullScreen;return(R||function(Z){return F?n.createElement(d,{onClick:Z.onClick}):n.createElement(f,{enableShortcuts:k,onClick:Z.onClick})})({onClick:F?I:H})},v=function(_){var R=_.onClick,k=n.useContext(t.LocalizationContext).l10n,C=k&&k.fullScreen?k.fullScreen.enterFullScreen:"Full screen";return n.createElement(t.MenuItem,{icon:n.createElement(s,null),isDisabled:!t.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:R},C)},b=function(_){var R=_.onClick,k=n.useContext(t.LocalizationContext).l10n,C=n.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,A=k&&k.fullScreen?k.fullScreen.exitFullScreen:"Exit full screen";return n.createElement("div",{className:t.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!C,"rpv-full-screen__exit-button--rtl":C})},n.createElement(t.MinimalButton,{ariaLabel:A,testId:"full-screen__exit-button",onClick:R},n.createElement(i,null)))},g=function(_){var R=_.children,k=_.getFullScreenTarget,C=_.store,A=u(k,C),D=A.enterFullScreen,H=A.exitFullScreen,I=A.isFullScreen;return I&&(R||function(F){return n.createElement(b,{onClick:F.onClick})})({onClick:I?H:D})},y=function(_){var R=_.store,k=_.onEnterFullScreen,C=_.onExitFullScreen,A=n.useState(R.get("fullScreenMode")),D=A[0],H=A[1],I=n.useCallback(function(F){H(F)},[]);return n.useEffect(function(){switch(D){case t.FullScreenMode.EnteredCompletely:k(R.get("zoom"));break;case t.FullScreenMode.Exited:C(R.get("zoom"))}},[D]),n.useEffect(function(){return R.subscribe("fullScreenMode",I),function(){R.unsubscribe("fullScreenMode",I)}},[]),(D===t.FullScreenMode.Entering||D===t.FullScreenMode.Entered)&&n.createElement("div",{className:"rpv-full-screen__overlay"},n.createElement(t.Spinner,null))},w=function(_){var R=_.containerRef,k=_.getFullScreenTarget,C=_.store,A=u(k,C).enterFullScreen,D=function(H){if(!H.shiftKey&&!H.altKey&&(t.isMac()?H.metaKey&&H.ctrlKey&&H.key==="f":H.key==="F11")){var I=R.current;I&&document.activeElement&&I.contains(document.activeElement)&&(H.preventDefault(),A())}};return n.useEffect(function(){if(R.current)return document.addEventListener("keydown",D),function(){document.removeEventListener("keydown",D)}},[R.current]),n.createElement(n.Fragment,null)};return fullScreen_min.ExitFullScreenIcon=i,fullScreen_min.FullScreenIcon=s,fullScreen_min.fullScreenPlugin=function(_){var R=_?.getFullScreenTarget||function(H){return H},k=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},_)},[]),C=n.useMemo(function(){return t.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:t.FullScreenMode.Normal,zoom:function(){}})},[]),A=function(H){return n.createElement(m,o({},H,{enableShortcuts:k.enableShortcuts,getFullScreenTarget:R,store:C}))},D=function(){return n.createElement(g,{getFullScreenTarget:R,store:C},_?.renderExitFullScreenButton)};return{install:function(H){C.update("enterFullScreenMode",H.enterFullScreenMode),C.update("exitFullScreenMode",H.exitFullScreenMode),C.update("getPagesContainer",H.getPagesContainer),C.update("zoom",H.zoom)},onViewerStateChange:function(H){return C.update("fullScreenMode",H.fullScreenMode),H},renderViewer:function(H){var I=H.slot;return I.subSlot&&(I.subSlot.children=n.createElement(n.Fragment,null,k.enableShortcuts&&n.createElement(w,{containerRef:H.containerRef,getFullScreenTarget:R,store:C}),n.createElement(y,{store:C,onEnterFullScreen:k.onEnterFullScreen,onExitFullScreen:k.onExitFullScreen}),n.createElement(D,null),I.subSlot.children)),I},EnterFullScreen:A,EnterFullScreenButton:function(){return n.createElement(A,null,function(H){return n.createElement(f,o({enableShortcuts:k.enableShortcuts},H))})},EnterFullScreenMenuItem:function(H){return n.createElement(A,null,function(I){return n.createElement(v,{onClick:function(){I.onClick(),H.onClick()}})})}}},fullScreen_min}var hasRequiredLib$c;function requireLib$c(){if(hasRequiredLib$c)return lib$a.exports;hasRequiredLib$c=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$a.exports=requireFullScreen_min(),lib$a.exports}var lib$9={exports:{}},getFile_min={},hasRequiredGetFile_min;function requireGetFile_min(){if(hasRequiredGetFile_min)return getFile_min;hasRequiredGetFile_min=1;var t=requireLib$h();function e(v){var b=Object.create(null);return v&&Object.keys(v).forEach(function(g){if(g!=="default"){var y=Object.getOwnPropertyDescriptor(v,g);Object.defineProperty(b,g,y.get?y:{enumerable:!0,get:function(){return v[g]}})}}),b.default=v,Object.freeze(b)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),n.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},s=function(){return s=Object.assign||function(v){for(var b,g=1,y=arguments.length;g<y;g++)for(var w in b=arguments[g])Object.prototype.hasOwnProperty.call(b,w)&&(v[w]=b[w]);return v},s.apply(this,arguments)},o={left:0,top:8},c=function(v){var b=v.onClick,g=n.useContext(t.LocalizationContext).l10n,y=g&&g.download?g.download.download:"Download";return n.createElement(t.Tooltip,{ariaControlsSuffix:"get-file",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:y,testId:"get-file__download-button",onClick:b},n.createElement(i,null)),content:function(){return y},offset:o})},f=function(v,b){var g=document.createElement("a");g.style.display="none",g.href=v,g.setAttribute("download",b),document.body.appendChild(g),g.click(),document.body.removeChild(g)},p=function(v,b,g){var y=URL.createObjectURL(new Blob([v],{type:g}));f(y,b),y&&URL.revokeObjectURL(y)},d=function(v,b){v.getData().then(function(g){/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?p(g,b,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?f("data:application/pdf;base64,".concat(function(y){return btoa(Array(y.length).fill("").map(function(w,_){return String.fromCharCode(y[_])}).join(""))}(g)),b):p(g,b,"application/pdf")})},u=function(v){var b=v.children,g=v.fileNameGenerator,y=v.store,w=n.useState(y.get("file")),_=w[0],R=w[1],k=n.useState(y.get("doc")),C=k[0],A=k[1],D=function(I){A(I)},H=function(I){R(I)};return n.useEffect(function(){return y.subscribe("doc",D),y.subscribe("file",H),function(){y.subscribe("doc",D),y.unsubscribe("file",H)}},[]),(b||function(I){return n.createElement(c,{onClick:I.onClick})})({onClick:function(){C&&_&&d(C,g(_))}})},m=function(v){var b=v.onClick,g=n.useContext(t.LocalizationContext).l10n,y=g&&g.download?g.download.download:"Download";return n.createElement(t.MenuItem,{icon:n.createElement(i,null),testId:"get-file__download-menu",onClick:b},y)};return getFile_min.DownloadIcon=i,getFile_min.getFilePlugin=function(v){var b=n.useMemo(function(){return t.createStore({})},[]),g=function(w){return w.name?(_=w.name,(R=_.split("/").pop())?R.split("#")[0].split("?")[0]:_):"document.pdf";var _,R},y=function(w){return n.createElement(u,s({},w,{fileNameGenerator:v&&v.fileNameGenerator||g,store:b}))};return{onDocumentLoad:function(w){b.update("doc",w.doc),b.update("file",w.file)},Download:y,DownloadButton:function(){return n.createElement(y,null,function(w){return n.createElement(c,s({},w))})},DownloadMenuItem:function(w){return n.createElement(y,null,function(_){return n.createElement(m,{onClick:function(){_.onClick(),w.onClick()}})})}}},getFile_min}var hasRequiredLib$b;function requireLib$b(){if(hasRequiredLib$b)return lib$9.exports;hasRequiredLib$b=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$9.exports=requireGetFile_min(),lib$9.exports}var lib$8={exports:{}},open_min={},hasRequiredOpen_min;function requireOpen_min(){if(hasRequiredOpen_min)return open_min;hasRequiredOpen_min=1;var t=requireLib$h();function e(m){var v=Object.create(null);return m&&Object.keys(m).forEach(function(b){if(b!=="default"){var g=Object.getOwnPropertyDescriptor(m,b);Object.defineProperty(v,b,g.get?g:{enumerable:!0,get:function(){return m[b]}})}}),v.default=m,Object.freeze(v)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),n.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},s=function(){return s=Object.assign||function(m){for(var v,b=1,g=arguments.length;b<g;b++)for(var y in v=arguments[b])Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m},s.apply(this,arguments)},o=function(m){var v=n.useRef(),b=function(){var y=v.current;y&&(y.click(),m.get("triggerOpenFile")&&m.update("triggerOpenFile",!1))},g=function(y){y&&b()};return n.useEffect(function(){return m.subscribe("triggerOpenFile",g),function(){m.unsubscribe("triggerOpenFile",g)}},[]),{inputRef:v,openFile:b}},c={left:0,top:8},f=function(m){var v=m.enableShortcuts,b=m.store,g=m.onClick,y=n.useContext(t.LocalizationContext).l10n,w=y&&y.open?y.open.openFile:"Open file",_=o(b),R=_.inputRef,k=_.openFile,C=v?t.isMac()?"Meta+O":"Ctrl+O":"";return n.createElement(t.Tooltip,{ariaControlsSuffix:"open",position:t.Position.BottomCenter,target:n.createElement("div",{className:"rpv-open__input-wrapper"},n.createElement("input",{accept:".pdf",ref:R,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:g}),n.createElement(t.MinimalButton,{ariaKeyShortcuts:C,ariaLabel:w,testId:"open__button",onClick:k},n.createElement(i,null))),content:function(){return w},offset:c})},p=function(m){var v=m.children,b=m.enableShortcuts,g=m.store;return(v||function(y){return n.createElement(f,{enableShortcuts:b,store:g,onClick:y.onClick})})({onClick:function(y){var w=y.target.files;if(w&&w.length){var _=g.get("openFile");_&&_(w[0])}}})},d=function(m){var v=m.store,b=m.onClick,g=n.useContext(t.LocalizationContext).l10n,y=g&&g.open?g.open.openFile:"Open file",w=o(v),_=w.inputRef,R=w.openFile;return n.createElement(t.MenuItem,{icon:n.createElement(i,null),testId:"open__menu",onClick:R},n.createElement("div",{className:"rpv-open__input-wrapper"},n.createElement("input",{accept:".pdf",ref:_,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:b}),y))},u=function(m){var v=m.containerRef,b=m.store,g=function(y){if(!y.shiftKey&&!y.altKey&&y.key==="o"&&(t.isMac()?y.metaKey:y.ctrlKey)){var w=v.current;w&&document.activeElement&&w.contains(document.activeElement)&&(y.preventDefault(),b.update("triggerOpenFile",!0))}};return n.useEffect(function(){if(v.current)return document.addEventListener("keydown",g),function(){document.removeEventListener("keydown",g)}},[v.current]),n.createElement(n.Fragment,null)};return open_min.OpenFileIcon=i,open_min.openPlugin=function(m){var v=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},m)},[]),b=n.useMemo(function(){return t.createStore({})},[]),g=function(y){return n.createElement(p,s({enableShortcuts:v.enableShortcuts},y,{store:b}))};return{install:function(y){b.update("openFile",y.openFile)},renderViewer:function(y){var w=y.slot,_={children:n.createElement(n.Fragment,null,v.enableShortcuts&&n.createElement(u,{containerRef:y.containerRef,store:b}),w.children)};return s(s({},w),_)},Open:g,OpenButton:function(){return n.createElement(g,null)},OpenMenuItem:function(){return n.createElement(g,null,function(y){return n.createElement(d,{store:b,onClick:y.onClick})})}}},open_min}var hasRequiredLib$a;function requireLib$a(){if(hasRequiredLib$a)return lib$8.exports;hasRequiredLib$a=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$8.exports=requireOpen_min(),lib$8.exports}var lib$7={exports:{}},pageNavigation_min={},hasRequiredPageNavigation_min;function requirePageNavigation_min(){if(hasRequiredPageNavigation_min)return pageNavigation_min;hasRequiredPageNavigation_min=1;var t=requireLib$h();function e(te){var W=Object.create(null);return te&&Object.keys(te).forEach(function(O){if(O!=="default"){var j=Object.getOwnPropertyDescriptor(te,O);Object.defineProperty(W,O,j.get?j:{enumerable:!0,get:function(){return te[O]}})}}),W.default=te,Object.freeze(W)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552
            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11
            C1.96,3.016,2.138,2.966,2.32,2.966z`}))},s=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o=function(){return o=Object.assign||function(te){for(var W,O=1,j=arguments.length;O<j;O++)for(var T in W=arguments[O])Object.prototype.hasOwnProperty.call(W,T)&&(te[T]=W[T]);return te},o.apply(this,arguments)},c=function(te){var W=n.useState(te.get("currentPage")||0),O=W[0],j=W[1],T=function(E){j(E)};return t.useIsomorphicLayoutEffect(function(){return te.subscribe("currentPage",T),function(){te.unsubscribe("currentPage",T)}},[]),{currentPage:O}},f=function(te){var W=n.useState(te.get("numberOfPages")||0),O=W[0],j=W[1],T=function(E){j(E)};return n.useEffect(function(){return te.subscribe("numberOfPages",T),function(){te.unsubscribe("numberOfPages",T)}},[]),{numberOfPages:O}},p=function(te){var W=te.store,O=n.useContext(t.LocalizationContext).l10n,j=n.useState("1"),T=j[0],E=j[1],M=c(W).currentPage,U=f(W).numberOfPages;n.useEffect(function(){return E("".concat(M+1))},[M]);var $=function(q){var P=W.get("jumpToPage");P&&P(q)},z=O&&O.pageNavigation?O.pageNavigation.enterPageNumber:"Enter a page number";return n.createElement("span",{className:"rpv-page-navigation__current-page-input"},n.createElement(t.TextBox,{ariaLabel:z,testId:"page-navigation__current-page-input",type:"text",value:T,onChange:E,onKeyDown:function(q){switch(q.key){case"ArrowUp":(L=M-1)>=0&&(E("".concat(L+1)),$(L));break;case"ArrowDown":(V=M+1)<U&&(E("".concat(V+1)),$(V));break;case"Enter":P=parseInt(T,10),T===""||P<1||P>U?E("".concat(M+1)):$(P-1)}var P,V,L}}))},d=function(te){var W=te.children,O=te.doc,j=t.useIsMounted(),T=n.useState({loading:!0,labels:[]}),E=T[0],M=T[1];return n.useEffect(function(){O.getPageLabels().then(function(U){j.current&&M({loading:!1,labels:U||[]})})},[O.loadingTask.docId]),E.loading?n.createElement(n.Fragment,null):W(E.labels)},u=function(te){var W=te.children,O=te.store,j=function(U){var $=n.useState(U.get("doc")),z=$[0],q=$[1],P=function(V){q(V)};return n.useEffect(function(){return U.subscribe("doc",P),function(){U.unsubscribe("doc",P)}},[]),z}(O),T=c(O).currentPage,E=f(O).numberOfPages,M=W||function(U){return n.createElement(n.Fragment,null,U.currentPage+1)};return j?n.createElement(d,{doc:j},function(U){var $=U.length===E&&E>0?U[T]:"";return M({currentPage:T,numberOfPages:E,pageLabel:$})}):n.createElement(n.Fragment,null)},m=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448
            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373
            C22.143,20.984,21.965,21.034,21.783,21.034z`}))},v={left:0,top:8},b=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToFirstPage:"First page";return n.createElement(t.Tooltip,{ariaControlsSuffix:"page-navigation-first",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:T,isDisabled:W,testId:"page-navigation__first-button",onClick:O},n.createElement(m,null)),content:function(){return T},offset:v})},g=function(te){var W=te.children,O=te.store;return(W||function(j){return n.createElement(b,{isDisabled:j.isDisabled,onClick:j.onClick})})({isDisabled:c(O).currentPage===0,onClick:function(){var j=O.get("jumpToPage");j&&j(0)}})},y=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToFirstPage:"First page";return n.createElement(t.MenuItem,{icon:n.createElement(m,null),isDisabled:W,testId:"page-navigation__first-menu",onClick:O},T)},w={left:0,top:8},_=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToLastPage:"Last page";return n.createElement(t.Tooltip,{ariaControlsSuffix:"page-navigation-last",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:T,isDisabled:W,testId:"page-navigation__last-button",onClick:O},n.createElement(i,null)),content:function(){return T},offset:w})},R=function(te){var W=te.children,O=te.store,j=c(O).currentPage,T=f(O).numberOfPages;return(W||function(E){return n.createElement(_,{isDisabled:E.isDisabled,onClick:E.onClick})})({isDisabled:j+1>=T,onClick:function(){var E=O.get("jumpToPage");E&&E(T-1)}})},k=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToLastPage:"Last page";return n.createElement(t.MenuItem,{icon:n.createElement(i,null),isDisabled:W,testId:"page-navigation__last-menu",onClick:O},T)},C={left:0,top:8},A=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToNextPage:"Next page";return n.createElement(t.Tooltip,{ariaControlsSuffix:"page-navigation-next",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:T,isDisabled:W,testId:"page-navigation__next-button",onClick:O},n.createElement(s,null)),content:function(){return T},offset:C})},D=function(te){var W=te.children,O=te.store;return(W||function(j){return n.createElement(A,{onClick:j.onClick,isDisabled:j.isDisabled})})({isDisabled:c(O).currentPage+1>=f(O).numberOfPages,onClick:function(){var j=O.get("jumpToNextPage");j&&j()}})},H=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToNextPage:"Next page";return n.createElement(t.MenuItem,{icon:n.createElement(s,null),isDisabled:W,testId:"page-navigation__next-menu",onClick:O},T)},I=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},F={left:0,top:8},Z=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToPreviousPage:"Previous page";return n.createElement(t.Tooltip,{ariaControlsSuffix:"page-navigation-previous",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:T,isDisabled:W,testId:"page-navigation__previous-button",onClick:O},n.createElement(I,null)),content:function(){return T},offset:F})},N=function(te){var W=te.store;return(te.children||function(O){return n.createElement(Z,{isDisabled:O.isDisabled,onClick:O.onClick})})({isDisabled:c(W).currentPage<=0,onClick:function(){var O=W.get("jumpToPreviousPage");O&&O()}})},G=function(te){var W=te.isDisabled,O=te.onClick,j=n.useContext(t.LocalizationContext).l10n,T=j&&j.pageNavigation?j.pageNavigation.goToPreviousPage:"Previous page";return n.createElement(t.MenuItem,{icon:n.createElement(I,null),isDisabled:W,testId:"page-navigation__previous-menu",onClick:O},T)},J=function(te){var W=te.children,O=te.store,j=f(O).numberOfPages;return W?W({numberOfPages:j}):n.createElement(n.Fragment,null,j)},ee=function(te){var W=te.containerRef,O=te.numPages,j=te.store,T=c(j).currentPage,E=n.useRef(T);E.current=T;var M=n.useRef(!1),U=function(){M.current=!0},$=function(){M.current=!1},z=function(q){var P=W.current,V=M.current||document.activeElement&&P.contains(document.activeElement);if(P&&V){var L,Y,ne=q.altKey&&q.key==="ArrowDown"||!q.shiftKey&&!q.altKey&&q.key==="PageDown",re=q.altKey&&q.key==="ArrowUp"||!q.shiftKey&&!q.altKey&&q.key==="PageUp";if(ne)return q.preventDefault(),L=j.get("jumpToPage"),Y=E.current+1,void(L&&Y<O&&L(Y));if(re)return q.preventDefault(),void function(){var le=j.get("jumpToPage"),_e=E.current-1;le&&_e>=0&&le(_e)}();if(t.isMac()?q.metaKey&&!q.ctrlKey:q.altKey)switch(q.key){case"ArrowLeft":q.preventDefault(),function(){var le=j.get("jumpToPreviousDestination");le&&le()}();break;case"ArrowRight":q.preventDefault(),function(){var le=j.get("jumpToNextDestination");le&&le()}()}}};return n.useEffect(function(){var q=W.current;if(q)return document.addEventListener("keydown",z),q.addEventListener("mouseenter",U),q.addEventListener("mouseleave",$),function(){document.removeEventListener("keydown",z),q.removeEventListener("mouseenter",U),q.removeEventListener("mouseleave",$)}},[W.current]),n.createElement(n.Fragment,null)};return pageNavigation_min.DownArrowIcon=i,pageNavigation_min.NextIcon=s,pageNavigation_min.PreviousIcon=I,pageNavigation_min.UpArrowIcon=m,pageNavigation_min.pageNavigationPlugin=function(te){var W=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},te)},[]),O=n.useMemo(function(){return t.createStore()},[]),j=function(U){return n.createElement(g,o({},U,{store:O}))},T=function(U){return n.createElement(R,o({},U,{store:O}))},E=function(U){return n.createElement(D,o({},U,{store:O}))},M=function(U){return n.createElement(N,o({},U,{store:O}))};return{install:function(U){O.update("jumpToDestination",U.jumpToDestination),O.update("jumpToNextDestination",U.jumpToNextDestination),O.update("jumpToNextPage",U.jumpToNextPage),O.update("jumpToPage",U.jumpToPage),O.update("jumpToPreviousDestination",U.jumpToPreviousDestination),O.update("jumpToPreviousPage",U.jumpToPreviousPage)},renderViewer:function(U){var $=U.slot;if(!W.enableShortcuts)return $;var z={children:n.createElement(n.Fragment,null,n.createElement(ee,{containerRef:U.containerRef,numPages:U.doc.numPages,store:O}),$.children)};return o(o({},$),z)},onDocumentLoad:function(U){O.update("doc",U.doc),O.update("numberOfPages",U.doc.numPages)},onViewerStateChange:function(U){return O.update("currentPage",U.pageIndex),U},jumpToNextPage:function(){var U=O.get("jumpToNextPage");U&&U()},jumpToPage:function(U){var $=O.get("jumpToPage");$&&$(U)},jumpToPreviousPage:function(){var U=O.get("jumpToPreviousPage");U&&U()},CurrentPageInput:function(){return n.createElement(p,{store:O})},CurrentPageLabel:function(U){return n.createElement(u,o({},U,{store:O}))},GoToFirstPage:j,GoToFirstPageButton:function(){return n.createElement(j,null,function(U){return n.createElement(b,o({},U))})},GoToFirstPageMenuItem:function(U){return n.createElement(j,null,function($){return n.createElement(y,{isDisabled:$.isDisabled,onClick:function(){$.onClick(),U.onClick()}})})},GoToLastPage:T,GoToLastPageButton:function(){return n.createElement(T,null,function(U){return n.createElement(_,o({},U))})},GoToLastPageMenuItem:function(U){return n.createElement(T,null,function($){return n.createElement(k,{isDisabled:$.isDisabled,onClick:function(){$.onClick(),U.onClick()}})})},GoToNextPage:E,GoToNextPageButton:function(){return n.createElement(E,null,function(U){return n.createElement(A,o({},U))})},GoToNextPageMenuItem:function(U){return n.createElement(E,null,function($){return n.createElement(H,{isDisabled:$.isDisabled,onClick:function(){$.onClick(),U.onClick()}})})},GoToPreviousPage:M,GoToPreviousPageButton:function(){return n.createElement(M,null,function(U){return n.createElement(Z,o({},U))})},GoToPreviousPageMenuItem:function(U){return n.createElement(M,null,function($){return n.createElement(G,{isDisabled:$.isDisabled,onClick:function(){$.onClick(),U.onClick()}})})},NumberOfPages:function(U){return n.createElement(J,o({},U,{store:O}))}}},pageNavigation_min}var hasRequiredLib$9;function requireLib$9(){if(hasRequiredLib$9)return lib$7.exports;hasRequiredLib$9=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$7.exports=requirePageNavigation_min(),lib$7.exports}var lib$6={exports:{}},print_min={},hasRequiredPrint_min;function requirePrint_min(){if(hasRequiredPrint_min)return print_min;hasRequiredPrint_min=1;var t={},e=requireLib$h(),n=requireReact(),i=requireReactDom();function s(C){var A=Object.create(null);return C&&Object.keys(C).forEach(function(D){if(D!=="default"){var H=Object.getOwnPropertyDescriptor(C,D);Object.defineProperty(A,D,H.get?H:{enumerable:!0,get:function(){return C[D]}})}}),A.default=C,Object.freeze(A)}var o,c=s(n),f=function(){return c.createElement(e.Icon,{size:16},c.createElement("path",{d:`M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19
            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3
            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414
            C18.395,3.394,18.5,3.649,18.5,3.914V4.5
            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z
            M3.5,8.499
            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z
            M14.5,0.499v4h4`}))},p=function(){return p=Object.assign||function(C){for(var A,D=1,H=arguments.length;D<H;D++)for(var I in A=arguments[D])Object.prototype.hasOwnProperty.call(A,I)&&(C[I]=A[I]);return C},p.apply(this,arguments)},d={left:0,top:8},u=function(C){var A=C.enableShortcuts,D=C.onClick,H=c.useContext(e.LocalizationContext).l10n,I=H&&H.print?H.print.print:"Print",F=A?e.isMac()?"Meta+P":"Ctrl+P":"";return c.createElement(e.Tooltip,{ariaControlsSuffix:"print",position:e.Position.BottomCenter,target:c.createElement(e.MinimalButton,{ariaKeyShortcuts:F,ariaLabel:I,testId:"print__button",onClick:D},c.createElement(f,null)),content:function(){return I},offset:d})};(function(C){C.CheckingPermission="CheckingPermission",C.Inactive="Inactive",C.Preparing="Preparing",C.Cancelled="Cancelled",C.Ready="Ready"})(o||(o={}));var m=function(C){var A=C.children,D=C.enableShortcuts,H=C.store;return(A||u)({enableShortcuts:D,onClick:function(){H.update("printStatus",o.CheckingPermission)}})},v=function(C){var A=C.doc,D=C.store,H=c.useContext(e.LocalizationContext).l10n,I=c.useState(!0),F=I[0],Z=I[1];return c.useEffect(function(){A.getPermissions().then(function(N){N===null||N.includes(4)||N.includes(2048)?D.update("printStatus",o.Preparing):Z(!1)})},[]),F?c.createElement(c.Fragment,null):c.createElement(e.Modal,{ariaControlsSuffix:"print-permission",closeOnClickOutside:!1,closeOnEscape:!1,content:function(N){return c.createElement(c.Fragment,null,c.createElement("div",{className:"rpv-print__permission-body"},H&&H.print?H.print.disallowPrint:"The document does not allow to print"),c.createElement("div",{className:"rpv-print__permission-footer"},c.createElement(e.Button,{onClick:function(){N(),D.update("printStatus",o.Cancelled)}},H&&H.print?H.print.close:"Close")))},isOpened:!0})},b=function(C){var A=C.numLoadedPages,D=C.numPages,H=C.onCancel,I=c.useContext(e.LocalizationContext).l10n,F=c.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,Z=Math.floor(100*A/D);return c.createElement("div",{className:"rpv-print__progress"},c.createElement("div",{className:e.classNames({"rpv-print__progress-body":!0,"rpv-print__progress-body--rtl":F})},c.createElement("div",{className:"rpv-print__progress-message"},I&&I.print?I.print.preparingDocument:"Preparing document ..."),c.createElement("div",{className:"rpv-print__progress-bar"},c.createElement(e.ProgressBar,{progress:Z})),c.createElement(e.Button,{onClick:H},I&&I.print?I.print.cancel:"Cancel")))},g=function(C){var A=C.canvas,D=C.page,H=C.pageHeight,I=C.pageIndex,F=C.pageWidth,Z=C.rotation,N=C.onLoad,G=e.useIsMounted(),J=c.useRef(),ee=c.useState(""),te=ee[0],W=ee[1],O=c.useMemo(function(){return typeof process<"u"&&t.JEST_WORKER_ID!==void 0},[]);return c.useEffect(function(){var j=J.current;j&&j.cancel();var T=150/72;A.height=Math.floor(H*T),A.width=Math.floor(F*T);var E=A.getContext("2d");E.save(),E.fillStyle="rgb(255, 255, 255)",E.fillRect(0,0,A.width,A.height),E.restore();var M=D.getViewport({rotation:Z,scale:1});J.current=D.render({canvasContext:E,intent:"print",transform:[T,0,0,T,0,0],viewport:M}),J.current.promise.then(function(){"toBlob"in A&&"createObjectURL"in URL?A.toBlob(function(U){G.current&&W(URL.createObjectURL(U)),O&&N()}):(G.current&&W(A.toDataURL()),O&&N())},function(){})},[]),te&&c.createElement("div",{className:"rpv-print__page"},c.createElement("img",{"data-testid":"print__thumbnail-".concat(I),src:te,onLoad:function(){O||N()}}))},y=function(C){var A=C.canvas,D=C.doc,H=C.pageIndex,I=C.pageRotation,F=C.pageSize,Z=C.rotation,N=C.shouldRender,G=C.onLoad,J=e.useIsMounted(),ee=c.useState(null),te=ee[0],W=ee[1],O=Math.abs(Z+I)%180==0;c.useEffect(function(){N&&e.getPage(D,H).then(function(T){J.current&&W(T)})},[N]);var j=(F.rotation+Z+I)%360;return te&&c.createElement(g,{canvas:A,page:te,pageHeight:O?F.pageHeight:F.pageWidth,pageIndex:H,pageWidth:O?F.pageWidth:F.pageHeight,rotation:j,onLoad:G})},w=function(C){var A=C.doc,D=C.numLoadedPages,H=C.pagesRotation,I=C.pageSizes,F=C.printPages,Z=C.printStatus,N=C.rotation,G=C.onCancel,J=C.onLoad,ee=c.useMemo(function(){return document.createElement("canvas")},[]),te=c.useMemo(function(){var j=document.querySelector(".rpv-print__zone");if(j)return j;var T=document.createElement("div");return T.classList.add("rpv-print__zone"),T.setAttribute("data-testid","print__zone"),document.body.appendChild(T),T},[]);c.useEffect(function(){Z===o.Ready&&(document.documentElement.classList.add("rpv-print__html-printing"),document.body.classList.add("rpv-print__body-printing"),window.print());var j=function(){if(Z===o.Ready){document.documentElement.classList.remove("rpv-print__html-printing"),document.body.classList.remove("rpv-print__body-printing");var T=document.querySelectorAll(".rpv-print__zone");T&&T.forEach(function(E){E.parentElement.removeChild(E)}),ee.height=0,ee.width=0,document.removeEventListener("mousemove",j),G()}};return document.addEventListener("mousemove",j),function(){return document.removeEventListener("mousemove",j)}},[Z]);var W=I[0].pageHeight,O=I[0].pageWidth;return i.createPortal(c.createElement(c.Fragment,null,F.map(function(j,T){return c.createElement(y,{key:j,canvas:ee,doc:A,pageIndex:j,pageRotation:H.has(j)?H.get(j):0,pageSize:I[j],rotation:N,shouldRender:T===D,onLoad:J})}),c.createElement("style",{dangerouslySetInnerHTML:{__html:"@page { size: ".concat(O,"pt ").concat(W,"pt }")}})),te)},_=function(C){var A=C.doc,D=C.pagesRotation,H=C.pageSizes,I=C.renderProgressBar,F=C.rotation,Z=C.setPages,N=C.store,G=c.useState(o.Inactive),J=G[0],ee=G[1],te=c.useState(0),W=te[0],O=te[1],j=c.useMemo(function(){var U=A.numPages;return Z(A).filter(function($){return $>=0&&$<U})},[A,Z]),T=j.length,E=function(){O(0),ee(o.Inactive)},M=function(U){return ee(U)};return c.useEffect(function(){return N.subscribe("printStatus",M),function(){N.unsubscribe("printStatus",M)}},[]),c.createElement(c.Fragment,null,J===o.CheckingPermission&&c.createElement(v,{doc:A,store:N}),J===o.Preparing&&(I?I(W,T,E):c.createElement(b,{numLoadedPages:W,numPages:T,onCancel:E})),(J===o.Preparing||J===o.Ready)&&W<=T&&c.createElement(w,{doc:A,numLoadedPages:W,pagesRotation:D,pageSizes:H,printPages:j,printStatus:J,rotation:F,onCancel:E,onLoad:function(){var U=W+1;U<=T&&(O(U),U===T&&ee(o.Ready))}}))},R=function(C){var A=C.onClick,D=c.useContext(e.LocalizationContext).l10n,H=D&&D.print?D.print.print:"Print";return c.createElement(e.MenuItem,{icon:c.createElement(f,null),testId:"print__menu",onClick:A},H)},k=function(C){var A=C.containerRef,D=C.store,H=function(I){if(!I.shiftKey&&!I.altKey&&I.key==="p"&&(e.isMac()?I.metaKey:I.ctrlKey)){var F=A.current;F&&document.activeElement&&F.contains(document.activeElement)&&(I.preventDefault(),D.update("printStatus",o.Preparing))}};return c.useEffect(function(){if(A.current)return document.addEventListener("keydown",H),function(){document.removeEventListener("keydown",H)}},[A.current]),c.createElement(c.Fragment,null)};return print_min.PrintIcon=f,print_min.getAllPagesNumbers=function(C){return Array(C.numPages).fill(0).map(function(A,D){return D})},print_min.getCustomPagesNumbers=function(C){return function(A){var D,H=[];return C.replace(/\s+/g,"").split(",").forEach(function(I){var F,Z,N=I.split("-").map(function(G){return parseInt(G,10)}).filter(function(G){return Number.isInteger(G)});N.length===1?H.push(N[0]-1):N.length===2&&H.push.apply(H,(F=N[0]-1,Z=N[1]-1,Array(Z-F+1).fill(0).map(function(G,J){return F+J})))}),(D=H,D.filter(function(I){return D.indexOf(I)===D.lastIndexOf(I)})).filter(function(I){return I>=0&&I<A.numPages})}},print_min.getEvenPagesNumbers=function(C){return Array(C.numPages).fill(0).map(function(A,D){return D}).filter(function(A){return(A+1)%2==0})},print_min.getOddPagesNumbers=function(C){return Array(C.numPages).fill(0).map(function(A,D){return D}).filter(function(A){return(A+1)%2==1})},print_min.printPlugin=function(C){var A=c.useMemo(function(){return Object.assign({},{enableShortcuts:!0,setPages:function(I){return Array(I.numPages).fill(0).map(function(F,Z){return Z})}},C)},[]),D=c.useMemo(function(){return e.createStore({printStatus:o.Inactive})},[]),H=function(I){return c.createElement(m,p({enableShortcuts:A.enableShortcuts},I,{store:D}))};return{print:function(){D.update("printStatus",o.CheckingPermission)},renderViewer:function(I){var F=I.slot,Z={children:c.createElement(c.Fragment,null,A.enableShortcuts&&c.createElement(k,{containerRef:I.containerRef,store:D}),c.createElement(_,{doc:I.doc,pagesRotation:I.pagesRotation,pageSizes:I.pageSizes,renderProgressBar:C?.renderProgressBar,rotation:I.rotation,setPages:A.setPages,store:D}),F.children)};return p(p({},F),Z)},Print:H,PrintButton:function(){return c.createElement(H,null,function(I){return c.createElement(u,p({},I))})},PrintMenuItem:function(I){return c.createElement(H,null,function(F){return c.createElement(R,{onClick:function(){F.onClick(),I.onClick()}})})},setPages:function(I){A.setPages=I}}},print_min}var hasRequiredLib$8;function requireLib$8(){if(hasRequiredLib$8)return lib$6.exports;hasRequiredLib$8=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$6.exports=requirePrint_min(),lib$6.exports}var lib$5={exports:{}},properties_min={},hasRequiredProperties_min;function requireProperties_min(){if(hasRequiredProperties_min)return properties_min;hasRequiredProperties_min=1;var t=requireLib$h();function e(g){var y=Object.create(null);return g&&Object.keys(g).forEach(function(w){if(w!=="default"){var _=Object.getOwnPropertyDescriptor(g,w);Object.defineProperty(y,w,_.get?_:{enumerable:!0,get:function(){return g[w]}})}}),y.default=g,Object.freeze(y)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z
            M14.5,17.005H13
            c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10
            M11.745,6.504L11.745,6.504
            M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25
            S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5`}))},s=function(){return s=Object.assign||function(g){for(var y,w=1,_=arguments.length;w<_;w++)for(var R in y=arguments[w])Object.prototype.hasOwnProperty.call(y,R)&&(g[R]=y[R]);return g},s.apply(this,arguments)},o=function(g){var y=g.doc,w=g.render,_=n.useState(),R=_[0],k=_[1];return n.useEffect(function(){y.getMetadata().then(function(C){return Promise.resolve(C)}).then(function(C){return y.getDownloadInfo().then(function(A){return Promise.resolve({fileName:C.contentDispositionFilename||"",info:C.info,length:A.length})})}).then(function(C){k(C)})},[]),R?w(R):n.createElement("div",{className:"rpv-properties__loader"},n.createElement(t.Spinner,null))},c=function(g){var y=g.label,w=g.value,_=n.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft;return n.createElement("dl",{className:t.classNames({"rpv-properties__item":!0,"rpv-properties__item--rtl":_})},n.createElement("dt",{className:"rpv-properties__item-label"},y,":"),n.createElement("dd",{className:"rpv-properties__item-value"},w||"-"))},f=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),p=function(g,y,w,_){var R=parseInt(g,10);return R>=y&&R<=w?R:_},d=function(g){var y=g.doc,w=g.fileName,_=g.onToggle,R=n.useContext(t.LocalizationContext).l10n,k=function(C){var A=function(D){var H=f.exec(D);if(!H)return null;var I=parseInt(H[1],10),F=p(H[2],1,12,1)-1,Z=p(H[3],1,31,1),N=p(H[4],0,23,0),G=p(H[5],0,59,0),J=p(H[6],0,59,0),ee=H[7]||"Z",te=p(H[8],0,23,0),W=p(H[9],0,59,0);switch(ee){case"-":N+=te,G+=W;break;case"+":N-=te,G-=W}return new Date(Date.UTC(I,F,Z,N,G,J))}(C);return A?"".concat(A.toLocaleDateString(),", ").concat(A.toLocaleTimeString()):""};return n.createElement("div",{className:"rpv-properties__modal"},n.createElement(o,{doc:y,render:function(C){return n.createElement(n.Fragment,null,n.createElement("div",{className:"rpv-properties__modal-section"},n.createElement(c,{label:R&&R.properties?R.properties.fileName:"File name",value:C.fileName||(H=w,I=H.split("/").pop(),I?I.split("#")[0].split("?")[0]:H)}),n.createElement(c,{label:R&&R.properties?R.properties.fileSize:"File size",value:(A=C.length,D=Math.floor(Math.log(A)/Math.log(1024)),"".concat((A/Math.pow(1024,D)).toFixed(2)," ").concat(["B","kB","MB","GB","TB"][D]))})),n.createElement(t.Separator,null),n.createElement("div",{className:"rpv-properties__modal-section"},n.createElement(c,{label:R&&R.properties?R.properties.title:"Title",value:C.info.Title}),n.createElement(c,{label:R&&R.properties?R.properties.author:"Author",value:C.info.Author}),n.createElement(c,{label:R&&R.properties?R.properties.subject:"Subject",value:C.info.Subject}),n.createElement(c,{label:R&&R.properties?R.properties.keywords:"Keywords",value:C.info.Keywords}),n.createElement(c,{label:R&&R.properties?R.properties.creator:"Creator",value:C.info.Creator}),n.createElement(c,{label:R&&R.properties?R.properties.creationDate:"Creation date",value:k(C.info.CreationDate)}),n.createElement(c,{label:R&&R.properties?R.properties.modificationDate:"Modification date",value:k(C.info.ModDate)})),n.createElement(t.Separator,null),n.createElement("div",{className:"rpv-properties__modal-section"},n.createElement(c,{label:R&&R.properties?R.properties.pdfProducer:"PDF producer",value:C.info.Producer}),n.createElement(c,{label:R&&R.properties?R.properties.pdfVersion:"PDF version",value:C.info.PDFFormatVersion}),n.createElement(c,{label:R&&R.properties?R.properties.pageCount:"Page count",value:"".concat(y.numPages)})));var A,D,H,I}}),n.createElement("div",{className:"rpv-properties__modal-footer"},n.createElement(t.Button,{onClick:_},R&&R.properties?R.properties.close:"Close")))},u={left:0,top:8},m=function(g){var y=g.onClick,w=n.useContext(t.LocalizationContext).l10n,_=w&&w.properties?w.properties.showProperties:"Show properties";return n.createElement(t.Tooltip,{ariaControlsSuffix:"properties",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:_,testId:"properties__button",onClick:y},n.createElement(i,null)),content:function(){return _},offset:u})},v=function(g){var y=g.children,w=g.store,_=function(C){var A=n.useState(C.get("doc")),D=A[0],H=A[1],I=function(F){H(F)};return n.useEffect(function(){return C.subscribe("doc",I),function(){C.unsubscribe("doc",I)}},[]),{currentDoc:D}}(w).currentDoc,R=w.get("fileName")||"",k=y||function(C){return n.createElement(m,s({},C))};return _?n.createElement(t.Modal,{ariaControlsSuffix:"properties",target:function(C){return k({onClick:C})},content:function(C){return n.createElement(d,{doc:_,fileName:R,onToggle:C})},closeOnClickOutside:!0,closeOnEscape:!0}):n.createElement(n.Fragment,null)},b=function(g){var y=g.onClick,w=n.useContext(t.LocalizationContext).l10n,_=w&&w.properties?w.properties.showProperties:"Show properties";return n.createElement(t.MenuItem,{icon:n.createElement(i,null),testId:"properties__menu",onClick:y},_)};return properties_min.InfoIcon=i,properties_min.propertiesPlugin=function(){var g=n.useMemo(function(){return t.createStore({fileName:""})},[]),y=function(w){return n.createElement(v,s({},w,{store:g}))};return{onDocumentLoad:function(w){g.update("doc",w.doc)},onViewerStateChange:function(w){return g.update("fileName",w.file.name),w},ShowProperties:y,ShowPropertiesButton:function(){return n.createElement(v,{store:g})},ShowPropertiesMenuItem:function(w){return n.createElement(y,null,function(_){return n.createElement(b,s({},_))})}}},properties_min}var hasRequiredLib$7;function requireLib$7(){if(hasRequiredLib$7)return lib$5.exports;hasRequiredLib$7=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$5.exports=requireProperties_min(),lib$5.exports}var lib$4={exports:{}},rotate_min={},hasRequiredRotate_min;function requireRotate_min(){if(hasRequiredRotate_min)return rotate_min;hasRequiredRotate_min=1;var t=requireLib$h();function e(m){var v=Object.create(null);return m&&Object.keys(m).forEach(function(b){if(b!=="default"){var g=Object.getOwnPropertyDescriptor(m,b);Object.defineProperty(v,b,g.get?g:{enumerable:!0,get:function(){return m[b]}})}}),v.default=m,Object.freeze(v)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274
            M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863
            M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711
            M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2
            M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431
            M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945
            M13.5,1.75L10,4.25l3.5,2.5`}))},s=function(){return n.createElement(t.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274
            M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863
            M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713
            M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2
            M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431
            M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945
            M10.5,1.75l3.5,2.5l-3.5,2.5`}))},o=function(){return o=Object.assign||function(m){for(var v,b=1,g=arguments.length;b<g;b++)for(var y in v=arguments[b])Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m},o.apply(this,arguments)},c={left:0,top:8},f=function(m){var v=m.direction,b=m.onClick,g=n.useContext(t.LocalizationContext).l10n,y=g&&g.rotate?g.rotate.rotateBackward:"Rotate counterclockwise",w=g&&g.rotate?g.rotate.rotateForward:"Rotate clockwise",_=v===t.RotateDirection.Backward?y:w,R=v===t.RotateDirection.Backward?n.createElement(i,null):n.createElement(s,null);return n.createElement(t.Tooltip,{ariaControlsSuffix:"rotate",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:_,testId:v===t.RotateDirection.Backward?"rotate__backward-button":"rotate__forward-button",onClick:b},R),content:function(){return _},offset:c})},p=function(m){var v=m.children,b=m.direction,g=m.store;return(v||function(y){return n.createElement(f,{direction:y.direction,onClick:y.onClick})})({direction:b,onClick:function(){var y=g.get("rotate");y&&y(b)}})},d=function(m){var v=m.direction,b=m.onClick,g=n.useContext(t.LocalizationContext).l10n,y=g&&g.rotate?g.rotate.rotateBackward:"Rotate counterclockwise",w=g&&g.rotate?g.rotate.rotateForward:"Rotate clockwise",_=v===t.RotateDirection.Backward?y:w,R=v===t.RotateDirection.Backward?n.createElement(i,null):n.createElement(s,null);return n.createElement(t.MenuItem,{icon:R,testId:v===t.RotateDirection.Backward?"rotate__backward-menu":"rotate__forward-menu",onClick:b},_)},u=function(m){var v=m.children,b=m.store;return v({onRotatePage:function(g,y){var w=b.get("rotatePage");w&&w(g,y)}})};return rotate_min.RotateBackwardIcon=i,rotate_min.RotateForwardIcon=s,rotate_min.rotatePlugin=function(){var m=n.useMemo(function(){return t.createStore()},[]),v=function(b){return n.createElement(p,o({},b,{store:m}))};return{install:function(b){m.update("rotate",b.rotate),m.update("rotatePage",b.rotatePage)},Rotate:v,RotateBackwardButton:function(){return n.createElement(v,{direction:t.RotateDirection.Backward},function(b){return n.createElement(f,o({},b))})},RotateBackwardMenuItem:function(b){return n.createElement(v,{direction:t.RotateDirection.Backward},function(g){return n.createElement(d,{direction:g.direction,onClick:function(){g.onClick(),b.onClick()}})})},RotateForwardButton:function(){return n.createElement(v,{direction:t.RotateDirection.Forward},function(b){return n.createElement(f,o({},b))})},RotateForwardMenuItem:function(b){return n.createElement(v,{direction:t.RotateDirection.Forward},function(g){return n.createElement(d,{direction:g.direction,onClick:function(){g.onClick(),b.onClick()}})})},RotatePage:function(b){return n.createElement(u,o({},b,{store:m}))}}},rotate_min}var hasRequiredLib$6;function requireLib$6(){if(hasRequiredLib$6)return lib$4.exports;hasRequiredLib$6=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$4.exports=requireRotate_min(),lib$4.exports}var lib$3={exports:{}},scrollMode_min={},hasRequiredScrollMode_min;function requireScrollMode_min(){if(hasRequiredScrollMode_min)return scrollMode_min;hasRequiredScrollMode_min=1;var t=requireLib$h();function e(I){var F=Object.create(null);return I&&Object.keys(I).forEach(function(Z){if(Z!=="default"){var N=Object.getOwnPropertyDescriptor(I,Z);Object.defineProperty(F,Z,N.get?N:{enumerable:!0,get:function(){return I[Z]}})}}),F.default=I,Object.freeze(F)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),n.createElement("line",{x1:"0.5",y1:"6.497",x2:"22.5",y2:"6.497"}),n.createElement("line",{x1:"11.5",y1:"6.497",x2:"11.5",y2:"22.497"}))},s=function(){return n.createElement(t.Icon,{size:16},n.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),n.createElement("line",{x1:"11.5",y1:"0.497",x2:"11.5",y2:"22.497"}))},o=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z`}))},c=function(){return n.createElement(t.Icon,{size:16},n.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}))},f=function(){return f=Object.assign||function(I){for(var F,Z=1,N=arguments.length;Z<N;Z++)for(var G in F=arguments[Z])Object.prototype.hasOwnProperty.call(F,G)&&(I[G]=F[G]);return I},f.apply(this,arguments)},p=function(I,F){I.get("switchScrollMode")(F);var Z=I.get("viewMode");F!==t.ScrollMode.Horizontal&&F!==t.ScrollMode.Wrapped||Z===t.ViewMode.SinglePage||I.get("switchViewMode")(t.ViewMode.SinglePage)},d=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z
            M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z
            M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z`}))},u=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},m=function(I){var F=I.children,Z=I.mode,N=I.onClick,G=n.useContext(t.LocalizationContext).l10n,J="",ee=n.createElement(d,null);switch(Z){case t.ScrollMode.Horizontal:J=G&&G.scrollMode?G.scrollMode.horizontalScrolling:"Horizontal scrolling",ee=n.createElement(o,null);break;case t.ScrollMode.Page:J=G&&G.scrollMode?G.scrollMode.pageScrolling:"Page scrolling",ee=n.createElement(c,null);break;case t.ScrollMode.Wrapped:J=G&&G.scrollMode?G.scrollMode.wrappedScrolling:"Wrapped scrolling",ee=n.createElement(u,null);break;case t.ScrollMode.Vertical:default:J=G&&G.scrollMode?G.scrollMode.verticalScrolling:"Vertical scrolling",ee=n.createElement(d,null)}return F({icon:ee,label:J,onClick:N})},v={left:0,top:8},b=function(I){var F=I.isDisabled,Z=I.isSelected,N=I.mode,G=I.onClick,J="";switch(N){case t.ScrollMode.Horizontal:J="scroll-mode__horizontal-button";break;case t.ScrollMode.Page:J="scroll-mode__page-button";break;case t.ScrollMode.Wrapped:J="scroll-mode__wrapped-button";break;case t.ScrollMode.Vertical:default:J="scroll-mode__vertical-button"}return n.createElement(m,{mode:N,onClick:G},function(ee){return n.createElement(t.Tooltip,{ariaControlsSuffix:"scroll-mode-switch",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:ee.label,isDisabled:F,isSelected:Z,testId:J,onClick:ee.onClick},ee.icon),content:function(){return ee.label},offset:v})})},g=function(I){var F=n.useState(I.get("scrollMode")||t.ScrollMode.Vertical),Z=F[0],N=F[1],G=function(J){N(J)};return n.useEffect(function(){return I.subscribe("scrollMode",G),function(){I.unsubscribe("scrollMode",G)}},[]),{scrollMode:Z}},y=function(I){var F=n.useState(I.get("viewMode")||t.ViewMode.SinglePage),Z=F[0],N=F[1],G=function(J){N(J)};return n.useEffect(function(){return I.subscribe("viewMode",G),function(){I.unsubscribe("viewMode",G)}},[]),{viewMode:Z}},w=function(I){var F=I.children,Z=I.mode,N=I.store,G=y(N).viewMode,J=g(N).scrollMode===Z,ee=(Z===t.ScrollMode.Horizontal||Z===t.ScrollMode.Wrapped)&&G!==t.ViewMode.SinglePage;return(F||function(te){return n.createElement(b,{isDisabled:ee,isSelected:J,mode:te.mode,onClick:te.onClick})})({isDisabled:ee,isSelected:J,mode:Z,onClick:function(){p(N,Z)}})},_=function(I){var F=I.isDisabled,Z=I.isSelected,N=I.mode,G=I.onClick,J="";switch(N){case t.ScrollMode.Horizontal:J="scroll-mode__horizontal-menu";break;case t.ScrollMode.Page:J="scroll-mode__page-menu";break;case t.ScrollMode.Wrapped:J="scroll-mode__wrapped-menu";break;case t.ScrollMode.Vertical:default:J="scroll-mode__vertical-menu"}return n.createElement(m,{mode:N,onClick:G},function(ee){return n.createElement(t.MenuItem,{checked:Z,icon:ee.icon,isDisabled:F,testId:J,onClick:ee.onClick},ee.label)})},R=function(I,F){I.get("switchViewMode")(F);var Z=I.get("scrollMode");Z!==t.ScrollMode.Horizontal&&Z!==t.ScrollMode.Wrapped||F===t.ViewMode.SinglePage||I.get("switchScrollMode")(t.ScrollMode.Vertical)},k=function(I){var F=I.children,Z=I.mode,N=I.onClick,G=n.useContext(t.LocalizationContext).l10n,J="",ee=n.createElement(c,null);switch(Z){case t.ViewMode.DualPage:J=G&&G.scrollMode?G.scrollMode.dualPage:"Dual page",ee=n.createElement(s,null);break;case t.ViewMode.DualPageWithCover:J=G&&G.scrollMode?G.scrollMode.dualPageCover:"Dual page with cover",ee=n.createElement(i,null);break;case t.ViewMode.SinglePage:default:J=G&&G.scrollMode?G.scrollMode.singlePage:"Single page",ee=n.createElement(c,null)}return F({icon:ee,label:J,onClick:N})},C={left:0,top:8},A=function(I){var F=I.isDisabled,Z=I.isSelected,N=I.mode,G=I.onClick,J="";switch(N){case t.ViewMode.DualPage:J="view-mode__dual-button";break;case t.ViewMode.DualPageWithCover:J="view-mode__dual-cover-button";break;case t.ViewMode.SinglePage:default:J="view-mode__single-button"}return n.createElement(k,{mode:N,onClick:G},function(ee){return n.createElement(t.Tooltip,{ariaControlsSuffix:"view-mode-switch",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:ee.label,isDisabled:F,isSelected:Z,testId:J,onClick:ee.onClick},ee.icon),content:function(){return ee.label},offset:C})})},D=function(I){var F=I.children,Z=I.mode,N=I.store,G=y(N).viewMode,J=g(N).scrollMode,ee=G===Z,te=(J===t.ScrollMode.Horizontal||J===t.ScrollMode.Wrapped)&&Z!==t.ViewMode.SinglePage;return(F||function(W){return n.createElement(A,{isDisabled:te,isSelected:ee,mode:W.mode,onClick:W.onClick})})({isDisabled:te,isSelected:ee,mode:Z,onClick:function(){R(N,Z)}})},H=function(I){var F=I.isDisabled,Z=I.isSelected,N=I.mode,G=I.onClick,J="";switch(N){case t.ViewMode.DualPage:J="view-mode__dual-menu";break;case t.ViewMode.DualPageWithCover:J="view-mode__dual-cover-menu";break;case t.ViewMode.SinglePage:default:J="view-mode__single-menu"}return n.createElement(k,{mode:N,onClick:G},function(ee){return n.createElement(t.MenuItem,{checked:Z,icon:ee.icon,isDisabled:F,testId:J,onClick:ee.onClick},ee.label)})};return scrollMode_min.DualPageCoverViewModeIcon=i,scrollMode_min.DualPageViewModeIcon=s,scrollMode_min.HorizontalScrollingIcon=o,scrollMode_min.PageScrollingIcon=c,scrollMode_min.VerticalScrollingIcon=d,scrollMode_min.WrappedScrollingIcon=u,scrollMode_min.scrollModePlugin=function(){var I=n.useMemo(function(){return t.createStore({scrollMode:t.ScrollMode.Vertical,viewMode:t.ViewMode.SinglePage,switchScrollMode:function(){},switchViewMode:function(){}})},[]),F=function(N){return n.createElement(w,f({},N,{store:I}))},Z=function(N){return n.createElement(D,f({},N,{store:I}))};return{install:function(N){I.update("switchScrollMode",N.switchScrollMode),I.update("switchViewMode",N.switchViewMode)},onViewerStateChange:function(N){return I.update("scrollMode",N.scrollMode),I.update("viewMode",N.viewMode),N},switchScrollMode:function(N){p(I,N)},switchViewMode:function(N){R(I,N)},SwitchScrollMode:F,SwitchScrollModeButton:function(N){return n.createElement(F,{mode:N.mode},function(G){return n.createElement(b,{isDisabled:G.isDisabled,isSelected:G.isSelected,mode:G.mode,onClick:function(){G.onClick()}})})},SwitchScrollModeMenuItem:function(N){return n.createElement(F,{mode:N.mode},function(G){return n.createElement(_,{isDisabled:G.isDisabled,isSelected:G.isSelected,mode:G.mode,onClick:function(){G.onClick(),N.onClick()}})})},SwitchViewMode:Z,SwitchViewModeButton:function(N){return n.createElement(Z,{mode:N.mode},function(G){return n.createElement(A,{isDisabled:G.isDisabled,isSelected:G.isSelected,mode:G.mode,onClick:function(){G.onClick()}})})},SwitchViewModeMenuItem:function(N){return n.createElement(Z,{mode:N.mode},function(G){return n.createElement(H,{isDisabled:G.isDisabled,isSelected:G.isSelected,mode:G.mode,onClick:function(){G.onClick(),N.onClick()}})})}}},scrollMode_min}var hasRequiredLib$5;function requireLib$5(){if(hasRequiredLib$5)return lib$3.exports;hasRequiredLib$5=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$3.exports=requireScrollMode_min(),lib$3.exports}var lib$2={exports:{}},search_min={},hasRequiredSearch_min;function requireSearch_min(){if(hasRequiredSearch_min)return search_min;hasRequiredSearch_min=1;var t=requireLib$h();function e(N){var G=Object.create(null);return N&&Object.keys(N).forEach(function(J){if(J!=="default"){var ee=Object.getOwnPropertyDescriptor(N,J);Object.defineProperty(G,J,ee.get?ee:{enumerable:!0,get:function(){return N[J]}})}}),G.default=N,Object.freeze(G)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},s=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},o=function(){return n.createElement(t.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z
            M23.5,23.5
            l-5.929-5.929`}))},c=function(){return c=Object.assign||function(N){for(var G,J=1,ee=arguments.length;J<ee;J++)for(var te in G=arguments[J])Object.prototype.hasOwnProperty.call(G,te)&&(N[te]=G[te]);return N},c.apply(this,arguments)},f={keyword:"",regExp:new RegExp(" "),wholeWords:!1},p=function(N){return{left:"".concat(N.left,"%"),top:"".concat(N.top,"%"),height:"".concat(N.height,"%"),width:"".concat(N.width,"%")}},d=function(N){var G=N.index,J=N.area,ee=N.onHighlightKeyword,te=n.useRef();return t.useIsomorphicLayoutEffect(function(){var W=te.current;ee&&W&&ee({highlightEle:W,keyword:J.keyword})},[]),n.createElement("div",{className:"rpv-search__highlight","data-index":G,ref:te,style:p(J),title:J.keywordStr.trim()})},u=function(N){var G=N.parentNode;G&&G.removeChild(N)},m=function(N){var G=N.parentNode;if(G){var J=document.createRange();J.selectNodeContents(N),function(ee,te){u(ee);var W=te.parentNode;W&&W.insertBefore(ee,te),u(te)}(J.extractContents(),N),G.normalize()}},v=function(N,G){return N.top<G.top?-1:N.top>G.top?1:N.left<G.left?-1:N.left>G.left?1:0},b=function(N){var G=N.numPages,J=N.pageIndex,ee=N.renderHighlights,te=N.store,W=N.onHighlightKeyword,O=n.useRef(),j=n.useCallback(function(Ne){return n.createElement(n.Fragment,null,Ne.highlightAreas.map(function(Be,Ke){return n.createElement(d,{index:Ke,key:Ke,area:Be,onHighlightKeyword:W})}))},[]),T=ee||j,E=n.useState(te.get("matchPosition")),M=E[0],U=E[1],$=n.useState(te.get("keyword")||[f]),z=$[0],q=$[1],P=n.useState({pageIndex:J,scale:1,status:t.LayerRenderStatus.PreRender}),V=P[0],L=P[1],Y=n.useRef(null),ne=n.useRef([]),re=n.useState([]),le=re[0],_e=re[1],Fe=function(){return!0},we=n.useCallback(function(){return te.get("targetPageFilter")||Fe},[te.get("targetPageFilter")]),Te=function(Ne){var Be=ne.current;if(Be.length===0)return[];var Ke=[],ke=[].slice.call(Ne.querySelectorAll(".rpv-core__text-layer-text")),He=Be.map(function(nt){return nt.char}).join("");return z.forEach(function(nt){var Xe=nt.keyword;if(Xe.trim()){for(var vt,pt=nt.regExp.flags.indexOf("g")===-1?new RegExp(nt.regExp,"".concat(nt.regExp.flags,"g")):nt.regExp,Mt=[];(vt=pt.exec(He))!==null;)Mt.push({keyword:pt,startIndex:vt.index,endIndex:pt.lastIndex});Mt.map(function(jt){return{keyword:jt.keyword,indexes:Be.slice(jt.startIndex,jt.endIndex)}}).forEach(function(jt){var Pn=jt.indexes.reduce(function($t,Ie){return $t[Ie.spanIndex]=($t[Ie.spanIndex]||[]).concat([Ie]),$t},{});Object.values(Pn).forEach(function($t){if($t.length!==1||$t[0].char.trim()!==""){var Ie=nt.wholeWords?$t.slice(1,-1):$t,xe=function(ve,Ge,kt,dt,Ct){var Bn=document.createRange(),bn=dt.firstChild;if(!bn||bn.nodeType!==Node.TEXT_NODE)return null;var Wn=bn.textContent.length,vn=Ct[0].charIndexInSpan,Kn=Ct.length===1?vn:Ct[Ct.length-1].charIndexInSpan;if(vn>Wn||Kn+1>Wn)return null;Bn.setStart(bn,vn),Bn.setEnd(bn,Kn+1);var Nn=document.createElement("span");Bn.surroundContents(Nn);var Qn=Nn.getBoundingClientRect(),tn=kt.getBoundingClientRect(),yi=tn.height,In=tn.width,fn=100*(Qn.left-tn.left)/In,_n=100*(Qn.top-tn.top)/yi,Yn=100*Qn.height/yi,Sn=100*Qn.width/In;return m(Nn),{keyword:Ge,keywordStr:ve,numPages:G,pageIndex:J,left:fn,top:_n,height:Yn,width:Sn,pageHeight:yi,pageWidth:In}}(Xe,jt.keyword,Ne,ke[Ie[0].spanIndex],Ie);xe&&Ke.push(xe)}})})}}),Ke.sort(v)},Re=function(Ne){Ne&&Ne.length>0&&q(Ne)},fe=function(Ne){return U(Ne)},be=function(Ne){if(Ne.has(J)){var Be=Ne.get(J);Be&&L({ele:Be.ele,pageIndex:J,scale:Be.scale,status:Be.status})}},Ue=function(){return z.length===0||z.length===1&&z[0].keyword.trim()===""};return n.useEffect(function(){if(!Ue()&&V.status===t.LayerRenderStatus.DidRender&&!ne.current.length){var Ne=V.ele,Be=[].slice.call(Ne.querySelectorAll(".rpv-core__text-layer-text")).map(function(Ke){return Ke.textContent}).reduce(function(Ke,ke,He){return Ke.concat(ke.split("").map(function(nt,Xe){return{char:nt,charIndexInSpan:Xe,spanIndex:He}}))},[{char:"",charIndexInSpan:0,spanIndex:0}]).slice(1);ne.current=Be}},[z,V.status]),n.useEffect(function(){if(!Ue()&&V.ele&&V.status===t.LayerRenderStatus.DidRender&&we()({pageIndex:J,numPages:G})){var Ne=V.ele,Be=Te(Ne);_e(Be)}},[z,M,V.status,ne.current]),n.useEffect(function(){Ue()&&V.ele&&V.status===t.LayerRenderStatus.DidRender&&_e([])},[z,V.status]),n.useEffect(function(){if(le.length!==0){var Ne=O.current;if(M.pageIndex===J&&Ne&&V.status===t.LayerRenderStatus.DidRender){var Be=Ne.querySelector('.rpv-search__highlight[data-index="'.concat(M.matchIndex,'"]'));if(Be){var Ke=function(Xe,vt){for(var pt=Xe.offsetTop,Mt=Xe.offsetLeft,jt=Xe.parentElement;jt&&jt!==vt;)pt+=jt.offsetTop,Mt+=jt.offsetLeft,jt=jt.parentElement;return{left:Mt,top:pt}}(Be,Ne),ke=Ke.left,He=Ke.top,nt=te.get("jumpToDestination");nt&&(nt({pageIndex:J,bottomOffset:(Ne.getBoundingClientRect().height-He)/V.scale,leftOffset:ke/V.scale,scaleTo:V.scale}),Y.current&&Y.current.classList.remove("rpv-search__highlight--current"),Y.current=Be,Be.classList.add("rpv-search__highlight--current"))}}}},[le,M]),n.useEffect(function(){return te.subscribe("keyword",Re),te.subscribe("matchPosition",fe),te.subscribe("renderStatus",be),function(){te.unsubscribe("keyword",Re),te.unsubscribe("matchPosition",fe),te.unsubscribe("renderStatus",be)}},[]),n.createElement("div",{className:"rpv-search__highlights","data-testid":"search__highlights-".concat(J),ref:O},T({getCssProperties:p,highlightAreas:le}))},g=function(N){var G,J=N.wholeWords?" ".concat(N.keyword," "):N.keyword,ee=N.matchCase?"g":"gi";return{keyword:N.keyword,regExp:new RegExp((G=J,G.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),ee),wholeWords:N.wholeWords||!1}},y=function(N,G,J){return N instanceof RegExp?{keyword:N.source,regExp:N,wholeWords:J||!1}:typeof N=="string"?N===""?f:g({keyword:N,matchCase:G||!1,wholeWords:J||!1}):(G!==void 0&&(N.matchCase=G),J!==void 0&&(N.wholeWords=J),g(N))},w=function(N){var G,J=N.get("initialKeyword"),ee=n.useMemo(function(){if(J&&J.length===1){var fe=y(J[0]);return{matchCase:fe.regExp.flags.indexOf("i")===-1,wholeWords:fe.wholeWords}}return{matchCase:!1,wholeWords:!1}},[]),te=function(fe){var be=n.useRef(fe.get("doc")),Ue=function(Ne){be.current=Ne};return n.useEffect(function(){return fe.subscribe("doc",Ue),function(){fe.unsubscribe("doc",Ue)}},[]),be}(N),W=n.useState(J),O=W[0],j=W[1],T=n.useState([]),E=T[0],M=T[1],U=n.useState(0),$=U[0],z=U[1],q=n.useState(ee.matchCase),P=q[0],V=q[1],L=n.useRef([]),Y=n.useState(ee.wholeWords),ne=Y[0],re=Y[1],le=function(){return!0},_e=n.useCallback(function(){return N.get("targetPageFilter")||le},[N.get("targetPageFilter")]),Fe=function(fe){var be=E.length;if(O.length===0||be===0)return null;var Ue=fe===be+1?1:Math.max(1,Math.min(be,fe));return z(Ue),Te(E[Ue-1])},we=function(fe){return j(fe===""?[]:[fe])},Te=function(fe){var be=N.get("jumpToPage");return be&&be(fe.pageIndex),N.update("matchPosition",{matchIndex:fe.matchIndex,pageIndex:fe.pageIndex}),fe},Re=function(fe,be,Ue){var Ne=te.current;if(!Ne)return Promise.resolve([]);var Be=Ne.numPages,Ke=fe.map(function(ke){return y(ke,be,Ue)});return N.update("keyword",Ke),z(0),M([]),new Promise(function(ke,He){var nt=L.current.length===0?function(){var Xe=te.current;if(!Xe)return Promise.resolve([]);var vt=Array(Xe.numPages).fill(0).map(function(pt,Mt){return t.getPage(Xe,Mt).then(function(jt){return jt.getTextContent()}).then(function(jt){var Pn=jt.items.map(function($t){return $t.str||""}).join("");return Promise.resolve({pageContent:Pn,pageIndex:Mt})})});return Promise.all(vt).then(function(pt){return pt.sort(function(Mt,jt){return Mt.pageIndex-jt.pageIndex}),Promise.resolve(pt.map(function(Mt){return Mt.pageContent}))})}().then(function(Xe){return L.current=Xe,Promise.resolve(Xe)}):Promise.resolve(L.current);nt.then(function(Xe){var vt=[];Xe.forEach(function(pt,Mt){_e()({pageIndex:Mt,numPages:Be})&&Ke.forEach(function(jt){for(var Pn,$t=0;(Pn=jt.regExp.exec(pt))!==null;)vt.push({keyword:jt.regExp,matchIndex:$t,pageIndex:Mt,pageText:pt,startIndex:Pn.index,endIndex:jt.regExp.lastIndex}),$t++})}),M(vt),vt.length>0&&(z(1),Te(vt[0])),ke(vt)})})};return n.useEffect(function(){L.current=[]},[te.current]),{clearKeyword:function(){N.update("keyword",[f]),we(""),z(0),M([]),V(!1),re(!1)},changeMatchCase:function(fe){V(fe),O.length>0&&Re(O,fe,ne)},changeWholeWords:function(fe){re(fe),O.length>0&&Re(O,P,fe)},currentMatch:$,jumpToMatch:Fe,jumpToNextMatch:function(){return Fe($+1)},jumpToPreviousMatch:function(){return Fe($-1)},keywords:O,matchCase:P,numberOfMatches:E.length,wholeWords:ne,search:function(){return Re(O,P,ne)},searchFor:Re,setKeywords:j,keyword:O.length===0?"":(G=O[0],G instanceof RegExp?G.source:typeof G=="string"?G:G.keyword),setKeyword:we,setTargetPages:function(fe){N.update("targetPageFilter",fe)}}},_=function(N){var G=N.children,J=N.store,ee=w(J),te=n.useState(!1),W=te[0],O=te[1],j=function(T){return O(!0)};return n.useEffect(function(){return J.subscribe("doc",j),function(){J.unsubscribe("doc",j)}},[]),G(c(c({},ee),{isDocumentLoaded:W}))},R=function(N){var G=N.containerRef,J=N.store,ee=n.useRef(!1),te=function(){ee.current=!0},W=function(){ee.current=!1},O=function(j){var T=G.current;T&&(j.shiftKey||j.altKey||j.key!=="f"||(t.isMac()?j.metaKey&&!j.ctrlKey:j.ctrlKey)&&(ee.current||document.activeElement&&T.contains(document.activeElement))&&(j.preventDefault(),J.update("areShortcutsPressed",!0)))};return n.useEffect(function(){var j=G.current;if(j)return document.addEventListener("keydown",O),j.addEventListener("mouseenter",te),j.addEventListener("mouseleave",W),function(){document.removeEventListener("keydown",O),j.removeEventListener("mouseenter",te),j.removeEventListener("mouseleave",W)}},[G.current]),n.createElement(n.Fragment,null)},k={left:0,top:8},C=function(N){var G=N.store,J=N.onToggle,ee=n.useContext(t.LocalizationContext).l10n,te=n.useContext(t.ThemeContext).direction,W=n.useState(!1),O=W[0],j=W[1],T=n.useState(!1),E=T[0],M=T[1],U=te===t.TextDirection.RightToLeft,$=w(G),z=$.clearKeyword,q=$.changeMatchCase,P=$.changeWholeWords,V=$.currentMatch,L=$.jumpToNextMatch,Y=$.jumpToPreviousMatch,ne=$.keyword,re=$.matchCase,le=$.numberOfMatches,_e=$.wholeWords,Fe=$.search,we=$.setKeyword,Te=function(Ne){j(!0),Fe().then(function(Be){j(!1),M(!0),Ne&&Ne()})};n.useEffect(function(){var Ne=G.get("initialKeyword");Ne&&Ne.length===1&&ne&&Te(function(){G.update("initialKeyword",[])})},[]);var Re=ee&&ee.search?ee.search.enterToSearch:"Enter to search",fe=ee&&ee.search?ee.search.previousMatch:"Previous match",be=ee&&ee.search?ee.search.nextMatch:"Next match",Ue=ee&&ee.search?ee.search.close:"Close";return n.createElement("div",{className:"rpv-search__popover"},n.createElement("div",{className:"rpv-search__popover-input-counter"},n.createElement(t.TextBox,{ariaLabel:Re,autoFocus:!0,placeholder:Re,type:"text",value:ne,onChange:function(Ne){M(!1),we(Ne)},onKeyDown:function(Ne){Ne.key==="Enter"&&ne&&(E?L():Te())}}),n.createElement("div",{className:t.classNames({"rpv-search__popover-counter":!0,"rpv-search__popover-counter--ltr":!U,"rpv-search__popover-counter--rtl":U})},O&&n.createElement(t.Spinner,{testId:"search__popover-searching",size:"1rem"}),!O&&n.createElement("span",{"data-testid":"search__popover-num-matches"},V,"/",le))),n.createElement("label",{className:"rpv-search__popover-label"},n.createElement("input",{className:"rpv-search__popover-label-checkbox","data-testid":"search__popover-match-case",checked:re,type:"checkbox",onChange:function(Ne){M(!1),q(Ne.target.checked)}})," ",ee&&ee.search?ee.search.matchCase:"Match case"),n.createElement("label",{className:"rpv-search__popover-label"},n.createElement("input",{className:"rpv-search__popover-label-checkbox",checked:_e,"data-testid":"search__popover-whole-words",type:"checkbox",onChange:function(Ne){M(!1),P(Ne.target.checked)}})," ",ee&&ee.search?ee.search.wholeWords:"Whole words"),n.createElement("div",{className:"rpv-search__popover-footer"},n.createElement("div",{className:"rpv-search__popover-footer-item"},n.createElement(t.Tooltip,{ariaControlsSuffix:"search-previous-match",position:U?t.Position.BottomRight:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:fe,isDisabled:V<=1,onClick:Y},n.createElement(s,null)),content:function(){return fe},offset:k})),n.createElement("div",{className:"rpv-search__popover-footer-item"},n.createElement(t.Tooltip,{ariaControlsSuffix:"search-next-match",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:be,isDisabled:V>le-1,onClick:L},n.createElement(i,null)),content:function(){return be},offset:k})),n.createElement("div",{className:t.classNames({"rpv-search__popover-footer-button":!0,"rpv-search__popover-footer-button--ltr":!U,"rpv-search__popover-footer-button--rtl":U})},n.createElement(t.Button,{onClick:function(){J(),z()}},Ue))))},A=function(N){var G=N.children,J=N.onClick,ee=n.useContext(t.LocalizationContext).l10n,te=ee&&ee.search?ee.search.search:"Search";return G({icon:n.createElement(o,null),label:te,onClick:J})},D={left:0,top:8},H=function(N){var G=N.enableShortcuts,J=N.store,ee=N.onClick,te=G?t.isMac()?"Meta+F":"Ctrl+F":"",W=function(O){O&&ee()};return n.useEffect(function(){return J.subscribe("areShortcutsPressed",W),function(){J.unsubscribe("areShortcutsPressed",W)}},[]),n.createElement(A,{onClick:ee},function(O){return n.createElement(t.Tooltip,{ariaControlsSuffix:"search-popover",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaKeyShortcuts:te,ariaLabel:O.label,testId:"search__popover-button",onClick:ee},O.icon),content:function(){return O.label},offset:D})})},I={left:0,top:8},F=function(N){var G=N.children,J=N.enableShortcuts,ee=N.store,te=n.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft?t.Position.BottomRight:t.Position.BottomLeft,W=G||function(O){return n.createElement(H,c({enableShortcuts:J,store:ee},O))};return n.createElement(t.Popover,{ariaControlsSuffix:"search",lockScroll:!1,position:te,target:function(O){return W({onClick:O})},content:function(O){return n.createElement(C,{store:ee,onToggle:O})},offset:I,closeOnClickOutside:!1,closeOnEscape:!0})},Z=function(N){return Array.isArray(N)?N.map(function(G){return y(G)}):[y(N)]};return search_min.NextIcon=i,search_min.PreviousIcon=s,search_min.SearchIcon=o,search_min.searchPlugin=function(N){var G=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onHighlightKeyword:function(){}},N)},[]),J=n.useMemo(function(){return t.createStore({initialKeyword:N&&N.keyword?Array.isArray(N.keyword)?N.keyword:[N.keyword]:[],keyword:N&&N.keyword?Z(N.keyword):[f],matchPosition:{matchIndex:-1,pageIndex:-1},renderStatus:new Map})},[]),ee=w(J),te=ee.clearKeyword,W=ee.jumpToMatch,O=ee.jumpToNextMatch,j=ee.jumpToPreviousMatch,T=ee.searchFor,E=ee.setKeywords,M=ee.setTargetPages,U=function($){return n.createElement(F,c({enableShortcuts:G.enableShortcuts},$,{store:J}))};return{install:function($){var z=N&&N.keyword?Array.isArray(N.keyword)?N.keyword:[N.keyword]:[],q=N&&N.keyword?Z(N.keyword):[f];J.update("initialKeyword",z),J.update("jumpToDestination",$.jumpToDestination),J.update("jumpToPage",$.jumpToPage),J.update("keyword",q)},renderPageLayer:function($){return n.createElement(b,{key:$.pageIndex,numPages:$.doc.numPages,pageIndex:$.pageIndex,renderHighlights:N?.renderHighlights,store:J,onHighlightKeyword:G.onHighlightKeyword})},renderViewer:function($){var z=$.slot;return z.subSlot&&(z.subSlot.children=n.createElement(n.Fragment,null,G.enableShortcuts&&n.createElement(R,{containerRef:$.containerRef,store:J}),z.subSlot.children)),z},uninstall:function($){var z=J.get("renderStatus");z&&z.clear()},onDocumentLoad:function($){J.update("doc",$.doc)},onTextLayerRender:function($){var z=J.get("renderStatus");z&&(z=z.set($.pageIndex,$),J.update("renderStatus",z))},Search:function($){return n.createElement(_,c({},$,{store:J}))},ShowSearchPopover:U,ShowSearchPopoverButton:function(){return n.createElement(U,null,function($){return n.createElement(H,c({enableShortcuts:G.enableShortcuts,store:J},$))})},clearHighlights:function(){te()},highlight:function($){var z=Array.isArray($)?$:[$];return E(z),T(z)},jumpToMatch:W,jumpToNextMatch:O,jumpToPreviousMatch:j,setTargetPages:M}},search_min}var hasRequiredLib$4;function requireLib$4(){if(hasRequiredLib$4)return lib$2.exports;hasRequiredLib$4=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$2.exports=requireSearch_min(),lib$2.exports}var lib$1={exports:{}},theme_min={},hasRequiredTheme_min;function requireTheme_min(){if(hasRequiredTheme_min)return theme_min;hasRequiredTheme_min=1;var t=requireLib$h();function e(u){var m=Object.create(null);return u&&Object.keys(u).forEach(function(v){if(v!=="default"){var b=Object.getOwnPropertyDescriptor(u,v);Object.defineProperty(m,v,b.get?b:{enumerable:!0,get:function(){return u[v]}})}}),m.default=u,Object.freeze(m)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:"M19.5,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.106l-2.4-2.4a1,1,0,0,0-1.414,0l-2.4,2.4H5.5a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.894l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4H18.5a1,1,0,0,0,1-1Z"}),n.createElement("path",{d:"M10,6.349a6,6,0,0,1,0,11.3,6,6,0,1,0,0-11.3Z"}))},s=function(){return n.createElement(t.Icon,{size:16},n.createElement("path",{d:"M19.491,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.1L12.7,2.1a1,1,0,0,0-1.414,0l-2.4,2.4H5.491a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.885l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4h3.394a1,1,0,0,0,1-1Z"}),n.createElement("path",{d:"M11.491,6c4,0,6,2.686,6,6s-2,6-6,6Z"}))},o=function(){return o=Object.assign||function(u){for(var m,v=1,b=arguments.length;v<b;v++)for(var g in m=arguments[v])Object.prototype.hasOwnProperty.call(m,g)&&(u[g]=m[g]);return u},o.apply(this,arguments)},c={left:0,top:8},f=function(u){var m=u.onClick,v=n.useContext(t.ThemeContext),b=n.useContext(t.LocalizationContext).l10n,g=v.currentTheme==="dark",y=b&&b.theme?g?b.theme.switchLightTheme:b.theme.switchDarkTheme:g?"Switch to the light theme":"Switch to the dark theme";return n.createElement(t.Tooltip,{ariaControlsSuffix:"theme-switch",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaLabel:y,testId:"theme__switch-button",onClick:m},g?n.createElement(s,null):n.createElement(i,null)),content:function(){return y},offset:c})},p=function(u){var m=u.children,v=n.useContext(t.ThemeContext);return(m||function(b){return n.createElement(f,{onClick:b.onClick})})({onClick:function(){return v.setCurrentTheme(v.currentTheme==="dark"?"light":"dark")}})},d=function(u){var m=u.onClick,v=n.useContext(t.ThemeContext),b=n.useContext(t.LocalizationContext).l10n,g=v.currentTheme==="dark",y=b&&b.theme?g?b.theme.switchLightTheme:b.theme.switchDarkTheme:g?"Switch to the light theme":"Switch to the dark theme";return n.createElement(t.MenuItem,{icon:g?n.createElement(s,null):n.createElement(i,null),testId:"theme__switch-menu",onClick:m},y)};return theme_min.DarkIcon=i,theme_min.LightIcon=s,theme_min.themePlugin=function(){var u=function(m){return n.createElement(p,o({},m))};return{SwitchTheme:u,SwitchThemeButton:function(){return n.createElement(u,null,function(m){return n.createElement(f,o({},m))})},SwitchThemeMenuItem:function(m){return n.createElement(u,null,function(v){return n.createElement(d,{onClick:function(){v.onClick(),m.onClick()}})})}}},theme_min}var hasRequiredLib$3;function requireLib$3(){if(hasRequiredLib$3)return lib$1.exports;hasRequiredLib$3=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$1.exports=requireTheme_min(),lib$1.exports}var lib={exports:{}},zoom_min={},hasRequiredZoom_min;function requireZoom_min(){if(hasRequiredZoom_min)return zoom_min;hasRequiredZoom_min=1;var t=requireLib$h();function e(N){var G=Object.create(null);return N&&Object.keys(N).forEach(function(J){if(J!=="default"){var ee=Object.getOwnPropertyDescriptor(N,J);Object.defineProperty(G,J,ee.get?ee:{enumerable:!0,get:function(){return N[J]}})}}),G.default=N,Object.freeze(G)}var n=e(requireReact()),i=function(){return n.createElement(t.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},s=function(){return n.createElement(t.Icon,{ignoreDirection:!0,size:16},n.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},o=function(){return o=Object.assign||function(N){for(var G,J=1,ee=arguments.length;J<ee;J++)for(var te in G=arguments[J])Object.prototype.hasOwnProperty.call(G,te)&&(N[te]=G[te]);return N},o.apply(this,arguments)},c=function(N){var G=n.useState(N.get("scale")||0),J=G[0],ee=G[1],te=function(W){ee(W)};return n.useEffect(function(){return N.subscribe("scale",te),function(){N.unsubscribe("scale",te)}},[]),{scale:J}},f=function(N){var G=N.children,J=N.store;return(G||function(ee){return n.createElement(n.Fragment,null,"".concat(Math.round(100*ee.scale),"%"))})({scale:c(J).scale})},p={passive:!1},d=null,u=function(N){var G=N.pagesContainerRef,J=N.store,ee=t.useDebounceCallback(function(W){var O=J.get("zoom");O&&O(W)},40),te=function(W){if(W.ctrlKey){W.preventDefault();var O=W.target.getBoundingClientRect(),j=1-W.deltaY/100,T=W.clientX-O.left,E=W.clientY-O.top,M=J.get("scale"),U=(d||(d=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(T,E).scale(j).translate(-T,-E).scale(M);ee(U.a)}};return t.useIsomorphicLayoutEffect(function(){var W=G.current;if(W)return W.addEventListener("wheel",te,p),function(){W.removeEventListener("wheel",te)}},[]),n.createElement(n.Fragment,null)},m=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],v=function(N){return m.find(function(G){return G>N})||N},b=function(N){var G=m.findIndex(function(J){return J>=N});return G===-1||G===0?N:m[G-1]},g=function(N){var G=N.containerRef,J=N.store,ee=function(te){if(!te.shiftKey&&!te.altKey&&(t.isMac()?te.metaKey:te.ctrlKey)){var W=G.current;if(W&&document.activeElement&&W.contains(document.activeElement)){var O=J.get("zoom");if(O){var j=J.get("scale")||1,T=1;switch(te.key){case"-":T=b(j);break;case"=":T=v(j);break;case"0":T=1;break;default:T=j}T!==j&&(te.preventDefault(),O(T))}}}};return n.useEffect(function(){if(G.current)return document.addEventListener("keydown",ee),function(){document.removeEventListener("keydown",ee)}},[G.current]),n.createElement(n.Fragment,null)},y=[.5,.75,1,1.25,1.5,2,3,4],w={left:0,top:8},_=function(N){var G=N.levels,J=G===void 0?y:G,ee=N.scale,te=N.onZoom,W=n.useContext(t.LocalizationContext).l10n,O=n.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,j=W&&W.zoom?W.zoom.zoomDocument:"Zoom document";return n.createElement(t.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:t.Position.BottomCenter,target:function(T){return n.createElement(t.MinimalButton,{ariaLabel:j,testId:"zoom__popover-target",onClick:function(){T()}},n.createElement("span",{className:"rpv-zoom__popover-target"},n.createElement("span",{"data-testid":"zoom__popover-target-scale",className:t.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!O,"rpv-zoom__popover-target-scale--rtl":O})},Math.round(100*ee),"%"),n.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(T){return n.createElement(t.Menu,null,Object.keys(t.SpecialZoomLevel).map(function(E){var M=E;return n.createElement(t.MenuItem,{key:M,onClick:function(){T(),te(M)}},function(U){switch(U){case t.SpecialZoomLevel.ActualSize:return W&&W.zoom?W.zoom.actualSize:"Actual size";case t.SpecialZoomLevel.PageFit:return W&&W.zoom?W.zoom.pageFit:"Page fit";case t.SpecialZoomLevel.PageWidth:return W&&W.zoom?W.zoom.pageWidth:"Page width"}}(M))}),n.createElement(t.MenuDivider,null),J.map(function(E){return n.createElement(t.MenuItem,{key:E,onClick:function(){T(),te(E)}},"".concat(Math.round(100*E),"%"))}))},offset:w,closeOnClickOutside:!0,closeOnEscape:!0})},R=function(N){var G=N.children,J=N.levels,ee=N.store;return(G||function(te){return n.createElement(_,{levels:J,scale:te.scale,onZoom:te.onZoom})})({scale:c(ee).scale,onZoom:function(te){var W=ee.get("zoom");W&&W(te)}})},k={left:0,top:8},C=function(N){var G=N.enableShortcuts,J=N.onClick,ee=n.useContext(t.LocalizationContext).l10n,te=ee&&ee.zoom?ee.zoom.zoomIn:"Zoom in",W=G?t.isMac()?"Meta+=":"Ctrl+=":"";return n.createElement(t.Tooltip,{ariaControlsSuffix:"zoom-in",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaKeyShortcuts:W,ariaLabel:te,testId:"zoom__in-button",onClick:J},n.createElement(i,null)),content:function(){return te},offset:k})},A=function(N){var G=N.children,J=N.enableShortcuts,ee=N.store,te=c(ee).scale;return(G||C)({enableShortcuts:J,onClick:function(){var W=ee.get("zoom");W&&W(v(te))}})},D=function(N){var G=N.onClick,J=n.useContext(t.LocalizationContext).l10n,ee=J&&J.zoom?J.zoom.zoomIn:"Zoom in";return n.createElement(t.MenuItem,{icon:n.createElement(i,null),testId:"zoom__in-menu",onClick:G},ee)},H={left:0,top:8},I=function(N){var G=N.enableShortcuts,J=N.onClick,ee=n.useContext(t.LocalizationContext).l10n,te=ee&&ee.zoom?ee.zoom.zoomOut:"Zoom out",W=G?t.isMac()?"Meta+-":"Ctrl+-":"";return n.createElement(t.Tooltip,{ariaControlsSuffix:"zoom-out",position:t.Position.BottomCenter,target:n.createElement(t.MinimalButton,{ariaKeyShortcuts:W,ariaLabel:te,testId:"zoom__out-button",onClick:J},n.createElement(s,null)),content:function(){return te},offset:H})},F=function(N){var G=N.children,J=N.enableShortcuts,ee=N.store,te=c(ee).scale;return(G||I)({enableShortcuts:J,onClick:function(){var W=ee.get("zoom");W&&W(b(te))}})},Z=function(N){var G=N.onClick,J=n.useContext(t.LocalizationContext).l10n,ee=J&&J.zoom?J.zoom.zoomOut:"Zoom out";return n.createElement(t.MenuItem,{icon:n.createElement(s,null),testId:"zoom__out-menu",onClick:G},ee)};return zoom_min.ZoomInIcon=i,zoom_min.ZoomOutIcon=s,zoom_min.zoomPlugin=function(N){var G=n.useMemo(function(){return Object.assign({},{enableShortcuts:!0},N)},[]),J=n.useMemo(function(){return t.createStore({})},[]),ee=function(O){return n.createElement(A,o({enableShortcuts:G.enableShortcuts},O,{store:J}))},te=function(O){return n.createElement(F,o({enableShortcuts:G.enableShortcuts},O,{store:J}))},W=function(O){return n.createElement(R,o({},O,{store:J}))};return{renderViewer:function(O){var j=O.slot;if(!G.enableShortcuts)return j;var T={children:n.createElement(n.Fragment,null,n.createElement(g,{containerRef:O.containerRef,store:J}),n.createElement(u,{pagesContainerRef:O.pagesContainerRef,store:J}),j.children)};return o(o({},j),T)},install:function(O){J.update("zoom",O.zoom)},onViewerStateChange:function(O){return J.update("scale",O.scale),O},zoomTo:function(O){var j=J.get("zoom");j&&j(O)},CurrentScale:function(O){return n.createElement(f,o({},O,{store:J}))},ZoomIn:ee,ZoomInButton:function(){return n.createElement(ee,null,function(O){return n.createElement(C,o({},O))})},ZoomInMenuItem:function(O){return n.createElement(ee,null,function(j){return n.createElement(D,{onClick:function(){j.onClick(),O.onClick()}})})},ZoomOut:te,ZoomOutButton:function(){return n.createElement(te,null,function(O){return n.createElement(I,o({},O))})},ZoomOutMenuItem:function(O){return n.createElement(te,null,function(j){return n.createElement(Z,{onClick:function(){j.onClick(),O.onClick()}})})},Zoom:W,ZoomPopover:function(O){return n.createElement(W,null,function(j){return n.createElement(_,o({levels:O?.levels},j))})}}},zoom_min}var hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib.exports;hasRequiredLib$2=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireZoom_min(),lib.exports}var hasRequiredToolbar_min;function requireToolbar_min(){if(hasRequiredToolbar_min)return toolbar_min;hasRequiredToolbar_min=1;var t=requireLib$h(),e=requireLib$d(),n=requireReact(),i=requireLib$c(),s=requireLib$b(),o=requireLib$a(),c=requireLib$9(),f=requireLib$8(),p=requireLib$7(),d=requireLib$6(),u=requireLib$5(),m=requireLib$4(),v=requireLib$3(),b=requireLib$2();function g(I){var F=Object.create(null);return I&&Object.keys(I).forEach(function(Z){if(Z!=="default"){var N=Object.getOwnPropertyDescriptor(I,Z);Object.defineProperty(F,Z,N.get?N:{enumerable:!0,get:function(){return I[Z]}})}}),F.default=I,Object.freeze(F)}var y=g(n),w=function(){return y.createElement(t.Icon,{size:16},y.createElement("path",{d:`M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z
            M12,9.5
            c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z
            M12,18.5c1.381,0,2.5,1.119,2.5,2.5
            s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z`}))},_={left:0,top:8},R=function(I){var F=I.toolbarSlot,Z=y.useContext(t.LocalizationContext).l10n,N=y.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft?t.Position.BottomLeft:t.Position.BottomRight,G=F.DownloadMenuItem,J=F.EnterFullScreenMenuItem,ee=F.GoToFirstPageMenuItem,te=F.GoToLastPageMenuItem,W=F.GoToNextPageMenuItem,O=F.GoToPreviousPageMenuItem,j=F.OpenMenuItem,T=F.PrintMenuItem,E=F.RotateBackwardMenuItem,M=F.RotateForwardMenuItem,U=F.ShowPropertiesMenuItem,$=F.SwitchScrollModeMenuItem,z=F.SwitchSelectionModeMenuItem,q=F.SwitchViewModeMenuItem,P=F.SwitchThemeMenuItem;return y.createElement(t.Popover,{ariaControlsSuffix:"toolbar-more-actions",ariaHasPopup:"menu",position:N,target:function(V,L){var Y=Z&&Z.toolbar?Z.toolbar.moreActions:"More actions";return y.createElement(t.Tooltip,{ariaControlsSuffix:"toolbar-more-actions",position:N,target:y.createElement(t.MinimalButton,{ariaLabel:Y,isSelected:L,testId:"toolbar__more-actions-popover-target",onClick:V},y.createElement(w,null)),content:function(){return Y},offset:_})},content:function(V){return y.createElement(t.Menu,null,y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(P,{onClick:V})),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(J,{onClick:V})),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(j,null)),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(T,{onClick:V})),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(G,{onClick:V})),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(t.MenuDivider,null)),y.createElement(ee,{onClick:V}),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(O,{onClick:V})),y.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},y.createElement(W,{onClick:V})),y.createElement(te,{onClick:V}),y.createElement(t.MenuDivider,null),y.createElement(M,{onClick:V}),y.createElement(E,{onClick:V}),y.createElement(t.MenuDivider,null),y.createElement(z,{mode:e.SelectionMode.Text,onClick:V}),y.createElement(z,{mode:e.SelectionMode.Hand,onClick:V}),y.createElement(t.MenuDivider,null),y.createElement($,{mode:t.ScrollMode.Page,onClick:V}),y.createElement($,{mode:t.ScrollMode.Vertical,onClick:V}),y.createElement($,{mode:t.ScrollMode.Horizontal,onClick:V}),y.createElement($,{mode:t.ScrollMode.Wrapped,onClick:V}),y.createElement(t.MenuDivider,null),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement(q,{mode:t.ViewMode.SinglePage,onClick:V})),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement(q,{mode:t.ViewMode.DualPage,onClick:V})),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement(q,{mode:t.ViewMode.DualPageWithCover,onClick:V})),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement(t.MenuDivider,null)),y.createElement(U,{onClick:V}))},offset:_,closeOnClickOutside:!0,closeOnEscape:!0})},k=function(){return k=Object.assign||function(I){for(var F,Z=1,N=arguments.length;Z<N;Z++)for(var G in F=arguments[Z])Object.prototype.hasOwnProperty.call(F,G)&&(I[G]=F[G]);return I},k.apply(this,arguments)},C=function(I){return function(F){var Z=y.useMemo(function(){return I(F)},[]),N=y.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,G=Z.CurrentPageInput,J=Z.Download,ee=Z.EnterFullScreen,te=Z.GoToNextPage,W=Z.GoToPreviousPage,O=Z.NumberOfPages,j=Z.Open,T=Z.Print,E=Z.ShowSearchPopover,M=Z.SwitchTheme,U=Z.Zoom,$=Z.ZoomIn,z=Z.ZoomOut;return y.createElement("div",{"data-testid":"toolbar",className:t.classNames({"rpv-toolbar":!0,"rpv-toolbar--rtl":N}),role:"toolbar","aria-orientation":"horizontal"},y.createElement("div",{className:"rpv-toolbar__left"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(E,null)),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(W,null))),y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(G,null),y.createElement("span",{className:"rpv-toolbar__label"},y.createElement(O,null))),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(te,null)))),y.createElement("div",{className:"rpv-toolbar__center"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(z,null)),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(U,null))),y.createElement("div",{className:"rpv-toolbar__item"},y.createElement($,null))),y.createElement("div",{className:"rpv-toolbar__right"},y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(M,null))),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(ee,null))),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(j,null))),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(J,null))),y.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(T,null))),y.createElement("div",{className:"rpv-toolbar__item"},y.createElement(R,{toolbarSlot:Z}))))}},A=function(I){var F=I.NumberOfPages;return Object.assign({},I,{NumberOfPages:function(){return y.createElement(y.Fragment,null,"/ ",y.createElement(F,null))}})},D=function(I){return C(A)(I)},H=function(I){var F=I.children,Z=I.slot;return(F||D)(Z)};return toolbar_min.MoreActionsPopover=R,toolbar_min.MoreIcon=w,toolbar_min.toolbarPlugin=function(I){var F=i.fullScreenPlugin(I?I.fullScreenPlugin:{}),Z=s.getFilePlugin(I?I.getFilePlugin:{}),N=o.openPlugin(I?I.openPlugin:{}),G=c.pageNavigationPlugin(I?I.pageNavigationPlugin:{}),J=f.printPlugin(I?I.printPlugin:{}),ee=p.propertiesPlugin(),te=d.rotatePlugin(),W=u.scrollModePlugin(),O=m.searchPlugin(I?I.searchPlugin:{}),j=e.selectionModePlugin(I?I.selectionModePlugin:{}),T=v.themePlugin(),E=b.zoomPlugin(I?I.zoomPlugin:{}),M=[F,Z,N,G,J,ee,te,W,O,j,T,E],U=y.useCallback(function($){var z=F.EnterFullScreen,q=F.EnterFullScreenMenuItem,P=Z.Download,V=Z.DownloadMenuItem,L=N.Open,Y=N.OpenMenuItem,ne=G.CurrentPageInput,re=G.CurrentPageLabel,le=G.GoToFirstPage,_e=G.GoToFirstPageMenuItem,Fe=G.GoToLastPage,we=G.GoToLastPageMenuItem,Te=G.GoToNextPage,Re=G.GoToNextPageMenuItem,fe=G.GoToPreviousPage,be=G.GoToPreviousPageMenuItem,Ue=G.NumberOfPages,Ne=J.Print,Be=J.PrintMenuItem,Ke=ee.ShowProperties,ke=ee.ShowPropertiesMenuItem,He=te.Rotate,nt=te.RotateBackwardMenuItem,Xe=te.RotateForwardMenuItem,vt=W.SwitchScrollMode,pt=W.SwitchScrollModeMenuItem,Mt=W.SwitchViewMode,jt=W.SwitchViewModeMenuItem,Pn=O.Search,$t=O.ShowSearchPopover,Ie=j.SwitchSelectionMode,xe=j.SwitchSelectionModeMenuItem,ve=T.SwitchTheme,Ge=T.SwitchThemeMenuItem,kt=E.CurrentScale,dt=E.Zoom,Ct=E.ZoomIn,Bn=E.ZoomInMenuItem,bn=E.ZoomOut,Wn=E.ZoomOutMenuItem;return y.createElement(H,k({},$,{slot:{CurrentPageInput:ne,CurrentPageLabel:re,CurrentScale:kt,Download:P,DownloadMenuItem:V,EnterFullScreen:z,EnterFullScreenMenuItem:q,GoToFirstPage:le,GoToFirstPageMenuItem:_e,GoToLastPage:Fe,GoToLastPageMenuItem:we,GoToNextPage:Te,GoToNextPageMenuItem:Re,GoToPreviousPage:fe,GoToPreviousPageMenuItem:be,NumberOfPages:Ue,Open:L,OpenMenuItem:Y,Print:Ne,PrintMenuItem:Be,Rotate:He,RotateBackwardMenuItem:nt,RotateForwardMenuItem:Xe,Search:Pn,ShowProperties:Ke,ShowPropertiesMenuItem:ke,ShowSearchPopover:$t,SwitchScrollMode:vt,SwitchScrollModeMenuItem:pt,SwitchSelectionMode:Ie,SwitchSelectionModeMenuItem:xe,SwitchViewMode:Mt,SwitchViewModeMenuItem:jt,SwitchTheme:ve,SwitchThemeMenuItem:Ge,Zoom:dt,ZoomIn:Ct,ZoomInMenuItem:Bn,ZoomOut:bn,ZoomOutMenuItem:Wn}}))},[]);return{fullScreenPluginInstance:F,getFilePluginInstance:Z,openPluginInstance:N,pageNavigationPluginInstance:G,printPluginInstance:J,propertiesPluginInstance:ee,rotatePluginInstance:te,scrollModePluginInstance:W,searchPluginInstance:O,selectionModePluginInstance:j,themePluginInstance:T,zoomPluginInstance:E,install:function($){M.forEach(function(z){z.install&&z.install($)})},renderPageLayer:function($){return y.createElement(y.Fragment,null,M.map(function(z,q){return z.renderPageLayer?y.createElement(y.Fragment,{key:q},z.renderPageLayer($)):y.createElement(y.Fragment,{key:q})}))},renderViewer:function($){var z=$.slot;return M.forEach(function(q){q.renderViewer&&(z=q.renderViewer(k(k({},$),{slot:z})))}),z},uninstall:function($){M.forEach(function(z){z.uninstall&&z.uninstall($)})},onDocumentLoad:function($){M.forEach(function(z){z.onDocumentLoad&&z.onDocumentLoad($)})},onAnnotationLayerRender:function($){M.forEach(function(z){z.onAnnotationLayerRender&&z.onAnnotationLayerRender($)})},onTextLayerRender:function($){M.forEach(function(z){z.onTextLayerRender&&z.onTextLayerRender($)})},onViewerStateChange:function($){var z=$;return M.forEach(function(q){q.onViewerStateChange&&(z=q.onViewerStateChange(z))}),z},renderDefaultToolbar:C,Toolbar:U}},toolbar_min}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$c.exports;hasRequiredLib$1=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$c.exports=requireToolbar_min(),lib$c.exports}var hasRequiredDefaultLayout_min;function requireDefaultLayout_min(){if(hasRequiredDefaultLayout_min)return defaultLayout_min;hasRequiredDefaultLayout_min=1;var t=requireLib$h(),e=requireReact(),n=requireLib$g(),i=requireLib$f(),s=requireLib$e(),o=requireLib$1();function c(y){var w=Object.create(null);return y&&Object.keys(y).forEach(function(_){if(_!=="default"){var R=Object.getOwnPropertyDescriptor(y,_);Object.defineProperty(w,_,R.get?R:{enumerable:!0,get:function(){return y[_]}})}}),w.default=y,Object.freeze(w)}var f=c(e),p=function(){return f.createElement(t.Icon,{size:16},f.createElement("path",{d:`M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3
            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5
            c0.552,0,1,0.448,1,1L11.5,10.5z
            M14.5,6.499h6
            M14.5,10.499h6
            M3.5,14.499h17
            M3.5,18.499h16.497`}))},d=function(){return d=Object.assign||function(y){for(var w,_=1,R=arguments.length;_<R;_++)for(var k in w=arguments[_])Object.prototype.hasOwnProperty.call(w,k)&&(y[k]=w[k]);return y},d.apply(this,arguments)},u=function(){return f.createElement(t.Icon,{size:16},f.createElement("path",{d:`M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883
            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0
            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9`}))},m=function(){return f.createElement(t.Icon,{size:16},f.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},v={left:8,top:0},b={left:-8,top:0},g=function(y){var w=y.attachmentTabContent,_=y.bookmarkTabContent,R=y.store,k=y.thumbnailTabContent,C=y.tabs,A=f.useRef(),D=f.useContext(t.LocalizationContext).l10n,H=f.useState(R.get("isCurrentTabOpened")||!1),I=H[0],F=H[1],Z=f.useState(Math.max(R.get("currentTab")||0,0)),N=Z[0],G=Z[1],J=f.useContext(t.ThemeContext).direction===t.TextDirection.RightToLeft,ee=[{content:k,icon:f.createElement(m,null),title:D&&D.defaultLayout?D.defaultLayout.thumbnail:"Thumbnail"},{content:_,icon:f.createElement(p,null),title:D&&D.defaultLayout?D.defaultLayout.bookmark:"Bookmark"},{content:w,icon:f.createElement(u,null),title:D&&D.defaultLayout?D.defaultLayout.attachment:"Attachment"}],te=C?C(ee):ee,W=function(j){j>=0&&j<=te.length-1&&(R.update("isCurrentTabOpened",!0),G(j))},O=function(j){F(j)};return f.useEffect(function(){return R.subscribe("currentTab",W),R.subscribe("isCurrentTabOpened",O),function(){R.unsubscribe("currentTab",W),R.unsubscribe("isCurrentTabOpened",O)}},[]),te.length===0?f.createElement(f.Fragment,null):f.createElement(f.Fragment,null,f.createElement("div",{"data-testid":"default-layout__sidebar",className:t.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":I,"rpv-default-layout__sidebar--ltr":!J,"rpv-default-layout__sidebar--rtl":J}),ref:A},f.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},f.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},te.map(function(j,T){return f.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":N===T,key:T,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(T),role:"tab"},f.createElement(t.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(T),position:J?t.Position.LeftCenter:t.Position.RightCenter,target:f.createElement(t.MinimalButton,{ariaLabel:j.title,isSelected:N===T,onClick:function(){return function(E){if(N===E){R.update("isCurrentTabOpened",!R.get("isCurrentTabOpened"));var M=A.current;M&&M.style.width&&M.style.removeProperty("width")}else R.update("currentTab",E)}(T)}},j.icon),content:function(){return j.title},offset:J?b:v}))})),f.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(N),id:"rpv-default-layout__sidebar-content",className:t.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":I,"rpv-default-layout__sidebar-content--ltr":!J,"rpv-default-layout__sidebar-content--rtl":J}),role:"tabpanel",tabIndex:-1},te[N].content))),I&&f.createElement(t.Splitter,{constrain:function(j){return j.firstHalfPercentage>=20&&j.firstHalfPercentage<=80}}))};return defaultLayout_min.BookmarkIcon=p,defaultLayout_min.FileIcon=u,defaultLayout_min.ThumbnailIcon=m,defaultLayout_min.defaultLayoutPlugin=function(y){var w=f.useMemo(function(){return t.createStore({isCurrentTabOpened:!1,currentTab:0})},[]),_=n.attachmentPlugin(),R=i.bookmarkPlugin(),k=s.thumbnailPlugin(y?y.thumbnailPlugin:{}),C=o.toolbarPlugin(y?y.toolbarPlugin:{}),A=_.Attachments,D=R.Bookmarks,H=k.Thumbnails,I=C.Toolbar,F=y?y.sidebarTabs:function(N){return N},Z=[_,R,k,C];return{attachmentPluginInstance:_,bookmarkPluginInstance:R,thumbnailPluginInstance:k,toolbarPluginInstance:C,activateTab:function(N){w.update("currentTab",N)},toggleTab:function(N){var G=w.get("currentTab");w.update("isCurrentTabOpened",!w.get("isCurrentTabOpened")),G!==N&&w.update("currentTab",N)},install:function(N){Z.forEach(function(G){G.install&&G.install(N)})},renderPageLayer:function(N){return f.createElement(f.Fragment,null,Z.map(function(G,J){return G.renderPageLayer?f.createElement(f.Fragment,{key:J},G.renderPageLayer(N)):f.createElement(f.Fragment,{key:J},f.createElement(f.Fragment,null))}))},renderViewer:function(N){var G=N.slot;Z.forEach(function(ee){ee.renderViewer&&(G=ee.renderViewer(d(d({},N),{slot:G})))});var J=G.subSlot&&G.subSlot.attrs?{className:G.subSlot.attrs.className,"data-testid":G.subSlot.attrs["data-testid"],ref:G.subSlot.attrs.ref,style:G.subSlot.attrs.style}:{};return G.children=f.createElement("div",{className:"rpv-default-layout__container"},f.createElement("div",{"data-testid":"default-layout__main",className:t.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":N.themeContext.direction===t.TextDirection.RightToLeft})},f.createElement(g,{attachmentTabContent:f.createElement(A,null),bookmarkTabContent:f.createElement(D,null),store:w,thumbnailTabContent:f.createElement(H,null),tabs:F}),f.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},f.createElement("div",{className:"rpv-default-layout__toolbar"},y&&y.renderToolbar?y.renderToolbar(I):f.createElement(I,null)),f.createElement("div",d({},J),G.subSlot.children))),G.children),G.subSlot.attrs={},G.subSlot.children=f.createElement(f.Fragment,null),G},uninstall:function(N){Z.forEach(function(G){G.uninstall&&G.uninstall(N)})},onDocumentLoad:function(N){Z.forEach(function(G){G.onDocumentLoad&&G.onDocumentLoad(N)}),y&&y.setInitialTab&&y.setInitialTab(N.doc).then(function(G){w.update("currentTab",G),w.update("isCurrentTabOpened",!0)})},onAnnotationLayerRender:function(N){Z.forEach(function(G){G.onAnnotationLayerRender&&G.onAnnotationLayerRender(N)})},onTextLayerRender:function(N){Z.forEach(function(G){G.onTextLayerRender&&G.onTextLayerRender(N)})},onViewerStateChange:function(N){var G=N;return Z.forEach(function(J){J.onViewerStateChange&&(G=J.onViewerStateChange(G))}),G}}},defaultLayout_min.setInitialTabFromPageMode=function(y){return new Promise(function(w,_){y.getPageMode().then(function(R){if(R)switch(R){case t.PageMode.Attachments:w(2);break;case t.PageMode.Bookmarks:w(1);break;case t.PageMode.Thumbnails:w(0);break;default:w(-1)}else w(-1)})})},defaultLayout_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib$g.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib$g.exports=requireDefaultLayout_min(),lib$g.exports}var libExports$1=requireLib(),libExports=requireLib$4();function PDFViewer({fileUrl:t,onClose:e,title:n}){const[i,s]=reactExports.useState(!0),o=libExports.searchPlugin({keyword:[""]}),c=libExports$1.defaultLayoutPlugin({sidebarTabs:p=>[],renderToolbar:p=>jsxRuntimeExports.jsx(p,{children:d=>{const{ZoomIn:u,ZoomOut:m,Search:v,GoToNextPage:b,GoToPreviousPage:g,CurrentPageInput:y,NumberOfPages:w}=d;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(m,{})}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(u,{})}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(v,{children:_=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"text",value:_.keyword,onChange:R=>_.setKeyword(R.target.value),onKeyDown:R=>R.key==="Enter"&&_.search(),placeholder:"Search",style:{marginRight:"4px"}}),jsxRuntimeExports.jsx("button",{onClick:_.search,children:"Search"}),jsxRuntimeExports.jsx("button",{onClick:_.jumpToPreviousMatch,disabled:_.currentMatch<=0,children:"Prev"}),jsxRuntimeExports.jsx("button",{onClick:_.jumpToNextMatch,disabled:!1,children:"Next"})]})})}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(g,{})}),jsxRuntimeExports.jsxs("div",{style:{padding:"0 2px"},children:[jsxRuntimeExports.jsx(y,{})," / ",jsxRuntimeExports.jsx(w,{})]}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(b,{})})]})}})}),f=()=>{s(!1)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl max-h-[90vh] w-full mx-4 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:n||"PDF Viewer"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-hidden",children:[i&&jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-96",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),jsxRuntimeExports.jsx(libExports$2.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsxRuntimeExports.jsx("div",{style:{height:"600px"},children:jsxRuntimeExports.jsx(libExports$2.Viewer,{fileUrl:t,plugins:[c,o],onDocumentLoad:f,defaultScale:libExports$2.SpecialZoomLevel.PageWidth})})})]})]})})}const RouteTracker=({routes:t,className:e="",isEditable:n=!1,onRoutesChange:i})=>{const[s,o]=reactExports.useState(null),[c,f]=reactExports.useState(null),[p,d]=reactExports.useState(t);React.useEffect(()=>{d(t)},[t]);const u=R=>{i&&i(p),o(null)},m=(R,k)=>{i&&i(p),f(null)},v=()=>{d(t),o(null)},b=()=>{d(t),f(null)},g=(R,k,C)=>{const A=[...p];A[R][k]=C,d(A)},y=(R,k,C,A)=>{const D=[...p];D[R].segments[k][C]=A,d(D)},w=R=>{const k=[...p],C=k[R],A={from:"",to:"",description:"",sequence:C.segments.length+1};C.segments.push(A),d(k),f({routeIndex:R,segmentIndex:C.segments.length-1})},_=()=>{const R={route_name:"New Route",description:"",segments:[],frequency:"",purpose:""};d([...p,R]),o(p.length)};return!p||p.length===0?n?jsxRuntimeExports.jsxs("div",{className:`space-y-6 ${e}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Route,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Movement Routes"})]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Add Route"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Route,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),jsxRuntimeExports.jsx("p",{children:'No movement routes found. Click "Add Route" to create one.'})]})]}):null:jsxRuntimeExports.jsxs("div",{className:`space-y-6 ${e}`,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Route,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Movement Routes"})]})}),p.map((R,k)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:s===k?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"text",value:R.route_name,onChange:C=>g(k,"route_name",C.target.value),className:"w-full text-lg font-medium border border-gray-300 rounded-md px-3 py-2",placeholder:"Route name..."}),jsxRuntimeExports.jsx("textarea",{value:R.description||"",onChange:C=>g(k,"description",C.target.value),className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2",placeholder:"Route description...",rows:2})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:R.route_name}),R.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:R.description})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s===k?jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("input",{type:"text",value:R.frequency||"",onChange:C=>g(k,"frequency",C.target.value),className:"text-xs border border-gray-300 rounded-md px-2 py-1 w-24",placeholder:"Frequency"}),jsxRuntimeExports.jsx("input",{type:"text",value:R.purpose||"",onChange:C=>g(k,"purpose",C.target.value),className:"text-xs border border-gray-300 rounded-md px-2 py-1 w-24",placeholder:"Purpose"})]}):jsxRuntimeExports.jsx("div",{className:"text-right",children:R.frequency&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-3 w-3 mr-1"}),jsxRuntimeExports.jsx("span",{children:R.frequency})]})}),n&&jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-1",children:s===k?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>u(),className:"flex items-center space-x-1 px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:v,className:"flex items-center space-x-1 px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:[jsxRuntimeExports.jsx(X,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]}):jsxRuntimeExports.jsx("button",{onClick:()=>o(k),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:jsxRuntimeExports.jsx(Pen,{className:"h-4 w-4"})})})]})]}),R.purpose&&s!==k&&jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[jsxRuntimeExports.jsx(Navigation,{className:"h-3 w-3 mr-1"}),R.purpose]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[R.segments.sort((C,A)=>C.sequence-A.sequence).map((C,A)=>{const D=c?.routeIndex===k&&c?.segmentIndex===A;return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:k*.1+A*.05},className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:C.sequence})}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-white rounded-lg p-4 border border-gray-200",children:D?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:C.from,onChange:H=>y(k,A,"from",H.target.value),className:"flex-1 text-sm border border-gray-300 rounded-md px-2 py-1",placeholder:"From location..."}),jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:C.to,onChange:H=>y(k,A,"to",H.target.value),className:"flex-1 text-sm border border-gray-300 rounded-md px-2 py-1",placeholder:"To location..."})]}),jsxRuntimeExports.jsx("textarea",{value:C.description||"",onChange:H=>y(k,A,"description",H.target.value),className:"w-full text-xs border border-gray-300 rounded-md px-2 py-1",placeholder:"Segment description...",rows:2}),n&&jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>m(),className:"flex items-center space-x-1 px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:b,className:"flex items-center space-x-1 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:[jsxRuntimeExports.jsx(X,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-green-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.from})]}),jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-red-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.to})]})]}),n&&jsxRuntimeExports.jsx("button",{onClick:()=>f({routeIndex:k,segmentIndex:A}),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:jsxRuntimeExports.jsx(Pen,{className:"h-3 w-3"})})]}),C.description&&jsxRuntimeExports.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:C.description})})]})})]},A)}),n&&jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("button",{onClick:()=>w(k),className:"flex items-center space-x-1 px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Add Segment"})]})})]}),R.segments.length>1&&jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-600",children:["Total segments: ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:R.segments.length})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-3 w-3"}),jsxRuntimeExports.jsxs("span",{className:"text-xs",children:["Start: ",R.segments[0]?.from]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-red-600",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-3 w-3"}),jsxRuntimeExports.jsxs("span",{className:"text-xs",children:["End: ",R.segments[R.segments.length-1]?.to]})]})]})]})})]},k)),n&&jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("button",{onClick:_,className:"flex items-center space-x-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm border-2 border-dashed border-blue-300 bg-opacity-90",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Add New Route"})]})})]})};function ReportDetailModal({report:t,isOpen:e,onClose:n,onDownload:i,onReportUpdate:s}){if(!e||!t)return null;const[o,c]=reactExports.useState(t),{metadata:f}=o,[p,d]=reactExports.useState(!1),[u,m]=reactExports.useState(null),[v,b]=reactExports.useState(null),[g,y]=reactExports.useState(null),[w,_]=reactExports.useState(null),[R,k]=reactExports.useState(null),[C,A]=reactExports.useState({}),[D,H]=reactExports.useState(!1),I=reactExports.useRef(null);reactExports.useEffect(()=>{t&&c(t)},[t]);const F=(T,E)=>f?f[T]?f[T]:E&&f[E]?f[E]:null:null,Z=reactExports.useCallback((T,E)=>{m(T),A(M=>({...M,[T]:E??""})),setTimeout(()=>{I.current&&I.current.focus()},0)},[]),N=reactExports.useCallback((T,E)=>{b(T),m(`question_${T}`),A(M=>({...M,[`question_${T}`]:E??""})),setTimeout(()=>{I.current&&I.current.focus()},0)},[]),G=reactExports.useCallback((T,E)=>{y(T),m(`activity_${T}`),A(M=>({...M,[`activity_${T}_sr_no`]:E.sr_no||"",[`activity_${T}_incident`]:E.incident||"",[`activity_${T}_year`]:E.year||"",[`activity_${T}_location`]:E.location||""}))},[]),J=reactExports.useCallback((T,E)=>{_(T),m(`encounter_${T}`),A(M=>({...M,[`encounter_${T}_year`]:E.year||"",[`encounter_${T}_encounter_details`]:E.encounter_details||""}))},[]),ee=reactExports.useCallback((T,E)=>{k(T),m(`rolechange_${T}`),A(M=>({...M,[`rolechange_${T}_year`]:E.year||"",[`rolechange_${T}_role`]:E.role||""}))},[]),te=reactExports.useCallback(()=>{m(null),b(null),y(null),_(null),k(null),A({})},[]),W=reactExports.useCallback(async T=>{try{H(!0);const E={...o,metadata:{...o.metadata,movement_routes:T}};c(E),await IRReportAPI.updateReport(o.id,{metadata:E.metadata}),s&&s(E),console.log(" Movement routes updated successfully")}catch(E){console.error(" Failed to update movement routes:",E),c(o)}finally{H(!1)}},[o,s]),O=reactExports.useCallback(async T=>{if(!D)try{H(!0);const E=C[T];let M={};if(T.startsWith("question_")){const $=parseInt(T.split("_")[1]),z=[...o.questions_analysis?.results||[]];z[$]={...z[$],answer:E},M={questions_analysis:{...o.questions_analysis,results:z}}}else if(T.startsWith("activity_")){const $=parseInt(T.split("_")[1]),z=[...f?.criminal_activities||[]];z[$]={sr_no:C[`activity_${$}_sr_no`],incident:C[`activity_${$}_incident`],year:C[`activity_${$}_year`],location:C[`activity_${$}_location`]},M={metadata:{...f,criminal_activities:z}}}else if(T.startsWith("encounter_")){const $=parseInt(T.split("_")[1]),z=[...f?.police_encounters||[]];z[$]={year:C[`encounter_${$}_year`],encounter_details:C[`encounter_${$}_encounter_details`]},M={metadata:{...f,police_encounters:z}}}else if(T.startsWith("rolechange_")){const $=parseInt(T.split("_")[1]),z=[...f?.hierarchical_role_changes||[]];z[$]={year:C[`rolechange_${$}_year`],role:C[`rolechange_${$}_role`]},M={metadata:{...f,hierarchical_role_changes:z}}}else if(T.startsWith("metadata.")){const $=T.replace("metadata.","");let z=E;["aliases","villages_covered","weapons_assets"].includes($)?z=E.split(",").map(q=>q.trim()).filter(q=>q.length>0):$==="important_points"&&(z=E.split(`
`).map(q=>q.trim()).filter(q=>q.length>0)),M={metadata:{...f,[$]:z}}}else M={[T]:E};const U=await IRReportAPI.updateReport(o.id,M);c(U),s&&s(U),te()}catch(E){console.error("Failed to save field:",E),alert("Failed to save changes. Please try again.")}finally{H(!1)}},[C,o,s,D]),j=React.memo(({fieldKey:T,label:E,value:M,icon:U,multiline:$=!1,type:z="text",isTextarea:q=!1,hideLabel:P=!1,placeholder:V=""})=>{const L=u===T,Y=C[T]!==void 0?C[T]:M||"";return jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx(U,{className:"h-5 w-5 text-gray-400 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[!P&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900",children:E}),!L&&jsxRuntimeExports.jsx("button",{onClick:()=>Z(T,M),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit field",children:jsxRuntimeExports.jsx(PenLine,{className:"h-3 w-3 text-gray-400"})})]}),P&&!L&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("button",{onClick:()=>Z(T,M),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit field",children:jsxRuntimeExports.jsx(PenLine,{className:"h-3 w-3 text-gray-400"})})]}),L?jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-2",children:[$||q?jsxRuntimeExports.jsx("textarea",{ref:I,value:Y,onChange:ne=>A(re=>({...re,[T]:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:q?4:3,placeholder:V||`Enter ${E.toLowerCase()}`,autoFocus:!0}):jsxRuntimeExports.jsx("input",{ref:I,type:z,value:Y,onChange:ne=>A(re=>({...re,[T]:ne.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:V||`Enter ${E.toLowerCase()}`,autoFocus:!0}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>O(T),disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:D?"Saving...":"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:te,disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]})]}):jsxRuntimeExports.jsx("div",{className:"mt-1",children:M?T==="metadata.aliases"||T==="metadata.villages_covered"||T==="metadata.weapons_assets"?jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(M)?M:String(M).split(",")).map((ne,re)=>jsxRuntimeExports.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T==="metadata.aliases"?"bg-blue-100 text-blue-800":T==="metadata.villages_covered"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.trim()},re))}):T==="metadata.important_points"?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:(Array.isArray(M)?M:String(M).split(`
`)).map((ne,re)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-yellow-400 rounded-full mt-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700",children:ne.trim()})]},re))}):jsxRuntimeExports.jsx("p",{className:`text-sm text-gray-600 ${q?"whitespace-pre-wrap bg-gray-50 p-3 rounded border":""}`,children:String(M)}):jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 italic",children:P?`No ${T.split(".").pop()?.replace(/_/g," ")} available`:"Unknown"})})]})]})});return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:T=>T.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-primary-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900",children:F("name","Name")||"Unknown Subject"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:o.original_filename})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d(!0),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"}),"View PDF"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>i(o,"pdf"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download"]})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-88px)]",children:jsxRuntimeExports.jsx("div",{className:"p-6 space-y-8",children:f?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Administrative Details"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(j,{fieldKey:"police_station",label:"Police Station",value:o.police_station,icon:Building2}),jsxRuntimeExports.jsx(j,{fieldKey:"division",label:"Division",value:o.division,icon:MapPin}),jsxRuntimeExports.jsx(j,{fieldKey:"area_committee",label:"Area Committee",value:o.area_committee,icon:Users})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(j,{fieldKey:"uid_for_name",label:"UID for Name",value:o.uid_for_name,icon:Hash}),jsxRuntimeExports.jsx(j,{fieldKey:"rank",label:"Rank",value:o.rank,icon:Award})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(j,{fieldKey:"metadata.name",label:"Name",value:F("name","Name"),icon:User}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.supply_team_supply",label:"Supply Team/Supply",value:F("supply_team_supply","Supply Team/Supply"),icon:Package}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.ied_bomb",label:"IED/Bomb",value:F("ied_bomb","IED/Bomb"),icon:Target}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.meeting",label:"Meeting",value:F("meeting","Meeting"),icon:Users}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.platoon",label:"Platoon",value:F("platoon","Platoon"),icon:Shield}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.group_battalion",label:"Group/Battalion",value:F("group_battalion","Group/Battalion"),icon:Shield}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.area_region",label:"Area/Region",value:F("area_region","Area/Region"),icon:MapPin})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(j,{fieldKey:"metadata.bounty",label:"Bounty",value:F("bounty","Bounty"),icon:Zap}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.organizational_period",label:"Organizational Period",value:F("organizational_period","Organizational Period"),icon:Clock}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-5 w-5 text-gray-400 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Upload Date"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:format(new Date(o.uploaded_at),"PPP")})]})]})]})]})]}),(o.summary||u==="summary")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Summary"}),jsxRuntimeExports.jsx(j,{fieldKey:"summary",label:"",value:o.summary||"",icon:FileText,isTextarea:!0,hideLabel:!0})]}),(F("aliases","Aliases")||F("aliases","")||u==="metadata.aliases")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aliases"}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.aliases",label:"",value:Array.isArray(F("aliases","Aliases"))?F("aliases","Aliases").join(", "):F("aliases","Aliases")||"",icon:Users,hideLabel:!0,placeholder:"Enter aliases separated by commas"})]}),(F("villages_covered","Villages Covered")||F("villages_covered","")||u==="metadata.villages_covered")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Villages Covered"}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.villages_covered",label:"",value:Array.isArray(F("villages_covered","Villages Covered"))?F("villages_covered","Villages Covered").join(", "):F("villages_covered","Villages Covered")||"",icon:MapPin,hideLabel:!0,placeholder:"Enter villages separated by commas"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[(F("involvement","Involvement")||u==="metadata.involvement")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Involvement"}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.involvement",label:"",value:F("involvement","Involvement")||"",icon:User,isTextarea:!0,hideLabel:!0})]}),(F("history","History")||u==="metadata.history")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"History"}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.history",label:"",value:F("history","History")||"",icon:Clock,isTextarea:!0,hideLabel:!0})]})]}),f.criminal_activities&&f.criminal_activities.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Criminal Activities"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:f.criminal_activities.map((T,E)=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Activity #",E+1]}),!(g===E&&u===`activity_${E}`)&&jsxRuntimeExports.jsx("button",{onClick:()=>G(E,T),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit activity",children:jsxRuntimeExports.jsx(PenLine,{className:"h-3 w-3 text-gray-400"})})]}),g===E&&u===`activity_${E}`?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sr. No."}),jsxRuntimeExports.jsx("input",{type:"text",value:C[`activity_${E}_sr_no`]!==void 0?C[`activity_${E}_sr_no`]:"",onChange:M=>A(U=>({...U,[`activity_${E}_sr_no`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),jsxRuntimeExports.jsx("input",{type:"text",value:C[`activity_${E}_year`]!==void 0?C[`activity_${E}_year`]:"",onChange:M=>A(U=>({...U,[`activity_${E}_year`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Incident"}),jsxRuntimeExports.jsx("textarea",{value:C[`activity_${E}_incident`]!==void 0?C[`activity_${E}_incident`]:"",onChange:M=>A(U=>({...U,[`activity_${E}_incident`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",rows:2})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),jsxRuntimeExports.jsx("input",{type:"text",value:C[`activity_${E}_location`]!==void 0?C[`activity_${E}_location`]:"",onChange:M=>A(U=>({...U,[`activity_${E}_location`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>O(`activity_${E}`),disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:D?"Saving...":"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:te,disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:"Sr. No:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:T.sr_no})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:"Year:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:T.year})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:"Incident:"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-gray-600",children:T.incident})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:"Location:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:T.location})]})]})]},E))})]}),f.police_encounters&&f.police_encounters.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Police Encounters"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:f.police_encounters.map((T,E)=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Encounter #",E+1]}),!(w===E&&u===`encounter_${E}`)&&jsxRuntimeExports.jsx("button",{onClick:()=>J(E,T),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit encounter",children:jsxRuntimeExports.jsx(PenLine,{className:"h-3 w-3 text-gray-400"})})]}),w===E&&u===`encounter_${E}`?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),jsxRuntimeExports.jsx("input",{type:"text",value:C[`encounter_${E}_year`]!==void 0?C[`encounter_${E}_year`]:"",onChange:M=>A(U=>({...U,[`encounter_${E}_year`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Encounter Details"}),jsxRuntimeExports.jsx("textarea",{value:C[`encounter_${E}_encounter_details`]!==void 0?C[`encounter_${E}_encounter_details`]:"",onChange:M=>A(U=>({...U,[`encounter_${E}_encounter_details`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>O(`encounter_${E}`),disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:D?"Saving...":"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:te,disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:T.year})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Details:"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-gray-600",children:T.encounter_details})]})]})]},E))})]}),f.hierarchical_role_changes&&f.hierarchical_role_changes.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hierarchical Role Changes"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:f.hierarchical_role_changes.map((T,E)=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Role Change #",E+1]}),!(R===E&&u===`rolechange_${E}`)&&jsxRuntimeExports.jsx("button",{onClick:()=>ee(E,T),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit role change",children:jsxRuntimeExports.jsx(PenLine,{className:"h-3 w-3 text-gray-400"})})]}),R===E&&u===`rolechange_${E}`?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),jsxRuntimeExports.jsx("input",{type:"text",value:C[`rolechange_${E}_year`]!==void 0?C[`rolechange_${E}_year`]:"",onChange:M=>A(U=>({...U,[`rolechange_${E}_year`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Role"}),jsxRuntimeExports.jsx("input",{type:"text",value:C[`rolechange_${E}_role`]!==void 0?C[`rolechange_${E}_role`]:"",onChange:M=>A(U=>({...U,[`rolechange_${E}_role`]:M.target.value})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>O(`rolechange_${E}`),disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:D?"Saving...":"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:te,disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:"Year:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:T.year})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:"Role:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-gray-600",children:T.role})]})]})]},E))})]}),(f.weapons_assets&&f.weapons_assets.length>0||u==="metadata.weapons_assets")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weapons/Assets"}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.weapons_assets",label:"",value:f.weapons_assets?f.weapons_assets.join(", "):"",icon:Shield,hideLabel:!0,placeholder:"Enter weapons/assets separated by commas"})]}),(f.important_points&&f.important_points.length>0||u==="metadata.important_points")&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Important Points"}),jsxRuntimeExports.jsx(j,{fieldKey:"metadata.important_points",label:"",value:f.important_points?f.important_points.join(`
`):"",icon:CircleAlert,isTextarea:!0,hideLabel:!0,placeholder:"Enter important points, one per line"})]}),f.movement_routes&&f.movement_routes.length>0&&jsxRuntimeExports.jsx(RouteTracker,{routes:f.movement_routes,isEditable:!0,onRoutesChange:W}),o.questions_analysis&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[jsxRuntimeExports.jsx(CircleQuestionMark,{className:"h-5 w-5 mr-2"}),"Standard Questions"]}),o.questions_analysis.success?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o.questions_analysis.results.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:o.questions_analysis.results.map((T,E)=>{const M=E+1,U=M>=28&&M<=40,$=q=>q.split(`
`).filter(V=>V.trim()).map(V=>V.includes("|")?V.split("|").map(L=>L.trim()):V.includes("	")?V.split("	").map(L=>L.trim()):V.includes(",")?V.split(",").map(L=>L.trim()):[V.trim()]),z=U&&T.answer?$(T.answer):[];return jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700 bg-blue-50 p-2 rounded border",children:T.standard_question})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Answer:"}),!(v===E&&u===`question_${E}`)&&jsxRuntimeExports.jsx("button",{onClick:()=>N(E,T.answer||""),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Edit answer",children:jsxRuntimeExports.jsx(PenLine,{className:"h-3 w-3 text-gray-400"})})]}),v===E&&u===`question_${E}`?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("textarea",{value:C[`question_${E}`]!==void 0?C[`question_${E}`]:"",onChange:q=>A(P=>({...P,[`question_${E}`]:q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:U?8:4,placeholder:"Enter answer..."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>O(`question_${E}`),disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50",children:[jsxRuntimeExports.jsx(Save,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:D?"Saving...":"Save"})]}),jsxRuntimeExports.jsxs("button",{onClick:te,disabled:D,className:"flex items-center space-x-1 px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"Cancel"})]})]})]}):T.answer&&T.answer.trim()!==""?U?jsxRuntimeExports.jsxs("div",{className:"bg-white rounded border border-gray-300 overflow-x-auto",children:[jsxRuntimeExports.jsx("table",{className:"min-w-full divide-y divide-gray-200",children:jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map((q,P)=>jsxRuntimeExports.jsx("tr",{className:P%2===0?"bg-gray-50":"bg-white",children:q.map((V,L)=>jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 border-r border-gray-200 last:border-r-0",children:V||"-"},L))},P))})}),jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 bg-gray-100 text-xs text-gray-500 border-t border-gray-200",children:[z.length," row",z.length!==1?"s":""," found"]})]}):jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-300 whitespace-pre-wrap",children:T.answer}):jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 bg-gray-100 p-3 rounded border border-gray-300 italic",children:"No answer found in the document"})]})]},E)})}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(CircleQuestionMark,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),jsxRuntimeExports.jsx("p",{children:"No questions were processed from this document."}),jsxRuntimeExports.jsxs("p",{className:"text-xs mt-2",children:["Total questions processed: ",o.questions_analysis.summary.total_questions]})]})}):jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleX,{className:"h-5 w-5 text-red-600 mr-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-red-900",children:"Questions analysis failed"}),o.questions_analysis.error&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-700 mt-1",children:o.questions_analysis.error})]})]})})]}),p&&o.file_url&&jsxRuntimeExports.jsx(PDFViewer,{fileUrl:o.file_url,onClose:()=>d(!1),title:o.original_filename})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FileText,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Processing in Progress"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"This report is still being processed. Detailed information will be available once processing is complete."})]})})})]})})}class ParserService{static PARSER_ENDPOINT="http://localhost:8000";static async processPDF(e){console.log("ParserService.processPDF called with file:",e.name),console.log("Parser endpoint:",this.PARSER_ENDPOINT);const n=new FormData;n.append("file",e);try{console.log("Making fetch request to:",`${this.PARSER_ENDPOINT}/process-pdf`);const i=await fetch(`${this.PARSER_ENDPOINT}/process-pdf`,{method:"POST",body:n});if(console.log("Response status:",i.status),console.log("Response ok:",i.ok),!i.ok){const c=await i.text();throw console.error("Parser service error response:",c),new Error(`Parser service error: ${i.statusText}`)}const s=await i.json();console.log("Parser result:",s);const o=s.data||s;return console.log("Actual data to parse:",o),{metadata:this.parseMetadata(o),questions_analysis:s.questions_analysis}}catch(i){throw console.error("Parser service error:",i),new Error(`Failed to process PDF: ${i instanceof Error?i.message:"Unknown error"}`)}}static parseMetadata(e){return{name:e.Name||e.name||"",aliases:Array.isArray(e.Aliases)?e.Aliases:Array.isArray(e.aliases)?e.aliases:[],group_battalion:e["Group/Battalion"]||e.group_battalion||"",area_region:e["Area/Region"]||e.area_region||"",supply_team_supply:e["Supply Team/Supply"]||e.supply_team_supply||"",ied_bomb:e["IED/Bomb"]||e.ied_bomb||"",meeting:e.Meeting||e.meeting||"",platoon:e.Platoon||e.platoon||"",involvement:e.Involvement||e.involvement||"",history:e.History||e.history||"",bounty:e.Bounty||e.bounty||"",villages_covered:Array.isArray(e["Villages Covered"])?e["Villages Covered"]:Array.isArray(e.villages_covered)?e.villages_covered:[],criminal_activities:this.parseCriminalActivities(e["Criminal Activities"]||e.criminal_activities||[]),hierarchical_role_changes:this.parseRoleChanges(e["Maoist Hierarchical Role Changes"]||e.hierarchical_role_changes||[]),police_encounters:this.parsePoliceEncounters(e["Police Encounters Participated"]||e.police_encounters||[]),weapons_assets:Array.isArray(e["Weapons/Assets Handled"])?e["Weapons/Assets Handled"]:Array.isArray(e.weapons_assets)?e.weapons_assets:[],organizational_period:e["Total Organizational Period"]||e.organizational_period||"",important_points:Array.isArray(e["Important Points"])?e["Important Points"]:Array.isArray(e.important_points)?e.important_points:[],movement_routes:this.parseMovementRoutes(e["Movement Routes"]||e.movement_routes||[])}}static parseCriminalActivities(e){return Array.isArray(e)?e.map(n=>({sr_no:n["Sr. No."]||n.sr_no||0,incident:n.Incident||n.incident||"",year:n.Year||n.year||"",location:n.Location||n.location||""})):[]}static parseRoleChanges(e){return Array.isArray(e)?e.map(n=>({year:n.Year||n.year||"",role:n.Role||n.role||""})):[]}static parsePoliceEncounters(e){return Array.isArray(e)?e.map(n=>({year:n.Year||n.year||"",encounter_details:n["Encounter Details"]||n.encounter_details||""})):[]}static parseMovementRoutes(e){return Array.isArray(e)?e.map(n=>({route_name:n["Route Name"]||n.route_name||"",description:n.Description||n.description||"",purpose:n.Purpose||n.purpose||"",frequency:n.Frequency||n.frequency||"",segments:Array.isArray(n.Segments||n.segments)?(n.Segments||n.segments).map(i=>({sequence:i.Sequence||i.sequence||0,from:i.From||i.from||"",to:i.To||i.to||"",description:i.Description||i.description||""})):[]})):[]}static generateSummary(e){const n=[];return e.name&&n.push(`Subject: ${e.name}`),e.group_battalion&&n.push(`Group: ${e.group_battalion}`),e.area_region&&n.push(`Region: ${e.area_region}`),e.bounty&&n.push(`Bounty: ${e.bounty}`),e.criminal_activities&&e.criminal_activities.length>0&&n.push(`${e.criminal_activities.length} criminal activities recorded`),e.police_encounters&&e.police_encounters.length>0&&n.push(`${e.police_encounters.length} police encounters`),e.villages_covered&&e.villages_covered.length>0&&n.push(`Active in ${e.villages_covered.length} villages`),n.join("  ")}}function Dashboard(){const[t,e]=reactExports.useState([]),[n,i]=reactExports.useState([]),[s,o]=reactExports.useState(!0),[c,f]=reactExports.useState(!1),[p,d]=reactExports.useState([]),[u,m]=reactExports.useState({}),[v,b]=reactExports.useState(null),[g,y]=reactExports.useState(!1),[w,_]=reactExports.useState({totalReports:0,completedReports:0,processingReports:0,errorReports:0});reactExports.useEffect(()=>{R(),k()},[]),reactExports.useEffect(()=>{C()},[t,u]);const R=async()=>{try{o(!0);const F=await IRReportAPI.getReports();e(F)}catch(F){console.error("Failed to load reports:",F)}finally{o(!1)}},k=async()=>{try{const F=await IRReportAPI.getStatistics();_(F)}catch(F){console.error("Failed to load stats:",F)}},C=()=>{let F=[...t];if(F=F.filter(Z=>Z.status!=="error"),u.query){const Z=u.query.toLowerCase();F=F.filter(N=>{const G=ee=>ee?String(ee).toLowerCase().includes(Z):!1,J=ee=>!ee||!Array.isArray(ee)?!1:ee.some(te=>typeof te=="string"?G(te):typeof te=="object"&&te!==null?Object.values(te).some(W=>G(W)):!1);if(G(N.original_filename)||G(N.summary)||G(N.police_station)||G(N.division)||G(N.area_committee)||G(N.uid_for_name)||G(N.rank))return!0;if(N.metadata){const ee=N.metadata;if(G(ee.name)||G(ee.group_battalion)||G(ee.area_region)||G(ee.supply_team_supply)||G(ee.ied_bomb)||G(ee.meeting)||G(ee.platoon)||G(ee.involvement)||G(ee.history)||G(ee.bounty)||G(ee.organizational_period)||J(ee.aliases)||J(ee.villages_covered)||J(ee.weapons_assets)||J(ee.important_points)||ee.criminal_activities&&J(ee.criminal_activities)||ee.police_encounters&&J(ee.police_encounters)||ee.hierarchical_role_changes&&J(ee.hierarchical_role_changes)||ee.movement_routes&&Array.isArray(ee.movement_routes)&&ee.movement_routes.some(W=>G(W.route_name)||G(W.description)||G(W.purpose)||G(W.frequency)?!0:W.segments&&Array.isArray(W.segments)?W.segments.some(O=>G(O.from)||G(O.to)||G(O.description)):!1))return!0}return!!(N.questions_analysis&&N.questions_analysis.results&&N.questions_analysis.results.some(te=>G(te.standard_question)||G(te.found_question)||G(te.answer)))})}if(u.suspectName){const Z=u.suspectName.toLowerCase();F=F.filter(N=>N.metadata?.name?.toLowerCase().includes(Z))}if(u.location){const Z=u.location.toLowerCase();F=F.filter(N=>N.metadata?.area_region?.toLowerCase().includes(Z)||N.metadata?.villages_covered&&Array.isArray(N.metadata.villages_covered)&&N.metadata.villages_covered.some(G=>G.toLowerCase().includes(Z)))}u.dateRange?.start&&(F=F.filter(Z=>new Date(Z.uploaded_at)>=u.dateRange.start)),u.dateRange?.end&&(F=F.filter(Z=>new Date(Z.uploaded_at)<=u.dateRange.end)),u.police_station&&(F=F.filter(Z=>Z.police_station===u.police_station)),u.division&&(F=F.filter(Z=>Z.division===u.division)),u.area_committee&&(F=F.filter(Z=>Z.area_committee===u.area_committee)),u.rank&&(F=F.filter(Z=>Z.rank===u.rank)),i(F)},A=async F=>{f(!0);const Z=F.map(N=>({file:N,progress:0,status:"uploading"}));d(Z);try{for(let N=0;N<F.length;N++){const G=F[N];d(O=>O.map((j,T)=>T===N?{...j,progress:10}:j));const{id:J,file_url:ee}=await IRReportAPI.uploadFile(G);d(O=>O.map((j,T)=>T===N?{...j,progress:30,id:J}:j));const te={id:J,filename:`${J}/original.pdf`,original_filename:G.name,uploaded_at:new Date().toISOString(),status:"processing",file_size:G.size,file_url:ee},W=await IRReportAPI.createReport(te);d(O=>O.map((j,T)=>T===N?{...j,progress:50,status:"processing"}:j));try{const O=await ParserService.processPDF(G),j=ParserService.generateSummary(O.metadata),T={status:"completed",metadata:O.metadata,questions_analysis:O.questions_analysis,summary:j},E=await IRReportAPI.updateReport(J,T);d(M=>M.map((U,$)=>$===N?{...U,progress:100,status:"completed"}:U)),e(M=>[E,...M])}catch(O){console.error("Processing error:",O),await IRReportAPI.updateReport(J,{status:"error",error_message:O instanceof Error?O.message:"Processing failed"}),d(j=>j.map((T,E)=>E===N?{...T,progress:100,status:"error",error:O instanceof Error?O.message:"Processing failed"}:T))}}}catch(N){console.error("Upload error:",N),d(G=>G.map(J=>({...J,status:"error",error:N instanceof Error?N.message:"Upload failed"})))}finally{f(!1),k(),R(),setTimeout(()=>{d([])},5e3)}},D=F=>{b(F),y(!0)},H=async(F,Z)=>{try{Z==="pdf"&&F.file_url&&await IRReportAPI.downloadFile(F.file_url,F.original_filename)}catch(N){console.error("Download failed:",N)}},I=F=>{e(Z=>Z.map(N=>N.id===F.id?F:N))};return jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:jsxRuntimeExports.jsx(FileUpload,{onUpload:A,uploading:c,uploadProgress:p})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:jsxRuntimeExports.jsx(SearchBar,{filters:u,onFiltersChange:m,onSearch:()=>{},reports:t})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((F,Z)=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3/4 h-4 bg-gray-200 rounded mb-2"}),jsxRuntimeExports.jsx("div",{className:"w-1/2 h-3 bg-gray-200 rounded"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-3 bg-gray-200 rounded"}),jsxRuntimeExports.jsx("div",{className:"w-2/3 h-3 bg-gray-200 rounded"})]})]},Z))}):n.length>0?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:jsxRuntimeExports.jsx(AnimatePresence,{children:n.map(F=>jsxRuntimeExports.jsx(ReportCard,{report:F,onViewDetails:D,onDownload:H,onReportUpdate:I},F.id))})}):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[jsxRuntimeExports.jsx(FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t.length===0?"No reports yet":"No reports match your search"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:t.length===0?"Upload your first IR PDF to get started":"Try adjusting your search criteria"})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:g&&v&&jsxRuntimeExports.jsx(ReportDetailModal,{report:v,isOpen:g,onClose:()=>y(!1),onDownload:H,onReportUpdate:I})})]})}function IncidentCard({incident:t,onClick:e}){const i=(c=>({criminal_activity:{label:"Criminal Activity",color:"text-red-700",bgColor:"bg-red-100"},police_encounter:{label:"Police Encounter",color:"text-blue-700",bgColor:"bg-blue-100"},qa_mention:{label:"Q&A Mention",color:"text-green-700",bgColor:"bg-green-100"},important_point:{label:"Important Point",color:"text-yellow-700",bgColor:"bg-yellow-100"},movement_route:{label:"Movement Route",color:"text-purple-700",bgColor:"bg-purple-100"}})[c]||{label:c,color:"text-gray-700",bgColor:"bg-gray-100"})(t.incident_type),s=t.years.length>0?Math.max(...t.years.map(c=>parseInt(c))):null,o=t.locations[0];return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},onClick:e,className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-all duration-200",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:jsxRuntimeExports.jsx(CircleAlert,{className:"h-5 w-5 text-red-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900 leading-tight",children:t.incident_name.length>50?`${t.incident_name.substring(0,50)}...`:t.incident_name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.bgColor} ${i.color}`,children:i.label}),t.frequency>5&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium flex items-center space-x-1",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:"High Activity"})]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[t.people_involved.length," ",t.people_involved.length===1?"person":"people"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[t.frequency," ",t.frequency===1?"mention":"mentions"]})]}),o&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 truncate",children:o.length>15?`${o.substring(0,15)}...`:o})]}),s&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:s})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"KEY PEOPLE INVOLVED"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[t.people_involved.slice(0,3).map((c,f)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-900 truncate",children:c.person_name}),jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c.involvement_level==="primary"?"bg-red-100 text-red-700":c.involvement_level==="secondary"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:c.involvement_level})]},`${c.person_id}-${f}`)),t.people_involved.length>3&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["+",t.people_involved.length-3," more people"]})]})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-100 pt-4 mt-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:["Last mentioned: ",new Date(t.last_mentioned).toLocaleDateString()]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"View Details "})]})})]})}function IncidentDetail({incident:t,isOpen:e,onClose:n}){const s=(o=>({criminal_activity:{label:"Criminal Activity",color:"text-red-700",bgColor:"bg-red-100"},police_encounter:{label:"Police Encounter",color:"text-blue-700",bgColor:"bg-blue-100"},qa_mention:{label:"Q&A Mention",color:"text-green-700",bgColor:"bg-green-100"},important_point:{label:"Important Point",color:"text-yellow-700",bgColor:"bg-yellow-100"},movement_route:{label:"Movement Route",color:"text-purple-700",bgColor:"bg-purple-100"}})[o]||{label:o,color:"text-gray-700",bgColor:"bg-gray-100"})(t.incident_type);return jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:jsxRuntimeExports.jsx(CircleAlert,{className:"h-6 w-6 text-red-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Incident Details"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[jsxRuntimeExports.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.bgColor} ${s.color}`,children:s.label}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:[t.frequency," mentions"]})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"h-5 w-5 text-gray-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Incident Description"}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:jsxRuntimeExports.jsx("p",{className:"text-gray-900 leading-relaxed",children:t.incident_name})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-blue-900",children:"People Involved"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:t.people_involved.length})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-green-900",children:"Source Reports"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:t.source_reports.length})]}),jsxRuntimeExports.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-5 w-5 text-purple-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Locations"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:t.locations.length})]}),jsxRuntimeExports.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-5 w-5 text-orange-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Years Active"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-orange-900 mt-1",children:t.years.length})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"People Involved"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.people_involved.map((o,c)=>jsxRuntimeExports.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900",children:o.person_name}),o.aliases.length>0&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Aliases: ",o.aliases.join(", ")]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[jsxRuntimeExports.jsxs("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${o.involvement_level==="primary"?"bg-red-100 text-red-700":o.involvement_level==="secondary"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[o.involvement_level," role"]}),o.other_incidents.length>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:["+",o.other_incidents.length," other incidents"]})]})]})]})})},`${o.person_id}-${c}`))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Source Reports"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.source_reports.map((o,c)=>jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900",children:o.report_filename}),jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${o.mention_type==="criminal_activity"?"bg-red-100 text-red-700":o.mention_type==="police_encounter"?"bg-blue-100 text-blue-700":o.mention_type==="qa_mention"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:o.mention_type.replace("_"," ")})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 mb-2",children:o.mention_context}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:["Uploaded: ",new Date(o.uploaded_at).toLocaleDateString()]}),o.year&&jsxRuntimeExports.jsxs("span",{children:["Year: ",o.year]}),o.location&&jsxRuntimeExports.jsxs("span",{children:["Location: ",o.location]})]})]}),jsxRuntimeExports.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx(ExternalLink,{className:"h-4 w-4"})})]})},`${o.report_id}-${c}`))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.locations.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Locations"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:t.locations.map((o,c)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-900",children:o})]},c))})]}),t.years.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Timeline"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:t.years.sort((o,c)=>parseInt(c)-parseInt(o)).map((o,c)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-900",children:o})]},c))})]})]})]})]})})]})})}function PersonIncidentMatrix({people:t}){const[e,n]=reactExports.useState(""),[i,s]=reactExports.useState(null),o=t.filter(p=>p.person_name.toLowerCase().includes(e.toLowerCase())||p.aliases.some(d=>d.toLowerCase().includes(e.toLowerCase()))),c=p=>{switch(p){case"primary":return"bg-red-100 text-red-800 border-red-200";case"secondary":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"mentioned":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=p=>p>=10?"text-red-600 bg-red-50":p>=5?"text-orange-600 bg-orange-50":p>=3?"text-yellow-600 bg-yellow-50":"text-blue-600 bg-blue-50";return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Person-Incident Analysis"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"People with the most incident involvement"})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full sm:w-80",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:e,onChange:p=>n(p.target.value),placeholder:"Search people or aliases...",className:"pl-10 w-full border-gray-300 rounded-lg shadow-sm focus:ring-primary-500 focus:border-primary-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-200 rounded-lg",children:jsxRuntimeExports.jsx(Users,{className:"h-6 w-6 text-blue-700"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700",children:"Total People"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-900",children:o.length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-red-50 to-red-100 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-200 rounded-lg",children:jsxRuntimeExports.jsx(CircleAlert,{className:"h-6 w-6 text-red-700"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-red-700",children:"High-Risk Individuals"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-red-900",children:o.filter(p=>p.other_incidents.length>=5).length})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-6 w-6 text-green-700"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-green-700",children:"Avg Incidents/Person"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-900",children:o.length>0?(o.reduce((p,d)=>p+d.other_incidents.length+1,0)/o.length).toFixed(1):"0"})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 divide-y lg:divide-y-0 lg:divide-x divide-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"People by Incident Count"}),jsxRuntimeExports.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.length>0?o.map((p,d)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.05},onClick:()=>s(p),className:`p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md ${i?.person_id===p.person_id?"border-primary-300 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900",children:p.person_name}),p.aliases.length>0&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Aliases: ",p.aliases.slice(0,2).join(", "),p.aliases.length>2&&` +${p.aliases.length-2} more`]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${c(p.involvement_level)}`,children:p.involvement_level}),jsxRuntimeExports.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${f(p.other_incidents.length+1)}`,children:[p.other_incidents.length+1," incidents"]})]})]})},p.person_id)):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(User,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No people found matching your search"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Person Details"}),i?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-900 text-lg",children:i.person_name}),i.aliases.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Known Aliases:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:i.aliases.map((p,d)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:p},d))})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Involvement Level"}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${c(i.involvement_level)}`,children:i.involvement_level})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Incidents"}),jsxRuntimeExports.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${f(i.other_incidents.length+1)}`,children:i.other_incidents.length+1})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Source Report"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.report_source.report_filename}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[i.report_source.mention_type.replace("_"," "),"  Uploaded: ",new Date(i.report_source.uploaded_at).toLocaleDateString()]})]})]}),i.other_incidents.length>0&&jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Other Incidents:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:[i.other_incidents.slice(0,5).map((p,d)=>jsxRuntimeExports.jsx("div",{className:"text-xs bg-blue-50 text-blue-800 px-2 py-1 rounded",children:p.replace(/_/g," ").replace(/^\w+\s/,"")},d)),i.other_incidents.length>5&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["+",i.other_incidents.length-5," more incidents"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(User,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Select a person to view details"})]})]})]})})]})}function IncidentAnalytics(){const[t,e]=reactExports.useState(null),[n,i]=reactExports.useState(!0),[s,o]=reactExports.useState({sort_by:"frequency",sort_order:"desc",incident_type:"all"}),[c,f]=reactExports.useState(null),[p,d]=reactExports.useState(!1),[u,m]=reactExports.useState(!1),[v,b]=reactExports.useState("overview");reactExports.useEffect(()=>{g()},[s]);const g=async()=>{try{i(!0);const k=await IRReportAPI.getIncidentAnalytics(s);e(k)}catch(k){console.error("Failed to load incident analytics:",k)}finally{i(!1)}},y=k=>{f(k),d(!0)},w=k=>{o(C=>({...C,...k}))},_=()=>{o({sort_by:"frequency",sort_order:"desc",incident_type:"all"})},R=k=>({criminal_activity:"Criminal Activity",police_encounter:"Police Encounter",qa_mention:"Q&A Mention",important_point:"Important Point",movement_route:"Movement Route"})[k]||k;return n?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),jsxRuntimeExports.jsx("span",{className:"text-lg text-gray-600",children:"Analyzing incidents..."})]})}):t?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"fixed top-20 right-4 z-30",children:jsxRuntimeExports.jsxs("button",{onClick:()=>m(!u),className:`flex items-center space-x-2 px-4 py-2 rounded-lg shadow-lg transition-colors ${u?"bg-primary-500 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:[jsxRuntimeExports.jsx(Funnel,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Filters"})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:u&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white border-b border-gray-200",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:s.search_query||"",onChange:k=>w({search_query:k.target.value}),placeholder:"Search incidents, people, locations...",className:"pl-10 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incident Type"}),jsxRuntimeExports.jsxs("select",{value:s.incident_type||"all",onChange:k=>w({incident_type:k.target.value}),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All Types"}),jsxRuntimeExports.jsx("option",{value:"criminal_activity",children:"Criminal Activity"}),jsxRuntimeExports.jsx("option",{value:"police_encounter",children:"Police Encounter"}),jsxRuntimeExports.jsx("option",{value:"qa_mention",children:"Q&A Mention"}),jsxRuntimeExports.jsx("option",{value:"important_point",children:"Important Point"}),jsxRuntimeExports.jsx("option",{value:"movement_route",children:"Movement Route"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),jsxRuntimeExports.jsxs("select",{value:s.sort_by||"frequency",onChange:k=>w({sort_by:k.target.value}),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[jsxRuntimeExports.jsx("option",{value:"frequency",children:"Frequency"}),jsxRuntimeExports.jsx("option",{value:"date",children:"Last Mentioned"}),jsxRuntimeExports.jsx("option",{value:"people_count",children:"People Count"}),jsxRuntimeExports.jsx("option",{value:"alphabetical",children:"Alphabetical"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-end",children:jsxRuntimeExports.jsx("button",{onClick:_,className:"w-full px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Reset Filters"})})]})})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:ChartColumn},{id:"incidents",name:"Incidents",icon:CircleAlert},{id:"people",name:"People",icon:Users},{id:"timeline",name:"Timeline",icon:Calendar},{id:"locations",name:"Locations",icon:MapPin}].map(k=>{const C=k.icon;return jsxRuntimeExports.jsxs("button",{onClick:()=>b(k.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${v===k.id?"bg-primary-500 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[jsxRuntimeExports.jsx(C,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:k.name})]},k.id)})})}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[v==="overview"&&jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:jsxRuntimeExports.jsx(CircleAlert,{className:"h-6 w-6 text-red-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Total Incidents"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_incidents})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx(Users,{className:"h-6 w-6 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"People Involved"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_people})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-6 w-6 text-green-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Most Common"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900 truncate",children:t.most_common_incidents[0]?.incident_name.substring(0,20)||"N/A"})]})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:jsxRuntimeExports.jsx(MapPin,{className:"h-6 w-6 text-purple-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Location Hotspots"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.location_hotspots.length})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Most Common Incidents"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.most_common_incidents.slice(0,5).map((k,C)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",C+1]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 truncate max-w-md",children:k.incident_name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[k.people_involved.length," people  ",R(k.incident_type)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-primary-600",children:[k.frequency," mentions"]}),jsxRuntimeExports.jsx("button",{onClick:()=>y(k),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"})})]})]},k.incident_id))})]})]}),v==="incidents"&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.most_common_incidents.map(k=>jsxRuntimeExports.jsx(IncidentCard,{incident:k,onClick:()=>y(k)},k.incident_id))}),v==="people"&&jsxRuntimeExports.jsx(PersonIncidentMatrix,{people:t.most_involved_people}),v==="timeline"&&jsxRuntimeExports.jsx("div",{className:"space-y-6",children:t.incident_timeline.map(k=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Year ",k.year]}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm font-medium",children:[k.incident_count," incidents"]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.incidents.slice(0,6).map(C=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 truncate",children:C.incident_name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[C.people_involved.length," people involved"]})]},C.incident_id))})]},k.year))}),v==="locations"&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.location_hotspots.map(k=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:jsxRuntimeExports.jsx(MapPin,{className:"h-5 w-5 text-red-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:k.location}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:[k.incident_count," incidents  ",k.people_count," people"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[k.incidents.slice(0,3).map(C=>jsxRuntimeExports.jsx("div",{className:"p-2 bg-gray-50 rounded text-sm",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900 truncate",children:C.incident_name})},C.incident_id)),k.incidents.length>3&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["+",k.incidents.length-3," more incidents"]})]})]},k.location))})]},v)})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:p&&c&&jsxRuntimeExports.jsx(IncidentDetail,{incident:c,isOpen:p,onClose:()=>d(!1)})})]}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load analytics"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Please try refreshing the page."})]})})}function AppLayout(){const{user:t,logout:e}=useAuth(),n=useLocation(),i=[{name:"Dashboard",href:"/dashboard",icon:FileText,current:n.pathname==="/dashboard"},{name:"Incident Analytics",href:"/incidents",icon:Shield,current:n.pathname==="/incidents"}];return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-primary-500 rounded-lg",children:jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"IR Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Incident Reports Management System"})]})]}),jsxRuntimeExports.jsx("nav",{className:"flex space-x-4",children:i.map(s=>{const o=s.icon;return jsxRuntimeExports.jsxs(Link,{to:s.href,className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${s.current?"bg-primary-100 text-primary-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[jsxRuntimeExports.jsx(o,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:s.name})]},s.name)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700",children:t?.displayName||t?.email})}),jsxRuntimeExports.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Logout"})]})]})]})})}),jsxRuntimeExports.jsx(Outlet,{})]})}function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route$1,{path:"/",element:jsxRuntimeExports.jsx(AppLayout,{}),children:[jsxRuntimeExports.jsx(Route$1,{index:!0,element:jsxRuntimeExports.jsx(Navigate,{to:"/dashboard",replace:!0})}),jsxRuntimeExports.jsx(Route$1,{path:"dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route$1,{path:"incidents",element:jsxRuntimeExports.jsx(IncidentAnalytics,{})})]})})})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
